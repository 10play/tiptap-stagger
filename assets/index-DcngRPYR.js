(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const l of i)if(l.type==="childList")for(const o of l.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function t(i){const l={};return i.integrity&&(l.integrity=i.integrity),i.referrerPolicy&&(l.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?l.credentials="include":i.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function r(i){if(i.ep)return;i.ep=!0;const l=t(i);fetch(i.href,l)}})();function a0(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var vh={exports:{}},Cs={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ly;function g4(){if(ly)return Cs;ly=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(r,i,l){var o=null;if(l!==void 0&&(o=""+l),i.key!==void 0&&(o=""+i.key),"key"in i){l={};for(var a in i)a!=="key"&&(l[a]=i[a])}else l=i;return i=l.ref,{$$typeof:n,type:r,key:o,ref:i!==void 0?i:null,props:l}}return Cs.Fragment=e,Cs.jsx=t,Cs.jsxs=t,Cs}var uy;function b4(){return uy||(uy=1,vh.exports=g4()),vh.exports}var We=b4(),Eh={exports:{}},fe={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var sy;function y4(){if(sy)return fe;sy=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),o=Symbol.for("react.context"),a=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),g=Symbol.iterator;function y(T){return T===null||typeof T!="object"?null:(T=g&&T[g]||T["@@iterator"],typeof T=="function"?T:null)}var x={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},k=Object.assign,C={};function E(T,V,K){this.props=T,this.context=V,this.refs=C,this.updater=K||x}E.prototype.isReactComponent={},E.prototype.setState=function(T,V){if(typeof T!="object"&&typeof T!="function"&&T!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,T,V,"setState")},E.prototype.forceUpdate=function(T){this.updater.enqueueForceUpdate(this,T,"forceUpdate")};function A(){}A.prototype=E.prototype;function N(T,V,K){this.props=T,this.context=V,this.refs=C,this.updater=K||x}var B=N.prototype=new A;B.constructor=N,k(B,E.prototype),B.isPureReactComponent=!0;var H=Array.isArray,L={H:null,A:null,T:null,S:null,V:null},U=Object.prototype.hasOwnProperty;function Q(T,V,K,J,re,Se){return K=Se.ref,{$$typeof:n,type:T,key:V,ref:K!==void 0?K:null,props:Se}}function ne(T,V){return Q(T.type,V,void 0,void 0,void 0,T.props)}function ee(T){return typeof T=="object"&&T!==null&&T.$$typeof===n}function je(T){var V={"=":"=0",":":"=2"};return"$"+T.replace(/[=:]/g,function(K){return V[K]})}var tt=/\/+/g;function Ge(T,V){return typeof T=="object"&&T!==null&&T.key!=null?je(""+T.key):V.toString(36)}function Xn(){}function Bn(T){switch(T.status){case"fulfilled":return T.value;case"rejected":throw T.reason;default:switch(typeof T.status=="string"?T.then(Xn,Xn):(T.status="pending",T.then(function(V){T.status==="pending"&&(T.status="fulfilled",T.value=V)},function(V){T.status==="pending"&&(T.status="rejected",T.reason=V)})),T.status){case"fulfilled":return T.value;case"rejected":throw T.reason}}throw T}function Ie(T,V,K,J,re){var Se=typeof T;(Se==="undefined"||Se==="boolean")&&(T=null);var ce=!1;if(T===null)ce=!0;else switch(Se){case"bigint":case"string":case"number":ce=!0;break;case"object":switch(T.$$typeof){case n:case e:ce=!0;break;case p:return ce=T._init,Ie(ce(T._payload),V,K,J,re)}}if(ce)return re=re(T),ce=J===""?"."+Ge(T,0):J,H(re)?(K="",ce!=null&&(K=ce.replace(tt,"$&/")+"/"),Ie(re,V,K,"",function(kr){return kr})):re!=null&&(ee(re)&&(re=ne(re,K+(re.key==null||T&&T.key===re.key?"":(""+re.key).replace(tt,"$&/")+"/")+ce)),V.push(re)),1;ce=0;var Gt=J===""?".":J+":";if(H(T))for(var Fe=0;Fe<T.length;Fe++)J=T[Fe],Se=Gt+Ge(J,Fe),ce+=Ie(J,V,K,Se,re);else if(Fe=y(T),typeof Fe=="function")for(T=Fe.call(T),Fe=0;!(J=T.next()).done;)J=J.value,Se=Gt+Ge(J,Fe++),ce+=Ie(J,V,K,Se,re);else if(Se==="object"){if(typeof T.then=="function")return Ie(Bn(T),V,K,J,re);throw V=String(T),Error("Objects are not valid as a React child (found: "+(V==="[object Object]"?"object with keys {"+Object.keys(T).join(", ")+"}":V)+"). If you meant to render a collection of children, use an array instead.")}return ce}function $(T,V,K){if(T==null)return T;var J=[],re=0;return Ie(T,J,"","",function(Se){return V.call(K,Se,re++)}),J}function G(T){if(T._status===-1){var V=T._result;V=V(),V.then(function(K){(T._status===0||T._status===-1)&&(T._status=1,T._result=K)},function(K){(T._status===0||T._status===-1)&&(T._status=2,T._result=K)}),T._status===-1&&(T._status=0,T._result=V)}if(T._status===1)return T._result.default;throw T._result}var ue=typeof reportError=="function"?reportError:function(T){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var V=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof T=="object"&&T!==null&&typeof T.message=="string"?String(T.message):String(T),error:T});if(!window.dispatchEvent(V))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",T);return}console.error(T)};function _e(){}return fe.Children={map:$,forEach:function(T,V,K){$(T,function(){V.apply(this,arguments)},K)},count:function(T){var V=0;return $(T,function(){V++}),V},toArray:function(T){return $(T,function(V){return V})||[]},only:function(T){if(!ee(T))throw Error("React.Children.only expected to receive a single React element child.");return T}},fe.Component=E,fe.Fragment=t,fe.Profiler=i,fe.PureComponent=N,fe.StrictMode=r,fe.Suspense=f,fe.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=L,fe.__COMPILER_RUNTIME={__proto__:null,c:function(T){return L.H.useMemoCache(T)}},fe.cache=function(T){return function(){return T.apply(null,arguments)}},fe.cloneElement=function(T,V,K){if(T==null)throw Error("The argument must be a React element, but you passed "+T+".");var J=k({},T.props),re=T.key,Se=void 0;if(V!=null)for(ce in V.ref!==void 0&&(Se=void 0),V.key!==void 0&&(re=""+V.key),V)!U.call(V,ce)||ce==="key"||ce==="__self"||ce==="__source"||ce==="ref"&&V.ref===void 0||(J[ce]=V[ce]);var ce=arguments.length-2;if(ce===1)J.children=K;else if(1<ce){for(var Gt=Array(ce),Fe=0;Fe<ce;Fe++)Gt[Fe]=arguments[Fe+2];J.children=Gt}return Q(T.type,re,void 0,void 0,Se,J)},fe.createContext=function(T){return T={$$typeof:o,_currentValue:T,_currentValue2:T,_threadCount:0,Provider:null,Consumer:null},T.Provider=T,T.Consumer={$$typeof:l,_context:T},T},fe.createElement=function(T,V,K){var J,re={},Se=null;if(V!=null)for(J in V.key!==void 0&&(Se=""+V.key),V)U.call(V,J)&&J!=="key"&&J!=="__self"&&J!=="__source"&&(re[J]=V[J]);var ce=arguments.length-2;if(ce===1)re.children=K;else if(1<ce){for(var Gt=Array(ce),Fe=0;Fe<ce;Fe++)Gt[Fe]=arguments[Fe+2];re.children=Gt}if(T&&T.defaultProps)for(J in ce=T.defaultProps,ce)re[J]===void 0&&(re[J]=ce[J]);return Q(T,Se,void 0,void 0,null,re)},fe.createRef=function(){return{current:null}},fe.forwardRef=function(T){return{$$typeof:a,render:T}},fe.isValidElement=ee,fe.lazy=function(T){return{$$typeof:p,_payload:{_status:-1,_result:T},_init:G}},fe.memo=function(T,V){return{$$typeof:h,type:T,compare:V===void 0?null:V}},fe.startTransition=function(T){var V=L.T,K={};L.T=K;try{var J=T(),re=L.S;re!==null&&re(K,J),typeof J=="object"&&J!==null&&typeof J.then=="function"&&J.then(_e,ue)}catch(Se){ue(Se)}finally{L.T=V}},fe.unstable_useCacheRefresh=function(){return L.H.useCacheRefresh()},fe.use=function(T){return L.H.use(T)},fe.useActionState=function(T,V,K){return L.H.useActionState(T,V,K)},fe.useCallback=function(T,V){return L.H.useCallback(T,V)},fe.useContext=function(T){return L.H.useContext(T)},fe.useDebugValue=function(){},fe.useDeferredValue=function(T,V){return L.H.useDeferredValue(T,V)},fe.useEffect=function(T,V,K){var J=L.H;if(typeof K=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return J.useEffect(T,V)},fe.useId=function(){return L.H.useId()},fe.useImperativeHandle=function(T,V,K){return L.H.useImperativeHandle(T,V,K)},fe.useInsertionEffect=function(T,V){return L.H.useInsertionEffect(T,V)},fe.useLayoutEffect=function(T,V){return L.H.useLayoutEffect(T,V)},fe.useMemo=function(T,V){return L.H.useMemo(T,V)},fe.useOptimistic=function(T,V){return L.H.useOptimistic(T,V)},fe.useReducer=function(T,V,K){return L.H.useReducer(T,V,K)},fe.useRef=function(T){return L.H.useRef(T)},fe.useState=function(T){return L.H.useState(T)},fe.useSyncExternalStore=function(T,V,K){return L.H.useSyncExternalStore(T,V,K)},fe.useTransition=function(){return L.H.useTransition()},fe.version="19.1.0",fe}var oy;function c0(){return oy||(oy=1,Eh.exports=y4()),Eh.exports}var et=c0();const wt=a0(et);var Mh={exports:{}},vs={},Ah={exports:{}},Th={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ay;function x4(){return ay||(ay=1,function(n){function e($,G){var ue=$.length;$.push(G);e:for(;0<ue;){var _e=ue-1>>>1,T=$[_e];if(0<i(T,G))$[_e]=G,$[ue]=T,ue=_e;else break e}}function t($){return $.length===0?null:$[0]}function r($){if($.length===0)return null;var G=$[0],ue=$.pop();if(ue!==G){$[0]=ue;e:for(var _e=0,T=$.length,V=T>>>1;_e<V;){var K=2*(_e+1)-1,J=$[K],re=K+1,Se=$[re];if(0>i(J,ue))re<T&&0>i(Se,J)?($[_e]=Se,$[re]=ue,_e=re):($[_e]=J,$[K]=ue,_e=K);else if(re<T&&0>i(Se,ue))$[_e]=Se,$[re]=ue,_e=re;else break e}}return G}function i($,G){var ue=$.sortIndex-G.sortIndex;return ue!==0?ue:$.id-G.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;n.unstable_now=function(){return l.now()}}else{var o=Date,a=o.now();n.unstable_now=function(){return o.now()-a}}var f=[],h=[],p=1,g=null,y=3,x=!1,k=!1,C=!1,E=!1,A=typeof setTimeout=="function"?setTimeout:null,N=typeof clearTimeout=="function"?clearTimeout:null,B=typeof setImmediate<"u"?setImmediate:null;function H($){for(var G=t(h);G!==null;){if(G.callback===null)r(h);else if(G.startTime<=$)r(h),G.sortIndex=G.expirationTime,e(f,G);else break;G=t(h)}}function L($){if(C=!1,H($),!k)if(t(f)!==null)k=!0,U||(U=!0,Ge());else{var G=t(h);G!==null&&Ie(L,G.startTime-$)}}var U=!1,Q=-1,ne=5,ee=-1;function je(){return E?!0:!(n.unstable_now()-ee<ne)}function tt(){if(E=!1,U){var $=n.unstable_now();ee=$;var G=!0;try{e:{k=!1,C&&(C=!1,N(Q),Q=-1),x=!0;var ue=y;try{t:{for(H($),g=t(f);g!==null&&!(g.expirationTime>$&&je());){var _e=g.callback;if(typeof _e=="function"){g.callback=null,y=g.priorityLevel;var T=_e(g.expirationTime<=$);if($=n.unstable_now(),typeof T=="function"){g.callback=T,H($),G=!0;break t}g===t(f)&&r(f),H($)}else r(f);g=t(f)}if(g!==null)G=!0;else{var V=t(h);V!==null&&Ie(L,V.startTime-$),G=!1}}break e}finally{g=null,y=ue,x=!1}G=void 0}}finally{G?Ge():U=!1}}}var Ge;if(typeof B=="function")Ge=function(){B(tt)};else if(typeof MessageChannel<"u"){var Xn=new MessageChannel,Bn=Xn.port2;Xn.port1.onmessage=tt,Ge=function(){Bn.postMessage(null)}}else Ge=function(){A(tt,0)};function Ie($,G){Q=A(function(){$(n.unstable_now())},G)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function($){$.callback=null},n.unstable_forceFrameRate=function($){0>$||125<$?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):ne=0<$?Math.floor(1e3/$):5},n.unstable_getCurrentPriorityLevel=function(){return y},n.unstable_next=function($){switch(y){case 1:case 2:case 3:var G=3;break;default:G=y}var ue=y;y=G;try{return $()}finally{y=ue}},n.unstable_requestPaint=function(){E=!0},n.unstable_runWithPriority=function($,G){switch($){case 1:case 2:case 3:case 4:case 5:break;default:$=3}var ue=y;y=$;try{return G()}finally{y=ue}},n.unstable_scheduleCallback=function($,G,ue){var _e=n.unstable_now();switch(typeof ue=="object"&&ue!==null?(ue=ue.delay,ue=typeof ue=="number"&&0<ue?_e+ue:_e):ue=_e,$){case 1:var T=-1;break;case 2:T=250;break;case 5:T=1073741823;break;case 4:T=1e4;break;default:T=5e3}return T=ue+T,$={id:p++,callback:G,priorityLevel:$,startTime:ue,expirationTime:T,sortIndex:-1},ue>_e?($.sortIndex=ue,e(h,$),t(f)===null&&$===t(h)&&(C?(N(Q),Q=-1):C=!0,Ie(L,ue-_e))):($.sortIndex=T,e(f,$),k||x||(k=!0,U||(U=!0,Ge()))),$},n.unstable_shouldYield=je,n.unstable_wrapCallback=function($){var G=y;return function(){var ue=y;y=G;try{return $.apply(this,arguments)}finally{y=ue}}}}(Th)),Th}var cy;function k4(){return cy||(cy=1,Ah.exports=x4()),Ah.exports}var Dh={exports:{}},kt={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fy;function S4(){if(fy)return kt;fy=1;var n=c0();function e(f){var h="https://react.dev/errors/"+f;if(1<arguments.length){h+="?args[]="+encodeURIComponent(arguments[1]);for(var p=2;p<arguments.length;p++)h+="&args[]="+encodeURIComponent(arguments[p])}return"Minified React error #"+f+"; visit "+h+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var r={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},i=Symbol.for("react.portal");function l(f,h,p){var g=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:i,key:g==null?null:""+g,children:f,containerInfo:h,implementation:p}}var o=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function a(f,h){if(f==="font")return"";if(typeof h=="string")return h==="use-credentials"?h:""}return kt.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,kt.createPortal=function(f,h){var p=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!h||h.nodeType!==1&&h.nodeType!==9&&h.nodeType!==11)throw Error(e(299));return l(f,h,null,p)},kt.flushSync=function(f){var h=o.T,p=r.p;try{if(o.T=null,r.p=2,f)return f()}finally{o.T=h,r.p=p,r.d.f()}},kt.preconnect=function(f,h){typeof f=="string"&&(h?(h=h.crossOrigin,h=typeof h=="string"?h==="use-credentials"?h:"":void 0):h=null,r.d.C(f,h))},kt.prefetchDNS=function(f){typeof f=="string"&&r.d.D(f)},kt.preinit=function(f,h){if(typeof f=="string"&&h&&typeof h.as=="string"){var p=h.as,g=a(p,h.crossOrigin),y=typeof h.integrity=="string"?h.integrity:void 0,x=typeof h.fetchPriority=="string"?h.fetchPriority:void 0;p==="style"?r.d.S(f,typeof h.precedence=="string"?h.precedence:void 0,{crossOrigin:g,integrity:y,fetchPriority:x}):p==="script"&&r.d.X(f,{crossOrigin:g,integrity:y,fetchPriority:x,nonce:typeof h.nonce=="string"?h.nonce:void 0})}},kt.preinitModule=function(f,h){if(typeof f=="string")if(typeof h=="object"&&h!==null){if(h.as==null||h.as==="script"){var p=a(h.as,h.crossOrigin);r.d.M(f,{crossOrigin:p,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0})}}else h==null&&r.d.M(f)},kt.preload=function(f,h){if(typeof f=="string"&&typeof h=="object"&&h!==null&&typeof h.as=="string"){var p=h.as,g=a(p,h.crossOrigin);r.d.L(f,p,{crossOrigin:g,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0,type:typeof h.type=="string"?h.type:void 0,fetchPriority:typeof h.fetchPriority=="string"?h.fetchPriority:void 0,referrerPolicy:typeof h.referrerPolicy=="string"?h.referrerPolicy:void 0,imageSrcSet:typeof h.imageSrcSet=="string"?h.imageSrcSet:void 0,imageSizes:typeof h.imageSizes=="string"?h.imageSizes:void 0,media:typeof h.media=="string"?h.media:void 0})}},kt.preloadModule=function(f,h){if(typeof f=="string")if(h){var p=a(h.as,h.crossOrigin);r.d.m(f,{as:typeof h.as=="string"&&h.as!=="script"?h.as:void 0,crossOrigin:p,integrity:typeof h.integrity=="string"?h.integrity:void 0})}else r.d.m(f)},kt.requestFormReset=function(f){r.d.r(f)},kt.unstable_batchedUpdates=function(f,h){return f(h)},kt.useFormState=function(f,h,p){return o.H.useFormState(f,h,p)},kt.useFormStatus=function(){return o.H.useHostTransitionStatus()},kt.version="19.1.0",kt}var dy;function jx(){if(dy)return Dh.exports;dy=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Dh.exports=S4(),Dh.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hy;function C4(){if(hy)return vs;hy=1;var n=k4(),e=c0(),t=jx();function r(u){var s="https://react.dev/errors/"+u;if(1<arguments.length){s+="?args[]="+encodeURIComponent(arguments[1]);for(var c=2;c<arguments.length;c++)s+="&args[]="+encodeURIComponent(arguments[c])}return"Minified React error #"+u+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(u){return!(!u||u.nodeType!==1&&u.nodeType!==9&&u.nodeType!==11)}function l(u){var s=u,c=u;if(u.alternate)for(;s.return;)s=s.return;else{u=s;do s=u,(s.flags&4098)!==0&&(c=s.return),u=s.return;while(u)}return s.tag===3?c:null}function o(u){if(u.tag===13){var s=u.memoizedState;if(s===null&&(u=u.alternate,u!==null&&(s=u.memoizedState)),s!==null)return s.dehydrated}return null}function a(u){if(l(u)!==u)throw Error(r(188))}function f(u){var s=u.alternate;if(!s){if(s=l(u),s===null)throw Error(r(188));return s!==u?null:u}for(var c=u,d=s;;){var m=c.return;if(m===null)break;var b=m.alternate;if(b===null){if(d=m.return,d!==null){c=d;continue}break}if(m.child===b.child){for(b=m.child;b;){if(b===c)return a(m),u;if(b===d)return a(m),s;b=b.sibling}throw Error(r(188))}if(c.return!==d.return)c=m,d=b;else{for(var S=!1,v=m.child;v;){if(v===c){S=!0,c=m,d=b;break}if(v===d){S=!0,d=m,c=b;break}v=v.sibling}if(!S){for(v=b.child;v;){if(v===c){S=!0,c=b,d=m;break}if(v===d){S=!0,d=b,c=m;break}v=v.sibling}if(!S)throw Error(r(189))}}if(c.alternate!==d)throw Error(r(190))}if(c.tag!==3)throw Error(r(188));return c.stateNode.current===c?u:s}function h(u){var s=u.tag;if(s===5||s===26||s===27||s===6)return u;for(u=u.child;u!==null;){if(s=h(u),s!==null)return s;u=u.sibling}return null}var p=Object.assign,g=Symbol.for("react.element"),y=Symbol.for("react.transitional.element"),x=Symbol.for("react.portal"),k=Symbol.for("react.fragment"),C=Symbol.for("react.strict_mode"),E=Symbol.for("react.profiler"),A=Symbol.for("react.provider"),N=Symbol.for("react.consumer"),B=Symbol.for("react.context"),H=Symbol.for("react.forward_ref"),L=Symbol.for("react.suspense"),U=Symbol.for("react.suspense_list"),Q=Symbol.for("react.memo"),ne=Symbol.for("react.lazy"),ee=Symbol.for("react.activity"),je=Symbol.for("react.memo_cache_sentinel"),tt=Symbol.iterator;function Ge(u){return u===null||typeof u!="object"?null:(u=tt&&u[tt]||u["@@iterator"],typeof u=="function"?u:null)}var Xn=Symbol.for("react.client.reference");function Bn(u){if(u==null)return null;if(typeof u=="function")return u.$$typeof===Xn?null:u.displayName||u.name||null;if(typeof u=="string")return u;switch(u){case k:return"Fragment";case E:return"Profiler";case C:return"StrictMode";case L:return"Suspense";case U:return"SuspenseList";case ee:return"Activity"}if(typeof u=="object")switch(u.$$typeof){case x:return"Portal";case B:return(u.displayName||"Context")+".Provider";case N:return(u._context.displayName||"Context")+".Consumer";case H:var s=u.render;return u=u.displayName,u||(u=s.displayName||s.name||"",u=u!==""?"ForwardRef("+u+")":"ForwardRef"),u;case Q:return s=u.displayName||null,s!==null?s:Bn(u.type)||"Memo";case ne:s=u._payload,u=u._init;try{return Bn(u(s))}catch{}}return null}var Ie=Array.isArray,$=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,G=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ue={pending:!1,data:null,method:null,action:null},_e=[],T=-1;function V(u){return{current:u}}function K(u){0>T||(u.current=_e[T],_e[T]=null,T--)}function J(u,s){T++,_e[T]=u.current,u.current=s}var re=V(null),Se=V(null),ce=V(null),Gt=V(null);function Fe(u,s){switch(J(ce,s),J(Se,u),J(re,null),s.nodeType){case 9:case 11:u=(u=s.documentElement)&&(u=u.namespaceURI)?Rb(u):0;break;default:if(u=s.tagName,s=s.namespaceURI)s=Rb(s),u=zb(s,u);else switch(u){case"svg":u=1;break;case"math":u=2;break;default:u=0}}K(re),J(re,u)}function kr(){K(re),K(Se),K(ce)}function of(u){u.memoizedState!==null&&J(Gt,u);var s=re.current,c=zb(s,u.type);s!==c&&(J(Se,u),J(re,c))}function Co(u){Se.current===u&&(K(re),K(Se)),Gt.current===u&&(K(Gt),bs._currentValue=ue)}var af=Object.prototype.hasOwnProperty,cf=n.unstable_scheduleCallback,ff=n.unstable_cancelCallback,K6=n.unstable_shouldYield,Y6=n.unstable_requestPaint,$n=n.unstable_now,Z6=n.unstable_getCurrentPriorityLevel,hm=n.unstable_ImmediatePriority,pm=n.unstable_UserBlockingPriority,vo=n.unstable_NormalPriority,X6=n.unstable_LowPriority,mm=n.unstable_IdlePriority,Q6=n.log,W6=n.unstable_setDisableYieldValue,Eu=null,Kt=null;function Sr(u){if(typeof Q6=="function"&&W6(u),Kt&&typeof Kt.setStrictMode=="function")try{Kt.setStrictMode(Eu,u)}catch{}}var Yt=Math.clz32?Math.clz32:nC,eC=Math.log,tC=Math.LN2;function nC(u){return u>>>=0,u===0?32:31-(eC(u)/tC|0)|0}var Eo=256,Mo=4194304;function pi(u){var s=u&42;if(s!==0)return s;switch(u&-u){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return u&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return u&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return u}}function Ao(u,s,c){var d=u.pendingLanes;if(d===0)return 0;var m=0,b=u.suspendedLanes,S=u.pingedLanes;u=u.warmLanes;var v=d&134217727;return v!==0?(d=v&~b,d!==0?m=pi(d):(S&=v,S!==0?m=pi(S):c||(c=v&~u,c!==0&&(m=pi(c))))):(v=d&~b,v!==0?m=pi(v):S!==0?m=pi(S):c||(c=d&~u,c!==0&&(m=pi(c)))),m===0?0:s!==0&&s!==m&&(s&b)===0&&(b=m&-m,c=s&-s,b>=c||b===32&&(c&4194048)!==0)?s:m}function Mu(u,s){return(u.pendingLanes&~(u.suspendedLanes&~u.pingedLanes)&s)===0}function rC(u,s){switch(u){case 1:case 2:case 4:case 8:case 64:return s+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function gm(){var u=Eo;return Eo<<=1,(Eo&4194048)===0&&(Eo=256),u}function bm(){var u=Mo;return Mo<<=1,(Mo&62914560)===0&&(Mo=4194304),u}function df(u){for(var s=[],c=0;31>c;c++)s.push(u);return s}function Au(u,s){u.pendingLanes|=s,s!==268435456&&(u.suspendedLanes=0,u.pingedLanes=0,u.warmLanes=0)}function iC(u,s,c,d,m,b){var S=u.pendingLanes;u.pendingLanes=c,u.suspendedLanes=0,u.pingedLanes=0,u.warmLanes=0,u.expiredLanes&=c,u.entangledLanes&=c,u.errorRecoveryDisabledLanes&=c,u.shellSuspendCounter=0;var v=u.entanglements,M=u.expirationTimes,_=u.hiddenUpdates;for(c=S&~c;0<c;){var F=31-Yt(c),q=1<<F;v[F]=0,M[F]=-1;var R=_[F];if(R!==null)for(_[F]=null,F=0;F<R.length;F++){var z=R[F];z!==null&&(z.lane&=-536870913)}c&=~q}d!==0&&ym(u,d,0),b!==0&&m===0&&u.tag!==0&&(u.suspendedLanes|=b&~(S&~s))}function ym(u,s,c){u.pendingLanes|=s,u.suspendedLanes&=~s;var d=31-Yt(s);u.entangledLanes|=s,u.entanglements[d]=u.entanglements[d]|1073741824|c&4194090}function xm(u,s){var c=u.entangledLanes|=s;for(u=u.entanglements;c;){var d=31-Yt(c),m=1<<d;m&s|u[d]&s&&(u[d]|=s),c&=~m}}function hf(u){switch(u){case 2:u=1;break;case 8:u=4;break;case 32:u=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:u=128;break;case 268435456:u=134217728;break;default:u=0}return u}function pf(u){return u&=-u,2<u?8<u?(u&134217727)!==0?32:268435456:8:2}function km(){var u=G.p;return u!==0?u:(u=window.event,u===void 0?32:Wb(u.type))}function lC(u,s){var c=G.p;try{return G.p=u,s()}finally{G.p=c}}var Cr=Math.random().toString(36).slice(2),yt="__reactFiber$"+Cr,Ft="__reactProps$"+Cr,cl="__reactContainer$"+Cr,mf="__reactEvents$"+Cr,uC="__reactListeners$"+Cr,sC="__reactHandles$"+Cr,Sm="__reactResources$"+Cr,Tu="__reactMarker$"+Cr;function gf(u){delete u[yt],delete u[Ft],delete u[mf],delete u[uC],delete u[sC]}function fl(u){var s=u[yt];if(s)return s;for(var c=u.parentNode;c;){if(s=c[cl]||c[yt]){if(c=s.alternate,s.child!==null||c!==null&&c.child!==null)for(u=Lb(u);u!==null;){if(c=u[yt])return c;u=Lb(u)}return s}u=c,c=u.parentNode}return null}function dl(u){if(u=u[yt]||u[cl]){var s=u.tag;if(s===5||s===6||s===13||s===26||s===27||s===3)return u}return null}function Du(u){var s=u.tag;if(s===5||s===26||s===27||s===6)return u.stateNode;throw Error(r(33))}function hl(u){var s=u[Sm];return s||(s=u[Sm]={hoistableStyles:new Map,hoistableScripts:new Map}),s}function nt(u){u[Tu]=!0}var Cm=new Set,vm={};function mi(u,s){pl(u,s),pl(u+"Capture",s)}function pl(u,s){for(vm[u]=s,u=0;u<s.length;u++)Cm.add(s[u])}var oC=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Em={},Mm={};function aC(u){return af.call(Mm,u)?!0:af.call(Em,u)?!1:oC.test(u)?Mm[u]=!0:(Em[u]=!0,!1)}function To(u,s,c){if(aC(s))if(c===null)u.removeAttribute(s);else{switch(typeof c){case"undefined":case"function":case"symbol":u.removeAttribute(s);return;case"boolean":var d=s.toLowerCase().slice(0,5);if(d!=="data-"&&d!=="aria-"){u.removeAttribute(s);return}}u.setAttribute(s,""+c)}}function Do(u,s,c){if(c===null)u.removeAttribute(s);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":u.removeAttribute(s);return}u.setAttribute(s,""+c)}}function Qn(u,s,c,d){if(d===null)u.removeAttribute(c);else{switch(typeof d){case"undefined":case"function":case"symbol":case"boolean":u.removeAttribute(c);return}u.setAttributeNS(s,c,""+d)}}var bf,Am;function ml(u){if(bf===void 0)try{throw Error()}catch(c){var s=c.stack.trim().match(/\n( *(at )?)/);bf=s&&s[1]||"",Am=-1<c.stack.indexOf(`
    at`)?" (<anonymous>)":-1<c.stack.indexOf("@")?"@unknown:0:0":""}return`
`+bf+u+Am}var yf=!1;function xf(u,s){if(!u||yf)return"";yf=!0;var c=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var d={DetermineComponentFrameRoot:function(){try{if(s){var q=function(){throw Error()};if(Object.defineProperty(q.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(q,[])}catch(z){var R=z}Reflect.construct(u,[],q)}else{try{q.call()}catch(z){R=z}u.call(q.prototype)}}else{try{throw Error()}catch(z){R=z}(q=u())&&typeof q.catch=="function"&&q.catch(function(){})}}catch(z){if(z&&R&&typeof z.stack=="string")return[z.stack,R.stack]}return[null,null]}};d.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var m=Object.getOwnPropertyDescriptor(d.DetermineComponentFrameRoot,"name");m&&m.configurable&&Object.defineProperty(d.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var b=d.DetermineComponentFrameRoot(),S=b[0],v=b[1];if(S&&v){var M=S.split(`
`),_=v.split(`
`);for(m=d=0;d<M.length&&!M[d].includes("DetermineComponentFrameRoot");)d++;for(;m<_.length&&!_[m].includes("DetermineComponentFrameRoot");)m++;if(d===M.length||m===_.length)for(d=M.length-1,m=_.length-1;1<=d&&0<=m&&M[d]!==_[m];)m--;for(;1<=d&&0<=m;d--,m--)if(M[d]!==_[m]){if(d!==1||m!==1)do if(d--,m--,0>m||M[d]!==_[m]){var F=`
`+M[d].replace(" at new "," at ");return u.displayName&&F.includes("<anonymous>")&&(F=F.replace("<anonymous>",u.displayName)),F}while(1<=d&&0<=m);break}}}finally{yf=!1,Error.prepareStackTrace=c}return(c=u?u.displayName||u.name:"")?ml(c):""}function cC(u){switch(u.tag){case 26:case 27:case 5:return ml(u.type);case 16:return ml("Lazy");case 13:return ml("Suspense");case 19:return ml("SuspenseList");case 0:case 15:return xf(u.type,!1);case 11:return xf(u.type.render,!1);case 1:return xf(u.type,!0);case 31:return ml("Activity");default:return""}}function Tm(u){try{var s="";do s+=cC(u),u=u.return;while(u);return s}catch(c){return`
Error generating stack: `+c.message+`
`+c.stack}}function an(u){switch(typeof u){case"bigint":case"boolean":case"number":case"string":case"undefined":return u;case"object":return u;default:return""}}function Dm(u){var s=u.type;return(u=u.nodeName)&&u.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function fC(u){var s=Dm(u)?"checked":"value",c=Object.getOwnPropertyDescriptor(u.constructor.prototype,s),d=""+u[s];if(!u.hasOwnProperty(s)&&typeof c<"u"&&typeof c.get=="function"&&typeof c.set=="function"){var m=c.get,b=c.set;return Object.defineProperty(u,s,{configurable:!0,get:function(){return m.call(this)},set:function(S){d=""+S,b.call(this,S)}}),Object.defineProperty(u,s,{enumerable:c.enumerable}),{getValue:function(){return d},setValue:function(S){d=""+S},stopTracking:function(){u._valueTracker=null,delete u[s]}}}}function wo(u){u._valueTracker||(u._valueTracker=fC(u))}function wm(u){if(!u)return!1;var s=u._valueTracker;if(!s)return!0;var c=s.getValue(),d="";return u&&(d=Dm(u)?u.checked?"true":"false":u.value),u=d,u!==c?(s.setValue(u),!0):!1}function Oo(u){if(u=u||(typeof document<"u"?document:void 0),typeof u>"u")return null;try{return u.activeElement||u.body}catch{return u.body}}var dC=/[\n"\\]/g;function cn(u){return u.replace(dC,function(s){return"\\"+s.charCodeAt(0).toString(16)+" "})}function kf(u,s,c,d,m,b,S,v){u.name="",S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"?u.type=S:u.removeAttribute("type"),s!=null?S==="number"?(s===0&&u.value===""||u.value!=s)&&(u.value=""+an(s)):u.value!==""+an(s)&&(u.value=""+an(s)):S!=="submit"&&S!=="reset"||u.removeAttribute("value"),s!=null?Sf(u,S,an(s)):c!=null?Sf(u,S,an(c)):d!=null&&u.removeAttribute("value"),m==null&&b!=null&&(u.defaultChecked=!!b),m!=null&&(u.checked=m&&typeof m!="function"&&typeof m!="symbol"),v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"?u.name=""+an(v):u.removeAttribute("name")}function Om(u,s,c,d,m,b,S,v){if(b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"&&(u.type=b),s!=null||c!=null){if(!(b!=="submit"&&b!=="reset"||s!=null))return;c=c!=null?""+an(c):"",s=s!=null?""+an(s):c,v||s===u.value||(u.value=s),u.defaultValue=s}d=d??m,d=typeof d!="function"&&typeof d!="symbol"&&!!d,u.checked=v?u.checked:!!d,u.defaultChecked=!!d,S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"&&(u.name=S)}function Sf(u,s,c){s==="number"&&Oo(u.ownerDocument)===u||u.defaultValue===""+c||(u.defaultValue=""+c)}function gl(u,s,c,d){if(u=u.options,s){s={};for(var m=0;m<c.length;m++)s["$"+c[m]]=!0;for(c=0;c<u.length;c++)m=s.hasOwnProperty("$"+u[c].value),u[c].selected!==m&&(u[c].selected=m),m&&d&&(u[c].defaultSelected=!0)}else{for(c=""+an(c),s=null,m=0;m<u.length;m++){if(u[m].value===c){u[m].selected=!0,d&&(u[m].defaultSelected=!0);return}s!==null||u[m].disabled||(s=u[m])}s!==null&&(s.selected=!0)}}function _m(u,s,c){if(s!=null&&(s=""+an(s),s!==u.value&&(u.value=s),c==null)){u.defaultValue!==s&&(u.defaultValue=s);return}u.defaultValue=c!=null?""+an(c):""}function Nm(u,s,c,d){if(s==null){if(d!=null){if(c!=null)throw Error(r(92));if(Ie(d)){if(1<d.length)throw Error(r(93));d=d[0]}c=d}c==null&&(c=""),s=c}c=an(s),u.defaultValue=c,d=u.textContent,d===c&&d!==""&&d!==null&&(u.value=d)}function bl(u,s){if(s){var c=u.firstChild;if(c&&c===u.lastChild&&c.nodeType===3){c.nodeValue=s;return}}u.textContent=s}var hC=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Rm(u,s,c){var d=s.indexOf("--")===0;c==null||typeof c=="boolean"||c===""?d?u.setProperty(s,""):s==="float"?u.cssFloat="":u[s]="":d?u.setProperty(s,c):typeof c!="number"||c===0||hC.has(s)?s==="float"?u.cssFloat=c:u[s]=(""+c).trim():u[s]=c+"px"}function zm(u,s,c){if(s!=null&&typeof s!="object")throw Error(r(62));if(u=u.style,c!=null){for(var d in c)!c.hasOwnProperty(d)||s!=null&&s.hasOwnProperty(d)||(d.indexOf("--")===0?u.setProperty(d,""):d==="float"?u.cssFloat="":u[d]="");for(var m in s)d=s[m],s.hasOwnProperty(m)&&c[m]!==d&&Rm(u,m,d)}else for(var b in s)s.hasOwnProperty(b)&&Rm(u,b,s[b])}function Cf(u){if(u.indexOf("-")===-1)return!1;switch(u){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var pC=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),mC=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function _o(u){return mC.test(""+u)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":u}var vf=null;function Ef(u){return u=u.target||u.srcElement||window,u.correspondingUseElement&&(u=u.correspondingUseElement),u.nodeType===3?u.parentNode:u}var yl=null,xl=null;function Bm(u){var s=dl(u);if(s&&(u=s.stateNode)){var c=u[Ft]||null;e:switch(u=s.stateNode,s.type){case"input":if(kf(u,c.value,c.defaultValue,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name),s=c.name,c.type==="radio"&&s!=null){for(c=u;c.parentNode;)c=c.parentNode;for(c=c.querySelectorAll('input[name="'+cn(""+s)+'"][type="radio"]'),s=0;s<c.length;s++){var d=c[s];if(d!==u&&d.form===u.form){var m=d[Ft]||null;if(!m)throw Error(r(90));kf(d,m.value,m.defaultValue,m.defaultValue,m.checked,m.defaultChecked,m.type,m.name)}}for(s=0;s<c.length;s++)d=c[s],d.form===u.form&&wm(d)}break e;case"textarea":_m(u,c.value,c.defaultValue);break e;case"select":s=c.value,s!=null&&gl(u,!!c.multiple,s,!1)}}}var Mf=!1;function $m(u,s,c){if(Mf)return u(s,c);Mf=!0;try{var d=u(s);return d}finally{if(Mf=!1,(yl!==null||xl!==null)&&(ga(),yl&&(s=yl,u=xl,xl=yl=null,Bm(s),u)))for(s=0;s<u.length;s++)Bm(u[s])}}function wu(u,s){var c=u.stateNode;if(c===null)return null;var d=c[Ft]||null;if(d===null)return null;c=d[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(d=!d.disabled)||(u=u.type,d=!(u==="button"||u==="input"||u==="select"||u==="textarea")),u=!d;break e;default:u=!1}if(u)return null;if(c&&typeof c!="function")throw Error(r(231,s,typeof c));return c}var Wn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Af=!1;if(Wn)try{var Ou={};Object.defineProperty(Ou,"passive",{get:function(){Af=!0}}),window.addEventListener("test",Ou,Ou),window.removeEventListener("test",Ou,Ou)}catch{Af=!1}var vr=null,Tf=null,No=null;function Fm(){if(No)return No;var u,s=Tf,c=s.length,d,m="value"in vr?vr.value:vr.textContent,b=m.length;for(u=0;u<c&&s[u]===m[u];u++);var S=c-u;for(d=1;d<=S&&s[c-d]===m[b-d];d++);return No=m.slice(u,1<d?1-d:void 0)}function Ro(u){var s=u.keyCode;return"charCode"in u?(u=u.charCode,u===0&&s===13&&(u=13)):u=s,u===10&&(u=13),32<=u||u===13?u:0}function zo(){return!0}function Lm(){return!1}function Lt(u){function s(c,d,m,b,S){this._reactName=c,this._targetInst=m,this.type=d,this.nativeEvent=b,this.target=S,this.currentTarget=null;for(var v in u)u.hasOwnProperty(v)&&(c=u[v],this[v]=c?c(b):b[v]);return this.isDefaultPrevented=(b.defaultPrevented!=null?b.defaultPrevented:b.returnValue===!1)?zo:Lm,this.isPropagationStopped=Lm,this}return p(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var c=this.nativeEvent;c&&(c.preventDefault?c.preventDefault():typeof c.returnValue!="unknown"&&(c.returnValue=!1),this.isDefaultPrevented=zo)},stopPropagation:function(){var c=this.nativeEvent;c&&(c.stopPropagation?c.stopPropagation():typeof c.cancelBubble!="unknown"&&(c.cancelBubble=!0),this.isPropagationStopped=zo)},persist:function(){},isPersistent:zo}),s}var gi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(u){return u.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Bo=Lt(gi),_u=p({},gi,{view:0,detail:0}),gC=Lt(_u),Df,wf,Nu,$o=p({},_u,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:_f,button:0,buttons:0,relatedTarget:function(u){return u.relatedTarget===void 0?u.fromElement===u.srcElement?u.toElement:u.fromElement:u.relatedTarget},movementX:function(u){return"movementX"in u?u.movementX:(u!==Nu&&(Nu&&u.type==="mousemove"?(Df=u.screenX-Nu.screenX,wf=u.screenY-Nu.screenY):wf=Df=0,Nu=u),Df)},movementY:function(u){return"movementY"in u?u.movementY:wf}}),Im=Lt($o),bC=p({},$o,{dataTransfer:0}),yC=Lt(bC),xC=p({},_u,{relatedTarget:0}),Of=Lt(xC),kC=p({},gi,{animationName:0,elapsedTime:0,pseudoElement:0}),SC=Lt(kC),CC=p({},gi,{clipboardData:function(u){return"clipboardData"in u?u.clipboardData:window.clipboardData}}),vC=Lt(CC),EC=p({},gi,{data:0}),qm=Lt(EC),MC={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},AC={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},TC={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function DC(u){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(u):(u=TC[u])?!!s[u]:!1}function _f(){return DC}var wC=p({},_u,{key:function(u){if(u.key){var s=MC[u.key]||u.key;if(s!=="Unidentified")return s}return u.type==="keypress"?(u=Ro(u),u===13?"Enter":String.fromCharCode(u)):u.type==="keydown"||u.type==="keyup"?AC[u.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:_f,charCode:function(u){return u.type==="keypress"?Ro(u):0},keyCode:function(u){return u.type==="keydown"||u.type==="keyup"?u.keyCode:0},which:function(u){return u.type==="keypress"?Ro(u):u.type==="keydown"||u.type==="keyup"?u.keyCode:0}}),OC=Lt(wC),_C=p({},$o,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Hm=Lt(_C),NC=p({},_u,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:_f}),RC=Lt(NC),zC=p({},gi,{propertyName:0,elapsedTime:0,pseudoElement:0}),BC=Lt(zC),$C=p({},$o,{deltaX:function(u){return"deltaX"in u?u.deltaX:"wheelDeltaX"in u?-u.wheelDeltaX:0},deltaY:function(u){return"deltaY"in u?u.deltaY:"wheelDeltaY"in u?-u.wheelDeltaY:"wheelDelta"in u?-u.wheelDelta:0},deltaZ:0,deltaMode:0}),FC=Lt($C),LC=p({},gi,{newState:0,oldState:0}),IC=Lt(LC),qC=[9,13,27,32],Nf=Wn&&"CompositionEvent"in window,Ru=null;Wn&&"documentMode"in document&&(Ru=document.documentMode);var HC=Wn&&"TextEvent"in window&&!Ru,Vm=Wn&&(!Nf||Ru&&8<Ru&&11>=Ru),Um=" ",jm=!1;function Pm(u,s){switch(u){case"keyup":return qC.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Jm(u){return u=u.detail,typeof u=="object"&&"data"in u?u.data:null}var kl=!1;function VC(u,s){switch(u){case"compositionend":return Jm(s);case"keypress":return s.which!==32?null:(jm=!0,Um);case"textInput":return u=s.data,u===Um&&jm?null:u;default:return null}}function UC(u,s){if(kl)return u==="compositionend"||!Nf&&Pm(u,s)?(u=Fm(),No=Tf=vr=null,kl=!1,u):null;switch(u){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return Vm&&s.locale!=="ko"?null:s.data;default:return null}}var jC={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Gm(u){var s=u&&u.nodeName&&u.nodeName.toLowerCase();return s==="input"?!!jC[u.type]:s==="textarea"}function Km(u,s,c,d){yl?xl?xl.push(d):xl=[d]:yl=d,s=Ca(s,"onChange"),0<s.length&&(c=new Bo("onChange","change",null,c,d),u.push({event:c,listeners:s}))}var zu=null,Bu=null;function PC(u){Db(u,0)}function Fo(u){var s=Du(u);if(wm(s))return u}function Ym(u,s){if(u==="change")return s}var Zm=!1;if(Wn){var Rf;if(Wn){var zf="oninput"in document;if(!zf){var Xm=document.createElement("div");Xm.setAttribute("oninput","return;"),zf=typeof Xm.oninput=="function"}Rf=zf}else Rf=!1;Zm=Rf&&(!document.documentMode||9<document.documentMode)}function Qm(){zu&&(zu.detachEvent("onpropertychange",Wm),Bu=zu=null)}function Wm(u){if(u.propertyName==="value"&&Fo(Bu)){var s=[];Km(s,Bu,u,Ef(u)),$m(PC,s)}}function JC(u,s,c){u==="focusin"?(Qm(),zu=s,Bu=c,zu.attachEvent("onpropertychange",Wm)):u==="focusout"&&Qm()}function GC(u){if(u==="selectionchange"||u==="keyup"||u==="keydown")return Fo(Bu)}function KC(u,s){if(u==="click")return Fo(s)}function YC(u,s){if(u==="input"||u==="change")return Fo(s)}function ZC(u,s){return u===s&&(u!==0||1/u===1/s)||u!==u&&s!==s}var Zt=typeof Object.is=="function"?Object.is:ZC;function $u(u,s){if(Zt(u,s))return!0;if(typeof u!="object"||u===null||typeof s!="object"||s===null)return!1;var c=Object.keys(u),d=Object.keys(s);if(c.length!==d.length)return!1;for(d=0;d<c.length;d++){var m=c[d];if(!af.call(s,m)||!Zt(u[m],s[m]))return!1}return!0}function e1(u){for(;u&&u.firstChild;)u=u.firstChild;return u}function t1(u,s){var c=e1(u);u=0;for(var d;c;){if(c.nodeType===3){if(d=u+c.textContent.length,u<=s&&d>=s)return{node:c,offset:s-u};u=d}e:{for(;c;){if(c.nextSibling){c=c.nextSibling;break e}c=c.parentNode}c=void 0}c=e1(c)}}function n1(u,s){return u&&s?u===s?!0:u&&u.nodeType===3?!1:s&&s.nodeType===3?n1(u,s.parentNode):"contains"in u?u.contains(s):u.compareDocumentPosition?!!(u.compareDocumentPosition(s)&16):!1:!1}function r1(u){u=u!=null&&u.ownerDocument!=null&&u.ownerDocument.defaultView!=null?u.ownerDocument.defaultView:window;for(var s=Oo(u.document);s instanceof u.HTMLIFrameElement;){try{var c=typeof s.contentWindow.location.href=="string"}catch{c=!1}if(c)u=s.contentWindow;else break;s=Oo(u.document)}return s}function Bf(u){var s=u&&u.nodeName&&u.nodeName.toLowerCase();return s&&(s==="input"&&(u.type==="text"||u.type==="search"||u.type==="tel"||u.type==="url"||u.type==="password")||s==="textarea"||u.contentEditable==="true")}var XC=Wn&&"documentMode"in document&&11>=document.documentMode,Sl=null,$f=null,Fu=null,Ff=!1;function i1(u,s,c){var d=c.window===c?c.document:c.nodeType===9?c:c.ownerDocument;Ff||Sl==null||Sl!==Oo(d)||(d=Sl,"selectionStart"in d&&Bf(d)?d={start:d.selectionStart,end:d.selectionEnd}:(d=(d.ownerDocument&&d.ownerDocument.defaultView||window).getSelection(),d={anchorNode:d.anchorNode,anchorOffset:d.anchorOffset,focusNode:d.focusNode,focusOffset:d.focusOffset}),Fu&&$u(Fu,d)||(Fu=d,d=Ca($f,"onSelect"),0<d.length&&(s=new Bo("onSelect","select",null,s,c),u.push({event:s,listeners:d}),s.target=Sl)))}function bi(u,s){var c={};return c[u.toLowerCase()]=s.toLowerCase(),c["Webkit"+u]="webkit"+s,c["Moz"+u]="moz"+s,c}var Cl={animationend:bi("Animation","AnimationEnd"),animationiteration:bi("Animation","AnimationIteration"),animationstart:bi("Animation","AnimationStart"),transitionrun:bi("Transition","TransitionRun"),transitionstart:bi("Transition","TransitionStart"),transitioncancel:bi("Transition","TransitionCancel"),transitionend:bi("Transition","TransitionEnd")},Lf={},l1={};Wn&&(l1=document.createElement("div").style,"AnimationEvent"in window||(delete Cl.animationend.animation,delete Cl.animationiteration.animation,delete Cl.animationstart.animation),"TransitionEvent"in window||delete Cl.transitionend.transition);function yi(u){if(Lf[u])return Lf[u];if(!Cl[u])return u;var s=Cl[u],c;for(c in s)if(s.hasOwnProperty(c)&&c in l1)return Lf[u]=s[c];return u}var u1=yi("animationend"),s1=yi("animationiteration"),o1=yi("animationstart"),QC=yi("transitionrun"),WC=yi("transitionstart"),ev=yi("transitioncancel"),a1=yi("transitionend"),c1=new Map,If="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");If.push("scrollEnd");function vn(u,s){c1.set(u,s),mi(s,[u])}var f1=new WeakMap;function fn(u,s){if(typeof u=="object"&&u!==null){var c=f1.get(u);return c!==void 0?c:(s={value:u,source:s,stack:Tm(s)},f1.set(u,s),s)}return{value:u,source:s,stack:Tm(s)}}var dn=[],vl=0,qf=0;function Lo(){for(var u=vl,s=qf=vl=0;s<u;){var c=dn[s];dn[s++]=null;var d=dn[s];dn[s++]=null;var m=dn[s];dn[s++]=null;var b=dn[s];if(dn[s++]=null,d!==null&&m!==null){var S=d.pending;S===null?m.next=m:(m.next=S.next,S.next=m),d.pending=m}b!==0&&d1(c,m,b)}}function Io(u,s,c,d){dn[vl++]=u,dn[vl++]=s,dn[vl++]=c,dn[vl++]=d,qf|=d,u.lanes|=d,u=u.alternate,u!==null&&(u.lanes|=d)}function Hf(u,s,c,d){return Io(u,s,c,d),qo(u)}function El(u,s){return Io(u,null,null,s),qo(u)}function d1(u,s,c){u.lanes|=c;var d=u.alternate;d!==null&&(d.lanes|=c);for(var m=!1,b=u.return;b!==null;)b.childLanes|=c,d=b.alternate,d!==null&&(d.childLanes|=c),b.tag===22&&(u=b.stateNode,u===null||u._visibility&1||(m=!0)),u=b,b=b.return;return u.tag===3?(b=u.stateNode,m&&s!==null&&(m=31-Yt(c),u=b.hiddenUpdates,d=u[m],d===null?u[m]=[s]:d.push(s),s.lane=c|536870912),b):null}function qo(u){if(50<as)throw as=0,Gd=null,Error(r(185));for(var s=u.return;s!==null;)u=s,s=u.return;return u.tag===3?u.stateNode:null}var Ml={};function tv(u,s,c,d){this.tag=u,this.key=c,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=d,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Xt(u,s,c,d){return new tv(u,s,c,d)}function Vf(u){return u=u.prototype,!(!u||!u.isReactComponent)}function er(u,s){var c=u.alternate;return c===null?(c=Xt(u.tag,s,u.key,u.mode),c.elementType=u.elementType,c.type=u.type,c.stateNode=u.stateNode,c.alternate=u,u.alternate=c):(c.pendingProps=s,c.type=u.type,c.flags=0,c.subtreeFlags=0,c.deletions=null),c.flags=u.flags&65011712,c.childLanes=u.childLanes,c.lanes=u.lanes,c.child=u.child,c.memoizedProps=u.memoizedProps,c.memoizedState=u.memoizedState,c.updateQueue=u.updateQueue,s=u.dependencies,c.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},c.sibling=u.sibling,c.index=u.index,c.ref=u.ref,c.refCleanup=u.refCleanup,c}function h1(u,s){u.flags&=65011714;var c=u.alternate;return c===null?(u.childLanes=0,u.lanes=s,u.child=null,u.subtreeFlags=0,u.memoizedProps=null,u.memoizedState=null,u.updateQueue=null,u.dependencies=null,u.stateNode=null):(u.childLanes=c.childLanes,u.lanes=c.lanes,u.child=c.child,u.subtreeFlags=0,u.deletions=null,u.memoizedProps=c.memoizedProps,u.memoizedState=c.memoizedState,u.updateQueue=c.updateQueue,u.type=c.type,s=c.dependencies,u.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),u}function Ho(u,s,c,d,m,b){var S=0;if(d=u,typeof u=="function")Vf(u)&&(S=1);else if(typeof u=="string")S=r4(u,c,re.current)?26:u==="html"||u==="head"||u==="body"?27:5;else e:switch(u){case ee:return u=Xt(31,c,s,m),u.elementType=ee,u.lanes=b,u;case k:return xi(c.children,m,b,s);case C:S=8,m|=24;break;case E:return u=Xt(12,c,s,m|2),u.elementType=E,u.lanes=b,u;case L:return u=Xt(13,c,s,m),u.elementType=L,u.lanes=b,u;case U:return u=Xt(19,c,s,m),u.elementType=U,u.lanes=b,u;default:if(typeof u=="object"&&u!==null)switch(u.$$typeof){case A:case B:S=10;break e;case N:S=9;break e;case H:S=11;break e;case Q:S=14;break e;case ne:S=16,d=null;break e}S=29,c=Error(r(130,u===null?"null":typeof u,"")),d=null}return s=Xt(S,c,s,m),s.elementType=u,s.type=d,s.lanes=b,s}function xi(u,s,c,d){return u=Xt(7,u,d,s),u.lanes=c,u}function Uf(u,s,c){return u=Xt(6,u,null,s),u.lanes=c,u}function jf(u,s,c){return s=Xt(4,u.children!==null?u.children:[],u.key,s),s.lanes=c,s.stateNode={containerInfo:u.containerInfo,pendingChildren:null,implementation:u.implementation},s}var Al=[],Tl=0,Vo=null,Uo=0,hn=[],pn=0,ki=null,tr=1,nr="";function Si(u,s){Al[Tl++]=Uo,Al[Tl++]=Vo,Vo=u,Uo=s}function p1(u,s,c){hn[pn++]=tr,hn[pn++]=nr,hn[pn++]=ki,ki=u;var d=tr;u=nr;var m=32-Yt(d)-1;d&=~(1<<m),c+=1;var b=32-Yt(s)+m;if(30<b){var S=m-m%5;b=(d&(1<<S)-1).toString(32),d>>=S,m-=S,tr=1<<32-Yt(s)+m|c<<m|d,nr=b+u}else tr=1<<b|c<<m|d,nr=u}function Pf(u){u.return!==null&&(Si(u,1),p1(u,1,0))}function Jf(u){for(;u===Vo;)Vo=Al[--Tl],Al[Tl]=null,Uo=Al[--Tl],Al[Tl]=null;for(;u===ki;)ki=hn[--pn],hn[pn]=null,nr=hn[--pn],hn[pn]=null,tr=hn[--pn],hn[pn]=null}var At=null,He=null,Ee=!1,Ci=null,Fn=!1,Gf=Error(r(519));function vi(u){var s=Error(r(418,""));throw qu(fn(s,u)),Gf}function m1(u){var s=u.stateNode,c=u.type,d=u.memoizedProps;switch(s[yt]=u,s[Ft]=d,c){case"dialog":ye("cancel",s),ye("close",s);break;case"iframe":case"object":case"embed":ye("load",s);break;case"video":case"audio":for(c=0;c<fs.length;c++)ye(fs[c],s);break;case"source":ye("error",s);break;case"img":case"image":case"link":ye("error",s),ye("load",s);break;case"details":ye("toggle",s);break;case"input":ye("invalid",s),Om(s,d.value,d.defaultValue,d.checked,d.defaultChecked,d.type,d.name,!0),wo(s);break;case"select":ye("invalid",s);break;case"textarea":ye("invalid",s),Nm(s,d.value,d.defaultValue,d.children),wo(s)}c=d.children,typeof c!="string"&&typeof c!="number"&&typeof c!="bigint"||s.textContent===""+c||d.suppressHydrationWarning===!0||Nb(s.textContent,c)?(d.popover!=null&&(ye("beforetoggle",s),ye("toggle",s)),d.onScroll!=null&&ye("scroll",s),d.onScrollEnd!=null&&ye("scrollend",s),d.onClick!=null&&(s.onclick=va),s=!0):s=!1,s||vi(u)}function g1(u){for(At=u.return;At;)switch(At.tag){case 5:case 13:Fn=!1;return;case 27:case 3:Fn=!0;return;default:At=At.return}}function Lu(u){if(u!==At)return!1;if(!Ee)return g1(u),Ee=!0,!1;var s=u.tag,c;if((c=s!==3&&s!==27)&&((c=s===5)&&(c=u.type,c=!(c!=="form"&&c!=="button")||ah(u.type,u.memoizedProps)),c=!c),c&&He&&vi(u),g1(u),s===13){if(u=u.memoizedState,u=u!==null?u.dehydrated:null,!u)throw Error(r(317));e:{for(u=u.nextSibling,s=0;u;){if(u.nodeType===8)if(c=u.data,c==="/$"){if(s===0){He=Mn(u.nextSibling);break e}s--}else c!=="$"&&c!=="$!"&&c!=="$?"||s++;u=u.nextSibling}He=null}}else s===27?(s=He,Ir(u.type)?(u=hh,hh=null,He=u):He=s):He=At?Mn(u.stateNode.nextSibling):null;return!0}function Iu(){He=At=null,Ee=!1}function b1(){var u=Ci;return u!==null&&(Ht===null?Ht=u:Ht.push.apply(Ht,u),Ci=null),u}function qu(u){Ci===null?Ci=[u]:Ci.push(u)}var Kf=V(null),Ei=null,rr=null;function Er(u,s,c){J(Kf,s._currentValue),s._currentValue=c}function ir(u){u._currentValue=Kf.current,K(Kf)}function Yf(u,s,c){for(;u!==null;){var d=u.alternate;if((u.childLanes&s)!==s?(u.childLanes|=s,d!==null&&(d.childLanes|=s)):d!==null&&(d.childLanes&s)!==s&&(d.childLanes|=s),u===c)break;u=u.return}}function Zf(u,s,c,d){var m=u.child;for(m!==null&&(m.return=u);m!==null;){var b=m.dependencies;if(b!==null){var S=m.child;b=b.firstContext;e:for(;b!==null;){var v=b;b=m;for(var M=0;M<s.length;M++)if(v.context===s[M]){b.lanes|=c,v=b.alternate,v!==null&&(v.lanes|=c),Yf(b.return,c,u),d||(S=null);break e}b=v.next}}else if(m.tag===18){if(S=m.return,S===null)throw Error(r(341));S.lanes|=c,b=S.alternate,b!==null&&(b.lanes|=c),Yf(S,c,u),S=null}else S=m.child;if(S!==null)S.return=m;else for(S=m;S!==null;){if(S===u){S=null;break}if(m=S.sibling,m!==null){m.return=S.return,S=m;break}S=S.return}m=S}}function Hu(u,s,c,d){u=null;for(var m=s,b=!1;m!==null;){if(!b){if((m.flags&524288)!==0)b=!0;else if((m.flags&262144)!==0)break}if(m.tag===10){var S=m.alternate;if(S===null)throw Error(r(387));if(S=S.memoizedProps,S!==null){var v=m.type;Zt(m.pendingProps.value,S.value)||(u!==null?u.push(v):u=[v])}}else if(m===Gt.current){if(S=m.alternate,S===null)throw Error(r(387));S.memoizedState.memoizedState!==m.memoizedState.memoizedState&&(u!==null?u.push(bs):u=[bs])}m=m.return}u!==null&&Zf(s,u,c,d),s.flags|=262144}function jo(u){for(u=u.firstContext;u!==null;){if(!Zt(u.context._currentValue,u.memoizedValue))return!0;u=u.next}return!1}function Mi(u){Ei=u,rr=null,u=u.dependencies,u!==null&&(u.firstContext=null)}function xt(u){return y1(Ei,u)}function Po(u,s){return Ei===null&&Mi(u),y1(u,s)}function y1(u,s){var c=s._currentValue;if(s={context:s,memoizedValue:c,next:null},rr===null){if(u===null)throw Error(r(308));rr=s,u.dependencies={lanes:0,firstContext:s},u.flags|=524288}else rr=rr.next=s;return c}var nv=typeof AbortController<"u"?AbortController:function(){var u=[],s=this.signal={aborted:!1,addEventListener:function(c,d){u.push(d)}};this.abort=function(){s.aborted=!0,u.forEach(function(c){return c()})}},rv=n.unstable_scheduleCallback,iv=n.unstable_NormalPriority,Xe={$$typeof:B,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Xf(){return{controller:new nv,data:new Map,refCount:0}}function Vu(u){u.refCount--,u.refCount===0&&rv(iv,function(){u.controller.abort()})}var Uu=null,Qf=0,Dl=0,wl=null;function lv(u,s){if(Uu===null){var c=Uu=[];Qf=0,Dl=eh(),wl={status:"pending",value:void 0,then:function(d){c.push(d)}}}return Qf++,s.then(x1,x1),s}function x1(){if(--Qf===0&&Uu!==null){wl!==null&&(wl.status="fulfilled");var u=Uu;Uu=null,Dl=0,wl=null;for(var s=0;s<u.length;s++)(0,u[s])()}}function uv(u,s){var c=[],d={status:"pending",value:null,reason:null,then:function(m){c.push(m)}};return u.then(function(){d.status="fulfilled",d.value=s;for(var m=0;m<c.length;m++)(0,c[m])(s)},function(m){for(d.status="rejected",d.reason=m,m=0;m<c.length;m++)(0,c[m])(void 0)}),d}var k1=$.S;$.S=function(u,s){typeof s=="object"&&s!==null&&typeof s.then=="function"&&lv(u,s),k1!==null&&k1(u,s)};var Ai=V(null);function Wf(){var u=Ai.current;return u!==null?u:Re.pooledCache}function Jo(u,s){s===null?J(Ai,Ai.current):J(Ai,s.pool)}function S1(){var u=Wf();return u===null?null:{parent:Xe._currentValue,pool:u}}var ju=Error(r(460)),C1=Error(r(474)),Go=Error(r(542)),ed={then:function(){}};function v1(u){return u=u.status,u==="fulfilled"||u==="rejected"}function Ko(){}function E1(u,s,c){switch(c=u[c],c===void 0?u.push(s):c!==s&&(s.then(Ko,Ko),s=c),s.status){case"fulfilled":return s.value;case"rejected":throw u=s.reason,A1(u),u;default:if(typeof s.status=="string")s.then(Ko,Ko);else{if(u=Re,u!==null&&100<u.shellSuspendCounter)throw Error(r(482));u=s,u.status="pending",u.then(function(d){if(s.status==="pending"){var m=s;m.status="fulfilled",m.value=d}},function(d){if(s.status==="pending"){var m=s;m.status="rejected",m.reason=d}})}switch(s.status){case"fulfilled":return s.value;case"rejected":throw u=s.reason,A1(u),u}throw Pu=s,ju}}var Pu=null;function M1(){if(Pu===null)throw Error(r(459));var u=Pu;return Pu=null,u}function A1(u){if(u===ju||u===Go)throw Error(r(483))}var Mr=!1;function td(u){u.updateQueue={baseState:u.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function nd(u,s){u=u.updateQueue,s.updateQueue===u&&(s.updateQueue={baseState:u.baseState,firstBaseUpdate:u.firstBaseUpdate,lastBaseUpdate:u.lastBaseUpdate,shared:u.shared,callbacks:null})}function Ar(u){return{lane:u,tag:0,payload:null,callback:null,next:null}}function Tr(u,s,c){var d=u.updateQueue;if(d===null)return null;if(d=d.shared,(Ae&2)!==0){var m=d.pending;return m===null?s.next=s:(s.next=m.next,m.next=s),d.pending=s,s=qo(u),d1(u,null,c),s}return Io(u,d,s,c),qo(u)}function Ju(u,s,c){if(s=s.updateQueue,s!==null&&(s=s.shared,(c&4194048)!==0)){var d=s.lanes;d&=u.pendingLanes,c|=d,s.lanes=c,xm(u,c)}}function rd(u,s){var c=u.updateQueue,d=u.alternate;if(d!==null&&(d=d.updateQueue,c===d)){var m=null,b=null;if(c=c.firstBaseUpdate,c!==null){do{var S={lane:c.lane,tag:c.tag,payload:c.payload,callback:null,next:null};b===null?m=b=S:b=b.next=S,c=c.next}while(c!==null);b===null?m=b=s:b=b.next=s}else m=b=s;c={baseState:d.baseState,firstBaseUpdate:m,lastBaseUpdate:b,shared:d.shared,callbacks:d.callbacks},u.updateQueue=c;return}u=c.lastBaseUpdate,u===null?c.firstBaseUpdate=s:u.next=s,c.lastBaseUpdate=s}var id=!1;function Gu(){if(id){var u=wl;if(u!==null)throw u}}function Ku(u,s,c,d){id=!1;var m=u.updateQueue;Mr=!1;var b=m.firstBaseUpdate,S=m.lastBaseUpdate,v=m.shared.pending;if(v!==null){m.shared.pending=null;var M=v,_=M.next;M.next=null,S===null?b=_:S.next=_,S=M;var F=u.alternate;F!==null&&(F=F.updateQueue,v=F.lastBaseUpdate,v!==S&&(v===null?F.firstBaseUpdate=_:v.next=_,F.lastBaseUpdate=M))}if(b!==null){var q=m.baseState;S=0,F=_=M=null,v=b;do{var R=v.lane&-536870913,z=R!==v.lane;if(z?(ke&R)===R:(d&R)===R){R!==0&&R===Dl&&(id=!0),F!==null&&(F=F.next={lane:0,tag:v.tag,payload:v.payload,callback:null,next:null});e:{var se=u,ie=v;R=s;var Oe=c;switch(ie.tag){case 1:if(se=ie.payload,typeof se=="function"){q=se.call(Oe,q,R);break e}q=se;break e;case 3:se.flags=se.flags&-65537|128;case 0:if(se=ie.payload,R=typeof se=="function"?se.call(Oe,q,R):se,R==null)break e;q=p({},q,R);break e;case 2:Mr=!0}}R=v.callback,R!==null&&(u.flags|=64,z&&(u.flags|=8192),z=m.callbacks,z===null?m.callbacks=[R]:z.push(R))}else z={lane:R,tag:v.tag,payload:v.payload,callback:v.callback,next:null},F===null?(_=F=z,M=q):F=F.next=z,S|=R;if(v=v.next,v===null){if(v=m.shared.pending,v===null)break;z=v,v=z.next,z.next=null,m.lastBaseUpdate=z,m.shared.pending=null}}while(!0);F===null&&(M=q),m.baseState=M,m.firstBaseUpdate=_,m.lastBaseUpdate=F,b===null&&(m.shared.lanes=0),Br|=S,u.lanes=S,u.memoizedState=q}}function T1(u,s){if(typeof u!="function")throw Error(r(191,u));u.call(s)}function D1(u,s){var c=u.callbacks;if(c!==null)for(u.callbacks=null,u=0;u<c.length;u++)T1(c[u],s)}var Ol=V(null),Yo=V(0);function w1(u,s){u=fr,J(Yo,u),J(Ol,s),fr=u|s.baseLanes}function ld(){J(Yo,fr),J(Ol,Ol.current)}function ud(){fr=Yo.current,K(Ol),K(Yo)}var Dr=0,pe=null,De=null,Ke=null,Zo=!1,_l=!1,Ti=!1,Xo=0,Yu=0,Nl=null,sv=0;function Pe(){throw Error(r(321))}function sd(u,s){if(s===null)return!1;for(var c=0;c<s.length&&c<u.length;c++)if(!Zt(u[c],s[c]))return!1;return!0}function od(u,s,c,d,m,b){return Dr=b,pe=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,$.H=u===null||u.memoizedState===null?dg:hg,Ti=!1,b=c(d,m),Ti=!1,_l&&(b=_1(s,c,d,m)),O1(u),b}function O1(u){$.H=ra;var s=De!==null&&De.next!==null;if(Dr=0,Ke=De=pe=null,Zo=!1,Yu=0,Nl=null,s)throw Error(r(300));u===null||rt||(u=u.dependencies,u!==null&&jo(u)&&(rt=!0))}function _1(u,s,c,d){pe=u;var m=0;do{if(_l&&(Nl=null),Yu=0,_l=!1,25<=m)throw Error(r(301));if(m+=1,Ke=De=null,u.updateQueue!=null){var b=u.updateQueue;b.lastEffect=null,b.events=null,b.stores=null,b.memoCache!=null&&(b.memoCache.index=0)}$.H=pv,b=s(c,d)}while(_l);return b}function ov(){var u=$.H,s=u.useState()[0];return s=typeof s.then=="function"?Zu(s):s,u=u.useState()[0],(De!==null?De.memoizedState:null)!==u&&(pe.flags|=1024),s}function ad(){var u=Xo!==0;return Xo=0,u}function cd(u,s,c){s.updateQueue=u.updateQueue,s.flags&=-2053,u.lanes&=~c}function fd(u){if(Zo){for(u=u.memoizedState;u!==null;){var s=u.queue;s!==null&&(s.pending=null),u=u.next}Zo=!1}Dr=0,Ke=De=pe=null,_l=!1,Yu=Xo=0,Nl=null}function It(){var u={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ke===null?pe.memoizedState=Ke=u:Ke=Ke.next=u,Ke}function Ye(){if(De===null){var u=pe.alternate;u=u!==null?u.memoizedState:null}else u=De.next;var s=Ke===null?pe.memoizedState:Ke.next;if(s!==null)Ke=s,De=u;else{if(u===null)throw pe.alternate===null?Error(r(467)):Error(r(310));De=u,u={memoizedState:De.memoizedState,baseState:De.baseState,baseQueue:De.baseQueue,queue:De.queue,next:null},Ke===null?pe.memoizedState=Ke=u:Ke=Ke.next=u}return Ke}function dd(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Zu(u){var s=Yu;return Yu+=1,Nl===null&&(Nl=[]),u=E1(Nl,u,s),s=pe,(Ke===null?s.memoizedState:Ke.next)===null&&(s=s.alternate,$.H=s===null||s.memoizedState===null?dg:hg),u}function Qo(u){if(u!==null&&typeof u=="object"){if(typeof u.then=="function")return Zu(u);if(u.$$typeof===B)return xt(u)}throw Error(r(438,String(u)))}function hd(u){var s=null,c=pe.updateQueue;if(c!==null&&(s=c.memoCache),s==null){var d=pe.alternate;d!==null&&(d=d.updateQueue,d!==null&&(d=d.memoCache,d!=null&&(s={data:d.data.map(function(m){return m.slice()}),index:0})))}if(s==null&&(s={data:[],index:0}),c===null&&(c=dd(),pe.updateQueue=c),c.memoCache=s,c=s.data[s.index],c===void 0)for(c=s.data[s.index]=Array(u),d=0;d<u;d++)c[d]=je;return s.index++,c}function lr(u,s){return typeof s=="function"?s(u):s}function Wo(u){var s=Ye();return pd(s,De,u)}function pd(u,s,c){var d=u.queue;if(d===null)throw Error(r(311));d.lastRenderedReducer=c;var m=u.baseQueue,b=d.pending;if(b!==null){if(m!==null){var S=m.next;m.next=b.next,b.next=S}s.baseQueue=m=b,d.pending=null}if(b=u.baseState,m===null)u.memoizedState=b;else{s=m.next;var v=S=null,M=null,_=s,F=!1;do{var q=_.lane&-536870913;if(q!==_.lane?(ke&q)===q:(Dr&q)===q){var R=_.revertLane;if(R===0)M!==null&&(M=M.next={lane:0,revertLane:0,action:_.action,hasEagerState:_.hasEagerState,eagerState:_.eagerState,next:null}),q===Dl&&(F=!0);else if((Dr&R)===R){_=_.next,R===Dl&&(F=!0);continue}else q={lane:0,revertLane:_.revertLane,action:_.action,hasEagerState:_.hasEagerState,eagerState:_.eagerState,next:null},M===null?(v=M=q,S=b):M=M.next=q,pe.lanes|=R,Br|=R;q=_.action,Ti&&c(b,q),b=_.hasEagerState?_.eagerState:c(b,q)}else R={lane:q,revertLane:_.revertLane,action:_.action,hasEagerState:_.hasEagerState,eagerState:_.eagerState,next:null},M===null?(v=M=R,S=b):M=M.next=R,pe.lanes|=q,Br|=q;_=_.next}while(_!==null&&_!==s);if(M===null?S=b:M.next=v,!Zt(b,u.memoizedState)&&(rt=!0,F&&(c=wl,c!==null)))throw c;u.memoizedState=b,u.baseState=S,u.baseQueue=M,d.lastRenderedState=b}return m===null&&(d.lanes=0),[u.memoizedState,d.dispatch]}function md(u){var s=Ye(),c=s.queue;if(c===null)throw Error(r(311));c.lastRenderedReducer=u;var d=c.dispatch,m=c.pending,b=s.memoizedState;if(m!==null){c.pending=null;var S=m=m.next;do b=u(b,S.action),S=S.next;while(S!==m);Zt(b,s.memoizedState)||(rt=!0),s.memoizedState=b,s.baseQueue===null&&(s.baseState=b),c.lastRenderedState=b}return[b,d]}function N1(u,s,c){var d=pe,m=Ye(),b=Ee;if(b){if(c===void 0)throw Error(r(407));c=c()}else c=s();var S=!Zt((De||m).memoizedState,c);S&&(m.memoizedState=c,rt=!0),m=m.queue;var v=B1.bind(null,d,m,u);if(Xu(2048,8,v,[u]),m.getSnapshot!==s||S||Ke!==null&&Ke.memoizedState.tag&1){if(d.flags|=2048,Rl(9,ea(),z1.bind(null,d,m,c,s),null),Re===null)throw Error(r(349));b||(Dr&124)!==0||R1(d,s,c)}return c}function R1(u,s,c){u.flags|=16384,u={getSnapshot:s,value:c},s=pe.updateQueue,s===null?(s=dd(),pe.updateQueue=s,s.stores=[u]):(c=s.stores,c===null?s.stores=[u]:c.push(u))}function z1(u,s,c,d){s.value=c,s.getSnapshot=d,$1(s)&&F1(u)}function B1(u,s,c){return c(function(){$1(s)&&F1(u)})}function $1(u){var s=u.getSnapshot;u=u.value;try{var c=s();return!Zt(u,c)}catch{return!0}}function F1(u){var s=El(u,2);s!==null&&nn(s,u,2)}function gd(u){var s=It();if(typeof u=="function"){var c=u;if(u=c(),Ti){Sr(!0);try{c()}finally{Sr(!1)}}}return s.memoizedState=s.baseState=u,s.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:lr,lastRenderedState:u},s}function L1(u,s,c,d){return u.baseState=c,pd(u,De,typeof d=="function"?d:lr)}function av(u,s,c,d,m){if(na(u))throw Error(r(485));if(u=s.action,u!==null){var b={payload:m,action:u,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(S){b.listeners.push(S)}};$.T!==null?c(!0):b.isTransition=!1,d(b),c=s.pending,c===null?(b.next=s.pending=b,I1(s,b)):(b.next=c.next,s.pending=c.next=b)}}function I1(u,s){var c=s.action,d=s.payload,m=u.state;if(s.isTransition){var b=$.T,S={};$.T=S;try{var v=c(m,d),M=$.S;M!==null&&M(S,v),q1(u,s,v)}catch(_){bd(u,s,_)}finally{$.T=b}}else try{b=c(m,d),q1(u,s,b)}catch(_){bd(u,s,_)}}function q1(u,s,c){c!==null&&typeof c=="object"&&typeof c.then=="function"?c.then(function(d){H1(u,s,d)},function(d){return bd(u,s,d)}):H1(u,s,c)}function H1(u,s,c){s.status="fulfilled",s.value=c,V1(s),u.state=c,s=u.pending,s!==null&&(c=s.next,c===s?u.pending=null:(c=c.next,s.next=c,I1(u,c)))}function bd(u,s,c){var d=u.pending;if(u.pending=null,d!==null){d=d.next;do s.status="rejected",s.reason=c,V1(s),s=s.next;while(s!==d)}u.action=null}function V1(u){u=u.listeners;for(var s=0;s<u.length;s++)(0,u[s])()}function U1(u,s){return s}function j1(u,s){if(Ee){var c=Re.formState;if(c!==null){e:{var d=pe;if(Ee){if(He){t:{for(var m=He,b=Fn;m.nodeType!==8;){if(!b){m=null;break t}if(m=Mn(m.nextSibling),m===null){m=null;break t}}b=m.data,m=b==="F!"||b==="F"?m:null}if(m){He=Mn(m.nextSibling),d=m.data==="F!";break e}}vi(d)}d=!1}d&&(s=c[0])}}return c=It(),c.memoizedState=c.baseState=s,d={pending:null,lanes:0,dispatch:null,lastRenderedReducer:U1,lastRenderedState:s},c.queue=d,c=ag.bind(null,pe,d),d.dispatch=c,d=gd(!1),b=Cd.bind(null,pe,!1,d.queue),d=It(),m={state:s,dispatch:null,action:u,pending:null},d.queue=m,c=av.bind(null,pe,m,b,c),m.dispatch=c,d.memoizedState=u,[s,c,!1]}function P1(u){var s=Ye();return J1(s,De,u)}function J1(u,s,c){if(s=pd(u,s,U1)[0],u=Wo(lr)[0],typeof s=="object"&&s!==null&&typeof s.then=="function")try{var d=Zu(s)}catch(S){throw S===ju?Go:S}else d=s;s=Ye();var m=s.queue,b=m.dispatch;return c!==s.memoizedState&&(pe.flags|=2048,Rl(9,ea(),cv.bind(null,m,c),null)),[d,b,u]}function cv(u,s){u.action=s}function G1(u){var s=Ye(),c=De;if(c!==null)return J1(s,c,u);Ye(),s=s.memoizedState,c=Ye();var d=c.queue.dispatch;return c.memoizedState=u,[s,d,!1]}function Rl(u,s,c,d){return u={tag:u,create:c,deps:d,inst:s,next:null},s=pe.updateQueue,s===null&&(s=dd(),pe.updateQueue=s),c=s.lastEffect,c===null?s.lastEffect=u.next=u:(d=c.next,c.next=u,u.next=d,s.lastEffect=u),u}function ea(){return{destroy:void 0,resource:void 0}}function K1(){return Ye().memoizedState}function ta(u,s,c,d){var m=It();d=d===void 0?null:d,pe.flags|=u,m.memoizedState=Rl(1|s,ea(),c,d)}function Xu(u,s,c,d){var m=Ye();d=d===void 0?null:d;var b=m.memoizedState.inst;De!==null&&d!==null&&sd(d,De.memoizedState.deps)?m.memoizedState=Rl(s,b,c,d):(pe.flags|=u,m.memoizedState=Rl(1|s,b,c,d))}function Y1(u,s){ta(8390656,8,u,s)}function Z1(u,s){Xu(2048,8,u,s)}function X1(u,s){return Xu(4,2,u,s)}function Q1(u,s){return Xu(4,4,u,s)}function W1(u,s){if(typeof s=="function"){u=u();var c=s(u);return function(){typeof c=="function"?c():s(null)}}if(s!=null)return u=u(),s.current=u,function(){s.current=null}}function eg(u,s,c){c=c!=null?c.concat([u]):null,Xu(4,4,W1.bind(null,s,u),c)}function yd(){}function tg(u,s){var c=Ye();s=s===void 0?null:s;var d=c.memoizedState;return s!==null&&sd(s,d[1])?d[0]:(c.memoizedState=[u,s],u)}function ng(u,s){var c=Ye();s=s===void 0?null:s;var d=c.memoizedState;if(s!==null&&sd(s,d[1]))return d[0];if(d=u(),Ti){Sr(!0);try{u()}finally{Sr(!1)}}return c.memoizedState=[d,s],d}function xd(u,s,c){return c===void 0||(Dr&1073741824)!==0?u.memoizedState=s:(u.memoizedState=c,u=lb(),pe.lanes|=u,Br|=u,c)}function rg(u,s,c,d){return Zt(c,s)?c:Ol.current!==null?(u=xd(u,c,d),Zt(u,s)||(rt=!0),u):(Dr&42)===0?(rt=!0,u.memoizedState=c):(u=lb(),pe.lanes|=u,Br|=u,s)}function ig(u,s,c,d,m){var b=G.p;G.p=b!==0&&8>b?b:8;var S=$.T,v={};$.T=v,Cd(u,!1,s,c);try{var M=m(),_=$.S;if(_!==null&&_(v,M),M!==null&&typeof M=="object"&&typeof M.then=="function"){var F=uv(M,d);Qu(u,s,F,tn(u))}else Qu(u,s,d,tn(u))}catch(q){Qu(u,s,{then:function(){},status:"rejected",reason:q},tn())}finally{G.p=b,$.T=S}}function fv(){}function kd(u,s,c,d){if(u.tag!==5)throw Error(r(476));var m=lg(u).queue;ig(u,m,s,ue,c===null?fv:function(){return ug(u),c(d)})}function lg(u){var s=u.memoizedState;if(s!==null)return s;s={memoizedState:ue,baseState:ue,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:lr,lastRenderedState:ue},next:null};var c={};return s.next={memoizedState:c,baseState:c,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:lr,lastRenderedState:c},next:null},u.memoizedState=s,u=u.alternate,u!==null&&(u.memoizedState=s),s}function ug(u){var s=lg(u).next.queue;Qu(u,s,{},tn())}function Sd(){return xt(bs)}function sg(){return Ye().memoizedState}function og(){return Ye().memoizedState}function dv(u){for(var s=u.return;s!==null;){switch(s.tag){case 24:case 3:var c=tn();u=Ar(c);var d=Tr(s,u,c);d!==null&&(nn(d,s,c),Ju(d,s,c)),s={cache:Xf()},u.payload=s;return}s=s.return}}function hv(u,s,c){var d=tn();c={lane:d,revertLane:0,action:c,hasEagerState:!1,eagerState:null,next:null},na(u)?cg(s,c):(c=Hf(u,s,c,d),c!==null&&(nn(c,u,d),fg(c,s,d)))}function ag(u,s,c){var d=tn();Qu(u,s,c,d)}function Qu(u,s,c,d){var m={lane:d,revertLane:0,action:c,hasEagerState:!1,eagerState:null,next:null};if(na(u))cg(s,m);else{var b=u.alternate;if(u.lanes===0&&(b===null||b.lanes===0)&&(b=s.lastRenderedReducer,b!==null))try{var S=s.lastRenderedState,v=b(S,c);if(m.hasEagerState=!0,m.eagerState=v,Zt(v,S))return Io(u,s,m,0),Re===null&&Lo(),!1}catch{}finally{}if(c=Hf(u,s,m,d),c!==null)return nn(c,u,d),fg(c,s,d),!0}return!1}function Cd(u,s,c,d){if(d={lane:2,revertLane:eh(),action:d,hasEagerState:!1,eagerState:null,next:null},na(u)){if(s)throw Error(r(479))}else s=Hf(u,c,d,2),s!==null&&nn(s,u,2)}function na(u){var s=u.alternate;return u===pe||s!==null&&s===pe}function cg(u,s){_l=Zo=!0;var c=u.pending;c===null?s.next=s:(s.next=c.next,c.next=s),u.pending=s}function fg(u,s,c){if((c&4194048)!==0){var d=s.lanes;d&=u.pendingLanes,c|=d,s.lanes=c,xm(u,c)}}var ra={readContext:xt,use:Qo,useCallback:Pe,useContext:Pe,useEffect:Pe,useImperativeHandle:Pe,useLayoutEffect:Pe,useInsertionEffect:Pe,useMemo:Pe,useReducer:Pe,useRef:Pe,useState:Pe,useDebugValue:Pe,useDeferredValue:Pe,useTransition:Pe,useSyncExternalStore:Pe,useId:Pe,useHostTransitionStatus:Pe,useFormState:Pe,useActionState:Pe,useOptimistic:Pe,useMemoCache:Pe,useCacheRefresh:Pe},dg={readContext:xt,use:Qo,useCallback:function(u,s){return It().memoizedState=[u,s===void 0?null:s],u},useContext:xt,useEffect:Y1,useImperativeHandle:function(u,s,c){c=c!=null?c.concat([u]):null,ta(4194308,4,W1.bind(null,s,u),c)},useLayoutEffect:function(u,s){return ta(4194308,4,u,s)},useInsertionEffect:function(u,s){ta(4,2,u,s)},useMemo:function(u,s){var c=It();s=s===void 0?null:s;var d=u();if(Ti){Sr(!0);try{u()}finally{Sr(!1)}}return c.memoizedState=[d,s],d},useReducer:function(u,s,c){var d=It();if(c!==void 0){var m=c(s);if(Ti){Sr(!0);try{c(s)}finally{Sr(!1)}}}else m=s;return d.memoizedState=d.baseState=m,u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:u,lastRenderedState:m},d.queue=u,u=u.dispatch=hv.bind(null,pe,u),[d.memoizedState,u]},useRef:function(u){var s=It();return u={current:u},s.memoizedState=u},useState:function(u){u=gd(u);var s=u.queue,c=ag.bind(null,pe,s);return s.dispatch=c,[u.memoizedState,c]},useDebugValue:yd,useDeferredValue:function(u,s){var c=It();return xd(c,u,s)},useTransition:function(){var u=gd(!1);return u=ig.bind(null,pe,u.queue,!0,!1),It().memoizedState=u,[!1,u]},useSyncExternalStore:function(u,s,c){var d=pe,m=It();if(Ee){if(c===void 0)throw Error(r(407));c=c()}else{if(c=s(),Re===null)throw Error(r(349));(ke&124)!==0||R1(d,s,c)}m.memoizedState=c;var b={value:c,getSnapshot:s};return m.queue=b,Y1(B1.bind(null,d,b,u),[u]),d.flags|=2048,Rl(9,ea(),z1.bind(null,d,b,c,s),null),c},useId:function(){var u=It(),s=Re.identifierPrefix;if(Ee){var c=nr,d=tr;c=(d&~(1<<32-Yt(d)-1)).toString(32)+c,s=""+s+"R"+c,c=Xo++,0<c&&(s+="H"+c.toString(32)),s+=""}else c=sv++,s=""+s+"r"+c.toString(32)+"";return u.memoizedState=s},useHostTransitionStatus:Sd,useFormState:j1,useActionState:j1,useOptimistic:function(u){var s=It();s.memoizedState=s.baseState=u;var c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return s.queue=c,s=Cd.bind(null,pe,!0,c),c.dispatch=s,[u,s]},useMemoCache:hd,useCacheRefresh:function(){return It().memoizedState=dv.bind(null,pe)}},hg={readContext:xt,use:Qo,useCallback:tg,useContext:xt,useEffect:Z1,useImperativeHandle:eg,useInsertionEffect:X1,useLayoutEffect:Q1,useMemo:ng,useReducer:Wo,useRef:K1,useState:function(){return Wo(lr)},useDebugValue:yd,useDeferredValue:function(u,s){var c=Ye();return rg(c,De.memoizedState,u,s)},useTransition:function(){var u=Wo(lr)[0],s=Ye().memoizedState;return[typeof u=="boolean"?u:Zu(u),s]},useSyncExternalStore:N1,useId:sg,useHostTransitionStatus:Sd,useFormState:P1,useActionState:P1,useOptimistic:function(u,s){var c=Ye();return L1(c,De,u,s)},useMemoCache:hd,useCacheRefresh:og},pv={readContext:xt,use:Qo,useCallback:tg,useContext:xt,useEffect:Z1,useImperativeHandle:eg,useInsertionEffect:X1,useLayoutEffect:Q1,useMemo:ng,useReducer:md,useRef:K1,useState:function(){return md(lr)},useDebugValue:yd,useDeferredValue:function(u,s){var c=Ye();return De===null?xd(c,u,s):rg(c,De.memoizedState,u,s)},useTransition:function(){var u=md(lr)[0],s=Ye().memoizedState;return[typeof u=="boolean"?u:Zu(u),s]},useSyncExternalStore:N1,useId:sg,useHostTransitionStatus:Sd,useFormState:G1,useActionState:G1,useOptimistic:function(u,s){var c=Ye();return De!==null?L1(c,De,u,s):(c.baseState=u,[u,c.queue.dispatch])},useMemoCache:hd,useCacheRefresh:og},zl=null,Wu=0;function ia(u){var s=Wu;return Wu+=1,zl===null&&(zl=[]),E1(zl,u,s)}function es(u,s){s=s.props.ref,u.ref=s!==void 0?s:null}function la(u,s){throw s.$$typeof===g?Error(r(525)):(u=Object.prototype.toString.call(s),Error(r(31,u==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":u)))}function pg(u){var s=u._init;return s(u._payload)}function mg(u){function s(w,D){if(u){var O=w.deletions;O===null?(w.deletions=[D],w.flags|=16):O.push(D)}}function c(w,D){if(!u)return null;for(;D!==null;)s(w,D),D=D.sibling;return null}function d(w){for(var D=new Map;w!==null;)w.key!==null?D.set(w.key,w):D.set(w.index,w),w=w.sibling;return D}function m(w,D){return w=er(w,D),w.index=0,w.sibling=null,w}function b(w,D,O){return w.index=O,u?(O=w.alternate,O!==null?(O=O.index,O<D?(w.flags|=67108866,D):O):(w.flags|=67108866,D)):(w.flags|=1048576,D)}function S(w){return u&&w.alternate===null&&(w.flags|=67108866),w}function v(w,D,O,I){return D===null||D.tag!==6?(D=Uf(O,w.mode,I),D.return=w,D):(D=m(D,O),D.return=w,D)}function M(w,D,O,I){var Z=O.type;return Z===k?F(w,D,O.props.children,I,O.key):D!==null&&(D.elementType===Z||typeof Z=="object"&&Z!==null&&Z.$$typeof===ne&&pg(Z)===D.type)?(D=m(D,O.props),es(D,O),D.return=w,D):(D=Ho(O.type,O.key,O.props,null,w.mode,I),es(D,O),D.return=w,D)}function _(w,D,O,I){return D===null||D.tag!==4||D.stateNode.containerInfo!==O.containerInfo||D.stateNode.implementation!==O.implementation?(D=jf(O,w.mode,I),D.return=w,D):(D=m(D,O.children||[]),D.return=w,D)}function F(w,D,O,I,Z){return D===null||D.tag!==7?(D=xi(O,w.mode,I,Z),D.return=w,D):(D=m(D,O),D.return=w,D)}function q(w,D,O){if(typeof D=="string"&&D!==""||typeof D=="number"||typeof D=="bigint")return D=Uf(""+D,w.mode,O),D.return=w,D;if(typeof D=="object"&&D!==null){switch(D.$$typeof){case y:return O=Ho(D.type,D.key,D.props,null,w.mode,O),es(O,D),O.return=w,O;case x:return D=jf(D,w.mode,O),D.return=w,D;case ne:var I=D._init;return D=I(D._payload),q(w,D,O)}if(Ie(D)||Ge(D))return D=xi(D,w.mode,O,null),D.return=w,D;if(typeof D.then=="function")return q(w,ia(D),O);if(D.$$typeof===B)return q(w,Po(w,D),O);la(w,D)}return null}function R(w,D,O,I){var Z=D!==null?D.key:null;if(typeof O=="string"&&O!==""||typeof O=="number"||typeof O=="bigint")return Z!==null?null:v(w,D,""+O,I);if(typeof O=="object"&&O!==null){switch(O.$$typeof){case y:return O.key===Z?M(w,D,O,I):null;case x:return O.key===Z?_(w,D,O,I):null;case ne:return Z=O._init,O=Z(O._payload),R(w,D,O,I)}if(Ie(O)||Ge(O))return Z!==null?null:F(w,D,O,I,null);if(typeof O.then=="function")return R(w,D,ia(O),I);if(O.$$typeof===B)return R(w,D,Po(w,O),I);la(w,O)}return null}function z(w,D,O,I,Z){if(typeof I=="string"&&I!==""||typeof I=="number"||typeof I=="bigint")return w=w.get(O)||null,v(D,w,""+I,Z);if(typeof I=="object"&&I!==null){switch(I.$$typeof){case y:return w=w.get(I.key===null?O:I.key)||null,M(D,w,I,Z);case x:return w=w.get(I.key===null?O:I.key)||null,_(D,w,I,Z);case ne:var ge=I._init;return I=ge(I._payload),z(w,D,O,I,Z)}if(Ie(I)||Ge(I))return w=w.get(O)||null,F(D,w,I,Z,null);if(typeof I.then=="function")return z(w,D,O,ia(I),Z);if(I.$$typeof===B)return z(w,D,O,Po(D,I),Z);la(D,I)}return null}function se(w,D,O,I){for(var Z=null,ge=null,W=D,le=D=0,lt=null;W!==null&&le<O.length;le++){W.index>le?(lt=W,W=null):lt=W.sibling;var Ce=R(w,W,O[le],I);if(Ce===null){W===null&&(W=lt);break}u&&W&&Ce.alternate===null&&s(w,W),D=b(Ce,D,le),ge===null?Z=Ce:ge.sibling=Ce,ge=Ce,W=lt}if(le===O.length)return c(w,W),Ee&&Si(w,le),Z;if(W===null){for(;le<O.length;le++)W=q(w,O[le],I),W!==null&&(D=b(W,D,le),ge===null?Z=W:ge.sibling=W,ge=W);return Ee&&Si(w,le),Z}for(W=d(W);le<O.length;le++)lt=z(W,w,le,O[le],I),lt!==null&&(u&&lt.alternate!==null&&W.delete(lt.key===null?le:lt.key),D=b(lt,D,le),ge===null?Z=lt:ge.sibling=lt,ge=lt);return u&&W.forEach(function(jr){return s(w,jr)}),Ee&&Si(w,le),Z}function ie(w,D,O,I){if(O==null)throw Error(r(151));for(var Z=null,ge=null,W=D,le=D=0,lt=null,Ce=O.next();W!==null&&!Ce.done;le++,Ce=O.next()){W.index>le?(lt=W,W=null):lt=W.sibling;var jr=R(w,W,Ce.value,I);if(jr===null){W===null&&(W=lt);break}u&&W&&jr.alternate===null&&s(w,W),D=b(jr,D,le),ge===null?Z=jr:ge.sibling=jr,ge=jr,W=lt}if(Ce.done)return c(w,W),Ee&&Si(w,le),Z;if(W===null){for(;!Ce.done;le++,Ce=O.next())Ce=q(w,Ce.value,I),Ce!==null&&(D=b(Ce,D,le),ge===null?Z=Ce:ge.sibling=Ce,ge=Ce);return Ee&&Si(w,le),Z}for(W=d(W);!Ce.done;le++,Ce=O.next())Ce=z(W,w,le,Ce.value,I),Ce!==null&&(u&&Ce.alternate!==null&&W.delete(Ce.key===null?le:Ce.key),D=b(Ce,D,le),ge===null?Z=Ce:ge.sibling=Ce,ge=Ce);return u&&W.forEach(function(m4){return s(w,m4)}),Ee&&Si(w,le),Z}function Oe(w,D,O,I){if(typeof O=="object"&&O!==null&&O.type===k&&O.key===null&&(O=O.props.children),typeof O=="object"&&O!==null){switch(O.$$typeof){case y:e:{for(var Z=O.key;D!==null;){if(D.key===Z){if(Z=O.type,Z===k){if(D.tag===7){c(w,D.sibling),I=m(D,O.props.children),I.return=w,w=I;break e}}else if(D.elementType===Z||typeof Z=="object"&&Z!==null&&Z.$$typeof===ne&&pg(Z)===D.type){c(w,D.sibling),I=m(D,O.props),es(I,O),I.return=w,w=I;break e}c(w,D);break}else s(w,D);D=D.sibling}O.type===k?(I=xi(O.props.children,w.mode,I,O.key),I.return=w,w=I):(I=Ho(O.type,O.key,O.props,null,w.mode,I),es(I,O),I.return=w,w=I)}return S(w);case x:e:{for(Z=O.key;D!==null;){if(D.key===Z)if(D.tag===4&&D.stateNode.containerInfo===O.containerInfo&&D.stateNode.implementation===O.implementation){c(w,D.sibling),I=m(D,O.children||[]),I.return=w,w=I;break e}else{c(w,D);break}else s(w,D);D=D.sibling}I=jf(O,w.mode,I),I.return=w,w=I}return S(w);case ne:return Z=O._init,O=Z(O._payload),Oe(w,D,O,I)}if(Ie(O))return se(w,D,O,I);if(Ge(O)){if(Z=Ge(O),typeof Z!="function")throw Error(r(150));return O=Z.call(O),ie(w,D,O,I)}if(typeof O.then=="function")return Oe(w,D,ia(O),I);if(O.$$typeof===B)return Oe(w,D,Po(w,O),I);la(w,O)}return typeof O=="string"&&O!==""||typeof O=="number"||typeof O=="bigint"?(O=""+O,D!==null&&D.tag===6?(c(w,D.sibling),I=m(D,O),I.return=w,w=I):(c(w,D),I=Uf(O,w.mode,I),I.return=w,w=I),S(w)):c(w,D)}return function(w,D,O,I){try{Wu=0;var Z=Oe(w,D,O,I);return zl=null,Z}catch(W){if(W===ju||W===Go)throw W;var ge=Xt(29,W,null,w.mode);return ge.lanes=I,ge.return=w,ge}finally{}}}var Bl=mg(!0),gg=mg(!1),mn=V(null),Ln=null;function wr(u){var s=u.alternate;J(Qe,Qe.current&1),J(mn,u),Ln===null&&(s===null||Ol.current!==null||s.memoizedState!==null)&&(Ln=u)}function bg(u){if(u.tag===22){if(J(Qe,Qe.current),J(mn,u),Ln===null){var s=u.alternate;s!==null&&s.memoizedState!==null&&(Ln=u)}}else Or()}function Or(){J(Qe,Qe.current),J(mn,mn.current)}function ur(u){K(mn),Ln===u&&(Ln=null),K(Qe)}var Qe=V(0);function ua(u){for(var s=u;s!==null;){if(s.tag===13){var c=s.memoizedState;if(c!==null&&(c=c.dehydrated,c===null||c.data==="$?"||dh(c)))return s}else if(s.tag===19&&s.memoizedProps.revealOrder!==void 0){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===u)break;for(;s.sibling===null;){if(s.return===null||s.return===u)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}function vd(u,s,c,d){s=u.memoizedState,c=c(d,s),c=c==null?s:p({},s,c),u.memoizedState=c,u.lanes===0&&(u.updateQueue.baseState=c)}var Ed={enqueueSetState:function(u,s,c){u=u._reactInternals;var d=tn(),m=Ar(d);m.payload=s,c!=null&&(m.callback=c),s=Tr(u,m,d),s!==null&&(nn(s,u,d),Ju(s,u,d))},enqueueReplaceState:function(u,s,c){u=u._reactInternals;var d=tn(),m=Ar(d);m.tag=1,m.payload=s,c!=null&&(m.callback=c),s=Tr(u,m,d),s!==null&&(nn(s,u,d),Ju(s,u,d))},enqueueForceUpdate:function(u,s){u=u._reactInternals;var c=tn(),d=Ar(c);d.tag=2,s!=null&&(d.callback=s),s=Tr(u,d,c),s!==null&&(nn(s,u,c),Ju(s,u,c))}};function yg(u,s,c,d,m,b,S){return u=u.stateNode,typeof u.shouldComponentUpdate=="function"?u.shouldComponentUpdate(d,b,S):s.prototype&&s.prototype.isPureReactComponent?!$u(c,d)||!$u(m,b):!0}function xg(u,s,c,d){u=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(c,d),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(c,d),s.state!==u&&Ed.enqueueReplaceState(s,s.state,null)}function Di(u,s){var c=s;if("ref"in s){c={};for(var d in s)d!=="ref"&&(c[d]=s[d])}if(u=u.defaultProps){c===s&&(c=p({},c));for(var m in u)c[m]===void 0&&(c[m]=u[m])}return c}var sa=typeof reportError=="function"?reportError:function(u){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var s=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof u=="object"&&u!==null&&typeof u.message=="string"?String(u.message):String(u),error:u});if(!window.dispatchEvent(s))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",u);return}console.error(u)};function kg(u){sa(u)}function Sg(u){console.error(u)}function Cg(u){sa(u)}function oa(u,s){try{var c=u.onUncaughtError;c(s.value,{componentStack:s.stack})}catch(d){setTimeout(function(){throw d})}}function vg(u,s,c){try{var d=u.onCaughtError;d(c.value,{componentStack:c.stack,errorBoundary:s.tag===1?s.stateNode:null})}catch(m){setTimeout(function(){throw m})}}function Md(u,s,c){return c=Ar(c),c.tag=3,c.payload={element:null},c.callback=function(){oa(u,s)},c}function Eg(u){return u=Ar(u),u.tag=3,u}function Mg(u,s,c,d){var m=c.type.getDerivedStateFromError;if(typeof m=="function"){var b=d.value;u.payload=function(){return m(b)},u.callback=function(){vg(s,c,d)}}var S=c.stateNode;S!==null&&typeof S.componentDidCatch=="function"&&(u.callback=function(){vg(s,c,d),typeof m!="function"&&($r===null?$r=new Set([this]):$r.add(this));var v=d.stack;this.componentDidCatch(d.value,{componentStack:v!==null?v:""})})}function mv(u,s,c,d,m){if(c.flags|=32768,d!==null&&typeof d=="object"&&typeof d.then=="function"){if(s=c.alternate,s!==null&&Hu(s,c,m,!0),c=mn.current,c!==null){switch(c.tag){case 13:return Ln===null?Yd():c.alternate===null&&Ve===0&&(Ve=3),c.flags&=-257,c.flags|=65536,c.lanes=m,d===ed?c.flags|=16384:(s=c.updateQueue,s===null?c.updateQueue=new Set([d]):s.add(d),Xd(u,d,m)),!1;case 22:return c.flags|=65536,d===ed?c.flags|=16384:(s=c.updateQueue,s===null?(s={transitions:null,markerInstances:null,retryQueue:new Set([d])},c.updateQueue=s):(c=s.retryQueue,c===null?s.retryQueue=new Set([d]):c.add(d)),Xd(u,d,m)),!1}throw Error(r(435,c.tag))}return Xd(u,d,m),Yd(),!1}if(Ee)return s=mn.current,s!==null?((s.flags&65536)===0&&(s.flags|=256),s.flags|=65536,s.lanes=m,d!==Gf&&(u=Error(r(422),{cause:d}),qu(fn(u,c)))):(d!==Gf&&(s=Error(r(423),{cause:d}),qu(fn(s,c))),u=u.current.alternate,u.flags|=65536,m&=-m,u.lanes|=m,d=fn(d,c),m=Md(u.stateNode,d,m),rd(u,m),Ve!==4&&(Ve=2)),!1;var b=Error(r(520),{cause:d});if(b=fn(b,c),ss===null?ss=[b]:ss.push(b),Ve!==4&&(Ve=2),s===null)return!0;d=fn(d,c),c=s;do{switch(c.tag){case 3:return c.flags|=65536,u=m&-m,c.lanes|=u,u=Md(c.stateNode,d,u),rd(c,u),!1;case 1:if(s=c.type,b=c.stateNode,(c.flags&128)===0&&(typeof s.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&($r===null||!$r.has(b))))return c.flags|=65536,m&=-m,c.lanes|=m,m=Eg(m),Mg(m,u,c,d),rd(c,m),!1}c=c.return}while(c!==null);return!1}var Ag=Error(r(461)),rt=!1;function ft(u,s,c,d){s.child=u===null?gg(s,null,c,d):Bl(s,u.child,c,d)}function Tg(u,s,c,d,m){c=c.render;var b=s.ref;if("ref"in d){var S={};for(var v in d)v!=="ref"&&(S[v]=d[v])}else S=d;return Mi(s),d=od(u,s,c,S,b,m),v=ad(),u!==null&&!rt?(cd(u,s,m),sr(u,s,m)):(Ee&&v&&Pf(s),s.flags|=1,ft(u,s,d,m),s.child)}function Dg(u,s,c,d,m){if(u===null){var b=c.type;return typeof b=="function"&&!Vf(b)&&b.defaultProps===void 0&&c.compare===null?(s.tag=15,s.type=b,wg(u,s,b,d,m)):(u=Ho(c.type,null,d,s,s.mode,m),u.ref=s.ref,u.return=s,s.child=u)}if(b=u.child,!Rd(u,m)){var S=b.memoizedProps;if(c=c.compare,c=c!==null?c:$u,c(S,d)&&u.ref===s.ref)return sr(u,s,m)}return s.flags|=1,u=er(b,d),u.ref=s.ref,u.return=s,s.child=u}function wg(u,s,c,d,m){if(u!==null){var b=u.memoizedProps;if($u(b,d)&&u.ref===s.ref)if(rt=!1,s.pendingProps=d=b,Rd(u,m))(u.flags&131072)!==0&&(rt=!0);else return s.lanes=u.lanes,sr(u,s,m)}return Ad(u,s,c,d,m)}function Og(u,s,c){var d=s.pendingProps,m=d.children,b=u!==null?u.memoizedState:null;if(d.mode==="hidden"){if((s.flags&128)!==0){if(d=b!==null?b.baseLanes|c:c,u!==null){for(m=s.child=u.child,b=0;m!==null;)b=b|m.lanes|m.childLanes,m=m.sibling;s.childLanes=b&~d}else s.childLanes=0,s.child=null;return _g(u,s,d,c)}if((c&536870912)!==0)s.memoizedState={baseLanes:0,cachePool:null},u!==null&&Jo(s,b!==null?b.cachePool:null),b!==null?w1(s,b):ld(),bg(s);else return s.lanes=s.childLanes=536870912,_g(u,s,b!==null?b.baseLanes|c:c,c)}else b!==null?(Jo(s,b.cachePool),w1(s,b),Or(),s.memoizedState=null):(u!==null&&Jo(s,null),ld(),Or());return ft(u,s,m,c),s.child}function _g(u,s,c,d){var m=Wf();return m=m===null?null:{parent:Xe._currentValue,pool:m},s.memoizedState={baseLanes:c,cachePool:m},u!==null&&Jo(s,null),ld(),bg(s),u!==null&&Hu(u,s,d,!0),null}function aa(u,s){var c=s.ref;if(c===null)u!==null&&u.ref!==null&&(s.flags|=4194816);else{if(typeof c!="function"&&typeof c!="object")throw Error(r(284));(u===null||u.ref!==c)&&(s.flags|=4194816)}}function Ad(u,s,c,d,m){return Mi(s),c=od(u,s,c,d,void 0,m),d=ad(),u!==null&&!rt?(cd(u,s,m),sr(u,s,m)):(Ee&&d&&Pf(s),s.flags|=1,ft(u,s,c,m),s.child)}function Ng(u,s,c,d,m,b){return Mi(s),s.updateQueue=null,c=_1(s,d,c,m),O1(u),d=ad(),u!==null&&!rt?(cd(u,s,b),sr(u,s,b)):(Ee&&d&&Pf(s),s.flags|=1,ft(u,s,c,b),s.child)}function Rg(u,s,c,d,m){if(Mi(s),s.stateNode===null){var b=Ml,S=c.contextType;typeof S=="object"&&S!==null&&(b=xt(S)),b=new c(d,b),s.memoizedState=b.state!==null&&b.state!==void 0?b.state:null,b.updater=Ed,s.stateNode=b,b._reactInternals=s,b=s.stateNode,b.props=d,b.state=s.memoizedState,b.refs={},td(s),S=c.contextType,b.context=typeof S=="object"&&S!==null?xt(S):Ml,b.state=s.memoizedState,S=c.getDerivedStateFromProps,typeof S=="function"&&(vd(s,c,S,d),b.state=s.memoizedState),typeof c.getDerivedStateFromProps=="function"||typeof b.getSnapshotBeforeUpdate=="function"||typeof b.UNSAFE_componentWillMount!="function"&&typeof b.componentWillMount!="function"||(S=b.state,typeof b.componentWillMount=="function"&&b.componentWillMount(),typeof b.UNSAFE_componentWillMount=="function"&&b.UNSAFE_componentWillMount(),S!==b.state&&Ed.enqueueReplaceState(b,b.state,null),Ku(s,d,b,m),Gu(),b.state=s.memoizedState),typeof b.componentDidMount=="function"&&(s.flags|=4194308),d=!0}else if(u===null){b=s.stateNode;var v=s.memoizedProps,M=Di(c,v);b.props=M;var _=b.context,F=c.contextType;S=Ml,typeof F=="object"&&F!==null&&(S=xt(F));var q=c.getDerivedStateFromProps;F=typeof q=="function"||typeof b.getSnapshotBeforeUpdate=="function",v=s.pendingProps!==v,F||typeof b.UNSAFE_componentWillReceiveProps!="function"&&typeof b.componentWillReceiveProps!="function"||(v||_!==S)&&xg(s,b,d,S),Mr=!1;var R=s.memoizedState;b.state=R,Ku(s,d,b,m),Gu(),_=s.memoizedState,v||R!==_||Mr?(typeof q=="function"&&(vd(s,c,q,d),_=s.memoizedState),(M=Mr||yg(s,c,M,d,R,_,S))?(F||typeof b.UNSAFE_componentWillMount!="function"&&typeof b.componentWillMount!="function"||(typeof b.componentWillMount=="function"&&b.componentWillMount(),typeof b.UNSAFE_componentWillMount=="function"&&b.UNSAFE_componentWillMount()),typeof b.componentDidMount=="function"&&(s.flags|=4194308)):(typeof b.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=d,s.memoizedState=_),b.props=d,b.state=_,b.context=S,d=M):(typeof b.componentDidMount=="function"&&(s.flags|=4194308),d=!1)}else{b=s.stateNode,nd(u,s),S=s.memoizedProps,F=Di(c,S),b.props=F,q=s.pendingProps,R=b.context,_=c.contextType,M=Ml,typeof _=="object"&&_!==null&&(M=xt(_)),v=c.getDerivedStateFromProps,(_=typeof v=="function"||typeof b.getSnapshotBeforeUpdate=="function")||typeof b.UNSAFE_componentWillReceiveProps!="function"&&typeof b.componentWillReceiveProps!="function"||(S!==q||R!==M)&&xg(s,b,d,M),Mr=!1,R=s.memoizedState,b.state=R,Ku(s,d,b,m),Gu();var z=s.memoizedState;S!==q||R!==z||Mr||u!==null&&u.dependencies!==null&&jo(u.dependencies)?(typeof v=="function"&&(vd(s,c,v,d),z=s.memoizedState),(F=Mr||yg(s,c,F,d,R,z,M)||u!==null&&u.dependencies!==null&&jo(u.dependencies))?(_||typeof b.UNSAFE_componentWillUpdate!="function"&&typeof b.componentWillUpdate!="function"||(typeof b.componentWillUpdate=="function"&&b.componentWillUpdate(d,z,M),typeof b.UNSAFE_componentWillUpdate=="function"&&b.UNSAFE_componentWillUpdate(d,z,M)),typeof b.componentDidUpdate=="function"&&(s.flags|=4),typeof b.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof b.componentDidUpdate!="function"||S===u.memoizedProps&&R===u.memoizedState||(s.flags|=4),typeof b.getSnapshotBeforeUpdate!="function"||S===u.memoizedProps&&R===u.memoizedState||(s.flags|=1024),s.memoizedProps=d,s.memoizedState=z),b.props=d,b.state=z,b.context=M,d=F):(typeof b.componentDidUpdate!="function"||S===u.memoizedProps&&R===u.memoizedState||(s.flags|=4),typeof b.getSnapshotBeforeUpdate!="function"||S===u.memoizedProps&&R===u.memoizedState||(s.flags|=1024),d=!1)}return b=d,aa(u,s),d=(s.flags&128)!==0,b||d?(b=s.stateNode,c=d&&typeof c.getDerivedStateFromError!="function"?null:b.render(),s.flags|=1,u!==null&&d?(s.child=Bl(s,u.child,null,m),s.child=Bl(s,null,c,m)):ft(u,s,c,m),s.memoizedState=b.state,u=s.child):u=sr(u,s,m),u}function zg(u,s,c,d){return Iu(),s.flags|=256,ft(u,s,c,d),s.child}var Td={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Dd(u){return{baseLanes:u,cachePool:S1()}}function wd(u,s,c){return u=u!==null?u.childLanes&~c:0,s&&(u|=gn),u}function Bg(u,s,c){var d=s.pendingProps,m=!1,b=(s.flags&128)!==0,S;if((S=b)||(S=u!==null&&u.memoizedState===null?!1:(Qe.current&2)!==0),S&&(m=!0,s.flags&=-129),S=(s.flags&32)!==0,s.flags&=-33,u===null){if(Ee){if(m?wr(s):Or(),Ee){var v=He,M;if(M=v){e:{for(M=v,v=Fn;M.nodeType!==8;){if(!v){v=null;break e}if(M=Mn(M.nextSibling),M===null){v=null;break e}}v=M}v!==null?(s.memoizedState={dehydrated:v,treeContext:ki!==null?{id:tr,overflow:nr}:null,retryLane:536870912,hydrationErrors:null},M=Xt(18,null,null,0),M.stateNode=v,M.return=s,s.child=M,At=s,He=null,M=!0):M=!1}M||vi(s)}if(v=s.memoizedState,v!==null&&(v=v.dehydrated,v!==null))return dh(v)?s.lanes=32:s.lanes=536870912,null;ur(s)}return v=d.children,d=d.fallback,m?(Or(),m=s.mode,v=ca({mode:"hidden",children:v},m),d=xi(d,m,c,null),v.return=s,d.return=s,v.sibling=d,s.child=v,m=s.child,m.memoizedState=Dd(c),m.childLanes=wd(u,S,c),s.memoizedState=Td,d):(wr(s),Od(s,v))}if(M=u.memoizedState,M!==null&&(v=M.dehydrated,v!==null)){if(b)s.flags&256?(wr(s),s.flags&=-257,s=_d(u,s,c)):s.memoizedState!==null?(Or(),s.child=u.child,s.flags|=128,s=null):(Or(),m=d.fallback,v=s.mode,d=ca({mode:"visible",children:d.children},v),m=xi(m,v,c,null),m.flags|=2,d.return=s,m.return=s,d.sibling=m,s.child=d,Bl(s,u.child,null,c),d=s.child,d.memoizedState=Dd(c),d.childLanes=wd(u,S,c),s.memoizedState=Td,s=m);else if(wr(s),dh(v)){if(S=v.nextSibling&&v.nextSibling.dataset,S)var _=S.dgst;S=_,d=Error(r(419)),d.stack="",d.digest=S,qu({value:d,source:null,stack:null}),s=_d(u,s,c)}else if(rt||Hu(u,s,c,!1),S=(c&u.childLanes)!==0,rt||S){if(S=Re,S!==null&&(d=c&-c,d=(d&42)!==0?1:hf(d),d=(d&(S.suspendedLanes|c))!==0?0:d,d!==0&&d!==M.retryLane))throw M.retryLane=d,El(u,d),nn(S,u,d),Ag;v.data==="$?"||Yd(),s=_d(u,s,c)}else v.data==="$?"?(s.flags|=192,s.child=u.child,s=null):(u=M.treeContext,He=Mn(v.nextSibling),At=s,Ee=!0,Ci=null,Fn=!1,u!==null&&(hn[pn++]=tr,hn[pn++]=nr,hn[pn++]=ki,tr=u.id,nr=u.overflow,ki=s),s=Od(s,d.children),s.flags|=4096);return s}return m?(Or(),m=d.fallback,v=s.mode,M=u.child,_=M.sibling,d=er(M,{mode:"hidden",children:d.children}),d.subtreeFlags=M.subtreeFlags&65011712,_!==null?m=er(_,m):(m=xi(m,v,c,null),m.flags|=2),m.return=s,d.return=s,d.sibling=m,s.child=d,d=m,m=s.child,v=u.child.memoizedState,v===null?v=Dd(c):(M=v.cachePool,M!==null?(_=Xe._currentValue,M=M.parent!==_?{parent:_,pool:_}:M):M=S1(),v={baseLanes:v.baseLanes|c,cachePool:M}),m.memoizedState=v,m.childLanes=wd(u,S,c),s.memoizedState=Td,d):(wr(s),c=u.child,u=c.sibling,c=er(c,{mode:"visible",children:d.children}),c.return=s,c.sibling=null,u!==null&&(S=s.deletions,S===null?(s.deletions=[u],s.flags|=16):S.push(u)),s.child=c,s.memoizedState=null,c)}function Od(u,s){return s=ca({mode:"visible",children:s},u.mode),s.return=u,u.child=s}function ca(u,s){return u=Xt(22,u,null,s),u.lanes=0,u.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},u}function _d(u,s,c){return Bl(s,u.child,null,c),u=Od(s,s.pendingProps.children),u.flags|=2,s.memoizedState=null,u}function $g(u,s,c){u.lanes|=s;var d=u.alternate;d!==null&&(d.lanes|=s),Yf(u.return,s,c)}function Nd(u,s,c,d,m){var b=u.memoizedState;b===null?u.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:d,tail:c,tailMode:m}:(b.isBackwards=s,b.rendering=null,b.renderingStartTime=0,b.last=d,b.tail=c,b.tailMode=m)}function Fg(u,s,c){var d=s.pendingProps,m=d.revealOrder,b=d.tail;if(ft(u,s,d.children,c),d=Qe.current,(d&2)!==0)d=d&1|2,s.flags|=128;else{if(u!==null&&(u.flags&128)!==0)e:for(u=s.child;u!==null;){if(u.tag===13)u.memoizedState!==null&&$g(u,c,s);else if(u.tag===19)$g(u,c,s);else if(u.child!==null){u.child.return=u,u=u.child;continue}if(u===s)break e;for(;u.sibling===null;){if(u.return===null||u.return===s)break e;u=u.return}u.sibling.return=u.return,u=u.sibling}d&=1}switch(J(Qe,d),m){case"forwards":for(c=s.child,m=null;c!==null;)u=c.alternate,u!==null&&ua(u)===null&&(m=c),c=c.sibling;c=m,c===null?(m=s.child,s.child=null):(m=c.sibling,c.sibling=null),Nd(s,!1,m,c,b);break;case"backwards":for(c=null,m=s.child,s.child=null;m!==null;){if(u=m.alternate,u!==null&&ua(u)===null){s.child=m;break}u=m.sibling,m.sibling=c,c=m,m=u}Nd(s,!0,c,null,b);break;case"together":Nd(s,!1,null,null,void 0);break;default:s.memoizedState=null}return s.child}function sr(u,s,c){if(u!==null&&(s.dependencies=u.dependencies),Br|=s.lanes,(c&s.childLanes)===0)if(u!==null){if(Hu(u,s,c,!1),(c&s.childLanes)===0)return null}else return null;if(u!==null&&s.child!==u.child)throw Error(r(153));if(s.child!==null){for(u=s.child,c=er(u,u.pendingProps),s.child=c,c.return=s;u.sibling!==null;)u=u.sibling,c=c.sibling=er(u,u.pendingProps),c.return=s;c.sibling=null}return s.child}function Rd(u,s){return(u.lanes&s)!==0?!0:(u=u.dependencies,!!(u!==null&&jo(u)))}function gv(u,s,c){switch(s.tag){case 3:Fe(s,s.stateNode.containerInfo),Er(s,Xe,u.memoizedState.cache),Iu();break;case 27:case 5:of(s);break;case 4:Fe(s,s.stateNode.containerInfo);break;case 10:Er(s,s.type,s.memoizedProps.value);break;case 13:var d=s.memoizedState;if(d!==null)return d.dehydrated!==null?(wr(s),s.flags|=128,null):(c&s.child.childLanes)!==0?Bg(u,s,c):(wr(s),u=sr(u,s,c),u!==null?u.sibling:null);wr(s);break;case 19:var m=(u.flags&128)!==0;if(d=(c&s.childLanes)!==0,d||(Hu(u,s,c,!1),d=(c&s.childLanes)!==0),m){if(d)return Fg(u,s,c);s.flags|=128}if(m=s.memoizedState,m!==null&&(m.rendering=null,m.tail=null,m.lastEffect=null),J(Qe,Qe.current),d)break;return null;case 22:case 23:return s.lanes=0,Og(u,s,c);case 24:Er(s,Xe,u.memoizedState.cache)}return sr(u,s,c)}function Lg(u,s,c){if(u!==null)if(u.memoizedProps!==s.pendingProps)rt=!0;else{if(!Rd(u,c)&&(s.flags&128)===0)return rt=!1,gv(u,s,c);rt=(u.flags&131072)!==0}else rt=!1,Ee&&(s.flags&1048576)!==0&&p1(s,Uo,s.index);switch(s.lanes=0,s.tag){case 16:e:{u=s.pendingProps;var d=s.elementType,m=d._init;if(d=m(d._payload),s.type=d,typeof d=="function")Vf(d)?(u=Di(d,u),s.tag=1,s=Rg(null,s,d,u,c)):(s.tag=0,s=Ad(null,s,d,u,c));else{if(d!=null){if(m=d.$$typeof,m===H){s.tag=11,s=Tg(null,s,d,u,c);break e}else if(m===Q){s.tag=14,s=Dg(null,s,d,u,c);break e}}throw s=Bn(d)||d,Error(r(306,s,""))}}return s;case 0:return Ad(u,s,s.type,s.pendingProps,c);case 1:return d=s.type,m=Di(d,s.pendingProps),Rg(u,s,d,m,c);case 3:e:{if(Fe(s,s.stateNode.containerInfo),u===null)throw Error(r(387));d=s.pendingProps;var b=s.memoizedState;m=b.element,nd(u,s),Ku(s,d,null,c);var S=s.memoizedState;if(d=S.cache,Er(s,Xe,d),d!==b.cache&&Zf(s,[Xe],c,!0),Gu(),d=S.element,b.isDehydrated)if(b={element:d,isDehydrated:!1,cache:S.cache},s.updateQueue.baseState=b,s.memoizedState=b,s.flags&256){s=zg(u,s,d,c);break e}else if(d!==m){m=fn(Error(r(424)),s),qu(m),s=zg(u,s,d,c);break e}else{switch(u=s.stateNode.containerInfo,u.nodeType){case 9:u=u.body;break;default:u=u.nodeName==="HTML"?u.ownerDocument.body:u}for(He=Mn(u.firstChild),At=s,Ee=!0,Ci=null,Fn=!0,c=gg(s,null,d,c),s.child=c;c;)c.flags=c.flags&-3|4096,c=c.sibling}else{if(Iu(),d===m){s=sr(u,s,c);break e}ft(u,s,d,c)}s=s.child}return s;case 26:return aa(u,s),u===null?(c=Vb(s.type,null,s.pendingProps,null))?s.memoizedState=c:Ee||(c=s.type,u=s.pendingProps,d=Ea(ce.current).createElement(c),d[yt]=s,d[Ft]=u,ht(d,c,u),nt(d),s.stateNode=d):s.memoizedState=Vb(s.type,u.memoizedProps,s.pendingProps,u.memoizedState),null;case 27:return of(s),u===null&&Ee&&(d=s.stateNode=Ib(s.type,s.pendingProps,ce.current),At=s,Fn=!0,m=He,Ir(s.type)?(hh=m,He=Mn(d.firstChild)):He=m),ft(u,s,s.pendingProps.children,c),aa(u,s),u===null&&(s.flags|=4194304),s.child;case 5:return u===null&&Ee&&((m=d=He)&&(d=jv(d,s.type,s.pendingProps,Fn),d!==null?(s.stateNode=d,At=s,He=Mn(d.firstChild),Fn=!1,m=!0):m=!1),m||vi(s)),of(s),m=s.type,b=s.pendingProps,S=u!==null?u.memoizedProps:null,d=b.children,ah(m,b)?d=null:S!==null&&ah(m,S)&&(s.flags|=32),s.memoizedState!==null&&(m=od(u,s,ov,null,null,c),bs._currentValue=m),aa(u,s),ft(u,s,d,c),s.child;case 6:return u===null&&Ee&&((u=c=He)&&(c=Pv(c,s.pendingProps,Fn),c!==null?(s.stateNode=c,At=s,He=null,u=!0):u=!1),u||vi(s)),null;case 13:return Bg(u,s,c);case 4:return Fe(s,s.stateNode.containerInfo),d=s.pendingProps,u===null?s.child=Bl(s,null,d,c):ft(u,s,d,c),s.child;case 11:return Tg(u,s,s.type,s.pendingProps,c);case 7:return ft(u,s,s.pendingProps,c),s.child;case 8:return ft(u,s,s.pendingProps.children,c),s.child;case 12:return ft(u,s,s.pendingProps.children,c),s.child;case 10:return d=s.pendingProps,Er(s,s.type,d.value),ft(u,s,d.children,c),s.child;case 9:return m=s.type._context,d=s.pendingProps.children,Mi(s),m=xt(m),d=d(m),s.flags|=1,ft(u,s,d,c),s.child;case 14:return Dg(u,s,s.type,s.pendingProps,c);case 15:return wg(u,s,s.type,s.pendingProps,c);case 19:return Fg(u,s,c);case 31:return d=s.pendingProps,c=s.mode,d={mode:d.mode,children:d.children},u===null?(c=ca(d,c),c.ref=s.ref,s.child=c,c.return=s,s=c):(c=er(u.child,d),c.ref=s.ref,s.child=c,c.return=s,s=c),s;case 22:return Og(u,s,c);case 24:return Mi(s),d=xt(Xe),u===null?(m=Wf(),m===null&&(m=Re,b=Xf(),m.pooledCache=b,b.refCount++,b!==null&&(m.pooledCacheLanes|=c),m=b),s.memoizedState={parent:d,cache:m},td(s),Er(s,Xe,m)):((u.lanes&c)!==0&&(nd(u,s),Ku(s,null,null,c),Gu()),m=u.memoizedState,b=s.memoizedState,m.parent!==d?(m={parent:d,cache:d},s.memoizedState=m,s.lanes===0&&(s.memoizedState=s.updateQueue.baseState=m),Er(s,Xe,d)):(d=b.cache,Er(s,Xe,d),d!==m.cache&&Zf(s,[Xe],c,!0))),ft(u,s,s.pendingProps.children,c),s.child;case 29:throw s.pendingProps}throw Error(r(156,s.tag))}function or(u){u.flags|=4}function Ig(u,s){if(s.type!=="stylesheet"||(s.state.loading&4)!==0)u.flags&=-16777217;else if(u.flags|=16777216,!Gb(s)){if(s=mn.current,s!==null&&((ke&4194048)===ke?Ln!==null:(ke&62914560)!==ke&&(ke&536870912)===0||s!==Ln))throw Pu=ed,C1;u.flags|=8192}}function fa(u,s){s!==null&&(u.flags|=4),u.flags&16384&&(s=u.tag!==22?bm():536870912,u.lanes|=s,Il|=s)}function ts(u,s){if(!Ee)switch(u.tailMode){case"hidden":s=u.tail;for(var c=null;s!==null;)s.alternate!==null&&(c=s),s=s.sibling;c===null?u.tail=null:c.sibling=null;break;case"collapsed":c=u.tail;for(var d=null;c!==null;)c.alternate!==null&&(d=c),c=c.sibling;d===null?s||u.tail===null?u.tail=null:u.tail.sibling=null:d.sibling=null}}function qe(u){var s=u.alternate!==null&&u.alternate.child===u.child,c=0,d=0;if(s)for(var m=u.child;m!==null;)c|=m.lanes|m.childLanes,d|=m.subtreeFlags&65011712,d|=m.flags&65011712,m.return=u,m=m.sibling;else for(m=u.child;m!==null;)c|=m.lanes|m.childLanes,d|=m.subtreeFlags,d|=m.flags,m.return=u,m=m.sibling;return u.subtreeFlags|=d,u.childLanes=c,s}function bv(u,s,c){var d=s.pendingProps;switch(Jf(s),s.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return qe(s),null;case 1:return qe(s),null;case 3:return c=s.stateNode,d=null,u!==null&&(d=u.memoizedState.cache),s.memoizedState.cache!==d&&(s.flags|=2048),ir(Xe),kr(),c.pendingContext&&(c.context=c.pendingContext,c.pendingContext=null),(u===null||u.child===null)&&(Lu(s)?or(s):u===null||u.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,b1())),qe(s),null;case 26:return c=s.memoizedState,u===null?(or(s),c!==null?(qe(s),Ig(s,c)):(qe(s),s.flags&=-16777217)):c?c!==u.memoizedState?(or(s),qe(s),Ig(s,c)):(qe(s),s.flags&=-16777217):(u.memoizedProps!==d&&or(s),qe(s),s.flags&=-16777217),null;case 27:Co(s),c=ce.current;var m=s.type;if(u!==null&&s.stateNode!=null)u.memoizedProps!==d&&or(s);else{if(!d){if(s.stateNode===null)throw Error(r(166));return qe(s),null}u=re.current,Lu(s)?m1(s):(u=Ib(m,d,c),s.stateNode=u,or(s))}return qe(s),null;case 5:if(Co(s),c=s.type,u!==null&&s.stateNode!=null)u.memoizedProps!==d&&or(s);else{if(!d){if(s.stateNode===null)throw Error(r(166));return qe(s),null}if(u=re.current,Lu(s))m1(s);else{switch(m=Ea(ce.current),u){case 1:u=m.createElementNS("http://www.w3.org/2000/svg",c);break;case 2:u=m.createElementNS("http://www.w3.org/1998/Math/MathML",c);break;default:switch(c){case"svg":u=m.createElementNS("http://www.w3.org/2000/svg",c);break;case"math":u=m.createElementNS("http://www.w3.org/1998/Math/MathML",c);break;case"script":u=m.createElement("div"),u.innerHTML="<script><\/script>",u=u.removeChild(u.firstChild);break;case"select":u=typeof d.is=="string"?m.createElement("select",{is:d.is}):m.createElement("select"),d.multiple?u.multiple=!0:d.size&&(u.size=d.size);break;default:u=typeof d.is=="string"?m.createElement(c,{is:d.is}):m.createElement(c)}}u[yt]=s,u[Ft]=d;e:for(m=s.child;m!==null;){if(m.tag===5||m.tag===6)u.appendChild(m.stateNode);else if(m.tag!==4&&m.tag!==27&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===s)break e;for(;m.sibling===null;){if(m.return===null||m.return===s)break e;m=m.return}m.sibling.return=m.return,m=m.sibling}s.stateNode=u;e:switch(ht(u,c,d),c){case"button":case"input":case"select":case"textarea":u=!!d.autoFocus;break e;case"img":u=!0;break e;default:u=!1}u&&or(s)}}return qe(s),s.flags&=-16777217,null;case 6:if(u&&s.stateNode!=null)u.memoizedProps!==d&&or(s);else{if(typeof d!="string"&&s.stateNode===null)throw Error(r(166));if(u=ce.current,Lu(s)){if(u=s.stateNode,c=s.memoizedProps,d=null,m=At,m!==null)switch(m.tag){case 27:case 5:d=m.memoizedProps}u[yt]=s,u=!!(u.nodeValue===c||d!==null&&d.suppressHydrationWarning===!0||Nb(u.nodeValue,c)),u||vi(s)}else u=Ea(u).createTextNode(d),u[yt]=s,s.stateNode=u}return qe(s),null;case 13:if(d=s.memoizedState,u===null||u.memoizedState!==null&&u.memoizedState.dehydrated!==null){if(m=Lu(s),d!==null&&d.dehydrated!==null){if(u===null){if(!m)throw Error(r(318));if(m=s.memoizedState,m=m!==null?m.dehydrated:null,!m)throw Error(r(317));m[yt]=s}else Iu(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;qe(s),m=!1}else m=b1(),u!==null&&u.memoizedState!==null&&(u.memoizedState.hydrationErrors=m),m=!0;if(!m)return s.flags&256?(ur(s),s):(ur(s),null)}if(ur(s),(s.flags&128)!==0)return s.lanes=c,s;if(c=d!==null,u=u!==null&&u.memoizedState!==null,c){d=s.child,m=null,d.alternate!==null&&d.alternate.memoizedState!==null&&d.alternate.memoizedState.cachePool!==null&&(m=d.alternate.memoizedState.cachePool.pool);var b=null;d.memoizedState!==null&&d.memoizedState.cachePool!==null&&(b=d.memoizedState.cachePool.pool),b!==m&&(d.flags|=2048)}return c!==u&&c&&(s.child.flags|=8192),fa(s,s.updateQueue),qe(s),null;case 4:return kr(),u===null&&ih(s.stateNode.containerInfo),qe(s),null;case 10:return ir(s.type),qe(s),null;case 19:if(K(Qe),m=s.memoizedState,m===null)return qe(s),null;if(d=(s.flags&128)!==0,b=m.rendering,b===null)if(d)ts(m,!1);else{if(Ve!==0||u!==null&&(u.flags&128)!==0)for(u=s.child;u!==null;){if(b=ua(u),b!==null){for(s.flags|=128,ts(m,!1),u=b.updateQueue,s.updateQueue=u,fa(s,u),s.subtreeFlags=0,u=c,c=s.child;c!==null;)h1(c,u),c=c.sibling;return J(Qe,Qe.current&1|2),s.child}u=u.sibling}m.tail!==null&&$n()>pa&&(s.flags|=128,d=!0,ts(m,!1),s.lanes=4194304)}else{if(!d)if(u=ua(b),u!==null){if(s.flags|=128,d=!0,u=u.updateQueue,s.updateQueue=u,fa(s,u),ts(m,!0),m.tail===null&&m.tailMode==="hidden"&&!b.alternate&&!Ee)return qe(s),null}else 2*$n()-m.renderingStartTime>pa&&c!==536870912&&(s.flags|=128,d=!0,ts(m,!1),s.lanes=4194304);m.isBackwards?(b.sibling=s.child,s.child=b):(u=m.last,u!==null?u.sibling=b:s.child=b,m.last=b)}return m.tail!==null?(s=m.tail,m.rendering=s,m.tail=s.sibling,m.renderingStartTime=$n(),s.sibling=null,u=Qe.current,J(Qe,d?u&1|2:u&1),s):(qe(s),null);case 22:case 23:return ur(s),ud(),d=s.memoizedState!==null,u!==null?u.memoizedState!==null!==d&&(s.flags|=8192):d&&(s.flags|=8192),d?(c&536870912)!==0&&(s.flags&128)===0&&(qe(s),s.subtreeFlags&6&&(s.flags|=8192)):qe(s),c=s.updateQueue,c!==null&&fa(s,c.retryQueue),c=null,u!==null&&u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(c=u.memoizedState.cachePool.pool),d=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(d=s.memoizedState.cachePool.pool),d!==c&&(s.flags|=2048),u!==null&&K(Ai),null;case 24:return c=null,u!==null&&(c=u.memoizedState.cache),s.memoizedState.cache!==c&&(s.flags|=2048),ir(Xe),qe(s),null;case 25:return null;case 30:return null}throw Error(r(156,s.tag))}function yv(u,s){switch(Jf(s),s.tag){case 1:return u=s.flags,u&65536?(s.flags=u&-65537|128,s):null;case 3:return ir(Xe),kr(),u=s.flags,(u&65536)!==0&&(u&128)===0?(s.flags=u&-65537|128,s):null;case 26:case 27:case 5:return Co(s),null;case 13:if(ur(s),u=s.memoizedState,u!==null&&u.dehydrated!==null){if(s.alternate===null)throw Error(r(340));Iu()}return u=s.flags,u&65536?(s.flags=u&-65537|128,s):null;case 19:return K(Qe),null;case 4:return kr(),null;case 10:return ir(s.type),null;case 22:case 23:return ur(s),ud(),u!==null&&K(Ai),u=s.flags,u&65536?(s.flags=u&-65537|128,s):null;case 24:return ir(Xe),null;case 25:return null;default:return null}}function qg(u,s){switch(Jf(s),s.tag){case 3:ir(Xe),kr();break;case 26:case 27:case 5:Co(s);break;case 4:kr();break;case 13:ur(s);break;case 19:K(Qe);break;case 10:ir(s.type);break;case 22:case 23:ur(s),ud(),u!==null&&K(Ai);break;case 24:ir(Xe)}}function ns(u,s){try{var c=s.updateQueue,d=c!==null?c.lastEffect:null;if(d!==null){var m=d.next;c=m;do{if((c.tag&u)===u){d=void 0;var b=c.create,S=c.inst;d=b(),S.destroy=d}c=c.next}while(c!==m)}}catch(v){Ne(s,s.return,v)}}function _r(u,s,c){try{var d=s.updateQueue,m=d!==null?d.lastEffect:null;if(m!==null){var b=m.next;d=b;do{if((d.tag&u)===u){var S=d.inst,v=S.destroy;if(v!==void 0){S.destroy=void 0,m=s;var M=c,_=v;try{_()}catch(F){Ne(m,M,F)}}}d=d.next}while(d!==b)}}catch(F){Ne(s,s.return,F)}}function Hg(u){var s=u.updateQueue;if(s!==null){var c=u.stateNode;try{D1(s,c)}catch(d){Ne(u,u.return,d)}}}function Vg(u,s,c){c.props=Di(u.type,u.memoizedProps),c.state=u.memoizedState;try{c.componentWillUnmount()}catch(d){Ne(u,s,d)}}function rs(u,s){try{var c=u.ref;if(c!==null){switch(u.tag){case 26:case 27:case 5:var d=u.stateNode;break;case 30:d=u.stateNode;break;default:d=u.stateNode}typeof c=="function"?u.refCleanup=c(d):c.current=d}}catch(m){Ne(u,s,m)}}function In(u,s){var c=u.ref,d=u.refCleanup;if(c!==null)if(typeof d=="function")try{d()}catch(m){Ne(u,s,m)}finally{u.refCleanup=null,u=u.alternate,u!=null&&(u.refCleanup=null)}else if(typeof c=="function")try{c(null)}catch(m){Ne(u,s,m)}else c.current=null}function Ug(u){var s=u.type,c=u.memoizedProps,d=u.stateNode;try{e:switch(s){case"button":case"input":case"select":case"textarea":c.autoFocus&&d.focus();break e;case"img":c.src?d.src=c.src:c.srcSet&&(d.srcset=c.srcSet)}}catch(m){Ne(u,u.return,m)}}function zd(u,s,c){try{var d=u.stateNode;Iv(d,u.type,c,s),d[Ft]=s}catch(m){Ne(u,u.return,m)}}function jg(u){return u.tag===5||u.tag===3||u.tag===26||u.tag===27&&Ir(u.type)||u.tag===4}function Bd(u){e:for(;;){for(;u.sibling===null;){if(u.return===null||jg(u.return))return null;u=u.return}for(u.sibling.return=u.return,u=u.sibling;u.tag!==5&&u.tag!==6&&u.tag!==18;){if(u.tag===27&&Ir(u.type)||u.flags&2||u.child===null||u.tag===4)continue e;u.child.return=u,u=u.child}if(!(u.flags&2))return u.stateNode}}function $d(u,s,c){var d=u.tag;if(d===5||d===6)u=u.stateNode,s?(c.nodeType===9?c.body:c.nodeName==="HTML"?c.ownerDocument.body:c).insertBefore(u,s):(s=c.nodeType===9?c.body:c.nodeName==="HTML"?c.ownerDocument.body:c,s.appendChild(u),c=c._reactRootContainer,c!=null||s.onclick!==null||(s.onclick=va));else if(d!==4&&(d===27&&Ir(u.type)&&(c=u.stateNode,s=null),u=u.child,u!==null))for($d(u,s,c),u=u.sibling;u!==null;)$d(u,s,c),u=u.sibling}function da(u,s,c){var d=u.tag;if(d===5||d===6)u=u.stateNode,s?c.insertBefore(u,s):c.appendChild(u);else if(d!==4&&(d===27&&Ir(u.type)&&(c=u.stateNode),u=u.child,u!==null))for(da(u,s,c),u=u.sibling;u!==null;)da(u,s,c),u=u.sibling}function Pg(u){var s=u.stateNode,c=u.memoizedProps;try{for(var d=u.type,m=s.attributes;m.length;)s.removeAttributeNode(m[0]);ht(s,d,c),s[yt]=u,s[Ft]=c}catch(b){Ne(u,u.return,b)}}var ar=!1,Je=!1,Fd=!1,Jg=typeof WeakSet=="function"?WeakSet:Set,it=null;function xv(u,s){if(u=u.containerInfo,sh=Oa,u=r1(u),Bf(u)){if("selectionStart"in u)var c={start:u.selectionStart,end:u.selectionEnd};else e:{c=(c=u.ownerDocument)&&c.defaultView||window;var d=c.getSelection&&c.getSelection();if(d&&d.rangeCount!==0){c=d.anchorNode;var m=d.anchorOffset,b=d.focusNode;d=d.focusOffset;try{c.nodeType,b.nodeType}catch{c=null;break e}var S=0,v=-1,M=-1,_=0,F=0,q=u,R=null;t:for(;;){for(var z;q!==c||m!==0&&q.nodeType!==3||(v=S+m),q!==b||d!==0&&q.nodeType!==3||(M=S+d),q.nodeType===3&&(S+=q.nodeValue.length),(z=q.firstChild)!==null;)R=q,q=z;for(;;){if(q===u)break t;if(R===c&&++_===m&&(v=S),R===b&&++F===d&&(M=S),(z=q.nextSibling)!==null)break;q=R,R=q.parentNode}q=z}c=v===-1||M===-1?null:{start:v,end:M}}else c=null}c=c||{start:0,end:0}}else c=null;for(oh={focusedElem:u,selectionRange:c},Oa=!1,it=s;it!==null;)if(s=it,u=s.child,(s.subtreeFlags&1024)!==0&&u!==null)u.return=s,it=u;else for(;it!==null;){switch(s=it,b=s.alternate,u=s.flags,s.tag){case 0:break;case 11:case 15:break;case 1:if((u&1024)!==0&&b!==null){u=void 0,c=s,m=b.memoizedProps,b=b.memoizedState,d=c.stateNode;try{var se=Di(c.type,m,c.elementType===c.type);u=d.getSnapshotBeforeUpdate(se,b),d.__reactInternalSnapshotBeforeUpdate=u}catch(ie){Ne(c,c.return,ie)}}break;case 3:if((u&1024)!==0){if(u=s.stateNode.containerInfo,c=u.nodeType,c===9)fh(u);else if(c===1)switch(u.nodeName){case"HEAD":case"HTML":case"BODY":fh(u);break;default:u.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((u&1024)!==0)throw Error(r(163))}if(u=s.sibling,u!==null){u.return=s.return,it=u;break}it=s.return}}function Gg(u,s,c){var d=c.flags;switch(c.tag){case 0:case 11:case 15:Nr(u,c),d&4&&ns(5,c);break;case 1:if(Nr(u,c),d&4)if(u=c.stateNode,s===null)try{u.componentDidMount()}catch(S){Ne(c,c.return,S)}else{var m=Di(c.type,s.memoizedProps);s=s.memoizedState;try{u.componentDidUpdate(m,s,u.__reactInternalSnapshotBeforeUpdate)}catch(S){Ne(c,c.return,S)}}d&64&&Hg(c),d&512&&rs(c,c.return);break;case 3:if(Nr(u,c),d&64&&(u=c.updateQueue,u!==null)){if(s=null,c.child!==null)switch(c.child.tag){case 27:case 5:s=c.child.stateNode;break;case 1:s=c.child.stateNode}try{D1(u,s)}catch(S){Ne(c,c.return,S)}}break;case 27:s===null&&d&4&&Pg(c);case 26:case 5:Nr(u,c),s===null&&d&4&&Ug(c),d&512&&rs(c,c.return);break;case 12:Nr(u,c);break;case 13:Nr(u,c),d&4&&Zg(u,c),d&64&&(u=c.memoizedState,u!==null&&(u=u.dehydrated,u!==null&&(c=Dv.bind(null,c),Jv(u,c))));break;case 22:if(d=c.memoizedState!==null||ar,!d){s=s!==null&&s.memoizedState!==null||Je,m=ar;var b=Je;ar=d,(Je=s)&&!b?Rr(u,c,(c.subtreeFlags&8772)!==0):Nr(u,c),ar=m,Je=b}break;case 30:break;default:Nr(u,c)}}function Kg(u){var s=u.alternate;s!==null&&(u.alternate=null,Kg(s)),u.child=null,u.deletions=null,u.sibling=null,u.tag===5&&(s=u.stateNode,s!==null&&gf(s)),u.stateNode=null,u.return=null,u.dependencies=null,u.memoizedProps=null,u.memoizedState=null,u.pendingProps=null,u.stateNode=null,u.updateQueue=null}var Le=null,qt=!1;function cr(u,s,c){for(c=c.child;c!==null;)Yg(u,s,c),c=c.sibling}function Yg(u,s,c){if(Kt&&typeof Kt.onCommitFiberUnmount=="function")try{Kt.onCommitFiberUnmount(Eu,c)}catch{}switch(c.tag){case 26:Je||In(c,s),cr(u,s,c),c.memoizedState?c.memoizedState.count--:c.stateNode&&(c=c.stateNode,c.parentNode.removeChild(c));break;case 27:Je||In(c,s);var d=Le,m=qt;Ir(c.type)&&(Le=c.stateNode,qt=!1),cr(u,s,c),hs(c.stateNode),Le=d,qt=m;break;case 5:Je||In(c,s);case 6:if(d=Le,m=qt,Le=null,cr(u,s,c),Le=d,qt=m,Le!==null)if(qt)try{(Le.nodeType===9?Le.body:Le.nodeName==="HTML"?Le.ownerDocument.body:Le).removeChild(c.stateNode)}catch(b){Ne(c,s,b)}else try{Le.removeChild(c.stateNode)}catch(b){Ne(c,s,b)}break;case 18:Le!==null&&(qt?(u=Le,Fb(u.nodeType===9?u.body:u.nodeName==="HTML"?u.ownerDocument.body:u,c.stateNode),Ss(u)):Fb(Le,c.stateNode));break;case 4:d=Le,m=qt,Le=c.stateNode.containerInfo,qt=!0,cr(u,s,c),Le=d,qt=m;break;case 0:case 11:case 14:case 15:Je||_r(2,c,s),Je||_r(4,c,s),cr(u,s,c);break;case 1:Je||(In(c,s),d=c.stateNode,typeof d.componentWillUnmount=="function"&&Vg(c,s,d)),cr(u,s,c);break;case 21:cr(u,s,c);break;case 22:Je=(d=Je)||c.memoizedState!==null,cr(u,s,c),Je=d;break;default:cr(u,s,c)}}function Zg(u,s){if(s.memoizedState===null&&(u=s.alternate,u!==null&&(u=u.memoizedState,u!==null&&(u=u.dehydrated,u!==null))))try{Ss(u)}catch(c){Ne(s,s.return,c)}}function kv(u){switch(u.tag){case 13:case 19:var s=u.stateNode;return s===null&&(s=u.stateNode=new Jg),s;case 22:return u=u.stateNode,s=u._retryCache,s===null&&(s=u._retryCache=new Jg),s;default:throw Error(r(435,u.tag))}}function Ld(u,s){var c=kv(u);s.forEach(function(d){var m=wv.bind(null,u,d);c.has(d)||(c.add(d),d.then(m,m))})}function Qt(u,s){var c=s.deletions;if(c!==null)for(var d=0;d<c.length;d++){var m=c[d],b=u,S=s,v=S;e:for(;v!==null;){switch(v.tag){case 27:if(Ir(v.type)){Le=v.stateNode,qt=!1;break e}break;case 5:Le=v.stateNode,qt=!1;break e;case 3:case 4:Le=v.stateNode.containerInfo,qt=!0;break e}v=v.return}if(Le===null)throw Error(r(160));Yg(b,S,m),Le=null,qt=!1,b=m.alternate,b!==null&&(b.return=null),m.return=null}if(s.subtreeFlags&13878)for(s=s.child;s!==null;)Xg(s,u),s=s.sibling}var En=null;function Xg(u,s){var c=u.alternate,d=u.flags;switch(u.tag){case 0:case 11:case 14:case 15:Qt(s,u),Wt(u),d&4&&(_r(3,u,u.return),ns(3,u),_r(5,u,u.return));break;case 1:Qt(s,u),Wt(u),d&512&&(Je||c===null||In(c,c.return)),d&64&&ar&&(u=u.updateQueue,u!==null&&(d=u.callbacks,d!==null&&(c=u.shared.hiddenCallbacks,u.shared.hiddenCallbacks=c===null?d:c.concat(d))));break;case 26:var m=En;if(Qt(s,u),Wt(u),d&512&&(Je||c===null||In(c,c.return)),d&4){var b=c!==null?c.memoizedState:null;if(d=u.memoizedState,c===null)if(d===null)if(u.stateNode===null){e:{d=u.type,c=u.memoizedProps,m=m.ownerDocument||m;t:switch(d){case"title":b=m.getElementsByTagName("title")[0],(!b||b[Tu]||b[yt]||b.namespaceURI==="http://www.w3.org/2000/svg"||b.hasAttribute("itemprop"))&&(b=m.createElement(d),m.head.insertBefore(b,m.querySelector("head > title"))),ht(b,d,c),b[yt]=u,nt(b),d=b;break e;case"link":var S=Pb("link","href",m).get(d+(c.href||""));if(S){for(var v=0;v<S.length;v++)if(b=S[v],b.getAttribute("href")===(c.href==null||c.href===""?null:c.href)&&b.getAttribute("rel")===(c.rel==null?null:c.rel)&&b.getAttribute("title")===(c.title==null?null:c.title)&&b.getAttribute("crossorigin")===(c.crossOrigin==null?null:c.crossOrigin)){S.splice(v,1);break t}}b=m.createElement(d),ht(b,d,c),m.head.appendChild(b);break;case"meta":if(S=Pb("meta","content",m).get(d+(c.content||""))){for(v=0;v<S.length;v++)if(b=S[v],b.getAttribute("content")===(c.content==null?null:""+c.content)&&b.getAttribute("name")===(c.name==null?null:c.name)&&b.getAttribute("property")===(c.property==null?null:c.property)&&b.getAttribute("http-equiv")===(c.httpEquiv==null?null:c.httpEquiv)&&b.getAttribute("charset")===(c.charSet==null?null:c.charSet)){S.splice(v,1);break t}}b=m.createElement(d),ht(b,d,c),m.head.appendChild(b);break;default:throw Error(r(468,d))}b[yt]=u,nt(b),d=b}u.stateNode=d}else Jb(m,u.type,u.stateNode);else u.stateNode=jb(m,d,u.memoizedProps);else b!==d?(b===null?c.stateNode!==null&&(c=c.stateNode,c.parentNode.removeChild(c)):b.count--,d===null?Jb(m,u.type,u.stateNode):jb(m,d,u.memoizedProps)):d===null&&u.stateNode!==null&&zd(u,u.memoizedProps,c.memoizedProps)}break;case 27:Qt(s,u),Wt(u),d&512&&(Je||c===null||In(c,c.return)),c!==null&&d&4&&zd(u,u.memoizedProps,c.memoizedProps);break;case 5:if(Qt(s,u),Wt(u),d&512&&(Je||c===null||In(c,c.return)),u.flags&32){m=u.stateNode;try{bl(m,"")}catch(z){Ne(u,u.return,z)}}d&4&&u.stateNode!=null&&(m=u.memoizedProps,zd(u,m,c!==null?c.memoizedProps:m)),d&1024&&(Fd=!0);break;case 6:if(Qt(s,u),Wt(u),d&4){if(u.stateNode===null)throw Error(r(162));d=u.memoizedProps,c=u.stateNode;try{c.nodeValue=d}catch(z){Ne(u,u.return,z)}}break;case 3:if(Ta=null,m=En,En=Ma(s.containerInfo),Qt(s,u),En=m,Wt(u),d&4&&c!==null&&c.memoizedState.isDehydrated)try{Ss(s.containerInfo)}catch(z){Ne(u,u.return,z)}Fd&&(Fd=!1,Qg(u));break;case 4:d=En,En=Ma(u.stateNode.containerInfo),Qt(s,u),Wt(u),En=d;break;case 12:Qt(s,u),Wt(u);break;case 13:Qt(s,u),Wt(u),u.child.flags&8192&&u.memoizedState!==null!=(c!==null&&c.memoizedState!==null)&&(jd=$n()),d&4&&(d=u.updateQueue,d!==null&&(u.updateQueue=null,Ld(u,d)));break;case 22:m=u.memoizedState!==null;var M=c!==null&&c.memoizedState!==null,_=ar,F=Je;if(ar=_||m,Je=F||M,Qt(s,u),Je=F,ar=_,Wt(u),d&8192)e:for(s=u.stateNode,s._visibility=m?s._visibility&-2:s._visibility|1,m&&(c===null||M||ar||Je||wi(u)),c=null,s=u;;){if(s.tag===5||s.tag===26){if(c===null){M=c=s;try{if(b=M.stateNode,m)S=b.style,typeof S.setProperty=="function"?S.setProperty("display","none","important"):S.display="none";else{v=M.stateNode;var q=M.memoizedProps.style,R=q!=null&&q.hasOwnProperty("display")?q.display:null;v.style.display=R==null||typeof R=="boolean"?"":(""+R).trim()}}catch(z){Ne(M,M.return,z)}}}else if(s.tag===6){if(c===null){M=s;try{M.stateNode.nodeValue=m?"":M.memoizedProps}catch(z){Ne(M,M.return,z)}}}else if((s.tag!==22&&s.tag!==23||s.memoizedState===null||s===u)&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===u)break e;for(;s.sibling===null;){if(s.return===null||s.return===u)break e;c===s&&(c=null),s=s.return}c===s&&(c=null),s.sibling.return=s.return,s=s.sibling}d&4&&(d=u.updateQueue,d!==null&&(c=d.retryQueue,c!==null&&(d.retryQueue=null,Ld(u,c))));break;case 19:Qt(s,u),Wt(u),d&4&&(d=u.updateQueue,d!==null&&(u.updateQueue=null,Ld(u,d)));break;case 30:break;case 21:break;default:Qt(s,u),Wt(u)}}function Wt(u){var s=u.flags;if(s&2){try{for(var c,d=u.return;d!==null;){if(jg(d)){c=d;break}d=d.return}if(c==null)throw Error(r(160));switch(c.tag){case 27:var m=c.stateNode,b=Bd(u);da(u,b,m);break;case 5:var S=c.stateNode;c.flags&32&&(bl(S,""),c.flags&=-33);var v=Bd(u);da(u,v,S);break;case 3:case 4:var M=c.stateNode.containerInfo,_=Bd(u);$d(u,_,M);break;default:throw Error(r(161))}}catch(F){Ne(u,u.return,F)}u.flags&=-3}s&4096&&(u.flags&=-4097)}function Qg(u){if(u.subtreeFlags&1024)for(u=u.child;u!==null;){var s=u;Qg(s),s.tag===5&&s.flags&1024&&s.stateNode.reset(),u=u.sibling}}function Nr(u,s){if(s.subtreeFlags&8772)for(s=s.child;s!==null;)Gg(u,s.alternate,s),s=s.sibling}function wi(u){for(u=u.child;u!==null;){var s=u;switch(s.tag){case 0:case 11:case 14:case 15:_r(4,s,s.return),wi(s);break;case 1:In(s,s.return);var c=s.stateNode;typeof c.componentWillUnmount=="function"&&Vg(s,s.return,c),wi(s);break;case 27:hs(s.stateNode);case 26:case 5:In(s,s.return),wi(s);break;case 22:s.memoizedState===null&&wi(s);break;case 30:wi(s);break;default:wi(s)}u=u.sibling}}function Rr(u,s,c){for(c=c&&(s.subtreeFlags&8772)!==0,s=s.child;s!==null;){var d=s.alternate,m=u,b=s,S=b.flags;switch(b.tag){case 0:case 11:case 15:Rr(m,b,c),ns(4,b);break;case 1:if(Rr(m,b,c),d=b,m=d.stateNode,typeof m.componentDidMount=="function")try{m.componentDidMount()}catch(_){Ne(d,d.return,_)}if(d=b,m=d.updateQueue,m!==null){var v=d.stateNode;try{var M=m.shared.hiddenCallbacks;if(M!==null)for(m.shared.hiddenCallbacks=null,m=0;m<M.length;m++)T1(M[m],v)}catch(_){Ne(d,d.return,_)}}c&&S&64&&Hg(b),rs(b,b.return);break;case 27:Pg(b);case 26:case 5:Rr(m,b,c),c&&d===null&&S&4&&Ug(b),rs(b,b.return);break;case 12:Rr(m,b,c);break;case 13:Rr(m,b,c),c&&S&4&&Zg(m,b);break;case 22:b.memoizedState===null&&Rr(m,b,c),rs(b,b.return);break;case 30:break;default:Rr(m,b,c)}s=s.sibling}}function Id(u,s){var c=null;u!==null&&u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(c=u.memoizedState.cachePool.pool),u=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(u=s.memoizedState.cachePool.pool),u!==c&&(u!=null&&u.refCount++,c!=null&&Vu(c))}function qd(u,s){u=null,s.alternate!==null&&(u=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==u&&(s.refCount++,u!=null&&Vu(u))}function qn(u,s,c,d){if(s.subtreeFlags&10256)for(s=s.child;s!==null;)Wg(u,s,c,d),s=s.sibling}function Wg(u,s,c,d){var m=s.flags;switch(s.tag){case 0:case 11:case 15:qn(u,s,c,d),m&2048&&ns(9,s);break;case 1:qn(u,s,c,d);break;case 3:qn(u,s,c,d),m&2048&&(u=null,s.alternate!==null&&(u=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==u&&(s.refCount++,u!=null&&Vu(u)));break;case 12:if(m&2048){qn(u,s,c,d),u=s.stateNode;try{var b=s.memoizedProps,S=b.id,v=b.onPostCommit;typeof v=="function"&&v(S,s.alternate===null?"mount":"update",u.passiveEffectDuration,-0)}catch(M){Ne(s,s.return,M)}}else qn(u,s,c,d);break;case 13:qn(u,s,c,d);break;case 23:break;case 22:b=s.stateNode,S=s.alternate,s.memoizedState!==null?b._visibility&2?qn(u,s,c,d):is(u,s):b._visibility&2?qn(u,s,c,d):(b._visibility|=2,$l(u,s,c,d,(s.subtreeFlags&10256)!==0)),m&2048&&Id(S,s);break;case 24:qn(u,s,c,d),m&2048&&qd(s.alternate,s);break;default:qn(u,s,c,d)}}function $l(u,s,c,d,m){for(m=m&&(s.subtreeFlags&10256)!==0,s=s.child;s!==null;){var b=u,S=s,v=c,M=d,_=S.flags;switch(S.tag){case 0:case 11:case 15:$l(b,S,v,M,m),ns(8,S);break;case 23:break;case 22:var F=S.stateNode;S.memoizedState!==null?F._visibility&2?$l(b,S,v,M,m):is(b,S):(F._visibility|=2,$l(b,S,v,M,m)),m&&_&2048&&Id(S.alternate,S);break;case 24:$l(b,S,v,M,m),m&&_&2048&&qd(S.alternate,S);break;default:$l(b,S,v,M,m)}s=s.sibling}}function is(u,s){if(s.subtreeFlags&10256)for(s=s.child;s!==null;){var c=u,d=s,m=d.flags;switch(d.tag){case 22:is(c,d),m&2048&&Id(d.alternate,d);break;case 24:is(c,d),m&2048&&qd(d.alternate,d);break;default:is(c,d)}s=s.sibling}}var ls=8192;function Fl(u){if(u.subtreeFlags&ls)for(u=u.child;u!==null;)eb(u),u=u.sibling}function eb(u){switch(u.tag){case 26:Fl(u),u.flags&ls&&u.memoizedState!==null&&l4(En,u.memoizedState,u.memoizedProps);break;case 5:Fl(u);break;case 3:case 4:var s=En;En=Ma(u.stateNode.containerInfo),Fl(u),En=s;break;case 22:u.memoizedState===null&&(s=u.alternate,s!==null&&s.memoizedState!==null?(s=ls,ls=16777216,Fl(u),ls=s):Fl(u));break;default:Fl(u)}}function tb(u){var s=u.alternate;if(s!==null&&(u=s.child,u!==null)){s.child=null;do s=u.sibling,u.sibling=null,u=s;while(u!==null)}}function us(u){var s=u.deletions;if((u.flags&16)!==0){if(s!==null)for(var c=0;c<s.length;c++){var d=s[c];it=d,rb(d,u)}tb(u)}if(u.subtreeFlags&10256)for(u=u.child;u!==null;)nb(u),u=u.sibling}function nb(u){switch(u.tag){case 0:case 11:case 15:us(u),u.flags&2048&&_r(9,u,u.return);break;case 3:us(u);break;case 12:us(u);break;case 22:var s=u.stateNode;u.memoizedState!==null&&s._visibility&2&&(u.return===null||u.return.tag!==13)?(s._visibility&=-3,ha(u)):us(u);break;default:us(u)}}function ha(u){var s=u.deletions;if((u.flags&16)!==0){if(s!==null)for(var c=0;c<s.length;c++){var d=s[c];it=d,rb(d,u)}tb(u)}for(u=u.child;u!==null;){switch(s=u,s.tag){case 0:case 11:case 15:_r(8,s,s.return),ha(s);break;case 22:c=s.stateNode,c._visibility&2&&(c._visibility&=-3,ha(s));break;default:ha(s)}u=u.sibling}}function rb(u,s){for(;it!==null;){var c=it;switch(c.tag){case 0:case 11:case 15:_r(8,c,s);break;case 23:case 22:if(c.memoizedState!==null&&c.memoizedState.cachePool!==null){var d=c.memoizedState.cachePool.pool;d!=null&&d.refCount++}break;case 24:Vu(c.memoizedState.cache)}if(d=c.child,d!==null)d.return=c,it=d;else e:for(c=u;it!==null;){d=it;var m=d.sibling,b=d.return;if(Kg(d),d===c){it=null;break e}if(m!==null){m.return=b,it=m;break e}it=b}}}var Sv={getCacheForType:function(u){var s=xt(Xe),c=s.data.get(u);return c===void 0&&(c=u(),s.data.set(u,c)),c}},Cv=typeof WeakMap=="function"?WeakMap:Map,Ae=0,Re=null,be=null,ke=0,Te=0,en=null,zr=!1,Ll=!1,Hd=!1,fr=0,Ve=0,Br=0,Oi=0,Vd=0,gn=0,Il=0,ss=null,Ht=null,Ud=!1,jd=0,pa=1/0,ma=null,$r=null,dt=0,Fr=null,ql=null,Hl=0,Pd=0,Jd=null,ib=null,as=0,Gd=null;function tn(){if((Ae&2)!==0&&ke!==0)return ke&-ke;if($.T!==null){var u=Dl;return u!==0?u:eh()}return km()}function lb(){gn===0&&(gn=(ke&536870912)===0||Ee?gm():536870912);var u=mn.current;return u!==null&&(u.flags|=32),gn}function nn(u,s,c){(u===Re&&(Te===2||Te===9)||u.cancelPendingCommit!==null)&&(Vl(u,0),Lr(u,ke,gn,!1)),Au(u,c),((Ae&2)===0||u!==Re)&&(u===Re&&((Ae&2)===0&&(Oi|=c),Ve===4&&Lr(u,ke,gn,!1)),Hn(u))}function ub(u,s,c){if((Ae&6)!==0)throw Error(r(327));var d=!c&&(s&124)===0&&(s&u.expiredLanes)===0||Mu(u,s),m=d?Mv(u,s):Zd(u,s,!0),b=d;do{if(m===0){Ll&&!d&&Lr(u,s,0,!1);break}else{if(c=u.current.alternate,b&&!vv(c)){m=Zd(u,s,!1),b=!1;continue}if(m===2){if(b=s,u.errorRecoveryDisabledLanes&b)var S=0;else S=u.pendingLanes&-536870913,S=S!==0?S:S&536870912?536870912:0;if(S!==0){s=S;e:{var v=u;m=ss;var M=v.current.memoizedState.isDehydrated;if(M&&(Vl(v,S).flags|=256),S=Zd(v,S,!1),S!==2){if(Hd&&!M){v.errorRecoveryDisabledLanes|=b,Oi|=b,m=4;break e}b=Ht,Ht=m,b!==null&&(Ht===null?Ht=b:Ht.push.apply(Ht,b))}m=S}if(b=!1,m!==2)continue}}if(m===1){Vl(u,0),Lr(u,s,0,!0);break}e:{switch(d=u,b=m,b){case 0:case 1:throw Error(r(345));case 4:if((s&4194048)!==s)break;case 6:Lr(d,s,gn,!zr);break e;case 2:Ht=null;break;case 3:case 5:break;default:throw Error(r(329))}if((s&62914560)===s&&(m=jd+300-$n(),10<m)){if(Lr(d,s,gn,!zr),Ao(d,0,!0)!==0)break e;d.timeoutHandle=Bb(sb.bind(null,d,c,Ht,ma,Ud,s,gn,Oi,Il,zr,b,2,-0,0),m);break e}sb(d,c,Ht,ma,Ud,s,gn,Oi,Il,zr,b,0,-0,0)}}break}while(!0);Hn(u)}function sb(u,s,c,d,m,b,S,v,M,_,F,q,R,z){if(u.timeoutHandle=-1,q=s.subtreeFlags,(q&8192||(q&16785408)===16785408)&&(gs={stylesheets:null,count:0,unsuspend:i4},eb(s),q=u4(),q!==null)){u.cancelPendingCommit=q(pb.bind(null,u,s,b,c,d,m,S,v,M,F,1,R,z)),Lr(u,b,S,!_);return}pb(u,s,b,c,d,m,S,v,M)}function vv(u){for(var s=u;;){var c=s.tag;if((c===0||c===11||c===15)&&s.flags&16384&&(c=s.updateQueue,c!==null&&(c=c.stores,c!==null)))for(var d=0;d<c.length;d++){var m=c[d],b=m.getSnapshot;m=m.value;try{if(!Zt(b(),m))return!1}catch{return!1}}if(c=s.child,s.subtreeFlags&16384&&c!==null)c.return=s,s=c;else{if(s===u)break;for(;s.sibling===null;){if(s.return===null||s.return===u)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function Lr(u,s,c,d){s&=~Vd,s&=~Oi,u.suspendedLanes|=s,u.pingedLanes&=~s,d&&(u.warmLanes|=s),d=u.expirationTimes;for(var m=s;0<m;){var b=31-Yt(m),S=1<<b;d[b]=-1,m&=~S}c!==0&&ym(u,c,s)}function ga(){return(Ae&6)===0?(cs(0),!1):!0}function Kd(){if(be!==null){if(Te===0)var u=be.return;else u=be,rr=Ei=null,fd(u),zl=null,Wu=0,u=be;for(;u!==null;)qg(u.alternate,u),u=u.return;be=null}}function Vl(u,s){var c=u.timeoutHandle;c!==-1&&(u.timeoutHandle=-1,Hv(c)),c=u.cancelPendingCommit,c!==null&&(u.cancelPendingCommit=null,c()),Kd(),Re=u,be=c=er(u.current,null),ke=s,Te=0,en=null,zr=!1,Ll=Mu(u,s),Hd=!1,Il=gn=Vd=Oi=Br=Ve=0,Ht=ss=null,Ud=!1,(s&8)!==0&&(s|=s&32);var d=u.entangledLanes;if(d!==0)for(u=u.entanglements,d&=s;0<d;){var m=31-Yt(d),b=1<<m;s|=u[m],d&=~b}return fr=s,Lo(),c}function ob(u,s){pe=null,$.H=ra,s===ju||s===Go?(s=M1(),Te=3):s===C1?(s=M1(),Te=4):Te=s===Ag?8:s!==null&&typeof s=="object"&&typeof s.then=="function"?6:1,en=s,be===null&&(Ve=1,oa(u,fn(s,u.current)))}function ab(){var u=$.H;return $.H=ra,u===null?ra:u}function cb(){var u=$.A;return $.A=Sv,u}function Yd(){Ve=4,zr||(ke&4194048)!==ke&&mn.current!==null||(Ll=!0),(Br&134217727)===0&&(Oi&134217727)===0||Re===null||Lr(Re,ke,gn,!1)}function Zd(u,s,c){var d=Ae;Ae|=2;var m=ab(),b=cb();(Re!==u||ke!==s)&&(ma=null,Vl(u,s)),s=!1;var S=Ve;e:do try{if(Te!==0&&be!==null){var v=be,M=en;switch(Te){case 8:Kd(),S=6;break e;case 3:case 2:case 9:case 6:mn.current===null&&(s=!0);var _=Te;if(Te=0,en=null,Ul(u,v,M,_),c&&Ll){S=0;break e}break;default:_=Te,Te=0,en=null,Ul(u,v,M,_)}}Ev(),S=Ve;break}catch(F){ob(u,F)}while(!0);return s&&u.shellSuspendCounter++,rr=Ei=null,Ae=d,$.H=m,$.A=b,be===null&&(Re=null,ke=0,Lo()),S}function Ev(){for(;be!==null;)fb(be)}function Mv(u,s){var c=Ae;Ae|=2;var d=ab(),m=cb();Re!==u||ke!==s?(ma=null,pa=$n()+500,Vl(u,s)):Ll=Mu(u,s);e:do try{if(Te!==0&&be!==null){s=be;var b=en;t:switch(Te){case 1:Te=0,en=null,Ul(u,s,b,1);break;case 2:case 9:if(v1(b)){Te=0,en=null,db(s);break}s=function(){Te!==2&&Te!==9||Re!==u||(Te=7),Hn(u)},b.then(s,s);break e;case 3:Te=7;break e;case 4:Te=5;break e;case 7:v1(b)?(Te=0,en=null,db(s)):(Te=0,en=null,Ul(u,s,b,7));break;case 5:var S=null;switch(be.tag){case 26:S=be.memoizedState;case 5:case 27:var v=be;if(!S||Gb(S)){Te=0,en=null;var M=v.sibling;if(M!==null)be=M;else{var _=v.return;_!==null?(be=_,ba(_)):be=null}break t}}Te=0,en=null,Ul(u,s,b,5);break;case 6:Te=0,en=null,Ul(u,s,b,6);break;case 8:Kd(),Ve=6;break e;default:throw Error(r(462))}}Av();break}catch(F){ob(u,F)}while(!0);return rr=Ei=null,$.H=d,$.A=m,Ae=c,be!==null?0:(Re=null,ke=0,Lo(),Ve)}function Av(){for(;be!==null&&!K6();)fb(be)}function fb(u){var s=Lg(u.alternate,u,fr);u.memoizedProps=u.pendingProps,s===null?ba(u):be=s}function db(u){var s=u,c=s.alternate;switch(s.tag){case 15:case 0:s=Ng(c,s,s.pendingProps,s.type,void 0,ke);break;case 11:s=Ng(c,s,s.pendingProps,s.type.render,s.ref,ke);break;case 5:fd(s);default:qg(c,s),s=be=h1(s,fr),s=Lg(c,s,fr)}u.memoizedProps=u.pendingProps,s===null?ba(u):be=s}function Ul(u,s,c,d){rr=Ei=null,fd(s),zl=null,Wu=0;var m=s.return;try{if(mv(u,m,s,c,ke)){Ve=1,oa(u,fn(c,u.current)),be=null;return}}catch(b){if(m!==null)throw be=m,b;Ve=1,oa(u,fn(c,u.current)),be=null;return}s.flags&32768?(Ee||d===1?u=!0:Ll||(ke&536870912)!==0?u=!1:(zr=u=!0,(d===2||d===9||d===3||d===6)&&(d=mn.current,d!==null&&d.tag===13&&(d.flags|=16384))),hb(s,u)):ba(s)}function ba(u){var s=u;do{if((s.flags&32768)!==0){hb(s,zr);return}u=s.return;var c=bv(s.alternate,s,fr);if(c!==null){be=c;return}if(s=s.sibling,s!==null){be=s;return}be=s=u}while(s!==null);Ve===0&&(Ve=5)}function hb(u,s){do{var c=yv(u.alternate,u);if(c!==null){c.flags&=32767,be=c;return}if(c=u.return,c!==null&&(c.flags|=32768,c.subtreeFlags=0,c.deletions=null),!s&&(u=u.sibling,u!==null)){be=u;return}be=u=c}while(u!==null);Ve=6,be=null}function pb(u,s,c,d,m,b,S,v,M){u.cancelPendingCommit=null;do ya();while(dt!==0);if((Ae&6)!==0)throw Error(r(327));if(s!==null){if(s===u.current)throw Error(r(177));if(b=s.lanes|s.childLanes,b|=qf,iC(u,c,b,S,v,M),u===Re&&(be=Re=null,ke=0),ql=s,Fr=u,Hl=c,Pd=b,Jd=m,ib=d,(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?(u.callbackNode=null,u.callbackPriority=0,Ov(vo,function(){return xb(),null})):(u.callbackNode=null,u.callbackPriority=0),d=(s.flags&13878)!==0,(s.subtreeFlags&13878)!==0||d){d=$.T,$.T=null,m=G.p,G.p=2,S=Ae,Ae|=4;try{xv(u,s,c)}finally{Ae=S,G.p=m,$.T=d}}dt=1,mb(),gb(),bb()}}function mb(){if(dt===1){dt=0;var u=Fr,s=ql,c=(s.flags&13878)!==0;if((s.subtreeFlags&13878)!==0||c){c=$.T,$.T=null;var d=G.p;G.p=2;var m=Ae;Ae|=4;try{Xg(s,u);var b=oh,S=r1(u.containerInfo),v=b.focusedElem,M=b.selectionRange;if(S!==v&&v&&v.ownerDocument&&n1(v.ownerDocument.documentElement,v)){if(M!==null&&Bf(v)){var _=M.start,F=M.end;if(F===void 0&&(F=_),"selectionStart"in v)v.selectionStart=_,v.selectionEnd=Math.min(F,v.value.length);else{var q=v.ownerDocument||document,R=q&&q.defaultView||window;if(R.getSelection){var z=R.getSelection(),se=v.textContent.length,ie=Math.min(M.start,se),Oe=M.end===void 0?ie:Math.min(M.end,se);!z.extend&&ie>Oe&&(S=Oe,Oe=ie,ie=S);var w=t1(v,ie),D=t1(v,Oe);if(w&&D&&(z.rangeCount!==1||z.anchorNode!==w.node||z.anchorOffset!==w.offset||z.focusNode!==D.node||z.focusOffset!==D.offset)){var O=q.createRange();O.setStart(w.node,w.offset),z.removeAllRanges(),ie>Oe?(z.addRange(O),z.extend(D.node,D.offset)):(O.setEnd(D.node,D.offset),z.addRange(O))}}}}for(q=[],z=v;z=z.parentNode;)z.nodeType===1&&q.push({element:z,left:z.scrollLeft,top:z.scrollTop});for(typeof v.focus=="function"&&v.focus(),v=0;v<q.length;v++){var I=q[v];I.element.scrollLeft=I.left,I.element.scrollTop=I.top}}Oa=!!sh,oh=sh=null}finally{Ae=m,G.p=d,$.T=c}}u.current=s,dt=2}}function gb(){if(dt===2){dt=0;var u=Fr,s=ql,c=(s.flags&8772)!==0;if((s.subtreeFlags&8772)!==0||c){c=$.T,$.T=null;var d=G.p;G.p=2;var m=Ae;Ae|=4;try{Gg(u,s.alternate,s)}finally{Ae=m,G.p=d,$.T=c}}dt=3}}function bb(){if(dt===4||dt===3){dt=0,Y6();var u=Fr,s=ql,c=Hl,d=ib;(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?dt=5:(dt=0,ql=Fr=null,yb(u,u.pendingLanes));var m=u.pendingLanes;if(m===0&&($r=null),pf(c),s=s.stateNode,Kt&&typeof Kt.onCommitFiberRoot=="function")try{Kt.onCommitFiberRoot(Eu,s,void 0,(s.current.flags&128)===128)}catch{}if(d!==null){s=$.T,m=G.p,G.p=2,$.T=null;try{for(var b=u.onRecoverableError,S=0;S<d.length;S++){var v=d[S];b(v.value,{componentStack:v.stack})}}finally{$.T=s,G.p=m}}(Hl&3)!==0&&ya(),Hn(u),m=u.pendingLanes,(c&4194090)!==0&&(m&42)!==0?u===Gd?as++:(as=0,Gd=u):as=0,cs(0)}}function yb(u,s){(u.pooledCacheLanes&=s)===0&&(s=u.pooledCache,s!=null&&(u.pooledCache=null,Vu(s)))}function ya(u){return mb(),gb(),bb(),xb()}function xb(){if(dt!==5)return!1;var u=Fr,s=Pd;Pd=0;var c=pf(Hl),d=$.T,m=G.p;try{G.p=32>c?32:c,$.T=null,c=Jd,Jd=null;var b=Fr,S=Hl;if(dt=0,ql=Fr=null,Hl=0,(Ae&6)!==0)throw Error(r(331));var v=Ae;if(Ae|=4,nb(b.current),Wg(b,b.current,S,c),Ae=v,cs(0,!1),Kt&&typeof Kt.onPostCommitFiberRoot=="function")try{Kt.onPostCommitFiberRoot(Eu,b)}catch{}return!0}finally{G.p=m,$.T=d,yb(u,s)}}function kb(u,s,c){s=fn(c,s),s=Md(u.stateNode,s,2),u=Tr(u,s,2),u!==null&&(Au(u,2),Hn(u))}function Ne(u,s,c){if(u.tag===3)kb(u,u,c);else for(;s!==null;){if(s.tag===3){kb(s,u,c);break}else if(s.tag===1){var d=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof d.componentDidCatch=="function"&&($r===null||!$r.has(d))){u=fn(c,u),c=Eg(2),d=Tr(s,c,2),d!==null&&(Mg(c,d,s,u),Au(d,2),Hn(d));break}}s=s.return}}function Xd(u,s,c){var d=u.pingCache;if(d===null){d=u.pingCache=new Cv;var m=new Set;d.set(s,m)}else m=d.get(s),m===void 0&&(m=new Set,d.set(s,m));m.has(c)||(Hd=!0,m.add(c),u=Tv.bind(null,u,s,c),s.then(u,u))}function Tv(u,s,c){var d=u.pingCache;d!==null&&d.delete(s),u.pingedLanes|=u.suspendedLanes&c,u.warmLanes&=~c,Re===u&&(ke&c)===c&&(Ve===4||Ve===3&&(ke&62914560)===ke&&300>$n()-jd?(Ae&2)===0&&Vl(u,0):Vd|=c,Il===ke&&(Il=0)),Hn(u)}function Sb(u,s){s===0&&(s=bm()),u=El(u,s),u!==null&&(Au(u,s),Hn(u))}function Dv(u){var s=u.memoizedState,c=0;s!==null&&(c=s.retryLane),Sb(u,c)}function wv(u,s){var c=0;switch(u.tag){case 13:var d=u.stateNode,m=u.memoizedState;m!==null&&(c=m.retryLane);break;case 19:d=u.stateNode;break;case 22:d=u.stateNode._retryCache;break;default:throw Error(r(314))}d!==null&&d.delete(s),Sb(u,c)}function Ov(u,s){return cf(u,s)}var xa=null,jl=null,Qd=!1,ka=!1,Wd=!1,_i=0;function Hn(u){u!==jl&&u.next===null&&(jl===null?xa=jl=u:jl=jl.next=u),ka=!0,Qd||(Qd=!0,Nv())}function cs(u,s){if(!Wd&&ka){Wd=!0;do for(var c=!1,d=xa;d!==null;){if(u!==0){var m=d.pendingLanes;if(m===0)var b=0;else{var S=d.suspendedLanes,v=d.pingedLanes;b=(1<<31-Yt(42|u)+1)-1,b&=m&~(S&~v),b=b&201326741?b&201326741|1:b?b|2:0}b!==0&&(c=!0,Mb(d,b))}else b=ke,b=Ao(d,d===Re?b:0,d.cancelPendingCommit!==null||d.timeoutHandle!==-1),(b&3)===0||Mu(d,b)||(c=!0,Mb(d,b));d=d.next}while(c);Wd=!1}}function _v(){Cb()}function Cb(){ka=Qd=!1;var u=0;_i!==0&&(qv()&&(u=_i),_i=0);for(var s=$n(),c=null,d=xa;d!==null;){var m=d.next,b=vb(d,s);b===0?(d.next=null,c===null?xa=m:c.next=m,m===null&&(jl=c)):(c=d,(u!==0||(b&3)!==0)&&(ka=!0)),d=m}cs(u)}function vb(u,s){for(var c=u.suspendedLanes,d=u.pingedLanes,m=u.expirationTimes,b=u.pendingLanes&-62914561;0<b;){var S=31-Yt(b),v=1<<S,M=m[S];M===-1?((v&c)===0||(v&d)!==0)&&(m[S]=rC(v,s)):M<=s&&(u.expiredLanes|=v),b&=~v}if(s=Re,c=ke,c=Ao(u,u===s?c:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),d=u.callbackNode,c===0||u===s&&(Te===2||Te===9)||u.cancelPendingCommit!==null)return d!==null&&d!==null&&ff(d),u.callbackNode=null,u.callbackPriority=0;if((c&3)===0||Mu(u,c)){if(s=c&-c,s===u.callbackPriority)return s;switch(d!==null&&ff(d),pf(c)){case 2:case 8:c=pm;break;case 32:c=vo;break;case 268435456:c=mm;break;default:c=vo}return d=Eb.bind(null,u),c=cf(c,d),u.callbackPriority=s,u.callbackNode=c,s}return d!==null&&d!==null&&ff(d),u.callbackPriority=2,u.callbackNode=null,2}function Eb(u,s){if(dt!==0&&dt!==5)return u.callbackNode=null,u.callbackPriority=0,null;var c=u.callbackNode;if(ya()&&u.callbackNode!==c)return null;var d=ke;return d=Ao(u,u===Re?d:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),d===0?null:(ub(u,d,s),vb(u,$n()),u.callbackNode!=null&&u.callbackNode===c?Eb.bind(null,u):null)}function Mb(u,s){if(ya())return null;ub(u,s,!0)}function Nv(){Vv(function(){(Ae&6)!==0?cf(hm,_v):Cb()})}function eh(){return _i===0&&(_i=gm()),_i}function Ab(u){return u==null||typeof u=="symbol"||typeof u=="boolean"?null:typeof u=="function"?u:_o(""+u)}function Tb(u,s){var c=s.ownerDocument.createElement("input");return c.name=s.name,c.value=s.value,u.id&&c.setAttribute("form",u.id),s.parentNode.insertBefore(c,s),u=new FormData(u),c.parentNode.removeChild(c),u}function Rv(u,s,c,d,m){if(s==="submit"&&c&&c.stateNode===m){var b=Ab((m[Ft]||null).action),S=d.submitter;S&&(s=(s=S[Ft]||null)?Ab(s.formAction):S.getAttribute("formAction"),s!==null&&(b=s,S=null));var v=new Bo("action","action",null,d,m);u.push({event:v,listeners:[{instance:null,listener:function(){if(d.defaultPrevented){if(_i!==0){var M=S?Tb(m,S):new FormData(m);kd(c,{pending:!0,data:M,method:m.method,action:b},null,M)}}else typeof b=="function"&&(v.preventDefault(),M=S?Tb(m,S):new FormData(m),kd(c,{pending:!0,data:M,method:m.method,action:b},b,M))},currentTarget:m}]})}}for(var th=0;th<If.length;th++){var nh=If[th],zv=nh.toLowerCase(),Bv=nh[0].toUpperCase()+nh.slice(1);vn(zv,"on"+Bv)}vn(u1,"onAnimationEnd"),vn(s1,"onAnimationIteration"),vn(o1,"onAnimationStart"),vn("dblclick","onDoubleClick"),vn("focusin","onFocus"),vn("focusout","onBlur"),vn(QC,"onTransitionRun"),vn(WC,"onTransitionStart"),vn(ev,"onTransitionCancel"),vn(a1,"onTransitionEnd"),pl("onMouseEnter",["mouseout","mouseover"]),pl("onMouseLeave",["mouseout","mouseover"]),pl("onPointerEnter",["pointerout","pointerover"]),pl("onPointerLeave",["pointerout","pointerover"]),mi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),mi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),mi("onBeforeInput",["compositionend","keypress","textInput","paste"]),mi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),mi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),mi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var fs="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),$v=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(fs));function Db(u,s){s=(s&4)!==0;for(var c=0;c<u.length;c++){var d=u[c],m=d.event;d=d.listeners;e:{var b=void 0;if(s)for(var S=d.length-1;0<=S;S--){var v=d[S],M=v.instance,_=v.currentTarget;if(v=v.listener,M!==b&&m.isPropagationStopped())break e;b=v,m.currentTarget=_;try{b(m)}catch(F){sa(F)}m.currentTarget=null,b=M}else for(S=0;S<d.length;S++){if(v=d[S],M=v.instance,_=v.currentTarget,v=v.listener,M!==b&&m.isPropagationStopped())break e;b=v,m.currentTarget=_;try{b(m)}catch(F){sa(F)}m.currentTarget=null,b=M}}}}function ye(u,s){var c=s[mf];c===void 0&&(c=s[mf]=new Set);var d=u+"__bubble";c.has(d)||(wb(s,u,2,!1),c.add(d))}function rh(u,s,c){var d=0;s&&(d|=4),wb(c,u,d,s)}var Sa="_reactListening"+Math.random().toString(36).slice(2);function ih(u){if(!u[Sa]){u[Sa]=!0,Cm.forEach(function(c){c!=="selectionchange"&&($v.has(c)||rh(c,!1,u),rh(c,!0,u))});var s=u.nodeType===9?u:u.ownerDocument;s===null||s[Sa]||(s[Sa]=!0,rh("selectionchange",!1,s))}}function wb(u,s,c,d){switch(Wb(s)){case 2:var m=a4;break;case 8:m=c4;break;default:m=yh}c=m.bind(null,s,c,u),m=void 0,!Af||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(m=!0),d?m!==void 0?u.addEventListener(s,c,{capture:!0,passive:m}):u.addEventListener(s,c,!0):m!==void 0?u.addEventListener(s,c,{passive:m}):u.addEventListener(s,c,!1)}function lh(u,s,c,d,m){var b=d;if((s&1)===0&&(s&2)===0&&d!==null)e:for(;;){if(d===null)return;var S=d.tag;if(S===3||S===4){var v=d.stateNode.containerInfo;if(v===m)break;if(S===4)for(S=d.return;S!==null;){var M=S.tag;if((M===3||M===4)&&S.stateNode.containerInfo===m)return;S=S.return}for(;v!==null;){if(S=fl(v),S===null)return;if(M=S.tag,M===5||M===6||M===26||M===27){d=b=S;continue e}v=v.parentNode}}d=d.return}$m(function(){var _=b,F=Ef(c),q=[];e:{var R=c1.get(u);if(R!==void 0){var z=Bo,se=u;switch(u){case"keypress":if(Ro(c)===0)break e;case"keydown":case"keyup":z=OC;break;case"focusin":se="focus",z=Of;break;case"focusout":se="blur",z=Of;break;case"beforeblur":case"afterblur":z=Of;break;case"click":if(c.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":z=Im;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":z=yC;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":z=RC;break;case u1:case s1:case o1:z=SC;break;case a1:z=BC;break;case"scroll":case"scrollend":z=gC;break;case"wheel":z=FC;break;case"copy":case"cut":case"paste":z=vC;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":z=Hm;break;case"toggle":case"beforetoggle":z=IC}var ie=(s&4)!==0,Oe=!ie&&(u==="scroll"||u==="scrollend"),w=ie?R!==null?R+"Capture":null:R;ie=[];for(var D=_,O;D!==null;){var I=D;if(O=I.stateNode,I=I.tag,I!==5&&I!==26&&I!==27||O===null||w===null||(I=wu(D,w),I!=null&&ie.push(ds(D,I,O))),Oe)break;D=D.return}0<ie.length&&(R=new z(R,se,null,c,F),q.push({event:R,listeners:ie}))}}if((s&7)===0){e:{if(R=u==="mouseover"||u==="pointerover",z=u==="mouseout"||u==="pointerout",R&&c!==vf&&(se=c.relatedTarget||c.fromElement)&&(fl(se)||se[cl]))break e;if((z||R)&&(R=F.window===F?F:(R=F.ownerDocument)?R.defaultView||R.parentWindow:window,z?(se=c.relatedTarget||c.toElement,z=_,se=se?fl(se):null,se!==null&&(Oe=l(se),ie=se.tag,se!==Oe||ie!==5&&ie!==27&&ie!==6)&&(se=null)):(z=null,se=_),z!==se)){if(ie=Im,I="onMouseLeave",w="onMouseEnter",D="mouse",(u==="pointerout"||u==="pointerover")&&(ie=Hm,I="onPointerLeave",w="onPointerEnter",D="pointer"),Oe=z==null?R:Du(z),O=se==null?R:Du(se),R=new ie(I,D+"leave",z,c,F),R.target=Oe,R.relatedTarget=O,I=null,fl(F)===_&&(ie=new ie(w,D+"enter",se,c,F),ie.target=O,ie.relatedTarget=Oe,I=ie),Oe=I,z&&se)t:{for(ie=z,w=se,D=0,O=ie;O;O=Pl(O))D++;for(O=0,I=w;I;I=Pl(I))O++;for(;0<D-O;)ie=Pl(ie),D--;for(;0<O-D;)w=Pl(w),O--;for(;D--;){if(ie===w||w!==null&&ie===w.alternate)break t;ie=Pl(ie),w=Pl(w)}ie=null}else ie=null;z!==null&&Ob(q,R,z,ie,!1),se!==null&&Oe!==null&&Ob(q,Oe,se,ie,!0)}}e:{if(R=_?Du(_):window,z=R.nodeName&&R.nodeName.toLowerCase(),z==="select"||z==="input"&&R.type==="file")var Z=Ym;else if(Gm(R))if(Zm)Z=YC;else{Z=GC;var ge=JC}else z=R.nodeName,!z||z.toLowerCase()!=="input"||R.type!=="checkbox"&&R.type!=="radio"?_&&Cf(_.elementType)&&(Z=Ym):Z=KC;if(Z&&(Z=Z(u,_))){Km(q,Z,c,F);break e}ge&&ge(u,R,_),u==="focusout"&&_&&R.type==="number"&&_.memoizedProps.value!=null&&Sf(R,"number",R.value)}switch(ge=_?Du(_):window,u){case"focusin":(Gm(ge)||ge.contentEditable==="true")&&(Sl=ge,$f=_,Fu=null);break;case"focusout":Fu=$f=Sl=null;break;case"mousedown":Ff=!0;break;case"contextmenu":case"mouseup":case"dragend":Ff=!1,i1(q,c,F);break;case"selectionchange":if(XC)break;case"keydown":case"keyup":i1(q,c,F)}var W;if(Nf)e:{switch(u){case"compositionstart":var le="onCompositionStart";break e;case"compositionend":le="onCompositionEnd";break e;case"compositionupdate":le="onCompositionUpdate";break e}le=void 0}else kl?Pm(u,c)&&(le="onCompositionEnd"):u==="keydown"&&c.keyCode===229&&(le="onCompositionStart");le&&(Vm&&c.locale!=="ko"&&(kl||le!=="onCompositionStart"?le==="onCompositionEnd"&&kl&&(W=Fm()):(vr=F,Tf="value"in vr?vr.value:vr.textContent,kl=!0)),ge=Ca(_,le),0<ge.length&&(le=new qm(le,u,null,c,F),q.push({event:le,listeners:ge}),W?le.data=W:(W=Jm(c),W!==null&&(le.data=W)))),(W=HC?VC(u,c):UC(u,c))&&(le=Ca(_,"onBeforeInput"),0<le.length&&(ge=new qm("onBeforeInput","beforeinput",null,c,F),q.push({event:ge,listeners:le}),ge.data=W)),Rv(q,u,_,c,F)}Db(q,s)})}function ds(u,s,c){return{instance:u,listener:s,currentTarget:c}}function Ca(u,s){for(var c=s+"Capture",d=[];u!==null;){var m=u,b=m.stateNode;if(m=m.tag,m!==5&&m!==26&&m!==27||b===null||(m=wu(u,c),m!=null&&d.unshift(ds(u,m,b)),m=wu(u,s),m!=null&&d.push(ds(u,m,b))),u.tag===3)return d;u=u.return}return[]}function Pl(u){if(u===null)return null;do u=u.return;while(u&&u.tag!==5&&u.tag!==27);return u||null}function Ob(u,s,c,d,m){for(var b=s._reactName,S=[];c!==null&&c!==d;){var v=c,M=v.alternate,_=v.stateNode;if(v=v.tag,M!==null&&M===d)break;v!==5&&v!==26&&v!==27||_===null||(M=_,m?(_=wu(c,b),_!=null&&S.unshift(ds(c,_,M))):m||(_=wu(c,b),_!=null&&S.push(ds(c,_,M)))),c=c.return}S.length!==0&&u.push({event:s,listeners:S})}var Fv=/\r\n?/g,Lv=/\u0000|\uFFFD/g;function _b(u){return(typeof u=="string"?u:""+u).replace(Fv,`
`).replace(Lv,"")}function Nb(u,s){return s=_b(s),_b(u)===s}function va(){}function we(u,s,c,d,m,b){switch(c){case"children":typeof d=="string"?s==="body"||s==="textarea"&&d===""||bl(u,d):(typeof d=="number"||typeof d=="bigint")&&s!=="body"&&bl(u,""+d);break;case"className":Do(u,"class",d);break;case"tabIndex":Do(u,"tabindex",d);break;case"dir":case"role":case"viewBox":case"width":case"height":Do(u,c,d);break;case"style":zm(u,d,b);break;case"data":if(s!=="object"){Do(u,"data",d);break}case"src":case"href":if(d===""&&(s!=="a"||c!=="href")){u.removeAttribute(c);break}if(d==null||typeof d=="function"||typeof d=="symbol"||typeof d=="boolean"){u.removeAttribute(c);break}d=_o(""+d),u.setAttribute(c,d);break;case"action":case"formAction":if(typeof d=="function"){u.setAttribute(c,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof b=="function"&&(c==="formAction"?(s!=="input"&&we(u,s,"name",m.name,m,null),we(u,s,"formEncType",m.formEncType,m,null),we(u,s,"formMethod",m.formMethod,m,null),we(u,s,"formTarget",m.formTarget,m,null)):(we(u,s,"encType",m.encType,m,null),we(u,s,"method",m.method,m,null),we(u,s,"target",m.target,m,null)));if(d==null||typeof d=="symbol"||typeof d=="boolean"){u.removeAttribute(c);break}d=_o(""+d),u.setAttribute(c,d);break;case"onClick":d!=null&&(u.onclick=va);break;case"onScroll":d!=null&&ye("scroll",u);break;case"onScrollEnd":d!=null&&ye("scrollend",u);break;case"dangerouslySetInnerHTML":if(d!=null){if(typeof d!="object"||!("__html"in d))throw Error(r(61));if(c=d.__html,c!=null){if(m.children!=null)throw Error(r(60));u.innerHTML=c}}break;case"multiple":u.multiple=d&&typeof d!="function"&&typeof d!="symbol";break;case"muted":u.muted=d&&typeof d!="function"&&typeof d!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(d==null||typeof d=="function"||typeof d=="boolean"||typeof d=="symbol"){u.removeAttribute("xlink:href");break}c=_o(""+d),u.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",c);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":d!=null&&typeof d!="function"&&typeof d!="symbol"?u.setAttribute(c,""+d):u.removeAttribute(c);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":d&&typeof d!="function"&&typeof d!="symbol"?u.setAttribute(c,""):u.removeAttribute(c);break;case"capture":case"download":d===!0?u.setAttribute(c,""):d!==!1&&d!=null&&typeof d!="function"&&typeof d!="symbol"?u.setAttribute(c,d):u.removeAttribute(c);break;case"cols":case"rows":case"size":case"span":d!=null&&typeof d!="function"&&typeof d!="symbol"&&!isNaN(d)&&1<=d?u.setAttribute(c,d):u.removeAttribute(c);break;case"rowSpan":case"start":d==null||typeof d=="function"||typeof d=="symbol"||isNaN(d)?u.removeAttribute(c):u.setAttribute(c,d);break;case"popover":ye("beforetoggle",u),ye("toggle",u),To(u,"popover",d);break;case"xlinkActuate":Qn(u,"http://www.w3.org/1999/xlink","xlink:actuate",d);break;case"xlinkArcrole":Qn(u,"http://www.w3.org/1999/xlink","xlink:arcrole",d);break;case"xlinkRole":Qn(u,"http://www.w3.org/1999/xlink","xlink:role",d);break;case"xlinkShow":Qn(u,"http://www.w3.org/1999/xlink","xlink:show",d);break;case"xlinkTitle":Qn(u,"http://www.w3.org/1999/xlink","xlink:title",d);break;case"xlinkType":Qn(u,"http://www.w3.org/1999/xlink","xlink:type",d);break;case"xmlBase":Qn(u,"http://www.w3.org/XML/1998/namespace","xml:base",d);break;case"xmlLang":Qn(u,"http://www.w3.org/XML/1998/namespace","xml:lang",d);break;case"xmlSpace":Qn(u,"http://www.w3.org/XML/1998/namespace","xml:space",d);break;case"is":To(u,"is",d);break;case"innerText":case"textContent":break;default:(!(2<c.length)||c[0]!=="o"&&c[0]!=="O"||c[1]!=="n"&&c[1]!=="N")&&(c=pC.get(c)||c,To(u,c,d))}}function uh(u,s,c,d,m,b){switch(c){case"style":zm(u,d,b);break;case"dangerouslySetInnerHTML":if(d!=null){if(typeof d!="object"||!("__html"in d))throw Error(r(61));if(c=d.__html,c!=null){if(m.children!=null)throw Error(r(60));u.innerHTML=c}}break;case"children":typeof d=="string"?bl(u,d):(typeof d=="number"||typeof d=="bigint")&&bl(u,""+d);break;case"onScroll":d!=null&&ye("scroll",u);break;case"onScrollEnd":d!=null&&ye("scrollend",u);break;case"onClick":d!=null&&(u.onclick=va);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!vm.hasOwnProperty(c))e:{if(c[0]==="o"&&c[1]==="n"&&(m=c.endsWith("Capture"),s=c.slice(2,m?c.length-7:void 0),b=u[Ft]||null,b=b!=null?b[c]:null,typeof b=="function"&&u.removeEventListener(s,b,m),typeof d=="function")){typeof b!="function"&&b!==null&&(c in u?u[c]=null:u.hasAttribute(c)&&u.removeAttribute(c)),u.addEventListener(s,d,m);break e}c in u?u[c]=d:d===!0?u.setAttribute(c,""):To(u,c,d)}}}function ht(u,s,c){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":ye("error",u),ye("load",u);var d=!1,m=!1,b;for(b in c)if(c.hasOwnProperty(b)){var S=c[b];if(S!=null)switch(b){case"src":d=!0;break;case"srcSet":m=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,s));default:we(u,s,b,S,c,null)}}m&&we(u,s,"srcSet",c.srcSet,c,null),d&&we(u,s,"src",c.src,c,null);return;case"input":ye("invalid",u);var v=b=S=m=null,M=null,_=null;for(d in c)if(c.hasOwnProperty(d)){var F=c[d];if(F!=null)switch(d){case"name":m=F;break;case"type":S=F;break;case"checked":M=F;break;case"defaultChecked":_=F;break;case"value":b=F;break;case"defaultValue":v=F;break;case"children":case"dangerouslySetInnerHTML":if(F!=null)throw Error(r(137,s));break;default:we(u,s,d,F,c,null)}}Om(u,b,v,M,_,S,m,!1),wo(u);return;case"select":ye("invalid",u),d=S=b=null;for(m in c)if(c.hasOwnProperty(m)&&(v=c[m],v!=null))switch(m){case"value":b=v;break;case"defaultValue":S=v;break;case"multiple":d=v;default:we(u,s,m,v,c,null)}s=b,c=S,u.multiple=!!d,s!=null?gl(u,!!d,s,!1):c!=null&&gl(u,!!d,c,!0);return;case"textarea":ye("invalid",u),b=m=d=null;for(S in c)if(c.hasOwnProperty(S)&&(v=c[S],v!=null))switch(S){case"value":d=v;break;case"defaultValue":m=v;break;case"children":b=v;break;case"dangerouslySetInnerHTML":if(v!=null)throw Error(r(91));break;default:we(u,s,S,v,c,null)}Nm(u,d,m,b),wo(u);return;case"option":for(M in c)if(c.hasOwnProperty(M)&&(d=c[M],d!=null))switch(M){case"selected":u.selected=d&&typeof d!="function"&&typeof d!="symbol";break;default:we(u,s,M,d,c,null)}return;case"dialog":ye("beforetoggle",u),ye("toggle",u),ye("cancel",u),ye("close",u);break;case"iframe":case"object":ye("load",u);break;case"video":case"audio":for(d=0;d<fs.length;d++)ye(fs[d],u);break;case"image":ye("error",u),ye("load",u);break;case"details":ye("toggle",u);break;case"embed":case"source":case"link":ye("error",u),ye("load",u);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(_ in c)if(c.hasOwnProperty(_)&&(d=c[_],d!=null))switch(_){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,s));default:we(u,s,_,d,c,null)}return;default:if(Cf(s)){for(F in c)c.hasOwnProperty(F)&&(d=c[F],d!==void 0&&uh(u,s,F,d,c,void 0));return}}for(v in c)c.hasOwnProperty(v)&&(d=c[v],d!=null&&we(u,s,v,d,c,null))}function Iv(u,s,c,d){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var m=null,b=null,S=null,v=null,M=null,_=null,F=null;for(z in c){var q=c[z];if(c.hasOwnProperty(z)&&q!=null)switch(z){case"checked":break;case"value":break;case"defaultValue":M=q;default:d.hasOwnProperty(z)||we(u,s,z,null,d,q)}}for(var R in d){var z=d[R];if(q=c[R],d.hasOwnProperty(R)&&(z!=null||q!=null))switch(R){case"type":b=z;break;case"name":m=z;break;case"checked":_=z;break;case"defaultChecked":F=z;break;case"value":S=z;break;case"defaultValue":v=z;break;case"children":case"dangerouslySetInnerHTML":if(z!=null)throw Error(r(137,s));break;default:z!==q&&we(u,s,R,z,d,q)}}kf(u,S,v,M,_,F,b,m);return;case"select":z=S=v=R=null;for(b in c)if(M=c[b],c.hasOwnProperty(b)&&M!=null)switch(b){case"value":break;case"multiple":z=M;default:d.hasOwnProperty(b)||we(u,s,b,null,d,M)}for(m in d)if(b=d[m],M=c[m],d.hasOwnProperty(m)&&(b!=null||M!=null))switch(m){case"value":R=b;break;case"defaultValue":v=b;break;case"multiple":S=b;default:b!==M&&we(u,s,m,b,d,M)}s=v,c=S,d=z,R!=null?gl(u,!!c,R,!1):!!d!=!!c&&(s!=null?gl(u,!!c,s,!0):gl(u,!!c,c?[]:"",!1));return;case"textarea":z=R=null;for(v in c)if(m=c[v],c.hasOwnProperty(v)&&m!=null&&!d.hasOwnProperty(v))switch(v){case"value":break;case"children":break;default:we(u,s,v,null,d,m)}for(S in d)if(m=d[S],b=c[S],d.hasOwnProperty(S)&&(m!=null||b!=null))switch(S){case"value":R=m;break;case"defaultValue":z=m;break;case"children":break;case"dangerouslySetInnerHTML":if(m!=null)throw Error(r(91));break;default:m!==b&&we(u,s,S,m,d,b)}_m(u,R,z);return;case"option":for(var se in c)if(R=c[se],c.hasOwnProperty(se)&&R!=null&&!d.hasOwnProperty(se))switch(se){case"selected":u.selected=!1;break;default:we(u,s,se,null,d,R)}for(M in d)if(R=d[M],z=c[M],d.hasOwnProperty(M)&&R!==z&&(R!=null||z!=null))switch(M){case"selected":u.selected=R&&typeof R!="function"&&typeof R!="symbol";break;default:we(u,s,M,R,d,z)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var ie in c)R=c[ie],c.hasOwnProperty(ie)&&R!=null&&!d.hasOwnProperty(ie)&&we(u,s,ie,null,d,R);for(_ in d)if(R=d[_],z=c[_],d.hasOwnProperty(_)&&R!==z&&(R!=null||z!=null))switch(_){case"children":case"dangerouslySetInnerHTML":if(R!=null)throw Error(r(137,s));break;default:we(u,s,_,R,d,z)}return;default:if(Cf(s)){for(var Oe in c)R=c[Oe],c.hasOwnProperty(Oe)&&R!==void 0&&!d.hasOwnProperty(Oe)&&uh(u,s,Oe,void 0,d,R);for(F in d)R=d[F],z=c[F],!d.hasOwnProperty(F)||R===z||R===void 0&&z===void 0||uh(u,s,F,R,d,z);return}}for(var w in c)R=c[w],c.hasOwnProperty(w)&&R!=null&&!d.hasOwnProperty(w)&&we(u,s,w,null,d,R);for(q in d)R=d[q],z=c[q],!d.hasOwnProperty(q)||R===z||R==null&&z==null||we(u,s,q,R,d,z)}var sh=null,oh=null;function Ea(u){return u.nodeType===9?u:u.ownerDocument}function Rb(u){switch(u){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function zb(u,s){if(u===0)switch(s){case"svg":return 1;case"math":return 2;default:return 0}return u===1&&s==="foreignObject"?0:u}function ah(u,s){return u==="textarea"||u==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.children=="bigint"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var ch=null;function qv(){var u=window.event;return u&&u.type==="popstate"?u===ch?!1:(ch=u,!0):(ch=null,!1)}var Bb=typeof setTimeout=="function"?setTimeout:void 0,Hv=typeof clearTimeout=="function"?clearTimeout:void 0,$b=typeof Promise=="function"?Promise:void 0,Vv=typeof queueMicrotask=="function"?queueMicrotask:typeof $b<"u"?function(u){return $b.resolve(null).then(u).catch(Uv)}:Bb;function Uv(u){setTimeout(function(){throw u})}function Ir(u){return u==="head"}function Fb(u,s){var c=s,d=0,m=0;do{var b=c.nextSibling;if(u.removeChild(c),b&&b.nodeType===8)if(c=b.data,c==="/$"){if(0<d&&8>d){c=d;var S=u.ownerDocument;if(c&1&&hs(S.documentElement),c&2&&hs(S.body),c&4)for(c=S.head,hs(c),S=c.firstChild;S;){var v=S.nextSibling,M=S.nodeName;S[Tu]||M==="SCRIPT"||M==="STYLE"||M==="LINK"&&S.rel.toLowerCase()==="stylesheet"||c.removeChild(S),S=v}}if(m===0){u.removeChild(b),Ss(s);return}m--}else c==="$"||c==="$?"||c==="$!"?m++:d=c.charCodeAt(0)-48;else d=0;c=b}while(c);Ss(s)}function fh(u){var s=u.firstChild;for(s&&s.nodeType===10&&(s=s.nextSibling);s;){var c=s;switch(s=s.nextSibling,c.nodeName){case"HTML":case"HEAD":case"BODY":fh(c),gf(c);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(c.rel.toLowerCase()==="stylesheet")continue}u.removeChild(c)}}function jv(u,s,c,d){for(;u.nodeType===1;){var m=c;if(u.nodeName.toLowerCase()!==s.toLowerCase()){if(!d&&(u.nodeName!=="INPUT"||u.type!=="hidden"))break}else if(d){if(!u[Tu])switch(s){case"meta":if(!u.hasAttribute("itemprop"))break;return u;case"link":if(b=u.getAttribute("rel"),b==="stylesheet"&&u.hasAttribute("data-precedence"))break;if(b!==m.rel||u.getAttribute("href")!==(m.href==null||m.href===""?null:m.href)||u.getAttribute("crossorigin")!==(m.crossOrigin==null?null:m.crossOrigin)||u.getAttribute("title")!==(m.title==null?null:m.title))break;return u;case"style":if(u.hasAttribute("data-precedence"))break;return u;case"script":if(b=u.getAttribute("src"),(b!==(m.src==null?null:m.src)||u.getAttribute("type")!==(m.type==null?null:m.type)||u.getAttribute("crossorigin")!==(m.crossOrigin==null?null:m.crossOrigin))&&b&&u.hasAttribute("async")&&!u.hasAttribute("itemprop"))break;return u;default:return u}}else if(s==="input"&&u.type==="hidden"){var b=m.name==null?null:""+m.name;if(m.type==="hidden"&&u.getAttribute("name")===b)return u}else return u;if(u=Mn(u.nextSibling),u===null)break}return null}function Pv(u,s,c){if(s==="")return null;for(;u.nodeType!==3;)if((u.nodeType!==1||u.nodeName!=="INPUT"||u.type!=="hidden")&&!c||(u=Mn(u.nextSibling),u===null))return null;return u}function dh(u){return u.data==="$!"||u.data==="$?"&&u.ownerDocument.readyState==="complete"}function Jv(u,s){var c=u.ownerDocument;if(u.data!=="$?"||c.readyState==="complete")s();else{var d=function(){s(),c.removeEventListener("DOMContentLoaded",d)};c.addEventListener("DOMContentLoaded",d),u._reactRetry=d}}function Mn(u){for(;u!=null;u=u.nextSibling){var s=u.nodeType;if(s===1||s===3)break;if(s===8){if(s=u.data,s==="$"||s==="$!"||s==="$?"||s==="F!"||s==="F")break;if(s==="/$")return null}}return u}var hh=null;function Lb(u){u=u.previousSibling;for(var s=0;u;){if(u.nodeType===8){var c=u.data;if(c==="$"||c==="$!"||c==="$?"){if(s===0)return u;s--}else c==="/$"&&s++}u=u.previousSibling}return null}function Ib(u,s,c){switch(s=Ea(c),u){case"html":if(u=s.documentElement,!u)throw Error(r(452));return u;case"head":if(u=s.head,!u)throw Error(r(453));return u;case"body":if(u=s.body,!u)throw Error(r(454));return u;default:throw Error(r(451))}}function hs(u){for(var s=u.attributes;s.length;)u.removeAttributeNode(s[0]);gf(u)}var bn=new Map,qb=new Set;function Ma(u){return typeof u.getRootNode=="function"?u.getRootNode():u.nodeType===9?u:u.ownerDocument}var dr=G.d;G.d={f:Gv,r:Kv,D:Yv,C:Zv,L:Xv,m:Qv,X:e4,S:Wv,M:t4};function Gv(){var u=dr.f(),s=ga();return u||s}function Kv(u){var s=dl(u);s!==null&&s.tag===5&&s.type==="form"?ug(s):dr.r(u)}var Jl=typeof document>"u"?null:document;function Hb(u,s,c){var d=Jl;if(d&&typeof s=="string"&&s){var m=cn(s);m='link[rel="'+u+'"][href="'+m+'"]',typeof c=="string"&&(m+='[crossorigin="'+c+'"]'),qb.has(m)||(qb.add(m),u={rel:u,crossOrigin:c,href:s},d.querySelector(m)===null&&(s=d.createElement("link"),ht(s,"link",u),nt(s),d.head.appendChild(s)))}}function Yv(u){dr.D(u),Hb("dns-prefetch",u,null)}function Zv(u,s){dr.C(u,s),Hb("preconnect",u,s)}function Xv(u,s,c){dr.L(u,s,c);var d=Jl;if(d&&u&&s){var m='link[rel="preload"][as="'+cn(s)+'"]';s==="image"&&c&&c.imageSrcSet?(m+='[imagesrcset="'+cn(c.imageSrcSet)+'"]',typeof c.imageSizes=="string"&&(m+='[imagesizes="'+cn(c.imageSizes)+'"]')):m+='[href="'+cn(u)+'"]';var b=m;switch(s){case"style":b=Gl(u);break;case"script":b=Kl(u)}bn.has(b)||(u=p({rel:"preload",href:s==="image"&&c&&c.imageSrcSet?void 0:u,as:s},c),bn.set(b,u),d.querySelector(m)!==null||s==="style"&&d.querySelector(ps(b))||s==="script"&&d.querySelector(ms(b))||(s=d.createElement("link"),ht(s,"link",u),nt(s),d.head.appendChild(s)))}}function Qv(u,s){dr.m(u,s);var c=Jl;if(c&&u){var d=s&&typeof s.as=="string"?s.as:"script",m='link[rel="modulepreload"][as="'+cn(d)+'"][href="'+cn(u)+'"]',b=m;switch(d){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":b=Kl(u)}if(!bn.has(b)&&(u=p({rel:"modulepreload",href:u},s),bn.set(b,u),c.querySelector(m)===null)){switch(d){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(c.querySelector(ms(b)))return}d=c.createElement("link"),ht(d,"link",u),nt(d),c.head.appendChild(d)}}}function Wv(u,s,c){dr.S(u,s,c);var d=Jl;if(d&&u){var m=hl(d).hoistableStyles,b=Gl(u);s=s||"default";var S=m.get(b);if(!S){var v={loading:0,preload:null};if(S=d.querySelector(ps(b)))v.loading=5;else{u=p({rel:"stylesheet",href:u,"data-precedence":s},c),(c=bn.get(b))&&ph(u,c);var M=S=d.createElement("link");nt(M),ht(M,"link",u),M._p=new Promise(function(_,F){M.onload=_,M.onerror=F}),M.addEventListener("load",function(){v.loading|=1}),M.addEventListener("error",function(){v.loading|=2}),v.loading|=4,Aa(S,s,d)}S={type:"stylesheet",instance:S,count:1,state:v},m.set(b,S)}}}function e4(u,s){dr.X(u,s);var c=Jl;if(c&&u){var d=hl(c).hoistableScripts,m=Kl(u),b=d.get(m);b||(b=c.querySelector(ms(m)),b||(u=p({src:u,async:!0},s),(s=bn.get(m))&&mh(u,s),b=c.createElement("script"),nt(b),ht(b,"link",u),c.head.appendChild(b)),b={type:"script",instance:b,count:1,state:null},d.set(m,b))}}function t4(u,s){dr.M(u,s);var c=Jl;if(c&&u){var d=hl(c).hoistableScripts,m=Kl(u),b=d.get(m);b||(b=c.querySelector(ms(m)),b||(u=p({src:u,async:!0,type:"module"},s),(s=bn.get(m))&&mh(u,s),b=c.createElement("script"),nt(b),ht(b,"link",u),c.head.appendChild(b)),b={type:"script",instance:b,count:1,state:null},d.set(m,b))}}function Vb(u,s,c,d){var m=(m=ce.current)?Ma(m):null;if(!m)throw Error(r(446));switch(u){case"meta":case"title":return null;case"style":return typeof c.precedence=="string"&&typeof c.href=="string"?(s=Gl(c.href),c=hl(m).hoistableStyles,d=c.get(s),d||(d={type:"style",instance:null,count:0,state:null},c.set(s,d)),d):{type:"void",instance:null,count:0,state:null};case"link":if(c.rel==="stylesheet"&&typeof c.href=="string"&&typeof c.precedence=="string"){u=Gl(c.href);var b=hl(m).hoistableStyles,S=b.get(u);if(S||(m=m.ownerDocument||m,S={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},b.set(u,S),(b=m.querySelector(ps(u)))&&!b._p&&(S.instance=b,S.state.loading=5),bn.has(u)||(c={rel:"preload",as:"style",href:c.href,crossOrigin:c.crossOrigin,integrity:c.integrity,media:c.media,hrefLang:c.hrefLang,referrerPolicy:c.referrerPolicy},bn.set(u,c),b||n4(m,u,c,S.state))),s&&d===null)throw Error(r(528,""));return S}if(s&&d!==null)throw Error(r(529,""));return null;case"script":return s=c.async,c=c.src,typeof c=="string"&&s&&typeof s!="function"&&typeof s!="symbol"?(s=Kl(c),c=hl(m).hoistableScripts,d=c.get(s),d||(d={type:"script",instance:null,count:0,state:null},c.set(s,d)),d):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,u))}}function Gl(u){return'href="'+cn(u)+'"'}function ps(u){return'link[rel="stylesheet"]['+u+"]"}function Ub(u){return p({},u,{"data-precedence":u.precedence,precedence:null})}function n4(u,s,c,d){u.querySelector('link[rel="preload"][as="style"]['+s+"]")?d.loading=1:(s=u.createElement("link"),d.preload=s,s.addEventListener("load",function(){return d.loading|=1}),s.addEventListener("error",function(){return d.loading|=2}),ht(s,"link",c),nt(s),u.head.appendChild(s))}function Kl(u){return'[src="'+cn(u)+'"]'}function ms(u){return"script[async]"+u}function jb(u,s,c){if(s.count++,s.instance===null)switch(s.type){case"style":var d=u.querySelector('style[data-href~="'+cn(c.href)+'"]');if(d)return s.instance=d,nt(d),d;var m=p({},c,{"data-href":c.href,"data-precedence":c.precedence,href:null,precedence:null});return d=(u.ownerDocument||u).createElement("style"),nt(d),ht(d,"style",m),Aa(d,c.precedence,u),s.instance=d;case"stylesheet":m=Gl(c.href);var b=u.querySelector(ps(m));if(b)return s.state.loading|=4,s.instance=b,nt(b),b;d=Ub(c),(m=bn.get(m))&&ph(d,m),b=(u.ownerDocument||u).createElement("link"),nt(b);var S=b;return S._p=new Promise(function(v,M){S.onload=v,S.onerror=M}),ht(b,"link",d),s.state.loading|=4,Aa(b,c.precedence,u),s.instance=b;case"script":return b=Kl(c.src),(m=u.querySelector(ms(b)))?(s.instance=m,nt(m),m):(d=c,(m=bn.get(b))&&(d=p({},c),mh(d,m)),u=u.ownerDocument||u,m=u.createElement("script"),nt(m),ht(m,"link",d),u.head.appendChild(m),s.instance=m);case"void":return null;default:throw Error(r(443,s.type))}else s.type==="stylesheet"&&(s.state.loading&4)===0&&(d=s.instance,s.state.loading|=4,Aa(d,c.precedence,u));return s.instance}function Aa(u,s,c){for(var d=c.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),m=d.length?d[d.length-1]:null,b=m,S=0;S<d.length;S++){var v=d[S];if(v.dataset.precedence===s)b=v;else if(b!==m)break}b?b.parentNode.insertBefore(u,b.nextSibling):(s=c.nodeType===9?c.head:c,s.insertBefore(u,s.firstChild))}function ph(u,s){u.crossOrigin==null&&(u.crossOrigin=s.crossOrigin),u.referrerPolicy==null&&(u.referrerPolicy=s.referrerPolicy),u.title==null&&(u.title=s.title)}function mh(u,s){u.crossOrigin==null&&(u.crossOrigin=s.crossOrigin),u.referrerPolicy==null&&(u.referrerPolicy=s.referrerPolicy),u.integrity==null&&(u.integrity=s.integrity)}var Ta=null;function Pb(u,s,c){if(Ta===null){var d=new Map,m=Ta=new Map;m.set(c,d)}else m=Ta,d=m.get(c),d||(d=new Map,m.set(c,d));if(d.has(u))return d;for(d.set(u,null),c=c.getElementsByTagName(u),m=0;m<c.length;m++){var b=c[m];if(!(b[Tu]||b[yt]||u==="link"&&b.getAttribute("rel")==="stylesheet")&&b.namespaceURI!=="http://www.w3.org/2000/svg"){var S=b.getAttribute(s)||"";S=u+S;var v=d.get(S);v?v.push(b):d.set(S,[b])}}return d}function Jb(u,s,c){u=u.ownerDocument||u,u.head.insertBefore(c,s==="title"?u.querySelector("head > title"):null)}function r4(u,s,c){if(c===1||s.itemProp!=null)return!1;switch(u){case"meta":case"title":return!0;case"style":if(typeof s.precedence!="string"||typeof s.href!="string"||s.href==="")break;return!0;case"link":if(typeof s.rel!="string"||typeof s.href!="string"||s.href===""||s.onLoad||s.onError)break;switch(s.rel){case"stylesheet":return u=s.disabled,typeof s.precedence=="string"&&u==null;default:return!0}case"script":if(s.async&&typeof s.async!="function"&&typeof s.async!="symbol"&&!s.onLoad&&!s.onError&&s.src&&typeof s.src=="string")return!0}return!1}function Gb(u){return!(u.type==="stylesheet"&&(u.state.loading&3)===0)}var gs=null;function i4(){}function l4(u,s,c){if(gs===null)throw Error(r(475));var d=gs;if(s.type==="stylesheet"&&(typeof c.media!="string"||matchMedia(c.media).matches!==!1)&&(s.state.loading&4)===0){if(s.instance===null){var m=Gl(c.href),b=u.querySelector(ps(m));if(b){u=b._p,u!==null&&typeof u=="object"&&typeof u.then=="function"&&(d.count++,d=Da.bind(d),u.then(d,d)),s.state.loading|=4,s.instance=b,nt(b);return}b=u.ownerDocument||u,c=Ub(c),(m=bn.get(m))&&ph(c,m),b=b.createElement("link"),nt(b);var S=b;S._p=new Promise(function(v,M){S.onload=v,S.onerror=M}),ht(b,"link",c),s.instance=b}d.stylesheets===null&&(d.stylesheets=new Map),d.stylesheets.set(s,u),(u=s.state.preload)&&(s.state.loading&3)===0&&(d.count++,s=Da.bind(d),u.addEventListener("load",s),u.addEventListener("error",s))}}function u4(){if(gs===null)throw Error(r(475));var u=gs;return u.stylesheets&&u.count===0&&gh(u,u.stylesheets),0<u.count?function(s){var c=setTimeout(function(){if(u.stylesheets&&gh(u,u.stylesheets),u.unsuspend){var d=u.unsuspend;u.unsuspend=null,d()}},6e4);return u.unsuspend=s,function(){u.unsuspend=null,clearTimeout(c)}}:null}function Da(){if(this.count--,this.count===0){if(this.stylesheets)gh(this,this.stylesheets);else if(this.unsuspend){var u=this.unsuspend;this.unsuspend=null,u()}}}var wa=null;function gh(u,s){u.stylesheets=null,u.unsuspend!==null&&(u.count++,wa=new Map,s.forEach(s4,u),wa=null,Da.call(u))}function s4(u,s){if(!(s.state.loading&4)){var c=wa.get(u);if(c)var d=c.get(null);else{c=new Map,wa.set(u,c);for(var m=u.querySelectorAll("link[data-precedence],style[data-precedence]"),b=0;b<m.length;b++){var S=m[b];(S.nodeName==="LINK"||S.getAttribute("media")!=="not all")&&(c.set(S.dataset.precedence,S),d=S)}d&&c.set(null,d)}m=s.instance,S=m.getAttribute("data-precedence"),b=c.get(S)||d,b===d&&c.set(null,m),c.set(S,m),this.count++,d=Da.bind(this),m.addEventListener("load",d),m.addEventListener("error",d),b?b.parentNode.insertBefore(m,b.nextSibling):(u=u.nodeType===9?u.head:u,u.insertBefore(m,u.firstChild)),s.state.loading|=4}}var bs={$$typeof:B,Provider:null,Consumer:null,_currentValue:ue,_currentValue2:ue,_threadCount:0};function o4(u,s,c,d,m,b,S,v){this.tag=1,this.containerInfo=u,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=df(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=df(0),this.hiddenUpdates=df(null),this.identifierPrefix=d,this.onUncaughtError=m,this.onCaughtError=b,this.onRecoverableError=S,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=v,this.incompleteTransitions=new Map}function Kb(u,s,c,d,m,b,S,v,M,_,F,q){return u=new o4(u,s,c,S,v,M,_,q),s=1,b===!0&&(s|=24),b=Xt(3,null,null,s),u.current=b,b.stateNode=u,s=Xf(),s.refCount++,u.pooledCache=s,s.refCount++,b.memoizedState={element:d,isDehydrated:c,cache:s},td(b),u}function Yb(u){return u?(u=Ml,u):Ml}function Zb(u,s,c,d,m,b){m=Yb(m),d.context===null?d.context=m:d.pendingContext=m,d=Ar(s),d.payload={element:c},b=b===void 0?null:b,b!==null&&(d.callback=b),c=Tr(u,d,s),c!==null&&(nn(c,u,s),Ju(c,u,s))}function Xb(u,s){if(u=u.memoizedState,u!==null&&u.dehydrated!==null){var c=u.retryLane;u.retryLane=c!==0&&c<s?c:s}}function bh(u,s){Xb(u,s),(u=u.alternate)&&Xb(u,s)}function Qb(u){if(u.tag===13){var s=El(u,67108864);s!==null&&nn(s,u,67108864),bh(u,67108864)}}var Oa=!0;function a4(u,s,c,d){var m=$.T;$.T=null;var b=G.p;try{G.p=2,yh(u,s,c,d)}finally{G.p=b,$.T=m}}function c4(u,s,c,d){var m=$.T;$.T=null;var b=G.p;try{G.p=8,yh(u,s,c,d)}finally{G.p=b,$.T=m}}function yh(u,s,c,d){if(Oa){var m=xh(d);if(m===null)lh(u,s,d,_a,c),ey(u,d);else if(d4(m,u,s,c,d))d.stopPropagation();else if(ey(u,d),s&4&&-1<f4.indexOf(u)){for(;m!==null;){var b=dl(m);if(b!==null)switch(b.tag){case 3:if(b=b.stateNode,b.current.memoizedState.isDehydrated){var S=pi(b.pendingLanes);if(S!==0){var v=b;for(v.pendingLanes|=2,v.entangledLanes|=2;S;){var M=1<<31-Yt(S);v.entanglements[1]|=M,S&=~M}Hn(b),(Ae&6)===0&&(pa=$n()+500,cs(0))}}break;case 13:v=El(b,2),v!==null&&nn(v,b,2),ga(),bh(b,2)}if(b=xh(d),b===null&&lh(u,s,d,_a,c),b===m)break;m=b}m!==null&&d.stopPropagation()}else lh(u,s,d,null,c)}}function xh(u){return u=Ef(u),kh(u)}var _a=null;function kh(u){if(_a=null,u=fl(u),u!==null){var s=l(u);if(s===null)u=null;else{var c=s.tag;if(c===13){if(u=o(s),u!==null)return u;u=null}else if(c===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;u=null}else s!==u&&(u=null)}}return _a=u,null}function Wb(u){switch(u){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Z6()){case hm:return 2;case pm:return 8;case vo:case X6:return 32;case mm:return 268435456;default:return 32}default:return 32}}var Sh=!1,qr=null,Hr=null,Vr=null,ys=new Map,xs=new Map,Ur=[],f4="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function ey(u,s){switch(u){case"focusin":case"focusout":qr=null;break;case"dragenter":case"dragleave":Hr=null;break;case"mouseover":case"mouseout":Vr=null;break;case"pointerover":case"pointerout":ys.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":xs.delete(s.pointerId)}}function ks(u,s,c,d,m,b){return u===null||u.nativeEvent!==b?(u={blockedOn:s,domEventName:c,eventSystemFlags:d,nativeEvent:b,targetContainers:[m]},s!==null&&(s=dl(s),s!==null&&Qb(s)),u):(u.eventSystemFlags|=d,s=u.targetContainers,m!==null&&s.indexOf(m)===-1&&s.push(m),u)}function d4(u,s,c,d,m){switch(s){case"focusin":return qr=ks(qr,u,s,c,d,m),!0;case"dragenter":return Hr=ks(Hr,u,s,c,d,m),!0;case"mouseover":return Vr=ks(Vr,u,s,c,d,m),!0;case"pointerover":var b=m.pointerId;return ys.set(b,ks(ys.get(b)||null,u,s,c,d,m)),!0;case"gotpointercapture":return b=m.pointerId,xs.set(b,ks(xs.get(b)||null,u,s,c,d,m)),!0}return!1}function ty(u){var s=fl(u.target);if(s!==null){var c=l(s);if(c!==null){if(s=c.tag,s===13){if(s=o(c),s!==null){u.blockedOn=s,lC(u.priority,function(){if(c.tag===13){var d=tn();d=hf(d);var m=El(c,d);m!==null&&nn(m,c,d),bh(c,d)}});return}}else if(s===3&&c.stateNode.current.memoizedState.isDehydrated){u.blockedOn=c.tag===3?c.stateNode.containerInfo:null;return}}}u.blockedOn=null}function Na(u){if(u.blockedOn!==null)return!1;for(var s=u.targetContainers;0<s.length;){var c=xh(u.nativeEvent);if(c===null){c=u.nativeEvent;var d=new c.constructor(c.type,c);vf=d,c.target.dispatchEvent(d),vf=null}else return s=dl(c),s!==null&&Qb(s),u.blockedOn=c,!1;s.shift()}return!0}function ny(u,s,c){Na(u)&&c.delete(s)}function h4(){Sh=!1,qr!==null&&Na(qr)&&(qr=null),Hr!==null&&Na(Hr)&&(Hr=null),Vr!==null&&Na(Vr)&&(Vr=null),ys.forEach(ny),xs.forEach(ny)}function Ra(u,s){u.blockedOn===s&&(u.blockedOn=null,Sh||(Sh=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,h4)))}var za=null;function ry(u){za!==u&&(za=u,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){za===u&&(za=null);for(var s=0;s<u.length;s+=3){var c=u[s],d=u[s+1],m=u[s+2];if(typeof d!="function"){if(kh(d||c)===null)continue;break}var b=dl(c);b!==null&&(u.splice(s,3),s-=3,kd(b,{pending:!0,data:m,method:c.method,action:d},d,m))}}))}function Ss(u){function s(M){return Ra(M,u)}qr!==null&&Ra(qr,u),Hr!==null&&Ra(Hr,u),Vr!==null&&Ra(Vr,u),ys.forEach(s),xs.forEach(s);for(var c=0;c<Ur.length;c++){var d=Ur[c];d.blockedOn===u&&(d.blockedOn=null)}for(;0<Ur.length&&(c=Ur[0],c.blockedOn===null);)ty(c),c.blockedOn===null&&Ur.shift();if(c=(u.ownerDocument||u).$$reactFormReplay,c!=null)for(d=0;d<c.length;d+=3){var m=c[d],b=c[d+1],S=m[Ft]||null;if(typeof b=="function")S||ry(c);else if(S){var v=null;if(b&&b.hasAttribute("formAction")){if(m=b,S=b[Ft]||null)v=S.formAction;else if(kh(m)!==null)continue}else v=S.action;typeof v=="function"?c[d+1]=v:(c.splice(d,3),d-=3),ry(c)}}}function Ch(u){this._internalRoot=u}Ba.prototype.render=Ch.prototype.render=function(u){var s=this._internalRoot;if(s===null)throw Error(r(409));var c=s.current,d=tn();Zb(c,d,u,s,null,null)},Ba.prototype.unmount=Ch.prototype.unmount=function(){var u=this._internalRoot;if(u!==null){this._internalRoot=null;var s=u.containerInfo;Zb(u.current,2,null,u,null,null),ga(),s[cl]=null}};function Ba(u){this._internalRoot=u}Ba.prototype.unstable_scheduleHydration=function(u){if(u){var s=km();u={blockedOn:null,target:u,priority:s};for(var c=0;c<Ur.length&&s!==0&&s<Ur[c].priority;c++);Ur.splice(c,0,u),c===0&&ty(u)}};var iy=e.version;if(iy!=="19.1.0")throw Error(r(527,iy,"19.1.0"));G.findDOMNode=function(u){var s=u._reactInternals;if(s===void 0)throw typeof u.render=="function"?Error(r(188)):(u=Object.keys(u).join(","),Error(r(268,u)));return u=f(s),u=u!==null?h(u):null,u=u===null?null:u.stateNode,u};var p4={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:$,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var $a=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!$a.isDisabled&&$a.supportsFiber)try{Eu=$a.inject(p4),Kt=$a}catch{}}return vs.createRoot=function(u,s){if(!i(u))throw Error(r(299));var c=!1,d="",m=kg,b=Sg,S=Cg,v=null;return s!=null&&(s.unstable_strictMode===!0&&(c=!0),s.identifierPrefix!==void 0&&(d=s.identifierPrefix),s.onUncaughtError!==void 0&&(m=s.onUncaughtError),s.onCaughtError!==void 0&&(b=s.onCaughtError),s.onRecoverableError!==void 0&&(S=s.onRecoverableError),s.unstable_transitionCallbacks!==void 0&&(v=s.unstable_transitionCallbacks)),s=Kb(u,1,!1,null,null,c,d,m,b,S,v,null),u[cl]=s.current,ih(u),new Ch(s)},vs.hydrateRoot=function(u,s,c){if(!i(u))throw Error(r(299));var d=!1,m="",b=kg,S=Sg,v=Cg,M=null,_=null;return c!=null&&(c.unstable_strictMode===!0&&(d=!0),c.identifierPrefix!==void 0&&(m=c.identifierPrefix),c.onUncaughtError!==void 0&&(b=c.onUncaughtError),c.onCaughtError!==void 0&&(S=c.onCaughtError),c.onRecoverableError!==void 0&&(v=c.onRecoverableError),c.unstable_transitionCallbacks!==void 0&&(M=c.unstable_transitionCallbacks),c.formState!==void 0&&(_=c.formState)),s=Kb(u,1,!0,s,c??null,d,m,b,S,v,M,_),s.context=Yb(null),c=s.current,d=tn(),d=hf(d),m=Ar(d),m.callback=null,Tr(c,m,d),c=d,s.current.lanes=c,Au(s,c),Hn(s),u[cl]=s.current,ih(u),new Ba(s)},vs.version="19.1.0",vs}var py;function v4(){if(py)return Mh.exports;py=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Mh.exports=C4(),Mh.exports}var E4=v4();function pt(n){this.content=n}pt.prototype={constructor:pt,find:function(n){for(var e=0;e<this.content.length;e+=2)if(this.content[e]===n)return e;return-1},get:function(n){var e=this.find(n);return e==-1?void 0:this.content[e+1]},update:function(n,e,t){var r=t&&t!=n?this.remove(t):this,i=r.find(n),l=r.content.slice();return i==-1?l.push(t||n,e):(l[i+1]=e,t&&(l[i]=t)),new pt(l)},remove:function(n){var e=this.find(n);if(e==-1)return this;var t=this.content.slice();return t.splice(e,2),new pt(t)},addToStart:function(n,e){return new pt([n,e].concat(this.remove(n).content))},addToEnd:function(n,e){var t=this.remove(n).content.slice();return t.push(n,e),new pt(t)},addBefore:function(n,e,t){var r=this.remove(e),i=r.content.slice(),l=r.find(n);return i.splice(l==-1?i.length:l,0,e,t),new pt(i)},forEach:function(n){for(var e=0;e<this.content.length;e+=2)n(this.content[e],this.content[e+1])},prepend:function(n){return n=pt.from(n),n.size?new pt(n.content.concat(this.subtract(n).content)):this},append:function(n){return n=pt.from(n),n.size?new pt(this.subtract(n).content.concat(n.content)):this},subtract:function(n){var e=this;n=pt.from(n);for(var t=0;t<n.content.length;t+=2)e=e.remove(n.content[t]);return e},toObject:function(){var n={};return this.forEach(function(e,t){n[e]=t}),n},get size(){return this.content.length>>1}};pt.from=function(n){if(n instanceof pt)return n;var e=[];if(n)for(var t in n)e.push(t,n[t]);return new pt(e)};function Px(n,e,t){for(let r=0;;r++){if(r==n.childCount||r==e.childCount)return n.childCount==e.childCount?null:t;let i=n.child(r),l=e.child(r);if(i==l){t+=i.nodeSize;continue}if(!i.sameMarkup(l))return t;if(i.isText&&i.text!=l.text){for(let o=0;i.text[o]==l.text[o];o++)t++;return t}if(i.content.size||l.content.size){let o=Px(i.content,l.content,t+1);if(o!=null)return o}t+=i.nodeSize}}function Jx(n,e,t,r){for(let i=n.childCount,l=e.childCount;;){if(i==0||l==0)return i==l?null:{a:t,b:r};let o=n.child(--i),a=e.child(--l),f=o.nodeSize;if(o==a){t-=f,r-=f;continue}if(!o.sameMarkup(a))return{a:t,b:r};if(o.isText&&o.text!=a.text){let h=0,p=Math.min(o.text.length,a.text.length);for(;h<p&&o.text[o.text.length-h-1]==a.text[a.text.length-h-1];)h++,t--,r--;return{a:t,b:r}}if(o.content.size||a.content.size){let h=Jx(o.content,a.content,t-1,r-1);if(h)return h}t-=f,r-=f}}let j=class Tt{constructor(e,t){if(this.content=e,this.size=t||0,t==null)for(let r=0;r<e.length;r++)this.size+=e[r].nodeSize}nodesBetween(e,t,r,i=0,l){for(let o=0,a=0;a<t;o++){let f=this.content[o],h=a+f.nodeSize;if(h>e&&r(f,i+a,l||null,o)!==!1&&f.content.size){let p=a+1;f.nodesBetween(Math.max(0,e-p),Math.min(f.content.size,t-p),r,i+p)}a=h}}descendants(e){this.nodesBetween(0,this.size,e)}textBetween(e,t,r,i){let l="",o=!0;return this.nodesBetween(e,t,(a,f)=>{let h=a.isText?a.text.slice(Math.max(e,f)-f,t-f):a.isLeaf?i?typeof i=="function"?i(a):i:a.type.spec.leafText?a.type.spec.leafText(a):"":"";a.isBlock&&(a.isLeaf&&h||a.isTextblock)&&r&&(o?o=!1:l+=r),l+=h},0),l}append(e){if(!e.size)return this;if(!this.size)return e;let t=this.lastChild,r=e.firstChild,i=this.content.slice(),l=0;for(t.isText&&t.sameMarkup(r)&&(i[i.length-1]=t.withText(t.text+r.text),l=1);l<e.content.length;l++)i.push(e.content[l]);return new Tt(i,this.size+e.size)}cut(e,t=this.size){if(e==0&&t==this.size)return this;let r=[],i=0;if(t>e)for(let l=0,o=0;o<t;l++){let a=this.content[l],f=o+a.nodeSize;f>e&&((o<e||f>t)&&(a.isText?a=a.cut(Math.max(0,e-o),Math.min(a.text.length,t-o)):a=a.cut(Math.max(0,e-o-1),Math.min(a.content.size,t-o-1))),r.push(a),i+=a.nodeSize),o=f}return new Tt(r,i)}cutByIndex(e,t){return e==t?Tt.empty:e==0&&t==this.content.length?this:new Tt(this.content.slice(e,t))}replaceChild(e,t){let r=this.content[e];if(r==t)return this;let i=this.content.slice(),l=this.size+t.nodeSize-r.nodeSize;return i[e]=t,new Tt(i,l)}addToStart(e){return new Tt([e].concat(this.content),this.size+e.nodeSize)}addToEnd(e){return new Tt(this.content.concat(e),this.size+e.nodeSize)}eq(e){if(this.content.length!=e.content.length)return!1;for(let t=0;t<this.content.length;t++)if(!this.content[t].eq(e.content[t]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(e){let t=this.content[e];if(!t)throw new RangeError("Index "+e+" out of range for "+this);return t}maybeChild(e){return this.content[e]||null}forEach(e){for(let t=0,r=0;t<this.content.length;t++){let i=this.content[t];e(i,r,t),r+=i.nodeSize}}findDiffStart(e,t=0){return Px(this,e,t)}findDiffEnd(e,t=this.size,r=e.size){return Jx(this,e,t,r)}findIndex(e,t=-1){if(e==0)return Fa(0,e);if(e==this.size)return Fa(this.content.length,e);if(e>this.size||e<0)throw new RangeError(`Position ${e} outside of fragment (${this})`);for(let r=0,i=0;;r++){let l=this.child(r),o=i+l.nodeSize;if(o>=e)return o==e||t>0?Fa(r+1,o):Fa(r,i);i=o}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map(e=>e.toJSON()):null}static fromJSON(e,t){if(!t)return Tt.empty;if(!Array.isArray(t))throw new RangeError("Invalid input for Fragment.fromJSON");return new Tt(t.map(e.nodeFromJSON))}static fromArray(e){if(!e.length)return Tt.empty;let t,r=0;for(let i=0;i<e.length;i++){let l=e[i];r+=l.nodeSize,i&&l.isText&&e[i-1].sameMarkup(l)?(t||(t=e.slice(0,i)),t[t.length-1]=l.withText(t[t.length-1].text+l.text)):t&&t.push(l)}return new Tt(t||e,r)}static from(e){if(!e)return Tt.empty;if(e instanceof Tt)return e;if(Array.isArray(e))return this.fromArray(e);if(e.attrs)return new Tt([e],e.nodeSize);throw new RangeError("Can not convert "+e+" to a Fragment"+(e.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}};j.empty=new j([],0);const wh={index:0,offset:0};function Fa(n,e){return wh.index=n,wh.offset=e,wh}function ac(n,e){if(n===e)return!0;if(!(n&&typeof n=="object")||!(e&&typeof e=="object"))return!1;let t=Array.isArray(n);if(Array.isArray(e)!=t)return!1;if(t){if(n.length!=e.length)return!1;for(let r=0;r<n.length;r++)if(!ac(n[r],e[r]))return!1}else{for(let r in n)if(!(r in e)||!ac(n[r],e[r]))return!1;for(let r in e)if(!(r in n))return!1}return!0}let Me=class xp{constructor(e,t){this.type=e,this.attrs=t}addToSet(e){let t,r=!1;for(let i=0;i<e.length;i++){let l=e[i];if(this.eq(l))return e;if(this.type.excludes(l.type))t||(t=e.slice(0,i));else{if(l.type.excludes(this.type))return e;!r&&l.type.rank>this.type.rank&&(t||(t=e.slice(0,i)),t.push(this),r=!0),t&&t.push(l)}}return t||(t=e.slice()),r||t.push(this),t}removeFromSet(e){for(let t=0;t<e.length;t++)if(this.eq(e[t]))return e.slice(0,t).concat(e.slice(t+1));return e}isInSet(e){for(let t=0;t<e.length;t++)if(this.eq(e[t]))return!0;return!1}eq(e){return this==e||this.type==e.type&&ac(this.attrs,e.attrs)}toJSON(){let e={type:this.type.name};for(let t in this.attrs){e.attrs=this.attrs;break}return e}static fromJSON(e,t){if(!t)throw new RangeError("Invalid input for Mark.fromJSON");let r=e.marks[t.type];if(!r)throw new RangeError(`There is no mark type ${t.type} in this schema`);let i=r.create(t.attrs);return r.checkAttrs(i.attrs),i}static sameSet(e,t){if(e==t)return!0;if(e.length!=t.length)return!1;for(let r=0;r<e.length;r++)if(!e[r].eq(t[r]))return!1;return!0}static setFrom(e){if(!e||Array.isArray(e)&&e.length==0)return xp.none;if(e instanceof xp)return[e];let t=e.slice();return t.sort((r,i)=>r.type.rank-i.type.rank),t}};Me.none=[];let cc=class extends Error{},Y=class Wl{constructor(e,t,r){this.content=e,this.openStart=t,this.openEnd=r}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(e,t){let r=Kx(this.content,e+this.openStart,t);return r&&new Wl(r,this.openStart,this.openEnd)}removeBetween(e,t){return new Wl(Gx(this.content,e+this.openStart,t+this.openStart),this.openStart,this.openEnd)}eq(e){return this.content.eq(e.content)&&this.openStart==e.openStart&&this.openEnd==e.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let e={content:this.content.toJSON()};return this.openStart>0&&(e.openStart=this.openStart),this.openEnd>0&&(e.openEnd=this.openEnd),e}static fromJSON(e,t){if(!t)return Wl.empty;let r=t.openStart||0,i=t.openEnd||0;if(typeof r!="number"||typeof i!="number")throw new RangeError("Invalid input for Slice.fromJSON");return new Wl(j.fromJSON(e,t.content),r,i)}static maxOpen(e,t=!0){let r=0,i=0;for(let l=e.firstChild;l&&!l.isLeaf&&(t||!l.type.spec.isolating);l=l.firstChild)r++;for(let l=e.lastChild;l&&!l.isLeaf&&(t||!l.type.spec.isolating);l=l.lastChild)i++;return new Wl(e,r,i)}};Y.empty=new Y(j.empty,0,0);function Gx(n,e,t){let{index:r,offset:i}=n.findIndex(e),l=n.maybeChild(r),{index:o,offset:a}=n.findIndex(t);if(i==e||l.isText){if(a!=t&&!n.child(o).isText)throw new RangeError("Removing non-flat range");return n.cut(0,e).append(n.cut(t))}if(r!=o)throw new RangeError("Removing non-flat range");return n.replaceChild(r,l.copy(Gx(l.content,e-i-1,t-i-1)))}function Kx(n,e,t,r){let{index:i,offset:l}=n.findIndex(e),o=n.maybeChild(i);if(l==e||o.isText)return n.cut(0,e).append(t).append(n.cut(e));let a=Kx(o.content,e-l-1,t);return a&&n.replaceChild(i,o.copy(a))}function M4(n,e,t){if(t.openStart>n.depth)throw new cc("Inserted content deeper than insertion position");if(n.depth-t.openStart!=e.depth-t.openEnd)throw new cc("Inconsistent open depths");return Yx(n,e,t,0)}function Yx(n,e,t,r){let i=n.index(r),l=n.node(r);if(i==e.index(r)&&r<n.depth-t.openStart){let o=Yx(n,e,t,r+1);return l.copy(l.content.replaceChild(i,o))}else if(t.content.size)if(!t.openStart&&!t.openEnd&&n.depth==r&&e.depth==r){let o=n.parent,a=o.content;return Pi(o,a.cut(0,n.parentOffset).append(t.content).append(a.cut(e.parentOffset)))}else{let{start:o,end:a}=A4(t,n);return Pi(l,Xx(n,o,a,e,r))}else return Pi(l,fc(n,e,r))}function Zx(n,e){if(!e.type.compatibleContent(n.type))throw new cc("Cannot join "+e.type.name+" onto "+n.type.name)}function kp(n,e,t){let r=n.node(t);return Zx(r,e.node(t)),r}function ji(n,e){let t=e.length-1;t>=0&&n.isText&&n.sameMarkup(e[t])?e[t]=n.withText(e[t].text+n.text):e.push(n)}function Is(n,e,t,r){let i=(e||n).node(t),l=0,o=e?e.index(t):i.childCount;n&&(l=n.index(t),n.depth>t?l++:n.textOffset&&(ji(n.nodeAfter,r),l++));for(let a=l;a<o;a++)ji(i.child(a),r);e&&e.depth==t&&e.textOffset&&ji(e.nodeBefore,r)}function Pi(n,e){return n.type.checkContent(e),n.copy(e)}function Xx(n,e,t,r,i){let l=n.depth>i&&kp(n,e,i+1),o=r.depth>i&&kp(t,r,i+1),a=[];return Is(null,n,i,a),l&&o&&e.index(i)==t.index(i)?(Zx(l,o),ji(Pi(l,Xx(n,e,t,r,i+1)),a)):(l&&ji(Pi(l,fc(n,e,i+1)),a),Is(e,t,i,a),o&&ji(Pi(o,fc(t,r,i+1)),a)),Is(r,null,i,a),new j(a)}function fc(n,e,t){let r=[];if(Is(null,n,t,r),n.depth>t){let i=kp(n,e,t+1);ji(Pi(i,fc(n,e,t+1)),r)}return Is(e,null,t,r),new j(r)}function A4(n,e){let t=e.depth-n.openStart,i=e.node(t).copy(n.content);for(let l=t-1;l>=0;l--)i=e.node(l).copy(j.from(i));return{start:i.resolveNoCache(n.openStart+t),end:i.resolveNoCache(i.content.size-n.openEnd-t)}}let my=class Sp{constructor(e,t,r){this.pos=e,this.path=t,this.parentOffset=r,this.depth=t.length/3-1}resolveDepth(e){return e==null?this.depth:e<0?this.depth+e:e}get parent(){return this.node(this.depth)}get doc(){return this.node(0)}node(e){return this.path[this.resolveDepth(e)*3]}index(e){return this.path[this.resolveDepth(e)*3+1]}indexAfter(e){return e=this.resolveDepth(e),this.index(e)+(e==this.depth&&!this.textOffset?0:1)}start(e){return e=this.resolveDepth(e),e==0?0:this.path[e*3-1]+1}end(e){return e=this.resolveDepth(e),this.start(e)+this.node(e).content.size}before(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position before the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]}after(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position after the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]+this.path[e*3].nodeSize}get textOffset(){return this.pos-this.path[this.path.length-1]}get nodeAfter(){let e=this.parent,t=this.index(this.depth);if(t==e.childCount)return null;let r=this.pos-this.path[this.path.length-1],i=e.child(t);return r?e.child(t).cut(r):i}get nodeBefore(){let e=this.index(this.depth),t=this.pos-this.path[this.path.length-1];return t?this.parent.child(e).cut(0,t):e==0?null:this.parent.child(e-1)}posAtIndex(e,t){t=this.resolveDepth(t);let r=this.path[t*3],i=t==0?0:this.path[t*3-1]+1;for(let l=0;l<e;l++)i+=r.child(l).nodeSize;return i}marks(){let e=this.parent,t=this.index();if(e.content.size==0)return Me.none;if(this.textOffset)return e.child(t).marks;let r=e.maybeChild(t-1),i=e.maybeChild(t);if(!r){let a=r;r=i,i=a}let l=r.marks;for(var o=0;o<l.length;o++)l[o].type.spec.inclusive===!1&&(!i||!l[o].isInSet(i.marks))&&(l=l[o--].removeFromSet(l));return l}marksAcross(e){let t=this.parent.maybeChild(this.index());if(!t||!t.isInline)return null;let r=t.marks,i=e.parent.maybeChild(e.index());for(var l=0;l<r.length;l++)r[l].type.spec.inclusive===!1&&(!i||!r[l].isInSet(i.marks))&&(r=r[l--].removeFromSet(r));return r}sharedDepth(e){for(let t=this.depth;t>0;t--)if(this.start(t)<=e&&this.end(t)>=e)return t;return 0}blockRange(e=this,t){if(e.pos<this.pos)return e.blockRange(this);for(let r=this.depth-(this.parent.inlineContent||this.pos==e.pos?1:0);r>=0;r--)if(e.pos<=this.end(r)&&(!t||t(this.node(r))))return new dc(this,e,r);return null}sameParent(e){return this.pos-this.parentOffset==e.pos-e.parentOffset}max(e){return e.pos>this.pos?e:this}min(e){return e.pos<this.pos?e:this}toString(){let e="";for(let t=1;t<=this.depth;t++)e+=(e?"/":"")+this.node(t).type.name+"_"+this.index(t-1);return e+":"+this.parentOffset}static resolve(e,t){if(!(t>=0&&t<=e.content.size))throw new RangeError("Position "+t+" out of range");let r=[],i=0,l=t;for(let o=e;;){let{index:a,offset:f}=o.content.findIndex(l),h=l-f;if(r.push(o,a,i+f),!h||(o=o.child(a),o.isText))break;l=h-1,i+=f+1}return new Sp(t,r,l)}static resolveCached(e,t){let r=gy.get(e);if(r)for(let l=0;l<r.elts.length;l++){let o=r.elts[l];if(o.pos==t)return o}else gy.set(e,r=new T4);let i=r.elts[r.i]=Sp.resolve(e,t);return r.i=(r.i+1)%D4,i}},T4=class{constructor(){this.elts=[],this.i=0}};const D4=12,gy=new WeakMap;let dc=class{constructor(e,t,r){this.$from=e,this.$to=t,this.depth=r}get start(){return this.$from.before(this.depth+1)}get end(){return this.$to.after(this.depth+1)}get parent(){return this.$from.node(this.depth)}get startIndex(){return this.$from.index(this.depth)}get endIndex(){return this.$to.indexAfter(this.depth)}};const w4=Object.create(null);let ti=class Cp{constructor(e,t,r,i=Me.none){this.type=e,this.attrs=t,this.marks=i,this.content=r||j.empty}get children(){return this.content.content}get nodeSize(){return this.isLeaf?1:2+this.content.size}get childCount(){return this.content.childCount}child(e){return this.content.child(e)}maybeChild(e){return this.content.maybeChild(e)}forEach(e){this.content.forEach(e)}nodesBetween(e,t,r,i=0){this.content.nodesBetween(e,t,r,i,this)}descendants(e){this.nodesBetween(0,this.content.size,e)}get textContent(){return this.isLeaf&&this.type.spec.leafText?this.type.spec.leafText(this):this.textBetween(0,this.content.size,"")}textBetween(e,t,r,i){return this.content.textBetween(e,t,r,i)}get firstChild(){return this.content.firstChild}get lastChild(){return this.content.lastChild}eq(e){return this==e||this.sameMarkup(e)&&this.content.eq(e.content)}sameMarkup(e){return this.hasMarkup(e.type,e.attrs,e.marks)}hasMarkup(e,t,r){return this.type==e&&ac(this.attrs,t||e.defaultAttrs||w4)&&Me.sameSet(this.marks,r||Me.none)}copy(e=null){return e==this.content?this:new Cp(this.type,this.attrs,e,this.marks)}mark(e){return e==this.marks?this:new Cp(this.type,this.attrs,this.content,e)}cut(e,t=this.content.size){return e==0&&t==this.content.size?this:this.copy(this.content.cut(e,t))}slice(e,t=this.content.size,r=!1){if(e==t)return Y.empty;let i=this.resolve(e),l=this.resolve(t),o=r?0:i.sharedDepth(t),a=i.start(o),h=i.node(o).content.cut(i.pos-a,l.pos-a);return new Y(h,i.depth-o,l.depth-o)}replace(e,t,r){return M4(this.resolve(e),this.resolve(t),r)}nodeAt(e){for(let t=this;;){let{index:r,offset:i}=t.content.findIndex(e);if(t=t.maybeChild(r),!t)return null;if(i==e||t.isText)return t;e-=i+1}}childAfter(e){let{index:t,offset:r}=this.content.findIndex(e);return{node:this.content.maybeChild(t),index:t,offset:r}}childBefore(e){if(e==0)return{node:null,index:0,offset:0};let{index:t,offset:r}=this.content.findIndex(e);if(r<e)return{node:this.content.child(t),index:t,offset:r};let i=this.content.child(t-1);return{node:i,index:t-1,offset:r-i.nodeSize}}resolve(e){return my.resolveCached(this,e)}resolveNoCache(e){return my.resolve(this,e)}rangeHasMark(e,t,r){let i=!1;return t>e&&this.nodesBetween(e,t,l=>(r.isInSet(l.marks)&&(i=!0),!i)),i}get isBlock(){return this.type.isBlock}get isTextblock(){return this.type.isTextblock}get inlineContent(){return this.type.inlineContent}get isInline(){return this.type.isInline}get isText(){return this.type.isText}get isLeaf(){return this.type.isLeaf}get isAtom(){return this.type.isAtom}toString(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);let e=this.type.name;return this.content.size&&(e+="("+this.content.toStringInner()+")"),Qx(this.marks,e)}contentMatchAt(e){let t=this.type.contentMatch.matchFragment(this.content,0,e);if(!t)throw new Error("Called contentMatchAt on a node with invalid content");return t}canReplace(e,t,r=j.empty,i=0,l=r.childCount){let o=this.contentMatchAt(e).matchFragment(r,i,l),a=o&&o.matchFragment(this.content,t);if(!a||!a.validEnd)return!1;for(let f=i;f<l;f++)if(!this.type.allowsMarks(r.child(f).marks))return!1;return!0}canReplaceWith(e,t,r,i){if(i&&!this.type.allowsMarks(i))return!1;let l=this.contentMatchAt(e).matchType(r),o=l&&l.matchFragment(this.content,t);return o?o.validEnd:!1}canAppend(e){return e.content.size?this.canReplace(this.childCount,this.childCount,e.content):this.type.compatibleContent(e.type)}check(){this.type.checkContent(this.content),this.type.checkAttrs(this.attrs);let e=Me.none;for(let t=0;t<this.marks.length;t++){let r=this.marks[t];r.type.checkAttrs(r.attrs),e=r.addToSet(e)}if(!Me.sameSet(e,this.marks))throw new RangeError(`Invalid collection of marks for node ${this.type.name}: ${this.marks.map(t=>t.type.name)}`);this.content.forEach(t=>t.check())}toJSON(){let e={type:this.type.name};for(let t in this.attrs){e.attrs=this.attrs;break}return this.content.size&&(e.content=this.content.toJSON()),this.marks.length&&(e.marks=this.marks.map(t=>t.toJSON())),e}static fromJSON(e,t){if(!t)throw new RangeError("Invalid input for Node.fromJSON");let r;if(t.marks){if(!Array.isArray(t.marks))throw new RangeError("Invalid mark data for Node.fromJSON");r=t.marks.map(e.markFromJSON)}if(t.type=="text"){if(typeof t.text!="string")throw new RangeError("Invalid text node in JSON");return e.text(t.text,r)}let i=j.fromJSON(e,t.content),l=e.nodeType(t.type).create(t.attrs,i,r);return l.type.checkAttrs(l.attrs),l}};ti.prototype.text=void 0;let O4=class vp extends ti{constructor(e,t,r,i){if(super(e,t,null,i),!r)throw new RangeError("Empty text nodes are not allowed");this.text=r}toString(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):Qx(this.marks,JSON.stringify(this.text))}get textContent(){return this.text}textBetween(e,t){return this.text.slice(e,t)}get nodeSize(){return this.text.length}mark(e){return e==this.marks?this:new vp(this.type,this.attrs,this.text,e)}withText(e){return e==this.text?this:new vp(this.type,this.attrs,e,this.marks)}cut(e=0,t=this.text.length){return e==0&&t==this.text.length?this:this.withText(this.text.slice(e,t))}eq(e){return this.sameMarkup(e)&&this.text==e.text}toJSON(){let e=super.toJSON();return e.text=this.text,e}};function Qx(n,e){for(let t=n.length-1;t>=0;t--)e=n[t].type.name+"("+e+")";return e}let Js=class Wx{constructor(e){this.validEnd=e,this.next=[],this.wrapCache=[]}static parse(e,t){let r=new _4(e,t);if(r.next==null)return Wx.empty;let i=e3(r);r.next&&r.err("Unexpected trailing text");let l=L4(F4(i));return I4(l,r),l}matchType(e){for(let t=0;t<this.next.length;t++)if(this.next[t].type==e)return this.next[t].next;return null}matchFragment(e,t=0,r=e.childCount){let i=this;for(let l=t;i&&l<r;l++)i=i.matchType(e.child(l).type);return i}get inlineContent(){return this.next.length!=0&&this.next[0].type.isInline}get defaultType(){for(let e=0;e<this.next.length;e++){let{type:t}=this.next[e];if(!(t.isText||t.hasRequiredAttrs()))return t}return null}compatible(e){for(let t=0;t<this.next.length;t++)for(let r=0;r<e.next.length;r++)if(this.next[t].type==e.next[r].type)return!0;return!1}fillBefore(e,t=!1,r=0){let i=[this];function l(o,a){let f=o.matchFragment(e,r);if(f&&(!t||f.validEnd))return j.from(a.map(h=>h.createAndFill()));for(let h=0;h<o.next.length;h++){let{type:p,next:g}=o.next[h];if(!(p.isText||p.hasRequiredAttrs())&&i.indexOf(g)==-1){i.push(g);let y=l(g,a.concat(p));if(y)return y}}return null}return l(this,[])}findWrapping(e){for(let r=0;r<this.wrapCache.length;r+=2)if(this.wrapCache[r]==e)return this.wrapCache[r+1];let t=this.computeWrapping(e);return this.wrapCache.push(e,t),t}computeWrapping(e){let t=Object.create(null),r=[{match:this,type:null,via:null}];for(;r.length;){let i=r.shift(),l=i.match;if(l.matchType(e)){let o=[];for(let a=i;a.type;a=a.via)o.push(a.type);return o.reverse()}for(let o=0;o<l.next.length;o++){let{type:a,next:f}=l.next[o];!a.isLeaf&&!a.hasRequiredAttrs()&&!(a.name in t)&&(!i.type||f.validEnd)&&(r.push({match:a.contentMatch,type:a,via:i}),t[a.name]=!0)}}return null}get edgeCount(){return this.next.length}edge(e){if(e>=this.next.length)throw new RangeError(`There's no ${e}th edge in this content match`);return this.next[e]}toString(){let e=[];function t(r){e.push(r);for(let i=0;i<r.next.length;i++)e.indexOf(r.next[i].next)==-1&&t(r.next[i].next)}return t(this),e.map((r,i)=>{let l=i+(r.validEnd?"*":" ")+" ";for(let o=0;o<r.next.length;o++)l+=(o?", ":"")+r.next[o].type.name+"->"+e.indexOf(r.next[o].next);return l}).join(`
`)}};Js.empty=new Js(!0);let _4=class{constructor(e,t){this.string=e,this.nodeTypes=t,this.inline=null,this.pos=0,this.tokens=e.split(/\s*(?=\b|\W|$)/),this.tokens[this.tokens.length-1]==""&&this.tokens.pop(),this.tokens[0]==""&&this.tokens.shift()}get next(){return this.tokens[this.pos]}eat(e){return this.next==e&&(this.pos++||!0)}err(e){throw new SyntaxError(e+" (in content expression '"+this.string+"')")}};function e3(n){let e=[];do e.push(N4(n));while(n.eat("|"));return e.length==1?e[0]:{type:"choice",exprs:e}}function N4(n){let e=[];do e.push(R4(n));while(n.next&&n.next!=")"&&n.next!="|");return e.length==1?e[0]:{type:"seq",exprs:e}}function R4(n){let e=$4(n);for(;;)if(n.eat("+"))e={type:"plus",expr:e};else if(n.eat("*"))e={type:"star",expr:e};else if(n.eat("?"))e={type:"opt",expr:e};else if(n.eat("{"))e=z4(n,e);else break;return e}function by(n){/\D/.test(n.next)&&n.err("Expected number, got '"+n.next+"'");let e=Number(n.next);return n.pos++,e}function z4(n,e){let t=by(n),r=t;return n.eat(",")&&(n.next!="}"?r=by(n):r=-1),n.eat("}")||n.err("Unclosed braced range"),{type:"range",min:t,max:r,expr:e}}function B4(n,e){let t=n.nodeTypes,r=t[e];if(r)return[r];let i=[];for(let l in t){let o=t[l];o.isInGroup(e)&&i.push(o)}return i.length==0&&n.err("No node type or group '"+e+"' found"),i}function $4(n){if(n.eat("(")){let e=e3(n);return n.eat(")")||n.err("Missing closing paren"),e}else if(/\W/.test(n.next))n.err("Unexpected token '"+n.next+"'");else{let e=B4(n,n.next).map(t=>(n.inline==null?n.inline=t.isInline:n.inline!=t.isInline&&n.err("Mixing inline and block content"),{type:"name",value:t}));return n.pos++,e.length==1?e[0]:{type:"choice",exprs:e}}}function F4(n){let e=[[]];return i(l(n,0),t()),e;function t(){return e.push([])-1}function r(o,a,f){let h={term:f,to:a};return e[o].push(h),h}function i(o,a){o.forEach(f=>f.to=a)}function l(o,a){if(o.type=="choice")return o.exprs.reduce((f,h)=>f.concat(l(h,a)),[]);if(o.type=="seq")for(let f=0;;f++){let h=l(o.exprs[f],a);if(f==o.exprs.length-1)return h;i(h,a=t())}else if(o.type=="star"){let f=t();return r(a,f),i(l(o.expr,f),f),[r(f)]}else if(o.type=="plus"){let f=t();return i(l(o.expr,a),f),i(l(o.expr,f),f),[r(f)]}else{if(o.type=="opt")return[r(a)].concat(l(o.expr,a));if(o.type=="range"){let f=a;for(let h=0;h<o.min;h++){let p=t();i(l(o.expr,f),p),f=p}if(o.max==-1)i(l(o.expr,f),f);else for(let h=o.min;h<o.max;h++){let p=t();r(f,p),i(l(o.expr,f),p),f=p}return[r(f)]}else{if(o.type=="name")return[r(a,void 0,o.value)];throw new Error("Unknown expr type")}}}}function t3(n,e){return e-n}function yy(n,e){let t=[];return r(e),t.sort(t3);function r(i){let l=n[i];if(l.length==1&&!l[0].term)return r(l[0].to);t.push(i);for(let o=0;o<l.length;o++){let{term:a,to:f}=l[o];!a&&t.indexOf(f)==-1&&r(f)}}}function L4(n){let e=Object.create(null);return t(yy(n,0));function t(r){let i=[];r.forEach(o=>{n[o].forEach(({term:a,to:f})=>{if(!a)return;let h;for(let p=0;p<i.length;p++)i[p][0]==a&&(h=i[p][1]);yy(n,f).forEach(p=>{h||i.push([a,h=[]]),h.indexOf(p)==-1&&h.push(p)})})});let l=e[r.join(",")]=new Js(r.indexOf(n.length-1)>-1);for(let o=0;o<i.length;o++){let a=i[o][1].sort(t3);l.next.push({type:i[o][0],next:e[a.join(",")]||t(a)})}return l}}function I4(n,e){for(let t=0,r=[n];t<r.length;t++){let i=r[t],l=!i.validEnd,o=[];for(let a=0;a<i.next.length;a++){let{type:f,next:h}=i.next[a];o.push(f.name),l&&!(f.isText||f.hasRequiredAttrs())&&(l=!1),r.indexOf(h)==-1&&r.push(h)}l&&e.err("Only non-generatable nodes ("+o.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}function n3(n){let e=Object.create(null);for(let t in n){let r=n[t];if(!r.hasDefault)return null;e[t]=r.default}return e}function r3(n,e){let t=Object.create(null);for(let r in n){let i=e&&e[r];if(i===void 0){let l=n[r];if(l.hasDefault)i=l.default;else throw new RangeError("No value supplied for attribute "+r)}t[r]=i}return t}function i3(n,e,t,r){for(let i in e)if(!(i in n))throw new RangeError(`Unsupported attribute ${i} for ${t} of type ${i}`);for(let i in n){let l=n[i];l.validate&&l.validate(e[i])}}function l3(n,e){let t=Object.create(null);if(e)for(let r in e)t[r]=new H4(n,r,e[r]);return t}let xy=class u3{constructor(e,t,r){this.name=e,this.schema=t,this.spec=r,this.markSet=null,this.groups=r.group?r.group.split(" "):[],this.attrs=l3(e,r.attrs),this.defaultAttrs=n3(this.attrs),this.contentMatch=null,this.inlineContent=null,this.isBlock=!(r.inline||e=="text"),this.isText=e=="text"}get isInline(){return!this.isBlock}get isTextblock(){return this.isBlock&&this.inlineContent}get isLeaf(){return this.contentMatch==Js.empty}get isAtom(){return this.isLeaf||!!this.spec.atom}isInGroup(e){return this.groups.indexOf(e)>-1}get whitespace(){return this.spec.whitespace||(this.spec.code?"pre":"normal")}hasRequiredAttrs(){for(let e in this.attrs)if(this.attrs[e].isRequired)return!0;return!1}compatibleContent(e){return this==e||this.contentMatch.compatible(e.contentMatch)}computeAttrs(e){return!e&&this.defaultAttrs?this.defaultAttrs:r3(this.attrs,e)}create(e=null,t,r){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new ti(this,this.computeAttrs(e),j.from(t),Me.setFrom(r))}createChecked(e=null,t,r){return t=j.from(t),this.checkContent(t),new ti(this,this.computeAttrs(e),t,Me.setFrom(r))}createAndFill(e=null,t,r){if(e=this.computeAttrs(e),t=j.from(t),t.size){let o=this.contentMatch.fillBefore(t);if(!o)return null;t=o.append(t)}let i=this.contentMatch.matchFragment(t),l=i&&i.fillBefore(j.empty,!0);return l?new ti(this,e,t.append(l),Me.setFrom(r)):null}validContent(e){let t=this.contentMatch.matchFragment(e);if(!t||!t.validEnd)return!1;for(let r=0;r<e.childCount;r++)if(!this.allowsMarks(e.child(r).marks))return!1;return!0}checkContent(e){if(!this.validContent(e))throw new RangeError(`Invalid content for node ${this.name}: ${e.toString().slice(0,50)}`)}checkAttrs(e){i3(this.attrs,e,"node",this.name)}allowsMarkType(e){return this.markSet==null||this.markSet.indexOf(e)>-1}allowsMarks(e){if(this.markSet==null)return!0;for(let t=0;t<e.length;t++)if(!this.allowsMarkType(e[t].type))return!1;return!0}allowedMarks(e){if(this.markSet==null)return e;let t;for(let r=0;r<e.length;r++)this.allowsMarkType(e[r].type)?t&&t.push(e[r]):t||(t=e.slice(0,r));return t?t.length?t:Me.none:e}static compile(e,t){let r=Object.create(null);e.forEach((l,o)=>r[l]=new u3(l,t,o));let i=t.spec.topNode||"doc";if(!r[i])throw new RangeError("Schema is missing its top node type ('"+i+"')");if(!r.text)throw new RangeError("Every schema needs a 'text' type");for(let l in r.text.attrs)throw new RangeError("The text node type should not have attributes");return r}};function q4(n,e,t){let r=t.split("|");return i=>{let l=i===null?"null":typeof i;if(r.indexOf(l)<0)throw new RangeError(`Expected value of type ${r} for attribute ${e} on type ${n}, got ${l}`)}}let H4=class{constructor(e,t,r){this.hasDefault=Object.prototype.hasOwnProperty.call(r,"default"),this.default=r.default,this.validate=typeof r.validate=="string"?q4(e,t,r.validate):r.validate}get isRequired(){return!this.hasDefault}},s3=class o3{constructor(e,t,r,i){this.name=e,this.rank=t,this.schema=r,this.spec=i,this.attrs=l3(e,i.attrs),this.excluded=null;let l=n3(this.attrs);this.instance=l?new Me(this,l):null}create(e=null){return!e&&this.instance?this.instance:new Me(this,r3(this.attrs,e))}static compile(e,t){let r=Object.create(null),i=0;return e.forEach((l,o)=>r[l]=new o3(l,i++,t,o)),r}removeFromSet(e){for(var t=0;t<e.length;t++)e[t].type==this&&(e=e.slice(0,t).concat(e.slice(t+1)),t--);return e}isInSet(e){for(let t=0;t<e.length;t++)if(e[t].type==this)return e[t]}checkAttrs(e){i3(this.attrs,e,"mark",this.name)}excludes(e){return this.excluded.indexOf(e)>-1}},f0=class{constructor(e){this.linebreakReplacement=null,this.cached=Object.create(null);let t=this.spec={};for(let i in e)t[i]=e[i];t.nodes=pt.from(e.nodes),t.marks=pt.from(e.marks||{}),this.nodes=xy.compile(this.spec.nodes,this),this.marks=s3.compile(this.spec.marks,this);let r=Object.create(null);for(let i in this.nodes){if(i in this.marks)throw new RangeError(i+" can not be both a node and a mark");let l=this.nodes[i],o=l.spec.content||"",a=l.spec.marks;if(l.contentMatch=r[o]||(r[o]=Js.parse(o,this.nodes)),l.inlineContent=l.contentMatch.inlineContent,l.spec.linebreakReplacement){if(this.linebreakReplacement)throw new RangeError("Multiple linebreak nodes defined");if(!l.isInline||!l.isLeaf)throw new RangeError("Linebreak replacement nodes must be inline leaf nodes");this.linebreakReplacement=l}l.markSet=a=="_"?null:a?ky(this,a.split(" ")):a==""||!l.inlineContent?[]:null}for(let i in this.marks){let l=this.marks[i],o=l.spec.excludes;l.excluded=o==null?[l]:o==""?[]:ky(this,o.split(" "))}this.nodeFromJSON=this.nodeFromJSON.bind(this),this.markFromJSON=this.markFromJSON.bind(this),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached.wrappings=Object.create(null)}node(e,t=null,r,i){if(typeof e=="string")e=this.nodeType(e);else if(e instanceof xy){if(e.schema!=this)throw new RangeError("Node type from different schema used ("+e.name+")")}else throw new RangeError("Invalid node type: "+e);return e.createChecked(t,r,i)}text(e,t){let r=this.nodes.text;return new O4(r,r.defaultAttrs,e,Me.setFrom(t))}mark(e,t){return typeof e=="string"&&(e=this.marks[e]),e.create(t)}nodeFromJSON(e){return ti.fromJSON(this,e)}markFromJSON(e){return Me.fromJSON(this,e)}nodeType(e){let t=this.nodes[e];if(!t)throw new RangeError("Unknown node type: "+e);return t}};function ky(n,e){let t=[];for(let r=0;r<e.length;r++){let i=e[r],l=n.marks[i],o=l;if(l)t.push(l);else for(let a in n.marks){let f=n.marks[a];(i=="_"||f.spec.group&&f.spec.group.split(" ").indexOf(i)>-1)&&t.push(o=f)}if(!o)throw new SyntaxError("Unknown mark type: '"+e[r]+"'")}return t}function V4(n){return n.tag!=null}function U4(n){return n.style!=null}let ou=class Ep{constructor(e,t){this.schema=e,this.rules=t,this.tags=[],this.styles=[];let r=this.matchedStyles=[];t.forEach(i=>{if(V4(i))this.tags.push(i);else if(U4(i)){let l=/[^=]*/.exec(i.style)[0];r.indexOf(l)<0&&r.push(l),this.styles.push(i)}}),this.normalizeLists=!this.tags.some(i=>{if(!/^(ul|ol)\b/.test(i.tag)||!i.node)return!1;let l=e.nodes[i.node];return l.contentMatch.matchType(l)})}parse(e,t={}){let r=new Cy(this,t,!1);return r.addAll(e,Me.none,t.from,t.to),r.finish()}parseSlice(e,t={}){let r=new Cy(this,t,!0);return r.addAll(e,Me.none,t.from,t.to),Y.maxOpen(r.finish())}matchTag(e,t,r){for(let i=r?this.tags.indexOf(r)+1:0;i<this.tags.length;i++){let l=this.tags[i];if(J4(e,l.tag)&&(l.namespace===void 0||e.namespaceURI==l.namespace)&&(!l.context||t.matchesContext(l.context))){if(l.getAttrs){let o=l.getAttrs(e);if(o===!1)continue;l.attrs=o||void 0}return l}}}matchStyle(e,t,r,i){for(let l=i?this.styles.indexOf(i)+1:0;l<this.styles.length;l++){let o=this.styles[l],a=o.style;if(!(a.indexOf(e)!=0||o.context&&!r.matchesContext(o.context)||a.length>e.length&&(a.charCodeAt(e.length)!=61||a.slice(e.length+1)!=t))){if(o.getAttrs){let f=o.getAttrs(t);if(f===!1)continue;o.attrs=f||void 0}return o}}}static schemaRules(e){let t=[];function r(i){let l=i.priority==null?50:i.priority,o=0;for(;o<t.length;o++){let a=t[o];if((a.priority==null?50:a.priority)<l)break}t.splice(o,0,i)}for(let i in e.marks){let l=e.marks[i].spec.parseDOM;l&&l.forEach(o=>{r(o=vy(o)),o.mark||o.ignore||o.clearMark||(o.mark=i)})}for(let i in e.nodes){let l=e.nodes[i].spec.parseDOM;l&&l.forEach(o=>{r(o=vy(o)),o.node||o.ignore||o.mark||(o.node=i)})}return t}static fromSchema(e){return e.cached.domParser||(e.cached.domParser=new Ep(e,Ep.schemaRules(e)))}};const a3={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},j4={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},c3={ol:!0,ul:!0},Gs=1,Mp=2,Xa=4;function Sy(n,e,t){return e!=null?(e?Gs:0)|(e==="full"?Mp:0):n&&n.whitespace=="pre"?Gs|Mp:t&-5}let La=class{constructor(e,t,r,i,l,o){this.type=e,this.attrs=t,this.marks=r,this.solid=i,this.options=o,this.content=[],this.activeMarks=Me.none,this.match=l||(o&Xa?null:e.contentMatch)}findWrapping(e){if(!this.match){if(!this.type)return[];let t=this.type.contentMatch.fillBefore(j.from(e));if(t)this.match=this.type.contentMatch.matchFragment(t);else{let r=this.type.contentMatch,i;return(i=r.findWrapping(e.type))?(this.match=r,i):null}}return this.match.findWrapping(e.type)}finish(e){if(!(this.options&Gs)){let r=this.content[this.content.length-1],i;if(r&&r.isText&&(i=/[ \t\r\n\u000c]+$/.exec(r.text))){let l=r;r.text.length==i[0].length?this.content.pop():this.content[this.content.length-1]=l.withText(l.text.slice(0,l.text.length-i[0].length))}}let t=j.from(this.content);return!e&&this.match&&(t=t.append(this.match.fillBefore(j.empty,!0))),this.type?this.type.create(this.attrs,t,this.marks):t}inlineContext(e){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:e.parentNode&&!a3.hasOwnProperty(e.parentNode.nodeName.toLowerCase())}},Cy=class{constructor(e,t,r){this.parser=e,this.options=t,this.isOpen=r,this.open=0,this.localPreserveWS=!1;let i=t.topNode,l,o=Sy(null,t.preserveWhitespace,0)|(r?Xa:0);i?l=new La(i.type,i.attrs,Me.none,!0,t.topMatch||i.type.contentMatch,o):r?l=new La(null,null,Me.none,!0,null,o):l=new La(e.schema.topNodeType,null,Me.none,!0,null,o),this.nodes=[l],this.find=t.findPositions,this.needsBlock=!1}get top(){return this.nodes[this.open]}addDOM(e,t){e.nodeType==3?this.addTextNode(e,t):e.nodeType==1&&this.addElement(e,t)}addTextNode(e,t){let r=e.nodeValue,i=this.top,l=i.options&Mp?"full":this.localPreserveWS||(i.options&Gs)>0;if(l==="full"||i.inlineContext(e)||/[^ \t\r\n\u000c]/.test(r)){if(l)l!=="full"?r=r.replace(/\r?\n|\r/g," "):r=r.replace(/\r\n?/g,`
`);else if(r=r.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(r)&&this.open==this.nodes.length-1){let o=i.content[i.content.length-1],a=e.previousSibling;(!o||a&&a.nodeName=="BR"||o.isText&&/[ \t\r\n\u000c]$/.test(o.text))&&(r=r.slice(1))}r&&this.insertNode(this.parser.schema.text(r),t,!/\S/.test(r)),this.findInText(e)}else this.findInside(e)}addElement(e,t,r){let i=this.localPreserveWS,l=this.top;(e.tagName=="PRE"||/pre/.test(e.style&&e.style.whiteSpace))&&(this.localPreserveWS=!0);let o=e.nodeName.toLowerCase(),a;c3.hasOwnProperty(o)&&this.parser.normalizeLists&&P4(e);let f=this.options.ruleFromNode&&this.options.ruleFromNode(e)||(a=this.parser.matchTag(e,this,r));e:if(f?f.ignore:j4.hasOwnProperty(o))this.findInside(e),this.ignoreFallback(e,t);else if(!f||f.skip||f.closeParent){f&&f.closeParent?this.open=Math.max(0,this.open-1):f&&f.skip.nodeType&&(e=f.skip);let h,p=this.needsBlock;if(a3.hasOwnProperty(o))l.content.length&&l.content[0].isInline&&this.open&&(this.open--,l=this.top),h=!0,l.type||(this.needsBlock=!0);else if(!e.firstChild){this.leafFallback(e,t);break e}let g=f&&f.skip?t:this.readStyles(e,t);g&&this.addAll(e,g),h&&this.sync(l),this.needsBlock=p}else{let h=this.readStyles(e,t);h&&this.addElementByRule(e,f,h,f.consuming===!1?a:void 0)}this.localPreserveWS=i}leafFallback(e,t){e.nodeName=="BR"&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(e.ownerDocument.createTextNode(`
`),t)}ignoreFallback(e,t){e.nodeName=="BR"&&(!this.top.type||!this.top.type.inlineContent)&&this.findPlace(this.parser.schema.text("-"),t,!0)}readStyles(e,t){let r=e.style;if(r&&r.length)for(let i=0;i<this.parser.matchedStyles.length;i++){let l=this.parser.matchedStyles[i],o=r.getPropertyValue(l);if(o)for(let a=void 0;;){let f=this.parser.matchStyle(l,o,this,a);if(!f)break;if(f.ignore)return null;if(f.clearMark?t=t.filter(h=>!f.clearMark(h)):t=t.concat(this.parser.schema.marks[f.mark].create(f.attrs)),f.consuming===!1)a=f;else break}}return t}addElementByRule(e,t,r,i){let l,o;if(t.node)if(o=this.parser.schema.nodes[t.node],o.isLeaf)this.insertNode(o.create(t.attrs),r,e.nodeName=="BR")||this.leafFallback(e,r);else{let f=this.enter(o,t.attrs||null,r,t.preserveWhitespace);f&&(l=!0,r=f)}else{let f=this.parser.schema.marks[t.mark];r=r.concat(f.create(t.attrs))}let a=this.top;if(o&&o.isLeaf)this.findInside(e);else if(i)this.addElement(e,r,i);else if(t.getContent)this.findInside(e),t.getContent(e,this.parser.schema).forEach(f=>this.insertNode(f,r,!1));else{let f=e;typeof t.contentElement=="string"?f=e.querySelector(t.contentElement):typeof t.contentElement=="function"?f=t.contentElement(e):t.contentElement&&(f=t.contentElement),this.findAround(e,f,!0),this.addAll(f,r),this.findAround(e,f,!1)}l&&this.sync(a)&&this.open--}addAll(e,t,r,i){let l=r||0;for(let o=r?e.childNodes[r]:e.firstChild,a=i==null?null:e.childNodes[i];o!=a;o=o.nextSibling,++l)this.findAtPoint(e,l),this.addDOM(o,t);this.findAtPoint(e,l)}findPlace(e,t,r){let i,l;for(let o=this.open,a=0;o>=0;o--){let f=this.nodes[o],h=f.findWrapping(e);if(h&&(!i||i.length>h.length+a)&&(i=h,l=f,!h.length))break;if(f.solid){if(r)break;a+=2}}if(!i)return null;this.sync(l);for(let o=0;o<i.length;o++)t=this.enterInner(i[o],null,t,!1);return t}insertNode(e,t,r){if(e.isInline&&this.needsBlock&&!this.top.type){let l=this.textblockFromContext();l&&(t=this.enterInner(l,null,t))}let i=this.findPlace(e,t,r);if(i){this.closeExtra();let l=this.top;l.match&&(l.match=l.match.matchType(e.type));let o=Me.none;for(let a of i.concat(e.marks))(l.type?l.type.allowsMarkType(a.type):Ey(a.type,e.type))&&(o=a.addToSet(o));return l.content.push(e.mark(o)),!0}return!1}enter(e,t,r,i){let l=this.findPlace(e.create(t),r,!1);return l&&(l=this.enterInner(e,t,r,!0,i)),l}enterInner(e,t,r,i=!1,l){this.closeExtra();let o=this.top;o.match=o.match&&o.match.matchType(e);let a=Sy(e,l,o.options);o.options&Xa&&o.content.length==0&&(a|=Xa);let f=Me.none;return r=r.filter(h=>(o.type?o.type.allowsMarkType(h.type):Ey(h.type,e))?(f=h.addToSet(f),!1):!0),this.nodes.push(new La(e,t,f,i,null,a)),this.open++,r}closeExtra(e=!1){let t=this.nodes.length-1;if(t>this.open){for(;t>this.open;t--)this.nodes[t-1].content.push(this.nodes[t].finish(e));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(!!(this.isOpen||this.options.topOpen))}sync(e){for(let t=this.open;t>=0;t--){if(this.nodes[t]==e)return this.open=t,!0;this.localPreserveWS&&(this.nodes[t].options|=Gs)}return!1}get currentPos(){this.closeExtra();let e=0;for(let t=this.open;t>=0;t--){let r=this.nodes[t].content;for(let i=r.length-1;i>=0;i--)e+=r[i].nodeSize;t&&e++}return e}findAtPoint(e,t){if(this.find)for(let r=0;r<this.find.length;r++)this.find[r].node==e&&this.find[r].offset==t&&(this.find[r].pos=this.currentPos)}findInside(e){if(this.find)for(let t=0;t<this.find.length;t++)this.find[t].pos==null&&e.nodeType==1&&e.contains(this.find[t].node)&&(this.find[t].pos=this.currentPos)}findAround(e,t,r){if(e!=t&&this.find)for(let i=0;i<this.find.length;i++)this.find[i].pos==null&&e.nodeType==1&&e.contains(this.find[i].node)&&t.compareDocumentPosition(this.find[i].node)&(r?2:4)&&(this.find[i].pos=this.currentPos)}findInText(e){if(this.find)for(let t=0;t<this.find.length;t++)this.find[t].node==e&&(this.find[t].pos=this.currentPos-(e.nodeValue.length-this.find[t].offset))}matchesContext(e){if(e.indexOf("|")>-1)return e.split(/\s*\|\s*/).some(this.matchesContext,this);let t=e.split("/"),r=this.options.context,i=!this.isOpen&&(!r||r.parent.type==this.nodes[0].type),l=-(r?r.depth+1:0)+(i?0:1),o=(a,f)=>{for(;a>=0;a--){let h=t[a];if(h==""){if(a==t.length-1||a==0)continue;for(;f>=l;f--)if(o(a-1,f))return!0;return!1}else{let p=f>0||f==0&&i?this.nodes[f].type:r&&f>=l?r.node(f-l).type:null;if(!p||p.name!=h&&!p.isInGroup(h))return!1;f--}}return!0};return o(t.length-1,this.open)}textblockFromContext(){let e=this.options.context;if(e)for(let t=e.depth;t>=0;t--){let r=e.node(t).contentMatchAt(e.indexAfter(t)).defaultType;if(r&&r.isTextblock&&r.defaultAttrs)return r}for(let t in this.parser.schema.nodes){let r=this.parser.schema.nodes[t];if(r.isTextblock&&r.defaultAttrs)return r}}};function P4(n){for(let e=n.firstChild,t=null;e;e=e.nextSibling){let r=e.nodeType==1?e.nodeName.toLowerCase():null;r&&c3.hasOwnProperty(r)&&t?(t.appendChild(e),e=t):r=="li"?t=e:r&&(t=null)}}function J4(n,e){return(n.matches||n.msMatchesSelector||n.webkitMatchesSelector||n.mozMatchesSelector).call(n,e)}function vy(n){let e={};for(let t in n)e[t]=n[t];return e}function Ey(n,e){let t=e.schema.nodes;for(let r in t){let i=t[r];if(!i.allowsMarkType(n))continue;let l=[],o=a=>{l.push(a);for(let f=0;f<a.edgeCount;f++){let{type:h,next:p}=a.edge(f);if(h==e||l.indexOf(p)<0&&o(p))return!0}};if(o(i.contentMatch))return!0}}let co=class f3{constructor(e,t){this.nodes=e,this.marks=t}serializeFragment(e,t={},r){r||(r=Oh(t).createDocumentFragment());let i=r,l=[];return e.forEach(o=>{if(l.length||o.marks.length){let a=0,f=0;for(;a<l.length&&f<o.marks.length;){let h=o.marks[f];if(!this.marks[h.type.name]){f++;continue}if(!h.eq(l[a][0])||h.type.spec.spanning===!1)break;a++,f++}for(;a<l.length;)i=l.pop()[1];for(;f<o.marks.length;){let h=o.marks[f++],p=this.serializeMark(h,o.isInline,t);p&&(l.push([h,i]),i.appendChild(p.dom),i=p.contentDOM||p.dom)}}i.appendChild(this.serializeNodeInner(o,t))}),r}serializeNodeInner(e,t){let{dom:r,contentDOM:i}=Qa(Oh(t),this.nodes[e.type.name](e),null,e.attrs);if(i){if(e.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");this.serializeFragment(e.content,t,i)}return r}serializeNode(e,t={}){let r=this.serializeNodeInner(e,t);for(let i=e.marks.length-1;i>=0;i--){let l=this.serializeMark(e.marks[i],e.isInline,t);l&&((l.contentDOM||l.dom).appendChild(r),r=l.dom)}return r}serializeMark(e,t,r={}){let i=this.marks[e.type.name];return i&&Qa(Oh(r),i(e,t),null,e.attrs)}static renderSpec(e,t,r=null,i){return Qa(e,t,r,i)}static fromSchema(e){return e.cached.domSerializer||(e.cached.domSerializer=new f3(this.nodesFromSchema(e),this.marksFromSchema(e)))}static nodesFromSchema(e){let t=My(e.nodes);return t.text||(t.text=r=>r.text),t}static marksFromSchema(e){return My(e.marks)}};function My(n){let e={};for(let t in n){let r=n[t].spec.toDOM;r&&(e[t]=r)}return e}function Oh(n){return n.document||window.document}const Ay=new WeakMap;function G4(n){let e=Ay.get(n);return e===void 0&&Ay.set(n,e=K4(n)),e}function K4(n){let e=null;function t(r){if(r&&typeof r=="object")if(Array.isArray(r))if(typeof r[0]=="string")e||(e=[]),e.push(r);else for(let i=0;i<r.length;i++)t(r[i]);else for(let i in r)t(r[i])}return t(n),e}function Qa(n,e,t,r){if(typeof e=="string")return{dom:n.createTextNode(e)};if(e.nodeType!=null)return{dom:e};if(e.dom&&e.dom.nodeType!=null)return e;let i=e[0],l;if(typeof i!="string")throw new RangeError("Invalid array passed to renderSpec");if(r&&(l=G4(r))&&l.indexOf(e)>-1)throw new RangeError("Using an array from an attribute object as a DOM spec. This may be an attempted cross site scripting attack.");let o=i.indexOf(" ");o>0&&(t=i.slice(0,o),i=i.slice(o+1));let a,f=t?n.createElementNS(t,i):n.createElement(i),h=e[1],p=1;if(h&&typeof h=="object"&&h.nodeType==null&&!Array.isArray(h)){p=2;for(let g in h)if(h[g]!=null){let y=g.indexOf(" ");y>0?f.setAttributeNS(g.slice(0,y),g.slice(y+1),h[g]):f.setAttribute(g,h[g])}}for(let g=p;g<e.length;g++){let y=e[g];if(y===0){if(g<e.length-1||g>p)throw new RangeError("Content hole must be the only child of its parent node");return{dom:f,contentDOM:f}}else{let{dom:x,contentDOM:k}=Qa(n,y,t,r);if(f.appendChild(x),k){if(a)throw new RangeError("Multiple content holes");a=k}}}return{dom:f,contentDOM:a}}const d3=65535,h3=Math.pow(2,16);function Y4(n,e){return n+e*h3}function Ty(n){return n&d3}function Z4(n){return(n-(n&d3))/h3}const p3=1,m3=2,Wa=4,g3=8;let Ap=class{constructor(e,t,r){this.pos=e,this.delInfo=t,this.recover=r}get deleted(){return(this.delInfo&g3)>0}get deletedBefore(){return(this.delInfo&(p3|Wa))>0}get deletedAfter(){return(this.delInfo&(m3|Wa))>0}get deletedAcross(){return(this.delInfo&Wa)>0}},tl=class eu{constructor(e,t=!1){if(this.ranges=e,this.inverted=t,!e.length&&eu.empty)return eu.empty}recover(e){let t=0,r=Ty(e);if(!this.inverted)for(let i=0;i<r;i++)t+=this.ranges[i*3+2]-this.ranges[i*3+1];return this.ranges[r*3]+t+Z4(e)}mapResult(e,t=1){return this._map(e,t,!1)}map(e,t=1){return this._map(e,t,!0)}_map(e,t,r){let i=0,l=this.inverted?2:1,o=this.inverted?1:2;for(let a=0;a<this.ranges.length;a+=3){let f=this.ranges[a]-(this.inverted?i:0);if(f>e)break;let h=this.ranges[a+l],p=this.ranges[a+o],g=f+h;if(e<=g){let y=h?e==f?-1:e==g?1:t:t,x=f+i+(y<0?0:p);if(r)return x;let k=e==(t<0?f:g)?null:Y4(a/3,e-f),C=e==f?m3:e==g?p3:Wa;return(t<0?e!=f:e!=g)&&(C|=g3),new Ap(x,C,k)}i+=p-h}return r?e+i:new Ap(e+i,0,null)}touches(e,t){let r=0,i=Ty(t),l=this.inverted?2:1,o=this.inverted?1:2;for(let a=0;a<this.ranges.length;a+=3){let f=this.ranges[a]-(this.inverted?r:0);if(f>e)break;let h=this.ranges[a+l],p=f+h;if(e<=p&&a==i*3)return!0;r+=this.ranges[a+o]-h}return!1}forEach(e){let t=this.inverted?2:1,r=this.inverted?1:2;for(let i=0,l=0;i<this.ranges.length;i+=3){let o=this.ranges[i],a=o-(this.inverted?l:0),f=o+(this.inverted?0:l),h=this.ranges[i+t],p=this.ranges[i+r];e(a,a+h,f,f+p),l+=p-h}}invert(){return new eu(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(e){return e==0?eu.empty:new eu(e<0?[0,-e,0]:[0,0,e])}};tl.empty=new tl([]);class Ks{constructor(e,t,r=0,i=e?e.length:0){this.mirror=t,this.from=r,this.to=i,this._maps=e||[],this.ownData=!(e||t)}get maps(){return this._maps}slice(e=0,t=this.maps.length){return new Ks(this._maps,this.mirror,e,t)}appendMap(e,t){this.ownData||(this._maps=this._maps.slice(),this.mirror=this.mirror&&this.mirror.slice(),this.ownData=!0),this.to=this._maps.push(e),t!=null&&this.setMirror(this._maps.length-1,t)}appendMapping(e){for(let t=0,r=this._maps.length;t<e._maps.length;t++){let i=e.getMirror(t);this.appendMap(e._maps[t],i!=null&&i<t?r+i:void 0)}}getMirror(e){if(this.mirror){for(let t=0;t<this.mirror.length;t++)if(this.mirror[t]==e)return this.mirror[t+(t%2?-1:1)]}}setMirror(e,t){this.mirror||(this.mirror=[]),this.mirror.push(e,t)}appendMappingInverted(e){for(let t=e.maps.length-1,r=this._maps.length+e._maps.length;t>=0;t--){let i=e.getMirror(t);this.appendMap(e._maps[t].invert(),i!=null&&i>t?r-i-1:void 0)}}invert(){let e=new Ks;return e.appendMappingInverted(this),e}map(e,t=1){if(this.mirror)return this._map(e,t,!0);for(let r=this.from;r<this.to;r++)e=this._maps[r].map(e,t);return e}mapResult(e,t=1){return this._map(e,t,!1)}_map(e,t,r){let i=0;for(let l=this.from;l<this.to;l++){let o=this._maps[l],a=o.mapResult(e,t);if(a.recover!=null){let f=this.getMirror(l);if(f!=null&&f>l&&f<this.to){l=f,e=this._maps[f].recover(a.recover);continue}}i|=a.delInfo,e=a.pos}return r?e:new Ap(e,i,null)}}const _h=Object.create(null);let Et=class{getMap(){return tl.empty}merge(e){return null}static fromJSON(e,t){if(!t||!t.stepType)throw new RangeError("Invalid input for Step.fromJSON");let r=_h[t.stepType];if(!r)throw new RangeError(`No step type ${t.stepType} defined`);return r.fromJSON(e,t)}static jsonID(e,t){if(e in _h)throw new RangeError("Duplicate use of step JSON ID "+e);return _h[e]=t,t.prototype.jsonID=e,t}},Ot=class As{constructor(e,t){this.doc=e,this.failed=t}static ok(e){return new As(e,null)}static fail(e){return new As(null,e)}static fromReplace(e,t,r,i){try{return As.ok(e.replace(t,r,i))}catch(l){if(l instanceof cc)return As.fail(l.message);throw l}}};function d0(n,e,t){let r=[];for(let i=0;i<n.childCount;i++){let l=n.child(i);l.content.size&&(l=l.copy(d0(l.content,e,l))),l.isInline&&(l=e(l,t,i)),r.push(l)}return j.fromArray(r)}let h0=class Ts extends Et{constructor(e,t,r){super(),this.from=e,this.to=t,this.mark=r}apply(e){let t=e.slice(this.from,this.to),r=e.resolve(this.from),i=r.node(r.sharedDepth(this.to)),l=new Y(d0(t.content,(o,a)=>!o.isAtom||!a.type.allowsMarkType(this.mark.type)?o:o.mark(this.mark.addToSet(o.marks)),i),t.openStart,t.openEnd);return Ot.fromReplace(e,this.from,this.to,l)}invert(){return new fo(this.from,this.to,this.mark)}map(e){let t=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return t.deleted&&r.deleted||t.pos>=r.pos?null:new Ts(t.pos,r.pos,this.mark)}merge(e){return e instanceof Ts&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new Ts(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,t){if(typeof t.from!="number"||typeof t.to!="number")throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new Ts(t.from,t.to,e.markFromJSON(t.mark))}};Et.jsonID("addMark",h0);let fo=class Ds extends Et{constructor(e,t,r){super(),this.from=e,this.to=t,this.mark=r}apply(e){let t=e.slice(this.from,this.to),r=new Y(d0(t.content,i=>i.mark(this.mark.removeFromSet(i.marks)),e),t.openStart,t.openEnd);return Ot.fromReplace(e,this.from,this.to,r)}invert(){return new h0(this.from,this.to,this.mark)}map(e){let t=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return t.deleted&&r.deleted||t.pos>=r.pos?null:new Ds(t.pos,r.pos,this.mark)}merge(e){return e instanceof Ds&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new Ds(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,t){if(typeof t.from!="number"||typeof t.to!="number")throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new Ds(t.from,t.to,e.markFromJSON(t.mark))}};Et.jsonID("removeMark",fo);let p0=class ws extends Et{constructor(e,t){super(),this.pos=e,this.mark=t}apply(e){let t=e.nodeAt(this.pos);if(!t)return Ot.fail("No node at mark step's position");let r=t.type.create(t.attrs,null,this.mark.addToSet(t.marks));return Ot.fromReplace(e,this.pos,this.pos+1,new Y(j.from(r),0,t.isLeaf?0:1))}invert(e){let t=e.nodeAt(this.pos);if(t){let r=this.mark.addToSet(t.marks);if(r.length==t.marks.length){for(let i=0;i<t.marks.length;i++)if(!t.marks[i].isInSet(r))return new ws(this.pos,t.marks[i]);return new ws(this.pos,this.mark)}}return new hc(this.pos,this.mark)}map(e){let t=e.mapResult(this.pos,1);return t.deletedAfter?null:new ws(t.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,t){if(typeof t.pos!="number")throw new RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new ws(t.pos,e.markFromJSON(t.mark))}};Et.jsonID("addNodeMark",p0);let hc=class Tp extends Et{constructor(e,t){super(),this.pos=e,this.mark=t}apply(e){let t=e.nodeAt(this.pos);if(!t)return Ot.fail("No node at mark step's position");let r=t.type.create(t.attrs,null,this.mark.removeFromSet(t.marks));return Ot.fromReplace(e,this.pos,this.pos+1,new Y(j.from(r),0,t.isLeaf?0:1))}invert(e){let t=e.nodeAt(this.pos);return!t||!this.mark.isInSet(t.marks)?this:new p0(this.pos,this.mark)}map(e){let t=e.mapResult(this.pos,1);return t.deletedAfter?null:new Tp(t.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,t){if(typeof t.pos!="number")throw new RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new Tp(t.pos,e.markFromJSON(t.mark))}};Et.jsonID("removeNodeMark",hc);let wn=class Ni extends Et{constructor(e,t,r,i=!1){super(),this.from=e,this.to=t,this.slice=r,this.structure=i}apply(e){return this.structure&&Dp(e,this.from,this.to)?Ot.fail("Structure replace would overwrite content"):Ot.fromReplace(e,this.from,this.to,this.slice)}getMap(){return new tl([this.from,this.to-this.from,this.slice.size])}invert(e){return new Ni(this.from,this.from+this.slice.size,e.slice(this.from,this.to))}map(e){let t=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return t.deletedAcross&&r.deletedAcross?null:new Ni(t.pos,Math.max(t.pos,r.pos),this.slice,this.structure)}merge(e){if(!(e instanceof Ni)||e.structure||this.structure)return null;if(this.from+this.slice.size==e.from&&!this.slice.openEnd&&!e.slice.openStart){let t=this.slice.size+e.slice.size==0?Y.empty:new Y(this.slice.content.append(e.slice.content),this.slice.openStart,e.slice.openEnd);return new Ni(this.from,this.to+(e.to-e.from),t,this.structure)}else if(e.to==this.from&&!this.slice.openStart&&!e.slice.openEnd){let t=this.slice.size+e.slice.size==0?Y.empty:new Y(e.slice.content.append(this.slice.content),e.slice.openStart,this.slice.openEnd);return new Ni(e.from,this.to,t,this.structure)}else return null}toJSON(){let e={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,t){if(typeof t.from!="number"||typeof t.to!="number")throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new Ni(t.from,t.to,Y.fromJSON(e,t.slice),!!t.structure)}};Et.jsonID("replace",wn);let jt=class ec extends Et{constructor(e,t,r,i,l,o,a=!1){super(),this.from=e,this.to=t,this.gapFrom=r,this.gapTo=i,this.slice=l,this.insert=o,this.structure=a}apply(e){if(this.structure&&(Dp(e,this.from,this.gapFrom)||Dp(e,this.gapTo,this.to)))return Ot.fail("Structure gap-replace would overwrite content");let t=e.slice(this.gapFrom,this.gapTo);if(t.openStart||t.openEnd)return Ot.fail("Gap is not a flat range");let r=this.slice.insertAt(this.insert,t.content);return r?Ot.fromReplace(e,this.from,this.to,r):Ot.fail("Content does not fit in gap")}getMap(){return new tl([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(e){let t=this.gapTo-this.gapFrom;return new ec(this.from,this.from+this.slice.size+t,this.from+this.insert,this.from+this.insert+t,e.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(e){let t=e.mapResult(this.from,1),r=e.mapResult(this.to,-1),i=this.from==this.gapFrom?t.pos:e.map(this.gapFrom,-1),l=this.to==this.gapTo?r.pos:e.map(this.gapTo,1);return t.deletedAcross&&r.deletedAcross||i<t.pos||l>r.pos?null:new ec(t.pos,r.pos,i,l,this.slice,this.insert,this.structure)}toJSON(){let e={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,t){if(typeof t.from!="number"||typeof t.to!="number"||typeof t.gapFrom!="number"||typeof t.gapTo!="number"||typeof t.insert!="number")throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new ec(t.from,t.to,t.gapFrom,t.gapTo,Y.fromJSON(e,t.slice),t.insert,!!t.structure)}};Et.jsonID("replaceAround",jt);function Dp(n,e,t){let r=n.resolve(e),i=t-e,l=r.depth;for(;i>0&&l>0&&r.indexAfter(l)==r.node(l).childCount;)l--,i--;if(i>0){let o=r.node(l).maybeChild(r.indexAfter(l));for(;i>0;){if(!o||o.isLeaf)return!0;o=o.firstChild,i--}}return!1}function X4(n,e,t,r){let i=[],l=[],o,a;n.doc.nodesBetween(e,t,(f,h,p)=>{if(!f.isInline)return;let g=f.marks;if(!r.isInSet(g)&&p.type.allowsMarkType(r.type)){let y=Math.max(h,e),x=Math.min(h+f.nodeSize,t),k=r.addToSet(g);for(let C=0;C<g.length;C++)g[C].isInSet(k)||(o&&o.to==y&&o.mark.eq(g[C])?o.to=x:i.push(o=new fo(y,x,g[C])));a&&a.to==y?a.to=x:l.push(a=new h0(y,x,r))}}),i.forEach(f=>n.step(f)),l.forEach(f=>n.step(f))}function Q4(n,e,t,r){let i=[],l=0;n.doc.nodesBetween(e,t,(o,a)=>{if(!o.isInline)return;l++;let f=null;if(r instanceof s3){let h=o.marks,p;for(;p=r.isInSet(h);)(f||(f=[])).push(p),h=p.removeFromSet(h)}else r?r.isInSet(o.marks)&&(f=[r]):f=o.marks;if(f&&f.length){let h=Math.min(a+o.nodeSize,t);for(let p=0;p<f.length;p++){let g=f[p],y;for(let x=0;x<i.length;x++){let k=i[x];k.step==l-1&&g.eq(i[x].style)&&(y=k)}y?(y.to=h,y.step=l):i.push({style:g,from:Math.max(a,e),to:h,step:l})}}}),i.forEach(o=>n.step(new fo(o.from,o.to,o.style)))}function m0(n,e,t,r=t.contentMatch,i=!0){let l=n.doc.nodeAt(e),o=[],a=e+1;for(let f=0;f<l.childCount;f++){let h=l.child(f),p=a+h.nodeSize,g=r.matchType(h.type);if(!g)o.push(new wn(a,p,Y.empty));else{r=g;for(let y=0;y<h.marks.length;y++)t.allowsMarkType(h.marks[y].type)||n.step(new fo(a,p,h.marks[y]));if(i&&h.isText&&t.whitespace!="pre"){let y,x=/\r?\n|\r/g,k;for(;y=x.exec(h.text);)k||(k=new Y(j.from(t.schema.text(" ",t.allowedMarks(h.marks))),0,0)),o.push(new wn(a+y.index,a+y.index+y[0].length,k))}}a=p}if(!r.validEnd){let f=r.fillBefore(j.empty,!0);n.replace(a,a,new Y(f,0,0))}for(let f=o.length-1;f>=0;f--)n.step(o[f])}function W4(n,e,t){return(e==0||n.canReplace(e,n.childCount))&&(t==n.childCount||n.canReplace(0,t))}function Su(n){let t=n.parent.content.cutByIndex(n.startIndex,n.endIndex);for(let r=n.depth;;--r){let i=n.$from.node(r),l=n.$from.index(r),o=n.$to.indexAfter(r);if(r<n.depth&&i.canReplace(l,o,t))return r;if(r==0||i.type.spec.isolating||!W4(i,l,o))break}return null}function eE(n,e,t){let{$from:r,$to:i,depth:l}=e,o=r.before(l+1),a=i.after(l+1),f=o,h=a,p=j.empty,g=0;for(let k=l,C=!1;k>t;k--)C||r.index(k)>0?(C=!0,p=j.from(r.node(k).copy(p)),g++):f--;let y=j.empty,x=0;for(let k=l,C=!1;k>t;k--)C||i.after(k+1)<i.end(k)?(C=!0,y=j.from(i.node(k).copy(y)),x++):h++;n.step(new jt(f,h,o,a,new Y(p.append(y),g,x),p.size-g,!0))}function g0(n,e,t=null,r=n){let i=tE(n,e),l=i&&nE(r,e);return l?i.map(Dy).concat({type:e,attrs:t}).concat(l.map(Dy)):null}function Dy(n){return{type:n,attrs:null}}function tE(n,e){let{parent:t,startIndex:r,endIndex:i}=n,l=t.contentMatchAt(r).findWrapping(e);if(!l)return null;let o=l.length?l[0]:e;return t.canReplaceWith(r,i,o)?l:null}function nE(n,e){let{parent:t,startIndex:r,endIndex:i}=n,l=t.child(r),o=e.contentMatch.findWrapping(l.type);if(!o)return null;let f=(o.length?o[o.length-1]:e).contentMatch;for(let h=r;f&&h<i;h++)f=f.matchType(t.child(h).type);return!f||!f.validEnd?null:o}function rE(n,e,t){let r=j.empty;for(let o=t.length-1;o>=0;o--){if(r.size){let a=t[o].type.contentMatch.matchFragment(r);if(!a||!a.validEnd)throw new RangeError("Wrapper type given to Transform.wrap does not form valid content of its parent wrapper")}r=j.from(t[o].type.create(t[o].attrs,r))}let i=e.start,l=e.end;n.step(new jt(i,l,i,l,new Y(r,0,0),t.length,!0))}function iE(n,e,t,r,i){if(!r.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");let l=n.steps.length;n.doc.nodesBetween(e,t,(o,a)=>{let f=typeof i=="function"?i(o):i;if(o.isTextblock&&!o.hasMarkup(r,f)&&lE(n.doc,n.mapping.slice(l).map(a),r)){let h=null;if(r.schema.linebreakReplacement){let x=r.whitespace=="pre",k=!!r.contentMatch.matchType(r.schema.linebreakReplacement);x&&!k?h=!1:!x&&k&&(h=!0)}h===!1&&y3(n,o,a,l),m0(n,n.mapping.slice(l).map(a,1),r,void 0,h===null);let p=n.mapping.slice(l),g=p.map(a,1),y=p.map(a+o.nodeSize,1);return n.step(new jt(g,y,g+1,y-1,new Y(j.from(r.create(f,null,o.marks)),0,0),1,!0)),h===!0&&b3(n,o,a,l),!1}})}function b3(n,e,t,r){e.forEach((i,l)=>{if(i.isText){let o,a=/\r?\n|\r/g;for(;o=a.exec(i.text);){let f=n.mapping.slice(r).map(t+1+l+o.index);n.replaceWith(f,f+1,e.type.schema.linebreakReplacement.create())}}})}function y3(n,e,t,r){e.forEach((i,l)=>{if(i.type==i.type.schema.linebreakReplacement){let o=n.mapping.slice(r).map(t+1+l);n.replaceWith(o,o+1,e.type.schema.text(`
`))}})}function lE(n,e,t){let r=n.resolve(e),i=r.index();return r.parent.canReplaceWith(i,i+1,t)}function uE(n,e,t,r,i){let l=n.doc.nodeAt(e);if(!l)throw new RangeError("No node at given position");t||(t=l.type);let o=t.create(r,null,i||l.marks);if(l.isLeaf)return n.replaceWith(e,e+l.nodeSize,o);if(!t.validContent(l.content))throw new RangeError("Invalid content for node type "+t.name);n.step(new jt(e,e+l.nodeSize,e+1,e+l.nodeSize-1,new Y(j.from(o),0,0),1,!0))}function gr(n,e,t=1,r){let i=n.resolve(e),l=i.depth-t,o=r&&r[r.length-1]||i.parent;if(l<0||i.parent.type.spec.isolating||!i.parent.canReplace(i.index(),i.parent.childCount)||!o.type.validContent(i.parent.content.cutByIndex(i.index(),i.parent.childCount)))return!1;for(let h=i.depth-1,p=t-2;h>l;h--,p--){let g=i.node(h),y=i.index(h);if(g.type.spec.isolating)return!1;let x=g.content.cutByIndex(y,g.childCount),k=r&&r[p+1];k&&(x=x.replaceChild(0,k.type.create(k.attrs)));let C=r&&r[p]||g;if(!g.canReplace(y+1,g.childCount)||!C.type.validContent(x))return!1}let a=i.indexAfter(l),f=r&&r[0];return i.node(l).canReplaceWith(a,a,f?f.type:i.node(l+1).type)}function sE(n,e,t=1,r){let i=n.doc.resolve(e),l=j.empty,o=j.empty;for(let a=i.depth,f=i.depth-t,h=t-1;a>f;a--,h--){l=j.from(i.node(a).copy(l));let p=r&&r[h];o=j.from(p?p.type.create(p.attrs,o):i.node(a).copy(o))}n.step(new wn(e,e,new Y(l.append(o),t,t),!0))}function si(n,e){let t=n.resolve(e),r=t.index();return x3(t.nodeBefore,t.nodeAfter)&&t.parent.canReplace(r,r+1)}function oE(n,e){e.content.size||n.type.compatibleContent(e.type);let t=n.contentMatchAt(n.childCount),{linebreakReplacement:r}=n.type.schema;for(let i=0;i<e.childCount;i++){let l=e.child(i),o=l.type==r?n.type.schema.nodes.text:l.type;if(t=t.matchType(o),!t||!n.type.allowsMarks(l.marks))return!1}return t.validEnd}function x3(n,e){return!!(n&&e&&!n.isLeaf&&oE(n,e))}function qc(n,e,t=-1){let r=n.resolve(e);for(let i=r.depth;;i--){let l,o,a=r.index(i);if(i==r.depth?(l=r.nodeBefore,o=r.nodeAfter):t>0?(l=r.node(i+1),a++,o=r.node(i).maybeChild(a)):(l=r.node(i).maybeChild(a-1),o=r.node(i+1)),l&&!l.isTextblock&&x3(l,o)&&r.node(i).canReplace(a,a+1))return e;if(i==0)break;e=t<0?r.before(i):r.after(i)}}function aE(n,e,t){let r=null,{linebreakReplacement:i}=n.doc.type.schema,l=n.doc.resolve(e-t),o=l.node().type;if(i&&o.inlineContent){let p=o.whitespace=="pre",g=!!o.contentMatch.matchType(i);p&&!g?r=!1:!p&&g&&(r=!0)}let a=n.steps.length;if(r===!1){let p=n.doc.resolve(e+t);y3(n,p.node(),p.before(),a)}o.inlineContent&&m0(n,e+t-1,o,l.node().contentMatchAt(l.index()),r==null);let f=n.mapping.slice(a),h=f.map(e-t);if(n.step(new wn(h,f.map(e+t,-1),Y.empty,!0)),r===!0){let p=n.doc.resolve(h);b3(n,p.node(),p.before(),n.steps.length)}return n}function cE(n,e,t){let r=n.resolve(e);if(r.parent.canReplaceWith(r.index(),r.index(),t))return e;if(r.parentOffset==0)for(let i=r.depth-1;i>=0;i--){let l=r.index(i);if(r.node(i).canReplaceWith(l,l,t))return r.before(i+1);if(l>0)return null}if(r.parentOffset==r.parent.content.size)for(let i=r.depth-1;i>=0;i--){let l=r.indexAfter(i);if(r.node(i).canReplaceWith(l,l,t))return r.after(i+1);if(l<r.node(i).childCount)return null}return null}function k3(n,e,t){let r=n.resolve(e);if(!t.content.size)return e;let i=t.content;for(let l=0;l<t.openStart;l++)i=i.firstChild.content;for(let l=1;l<=(t.openStart==0&&t.size?2:1);l++)for(let o=r.depth;o>=0;o--){let a=o==r.depth?0:r.pos<=(r.start(o+1)+r.end(o+1))/2?-1:1,f=r.index(o)+(a>0?1:0),h=r.node(o),p=!1;if(l==1)p=h.canReplace(f,f,i);else{let g=h.contentMatchAt(f).findWrapping(i.firstChild.type);p=g&&h.canReplaceWith(f,f,g[0])}if(p)return a==0?r.pos:a<0?r.before(o+1):r.after(o+1)}return null}function Hc(n,e,t=e,r=Y.empty){if(e==t&&!r.size)return null;let i=n.resolve(e),l=n.resolve(t);return S3(i,l,r)?new wn(e,t,r):new fE(i,l,r).fit()}function S3(n,e,t){return!t.openStart&&!t.openEnd&&n.start()==e.start()&&n.parent.canReplace(n.index(),e.index(),t.content)}let fE=class{constructor(e,t,r){this.$from=e,this.$to=t,this.unplaced=r,this.frontier=[],this.placed=j.empty;for(let i=0;i<=e.depth;i++){let l=e.node(i);this.frontier.push({type:l.type,match:l.contentMatchAt(e.indexAfter(i))})}for(let i=e.depth;i>0;i--)this.placed=j.from(e.node(i).copy(this.placed))}get depth(){return this.frontier.length-1}fit(){for(;this.unplaced.size;){let h=this.findFittable();h?this.placeNodes(h):this.openMore()||this.dropNode()}let e=this.mustMoveInline(),t=this.placed.size-this.depth-this.$from.depth,r=this.$from,i=this.close(e<0?this.$to:r.doc.resolve(e));if(!i)return null;let l=this.placed,o=r.depth,a=i.depth;for(;o&&a&&l.childCount==1;)l=l.firstChild.content,o--,a--;let f=new Y(l,o,a);return e>-1?new jt(r.pos,e,this.$to.pos,this.$to.end(),f,t):f.size||r.pos!=this.$to.pos?new wn(r.pos,i.pos,f):null}findFittable(){let e=this.unplaced.openStart;for(let t=this.unplaced.content,r=0,i=this.unplaced.openEnd;r<e;r++){let l=t.firstChild;if(t.childCount>1&&(i=0),l.type.spec.isolating&&i<=r){e=r;break}t=l.content}for(let t=1;t<=2;t++)for(let r=t==1?e:this.unplaced.openStart;r>=0;r--){let i,l=null;r?(l=Nh(this.unplaced.content,r-1).firstChild,i=l.content):i=this.unplaced.content;let o=i.firstChild;for(let a=this.depth;a>=0;a--){let{type:f,match:h}=this.frontier[a],p,g=null;if(t==1&&(o?h.matchType(o.type)||(g=h.fillBefore(j.from(o),!1)):l&&f.compatibleContent(l.type)))return{sliceDepth:r,frontierDepth:a,parent:l,inject:g};if(t==2&&o&&(p=h.findWrapping(o.type)))return{sliceDepth:r,frontierDepth:a,parent:l,wrap:p};if(l&&h.matchType(l.type))break}}}openMore(){let{content:e,openStart:t,openEnd:r}=this.unplaced,i=Nh(e,t);return!i.childCount||i.firstChild.isLeaf?!1:(this.unplaced=new Y(e,t+1,Math.max(r,i.size+t>=e.size-r?t+1:0)),!0)}dropNode(){let{content:e,openStart:t,openEnd:r}=this.unplaced,i=Nh(e,t);if(i.childCount<=1&&t>0){let l=e.size-t<=t+i.size;this.unplaced=new Y(Os(e,t-1,1),t-1,l?t-1:r)}else this.unplaced=new Y(Os(e,t,1),t,r)}placeNodes({sliceDepth:e,frontierDepth:t,parent:r,inject:i,wrap:l}){for(;this.depth>t;)this.closeFrontierNode();if(l)for(let C=0;C<l.length;C++)this.openFrontierNode(l[C]);let o=this.unplaced,a=r?r.content:o.content,f=o.openStart-e,h=0,p=[],{match:g,type:y}=this.frontier[t];if(i){for(let C=0;C<i.childCount;C++)p.push(i.child(C));g=g.matchFragment(i)}let x=a.size+e-(o.content.size-o.openEnd);for(;h<a.childCount;){let C=a.child(h),E=g.matchType(C.type);if(!E)break;h++,(h>1||f==0||C.content.size)&&(g=E,p.push(C3(C.mark(y.allowedMarks(C.marks)),h==1?f:0,h==a.childCount?x:-1)))}let k=h==a.childCount;k||(x=-1),this.placed=_s(this.placed,t,j.from(p)),this.frontier[t].match=g,k&&x<0&&r&&r.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(let C=0,E=a;C<x;C++){let A=E.lastChild;this.frontier.push({type:A.type,match:A.contentMatchAt(A.childCount)}),E=A.content}this.unplaced=k?e==0?Y.empty:new Y(Os(o.content,e-1,1),e-1,x<0?o.openEnd:e-1):new Y(Os(o.content,e,h),o.openStart,o.openEnd)}mustMoveInline(){if(!this.$to.parent.isTextblock)return-1;let e=this.frontier[this.depth],t;if(!e.type.isTextblock||!Rh(this.$to,this.$to.depth,e.type,e.match,!1)||this.$to.depth==this.depth&&(t=this.findCloseLevel(this.$to))&&t.depth==this.depth)return-1;let{depth:r}=this.$to,i=this.$to.after(r);for(;r>1&&i==this.$to.end(--r);)++i;return i}findCloseLevel(e){e:for(let t=Math.min(this.depth,e.depth);t>=0;t--){let{match:r,type:i}=this.frontier[t],l=t<e.depth&&e.end(t+1)==e.pos+(e.depth-(t+1)),o=Rh(e,t,i,r,l);if(o){for(let a=t-1;a>=0;a--){let{match:f,type:h}=this.frontier[a],p=Rh(e,a,h,f,!0);if(!p||p.childCount)continue e}return{depth:t,fit:o,move:l?e.doc.resolve(e.after(t+1)):e}}}}close(e){let t=this.findCloseLevel(e);if(!t)return null;for(;this.depth>t.depth;)this.closeFrontierNode();t.fit.childCount&&(this.placed=_s(this.placed,t.depth,t.fit)),e=t.move;for(let r=t.depth+1;r<=e.depth;r++){let i=e.node(r),l=i.type.contentMatch.fillBefore(i.content,!0,e.index(r));this.openFrontierNode(i.type,i.attrs,l)}return e}openFrontierNode(e,t=null,r){let i=this.frontier[this.depth];i.match=i.match.matchType(e),this.placed=_s(this.placed,this.depth,j.from(e.create(t,r))),this.frontier.push({type:e,match:e.contentMatch})}closeFrontierNode(){let t=this.frontier.pop().match.fillBefore(j.empty,!0);t.childCount&&(this.placed=_s(this.placed,this.frontier.length,t))}};function Os(n,e,t){return e==0?n.cutByIndex(t,n.childCount):n.replaceChild(0,n.firstChild.copy(Os(n.firstChild.content,e-1,t)))}function _s(n,e,t){return e==0?n.append(t):n.replaceChild(n.childCount-1,n.lastChild.copy(_s(n.lastChild.content,e-1,t)))}function Nh(n,e){for(let t=0;t<e;t++)n=n.firstChild.content;return n}function C3(n,e,t){if(e<=0)return n;let r=n.content;return e>1&&(r=r.replaceChild(0,C3(r.firstChild,e-1,r.childCount==1?t-1:0))),e>0&&(r=n.type.contentMatch.fillBefore(r).append(r),t<=0&&(r=r.append(n.type.contentMatch.matchFragment(r).fillBefore(j.empty,!0)))),n.copy(r)}function Rh(n,e,t,r,i){let l=n.node(e),o=i?n.indexAfter(e):n.index(e);if(o==l.childCount&&!t.compatibleContent(l.type))return null;let a=r.fillBefore(l.content,!0,o);return a&&!dE(t,l.content,o)?a:null}function dE(n,e,t){for(let r=t;r<e.childCount;r++)if(!n.allowsMarks(e.child(r).marks))return!0;return!1}function hE(n){return n.spec.defining||n.spec.definingForContent}function pE(n,e,t,r){if(!r.size)return n.deleteRange(e,t);let i=n.doc.resolve(e),l=n.doc.resolve(t);if(S3(i,l,r))return n.step(new wn(e,t,r));let o=E3(i,n.doc.resolve(t));o[o.length-1]==0&&o.pop();let a=-(i.depth+1);o.unshift(a);for(let y=i.depth,x=i.pos-1;y>0;y--,x--){let k=i.node(y).type.spec;if(k.defining||k.definingAsContext||k.isolating)break;o.indexOf(y)>-1?a=y:i.before(y)==x&&o.splice(1,0,-y)}let f=o.indexOf(a),h=[],p=r.openStart;for(let y=r.content,x=0;;x++){let k=y.firstChild;if(h.push(k),x==r.openStart)break;y=k.content}for(let y=p-1;y>=0;y--){let x=h[y],k=hE(x.type);if(k&&!x.sameMarkup(i.node(Math.abs(a)-1)))p=y;else if(k||!x.type.isTextblock)break}for(let y=r.openStart;y>=0;y--){let x=(y+p+1)%(r.openStart+1),k=h[x];if(k)for(let C=0;C<o.length;C++){let E=o[(C+f)%o.length],A=!0;E<0&&(A=!1,E=-E);let N=i.node(E-1),B=i.index(E-1);if(N.canReplaceWith(B,B,k.type,k.marks))return n.replace(i.before(E),A?l.after(E):t,new Y(v3(r.content,0,r.openStart,x),x,r.openEnd))}}let g=n.steps.length;for(let y=o.length-1;y>=0&&(n.replace(e,t,r),!(n.steps.length>g));y--){let x=o[y];x<0||(e=i.before(x),t=l.after(x))}}function v3(n,e,t,r,i){if(e<t){let l=n.firstChild;n=n.replaceChild(0,l.copy(v3(l.content,e+1,t,r,l)))}if(e>r){let l=i.contentMatchAt(0),o=l.fillBefore(n).append(n);n=o.append(l.matchFragment(o).fillBefore(j.empty,!0))}return n}function mE(n,e,t,r){if(!r.isInline&&e==t&&n.doc.resolve(e).parent.content.size){let i=cE(n.doc,e,r.type);i!=null&&(e=t=i)}n.replaceRange(e,t,new Y(j.from(r),0,0))}function gE(n,e,t){let r=n.doc.resolve(e),i=n.doc.resolve(t),l=E3(r,i);for(let o=0;o<l.length;o++){let a=l[o],f=o==l.length-1;if(f&&a==0||r.node(a).type.contentMatch.validEnd)return n.delete(r.start(a),i.end(a));if(a>0&&(f||r.node(a-1).canReplace(r.index(a-1),i.indexAfter(a-1))))return n.delete(r.before(a),i.after(a))}for(let o=1;o<=r.depth&&o<=i.depth;o++)if(e-r.start(o)==r.depth-o&&t>r.end(o)&&i.end(o)-t!=i.depth-o&&r.start(o-1)==i.start(o-1)&&r.node(o-1).canReplace(r.index(o-1),i.index(o-1)))return n.delete(r.before(o),t);n.delete(e,t)}function E3(n,e){let t=[],r=Math.min(n.depth,e.depth);for(let i=r;i>=0;i--){let l=n.start(i);if(l<n.pos-(n.depth-i)||e.end(i)>e.pos+(e.depth-i)||n.node(i).type.spec.isolating||e.node(i).type.spec.isolating)break;(l==e.start(i)||i==n.depth&&i==e.depth&&n.parent.inlineContent&&e.parent.inlineContent&&i&&e.start(i-1)==l-1)&&t.push(i)}return t}let M3=class tc extends Et{constructor(e,t,r){super(),this.pos=e,this.attr=t,this.value=r}apply(e){let t=e.nodeAt(this.pos);if(!t)return Ot.fail("No node at attribute step's position");let r=Object.create(null);for(let l in t.attrs)r[l]=t.attrs[l];r[this.attr]=this.value;let i=t.type.create(r,null,t.marks);return Ot.fromReplace(e,this.pos,this.pos+1,new Y(j.from(i),0,t.isLeaf?0:1))}getMap(){return tl.empty}invert(e){return new tc(this.pos,this.attr,e.nodeAt(this.pos).attrs[this.attr])}map(e){let t=e.mapResult(this.pos,1);return t.deletedAfter?null:new tc(t.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(e,t){if(typeof t.pos!="number"||typeof t.attr!="string")throw new RangeError("Invalid input for AttrStep.fromJSON");return new tc(t.pos,t.attr,t.value)}};Et.jsonID("attr",M3);let A3=class wp extends Et{constructor(e,t){super(),this.attr=e,this.value=t}apply(e){let t=Object.create(null);for(let i in e.attrs)t[i]=e.attrs[i];t[this.attr]=this.value;let r=e.type.create(t,e.content,e.marks);return Ot.ok(r)}getMap(){return tl.empty}invert(e){return new wp(this.attr,e.attrs[this.attr])}map(e){return this}toJSON(){return{stepType:"docAttr",attr:this.attr,value:this.value}}static fromJSON(e,t){if(typeof t.attr!="string")throw new RangeError("Invalid input for DocAttrStep.fromJSON");return new wp(t.attr,t.value)}};Et.jsonID("docAttr",A3);let du=class extends Error{};du=function n(e){let t=Error.call(this,e);return t.__proto__=n.prototype,t};du.prototype=Object.create(Error.prototype);du.prototype.constructor=du;du.prototype.name="TransformError";class bE{constructor(e){this.doc=e,this.steps=[],this.docs=[],this.mapping=new Ks}get before(){return this.docs.length?this.docs[0]:this.doc}step(e){let t=this.maybeStep(e);if(t.failed)throw new du(t.failed);return this}maybeStep(e){let t=e.apply(this.doc);return t.failed||this.addStep(e,t.doc),t}get docChanged(){return this.steps.length>0}addStep(e,t){this.docs.push(this.doc),this.steps.push(e),this.mapping.appendMap(e.getMap()),this.doc=t}replace(e,t=e,r=Y.empty){let i=Hc(this.doc,e,t,r);return i&&this.step(i),this}replaceWith(e,t,r){return this.replace(e,t,new Y(j.from(r),0,0))}delete(e,t){return this.replace(e,t,Y.empty)}insert(e,t){return this.replaceWith(e,e,t)}replaceRange(e,t,r){return pE(this,e,t,r),this}replaceRangeWith(e,t,r){return mE(this,e,t,r),this}deleteRange(e,t){return gE(this,e,t),this}lift(e,t){return eE(this,e,t),this}join(e,t=1){return aE(this,e,t),this}wrap(e,t){return rE(this,e,t),this}setBlockType(e,t=e,r,i=null){return iE(this,e,t,r,i),this}setNodeMarkup(e,t,r=null,i){return uE(this,e,t,r,i),this}setNodeAttribute(e,t,r){return this.step(new M3(e,t,r)),this}setDocAttribute(e,t){return this.step(new A3(e,t)),this}addNodeMark(e,t){return this.step(new p0(e,t)),this}removeNodeMark(e,t){let r=this.doc.nodeAt(e);if(!r)throw new RangeError("No node at position "+e);if(t instanceof Me)t.isInSet(r.marks)&&this.step(new hc(e,t));else{let i=r.marks,l,o=[];for(;l=t.isInSet(i);)o.push(new hc(e,l)),i=l.removeFromSet(i);for(let a=o.length-1;a>=0;a--)this.step(o[a])}return this}split(e,t=1,r){return sE(this,e,t,r),this}addMark(e,t,r){return X4(this,e,t,r),this}removeMark(e,t,r){return Q4(this,e,t,r),this}clearIncompatible(e,t,r){return m0(this,e,t,r),this}}const zh=Object.create(null);let de=class{constructor(e,t,r){this.$anchor=e,this.$head=t,this.ranges=r||[new yE(e.min(t),e.max(t))]}get anchor(){return this.$anchor.pos}get head(){return this.$head.pos}get from(){return this.$from.pos}get to(){return this.$to.pos}get $from(){return this.ranges[0].$from}get $to(){return this.ranges[0].$to}get empty(){let e=this.ranges;for(let t=0;t<e.length;t++)if(e[t].$from.pos!=e[t].$to.pos)return!1;return!0}content(){return this.$from.doc.slice(this.from,this.to,!0)}replace(e,t=Y.empty){let r=t.content.lastChild,i=null;for(let a=0;a<t.openEnd;a++)i=r,r=r.lastChild;let l=e.steps.length,o=this.ranges;for(let a=0;a<o.length;a++){let{$from:f,$to:h}=o[a],p=e.mapping.slice(l);e.replaceRange(p.map(f.pos),p.map(h.pos),a?Y.empty:t),a==0&&_y(e,l,(r?r.isInline:i&&i.isTextblock)?-1:1)}}replaceWith(e,t){let r=e.steps.length,i=this.ranges;for(let l=0;l<i.length;l++){let{$from:o,$to:a}=i[l],f=e.mapping.slice(r),h=f.map(o.pos),p=f.map(a.pos);l?e.deleteRange(h,p):(e.replaceRangeWith(h,p,t),_y(e,r,t.isInline?-1:1))}}static findFrom(e,t,r=!1){let i=e.parent.inlineContent?new he(e):tu(e.node(0),e.parent,e.pos,e.index(),t,r);if(i)return i;for(let l=e.depth-1;l>=0;l--){let o=t<0?tu(e.node(0),e.node(l),e.before(l+1),e.index(l),t,r):tu(e.node(0),e.node(l),e.after(l+1),e.index(l)+1,t,r);if(o)return o}return null}static near(e,t=1){return this.findFrom(e,t)||this.findFrom(e,-t)||new br(e.node(0))}static atStart(e){return tu(e,e,0,0,1)||new br(e)}static atEnd(e){return tu(e,e,e.content.size,e.childCount,-1)||new br(e)}static fromJSON(e,t){if(!t||!t.type)throw new RangeError("Invalid input for Selection.fromJSON");let r=zh[t.type];if(!r)throw new RangeError(`No selection type ${t.type} defined`);return r.fromJSON(e,t)}static jsonID(e,t){if(e in zh)throw new RangeError("Duplicate use of selection JSON ID "+e);return zh[e]=t,t.prototype.jsonID=e,t}getBookmark(){return he.between(this.$anchor,this.$head).getBookmark()}};de.prototype.visible=!0;let yE=class{constructor(e,t){this.$from=e,this.$to=t}},wy=!1;function Oy(n){!wy&&!n.parent.inlineContent&&(wy=!0,console.warn("TextSelection endpoint not pointing into a node with inline content ("+n.parent.type.name+")"))}let he=class Ns extends de{constructor(e,t=e){Oy(e),Oy(t),super(e,t)}get $cursor(){return this.$anchor.pos==this.$head.pos?this.$head:null}map(e,t){let r=e.resolve(t.map(this.head));if(!r.parent.inlineContent)return de.near(r);let i=e.resolve(t.map(this.anchor));return new Ns(i.parent.inlineContent?i:r,r)}replace(e,t=Y.empty){if(super.replace(e,t),t==Y.empty){let r=this.$from.marksAcross(this.$to);r&&e.ensureMarks(r)}}eq(e){return e instanceof Ns&&e.anchor==this.anchor&&e.head==this.head}getBookmark(){return new T3(this.anchor,this.head)}toJSON(){return{type:"text",anchor:this.anchor,head:this.head}}static fromJSON(e,t){if(typeof t.anchor!="number"||typeof t.head!="number")throw new RangeError("Invalid input for TextSelection.fromJSON");return new Ns(e.resolve(t.anchor),e.resolve(t.head))}static create(e,t,r=t){let i=e.resolve(t);return new this(i,r==t?i:e.resolve(r))}static between(e,t,r){let i=e.pos-t.pos;if((!r||i)&&(r=i>=0?1:-1),!t.parent.inlineContent){let l=de.findFrom(t,r,!0)||de.findFrom(t,-r,!0);if(l)t=l.$head;else return de.near(t,r)}return e.parent.inlineContent||(i==0?e=t:(e=(de.findFrom(e,-r,!0)||de.findFrom(e,r,!0)).$anchor,e.pos<t.pos!=i<0&&(e=t))),new Ns(e,t)}};de.jsonID("text",he);let T3=class D3{constructor(e,t){this.anchor=e,this.head=t}map(e){return new D3(e.map(this.anchor),e.map(this.head))}resolve(e){return he.between(e.resolve(this.anchor),e.resolve(this.head))}},oe=class Rs extends de{constructor(e){let t=e.nodeAfter,r=e.node(0).resolve(e.pos+t.nodeSize);super(e,r),this.node=t}map(e,t){let{deleted:r,pos:i}=t.mapResult(this.anchor),l=e.resolve(i);return r?de.near(l):new Rs(l)}content(){return new Y(j.from(this.node),0,0)}eq(e){return e instanceof Rs&&e.anchor==this.anchor}toJSON(){return{type:"node",anchor:this.anchor}}getBookmark(){return new xE(this.anchor)}static fromJSON(e,t){if(typeof t.anchor!="number")throw new RangeError("Invalid input for NodeSelection.fromJSON");return new Rs(e.resolve(t.anchor))}static create(e,t){return new Rs(e.resolve(t))}static isSelectable(e){return!e.isText&&e.type.spec.selectable!==!1}};oe.prototype.visible=!1;de.jsonID("node",oe);let xE=class w3{constructor(e){this.anchor=e}map(e){let{deleted:t,pos:r}=e.mapResult(this.anchor);return t?new T3(r,r):new w3(r)}resolve(e){let t=e.resolve(this.anchor),r=t.nodeAfter;return r&&oe.isSelectable(r)?new oe(t):de.near(t)}},br=class nc extends de{constructor(e){super(e.resolve(0),e.resolve(e.content.size))}replace(e,t=Y.empty){if(t==Y.empty){e.delete(0,e.doc.content.size);let r=de.atStart(e.doc);r.eq(e.selection)||e.setSelection(r)}else super.replace(e,t)}toJSON(){return{type:"all"}}static fromJSON(e){return new nc(e)}map(e){return new nc(e)}eq(e){return e instanceof nc}getBookmark(){return kE}};de.jsonID("all",br);const kE={map(){return this},resolve(n){return new br(n)}};function tu(n,e,t,r,i,l=!1){if(e.inlineContent)return he.create(n,t);for(let o=r-(i>0?0:1);i>0?o<e.childCount:o>=0;o+=i){let a=e.child(o);if(a.isAtom){if(!l&&oe.isSelectable(a))return oe.create(n,t-(i<0?a.nodeSize:0))}else{let f=tu(n,a,t+i,i<0?a.childCount:0,i,l);if(f)return f}t+=a.nodeSize*i}return null}function _y(n,e,t){let r=n.steps.length-1;if(r<e)return;let i=n.steps[r];if(!(i instanceof wn||i instanceof jt))return;let l=n.mapping.maps[r],o;l.forEach((a,f,h,p)=>{o==null&&(o=p)}),n.setSelection(de.near(n.doc.resolve(o),t))}const Ny=1,Ry=2,zy=4;class SE extends bE{constructor(e){super(e.doc),this.curSelectionFor=0,this.updated=0,this.meta=Object.create(null),this.time=Date.now(),this.curSelection=e.selection,this.storedMarks=e.storedMarks}get selection(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection}setSelection(e){if(e.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=e,this.curSelectionFor=this.steps.length,this.updated=(this.updated|Ny)&-3,this.storedMarks=null,this}get selectionSet(){return(this.updated&Ny)>0}setStoredMarks(e){return this.storedMarks=e,this.updated|=Ry,this}ensureMarks(e){return Me.sameSet(this.storedMarks||this.selection.$from.marks(),e)||this.setStoredMarks(e),this}addStoredMark(e){return this.ensureMarks(e.addToSet(this.storedMarks||this.selection.$head.marks()))}removeStoredMark(e){return this.ensureMarks(e.removeFromSet(this.storedMarks||this.selection.$head.marks()))}get storedMarksSet(){return(this.updated&Ry)>0}addStep(e,t){super.addStep(e,t),this.updated=this.updated&-3,this.storedMarks=null}setTime(e){return this.time=e,this}replaceSelection(e){return this.selection.replace(this,e),this}replaceSelectionWith(e,t=!0){let r=this.selection;return t&&(e=e.mark(this.storedMarks||(r.empty?r.$from.marks():r.$from.marksAcross(r.$to)||Me.none))),r.replaceWith(this,e),this}deleteSelection(){return this.selection.replace(this),this}insertText(e,t,r){let i=this.doc.type.schema;if(t==null)return e?this.replaceSelectionWith(i.text(e),!0):this.deleteSelection();{if(r==null&&(r=t),r=r??t,!e)return this.deleteRange(t,r);let l=this.storedMarks;if(!l){let o=this.doc.resolve(t);l=r==t?o.marks():o.marksAcross(this.doc.resolve(r))}return this.replaceRangeWith(t,r,i.text(e,l)),this.selection.empty||this.setSelection(de.near(this.selection.$to)),this}}setMeta(e,t){return this.meta[typeof e=="string"?e:e.key]=t,this}getMeta(e){return this.meta[typeof e=="string"?e:e.key]}get isGeneric(){for(let e in this.meta)return!1;return!0}scrollIntoView(){return this.updated|=zy,this}get scrolledIntoView(){return(this.updated&zy)>0}}function By(n,e){return!e||!n?n:n.bind(e)}let zs=class{constructor(e,t,r){this.name=e,this.init=By(t.init,r),this.apply=By(t.apply,r)}};const CE=[new zs("doc",{init(n){return n.doc||n.schema.topNodeType.createAndFill()},apply(n){return n.doc}}),new zs("selection",{init(n,e){return n.selection||de.atStart(e.doc)},apply(n){return n.selection}}),new zs("storedMarks",{init(n){return n.storedMarks||null},apply(n,e,t,r){return r.selection.$cursor?n.storedMarks:null}}),new zs("scrollToSelection",{init(){return 0},apply(n,e){return n.scrolledIntoView?e+1:e}})];class Bh{constructor(e,t){this.schema=e,this.plugins=[],this.pluginsByKey=Object.create(null),this.fields=CE.slice(),t&&t.forEach(r=>{if(this.pluginsByKey[r.key])throw new RangeError("Adding different instances of a keyed plugin ("+r.key+")");this.plugins.push(r),this.pluginsByKey[r.key]=r,r.spec.state&&this.fields.push(new zs(r.key,r.spec.state,r))})}}class uu{constructor(e){this.config=e}get schema(){return this.config.schema}get plugins(){return this.config.plugins}apply(e){return this.applyTransaction(e).state}filterTransaction(e,t=-1){for(let r=0;r<this.config.plugins.length;r++)if(r!=t){let i=this.config.plugins[r];if(i.spec.filterTransaction&&!i.spec.filterTransaction.call(i,e,this))return!1}return!0}applyTransaction(e){if(!this.filterTransaction(e))return{state:this,transactions:[]};let t=[e],r=this.applyInner(e),i=null;for(;;){let l=!1;for(let o=0;o<this.config.plugins.length;o++){let a=this.config.plugins[o];if(a.spec.appendTransaction){let f=i?i[o].n:0,h=i?i[o].state:this,p=f<t.length&&a.spec.appendTransaction.call(a,f?t.slice(f):t,h,r);if(p&&r.filterTransaction(p,o)){if(p.setMeta("appendedTransaction",e),!i){i=[];for(let g=0;g<this.config.plugins.length;g++)i.push(g<o?{state:r,n:t.length}:{state:this,n:0})}t.push(p),r=r.applyInner(p),l=!0}i&&(i[o]={state:r,n:t.length})}}if(!l)return{state:r,transactions:t}}}applyInner(e){if(!e.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");let t=new uu(this.config),r=this.config.fields;for(let i=0;i<r.length;i++){let l=r[i];t[l.name]=l.apply(e,this[l.name],this,t)}return t}get tr(){return new SE(this)}static create(e){let t=new Bh(e.doc?e.doc.type.schema:e.schema,e.plugins),r=new uu(t);for(let i=0;i<t.fields.length;i++)r[t.fields[i].name]=t.fields[i].init(e,r);return r}reconfigure(e){let t=new Bh(this.schema,e.plugins),r=t.fields,i=new uu(t);for(let l=0;l<r.length;l++){let o=r[l].name;i[o]=this.hasOwnProperty(o)?this[o]:r[l].init(e,i)}return i}toJSON(e){let t={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(t.storedMarks=this.storedMarks.map(r=>r.toJSON())),e&&typeof e=="object")for(let r in e){if(r=="doc"||r=="selection")throw new RangeError("The JSON fields `doc` and `selection` are reserved");let i=e[r],l=i.spec.state;l&&l.toJSON&&(t[r]=l.toJSON.call(i,this[i.key]))}return t}static fromJSON(e,t,r){if(!t)throw new RangeError("Invalid input for EditorState.fromJSON");if(!e.schema)throw new RangeError("Required config field 'schema' missing");let i=new Bh(e.schema,e.plugins),l=new uu(i);return i.fields.forEach(o=>{if(o.name=="doc")l.doc=ti.fromJSON(e.schema,t.doc);else if(o.name=="selection")l.selection=de.fromJSON(l.doc,t.selection);else if(o.name=="storedMarks")t.storedMarks&&(l.storedMarks=t.storedMarks.map(e.schema.markFromJSON));else{if(r)for(let a in r){let f=r[a],h=f.spec.state;if(f.key==o.name&&h&&h.fromJSON&&Object.prototype.hasOwnProperty.call(t,a)){l[o.name]=h.fromJSON.call(f,e,t[a],l);return}}l[o.name]=o.init(e,l)}}),l}}function O3(n,e,t){for(let r in n){let i=n[r];i instanceof Function?i=i.bind(e):r=="handleDOMEvents"&&(i=O3(i,e,{})),t[r]=i}return t}let Bt=class{constructor(e){this.spec=e,this.props={},e.props&&O3(e.props,this,this.props),this.key=e.key?e.key.key:_3("plugin")}getState(e){return e[this.key]}};const $h=Object.create(null);function _3(n){return n in $h?n+"$"+ ++$h[n]:($h[n]=0,n+"$")}let _n=class{constructor(e="key"){this.key=_3(e)}get(e){return e.config.pluginsByKey[this.key]}getState(e){return e[this.key]}};const gt=function(n){for(var e=0;;e++)if(n=n.previousSibling,!n)return e},hu=function(n){let e=n.assignedSlot||n.parentNode;return e&&e.nodeType==11?e.host:e};let Op=null;const pr=function(n,e,t){let r=Op||(Op=document.createRange());return r.setEnd(n,t??n.nodeValue.length),r.setStart(n,e||0),r},vE=function(){Op=null},nl=function(n,e,t,r){return t&&($y(n,e,t,r,-1)||$y(n,e,t,r,1))},EE=/^(img|br|input|textarea|hr)$/i;function $y(n,e,t,r,i){for(;;){if(n==t&&e==r)return!0;if(e==(i<0?0:kn(n))){let l=n.parentNode;if(!l||l.nodeType!=1||ho(n)||EE.test(n.nodeName)||n.contentEditable=="false")return!1;e=gt(n)+(i<0?0:1),n=l}else if(n.nodeType==1){if(n=n.childNodes[e+(i<0?-1:0)],n.contentEditable=="false")return!1;e=i<0?kn(n):0}else return!1}}function kn(n){return n.nodeType==3?n.nodeValue.length:n.childNodes.length}function ME(n,e){for(;;){if(n.nodeType==3&&e)return n;if(n.nodeType==1&&e>0){if(n.contentEditable=="false")return null;n=n.childNodes[e-1],e=kn(n)}else if(n.parentNode&&!ho(n))e=gt(n),n=n.parentNode;else return null}}function AE(n,e){for(;;){if(n.nodeType==3&&e<n.nodeValue.length)return n;if(n.nodeType==1&&e<n.childNodes.length){if(n.contentEditable=="false")return null;n=n.childNodes[e],e=0}else if(n.parentNode&&!ho(n))e=gt(n)+1,n=n.parentNode;else return null}}function TE(n,e,t){for(let r=e==0,i=e==kn(n);r||i;){if(n==t)return!0;let l=gt(n);if(n=n.parentNode,!n)return!1;r=r&&l==0,i=i&&l==kn(n)}}function ho(n){let e;for(let t=n;t&&!(e=t.pmViewDesc);t=t.parentNode);return e&&e.node&&e.node.isBlock&&(e.dom==n||e.contentDOM==n)}const Vc=function(n){return n.focusNode&&nl(n.focusNode,n.focusOffset,n.anchorNode,n.anchorOffset)};function Ri(n,e){let t=document.createEvent("Event");return t.initEvent("keydown",!0,!0),t.keyCode=n,t.key=t.code=e,t}function DE(n){let e=n.activeElement;for(;e&&e.shadowRoot;)e=e.shadowRoot.activeElement;return e}function wE(n,e,t){if(n.caretPositionFromPoint)try{let r=n.caretPositionFromPoint(e,t);if(r)return{node:r.offsetNode,offset:Math.min(kn(r.offsetNode),r.offset)}}catch{}if(n.caretRangeFromPoint){let r=n.caretRangeFromPoint(e,t);if(r)return{node:r.startContainer,offset:Math.min(kn(r.startContainer),r.startOffset)}}}const Pn=typeof navigator<"u"?navigator:null,Fy=typeof document<"u"?document:null,oi=Pn&&Pn.userAgent||"",_p=/Edge\/(\d+)/.exec(oi),N3=/MSIE \d/.exec(oi),Np=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(oi),Vt=!!(N3||Np||_p),ni=N3?document.documentMode:Np?+Np[1]:_p?+_p[1]:0,On=!Vt&&/gecko\/(\d+)/i.test(oi);On&&+(/Firefox\/(\d+)/.exec(oi)||[0,0])[1];const Rp=!Vt&&/Chrome\/(\d+)/.exec(oi),Ct=!!Rp,R3=Rp?+Rp[1]:0,_t=!Vt&&!!Pn&&/Apple Computer/.test(Pn.vendor),pu=_t&&(/Mobile\/\w+/.test(oi)||!!Pn&&Pn.maxTouchPoints>2),yn=pu||(Pn?/Mac/.test(Pn.platform):!1),OE=Pn?/Win/.test(Pn.platform):!1,mr=/Android \d/.test(oi),po=!!Fy&&"webkitFontSmoothing"in Fy.documentElement.style,_E=po?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0;function NE(n){let e=n.defaultView&&n.defaultView.visualViewport;return e?{left:0,right:e.width,top:0,bottom:e.height}:{left:0,right:n.documentElement.clientWidth,top:0,bottom:n.documentElement.clientHeight}}function hr(n,e){return typeof n=="number"?n:n[e]}function RE(n){let e=n.getBoundingClientRect(),t=e.width/n.offsetWidth||1,r=e.height/n.offsetHeight||1;return{left:e.left,right:e.left+n.clientWidth*t,top:e.top,bottom:e.top+n.clientHeight*r}}function Ly(n,e,t){let r=n.someProp("scrollThreshold")||0,i=n.someProp("scrollMargin")||5,l=n.dom.ownerDocument;for(let o=t||n.dom;o;){if(o.nodeType!=1){o=hu(o);continue}let a=o,f=a==l.body,h=f?NE(l):RE(a),p=0,g=0;if(e.top<h.top+hr(r,"top")?g=-(h.top-e.top+hr(i,"top")):e.bottom>h.bottom-hr(r,"bottom")&&(g=e.bottom-e.top>h.bottom-h.top?e.top+hr(i,"top")-h.top:e.bottom-h.bottom+hr(i,"bottom")),e.left<h.left+hr(r,"left")?p=-(h.left-e.left+hr(i,"left")):e.right>h.right-hr(r,"right")&&(p=e.right-h.right+hr(i,"right")),p||g)if(f)l.defaultView.scrollBy(p,g);else{let x=a.scrollLeft,k=a.scrollTop;g&&(a.scrollTop+=g),p&&(a.scrollLeft+=p);let C=a.scrollLeft-x,E=a.scrollTop-k;e={left:e.left-C,top:e.top-E,right:e.right-C,bottom:e.bottom-E}}let y=f?"fixed":getComputedStyle(o).position;if(/^(fixed|sticky)$/.test(y))break;o=y=="absolute"?o.offsetParent:hu(o)}}function zE(n){let e=n.dom.getBoundingClientRect(),t=Math.max(0,e.top),r,i;for(let l=(e.left+e.right)/2,o=t+1;o<Math.min(innerHeight,e.bottom);o+=5){let a=n.root.elementFromPoint(l,o);if(!a||a==n.dom||!n.dom.contains(a))continue;let f=a.getBoundingClientRect();if(f.top>=t-20){r=a,i=f.top;break}}return{refDOM:r,refTop:i,stack:z3(n.dom)}}function z3(n){let e=[],t=n.ownerDocument;for(let r=n;r&&(e.push({dom:r,top:r.scrollTop,left:r.scrollLeft}),n!=t);r=hu(r));return e}function BE({refDOM:n,refTop:e,stack:t}){let r=n?n.getBoundingClientRect().top:0;B3(t,r==0?0:r-e)}function B3(n,e){for(let t=0;t<n.length;t++){let{dom:r,top:i,left:l}=n[t];r.scrollTop!=i+e&&(r.scrollTop=i+e),r.scrollLeft!=l&&(r.scrollLeft=l)}}let Yl=null;function $E(n){if(n.setActive)return n.setActive();if(Yl)return n.focus(Yl);let e=z3(n);n.focus(Yl==null?{get preventScroll(){return Yl={preventScroll:!0},!0}}:void 0),Yl||(Yl=!1,B3(e,0))}function $3(n,e){let t,r=2e8,i,l=0,o=e.top,a=e.top,f,h;for(let p=n.firstChild,g=0;p;p=p.nextSibling,g++){let y;if(p.nodeType==1)y=p.getClientRects();else if(p.nodeType==3)y=pr(p).getClientRects();else continue;for(let x=0;x<y.length;x++){let k=y[x];if(k.top<=o&&k.bottom>=a){o=Math.max(k.bottom,o),a=Math.min(k.top,a);let C=k.left>e.left?k.left-e.left:k.right<e.left?e.left-k.right:0;if(C<r){t=p,r=C,i=C&&t.nodeType==3?{left:k.right<e.left?k.right:k.left,top:e.top}:e,p.nodeType==1&&C&&(l=g+(e.left>=(k.left+k.right)/2?1:0));continue}}else k.top>e.top&&!f&&k.left<=e.left&&k.right>=e.left&&(f=p,h={left:Math.max(k.left,Math.min(k.right,e.left)),top:k.top});!t&&(e.left>=k.right&&e.top>=k.top||e.left>=k.left&&e.top>=k.bottom)&&(l=g+1)}}return!t&&f&&(t=f,i=h,r=0),t&&t.nodeType==3?FE(t,i):!t||r&&t.nodeType==1?{node:n,offset:l}:$3(t,i)}function FE(n,e){let t=n.nodeValue.length,r=document.createRange();for(let i=0;i<t;i++){r.setEnd(n,i+1),r.setStart(n,i);let l=Pr(r,1);if(l.top!=l.bottom&&b0(e,l))return{node:n,offset:i+(e.left>=(l.left+l.right)/2?1:0)}}return{node:n,offset:0}}function b0(n,e){return n.left>=e.left-1&&n.left<=e.right+1&&n.top>=e.top-1&&n.top<=e.bottom+1}function LE(n,e){let t=n.parentNode;return t&&/^li$/i.test(t.nodeName)&&e.left<n.getBoundingClientRect().left?t:n}function IE(n,e,t){let{node:r,offset:i}=$3(e,t),l=-1;if(r.nodeType==1&&!r.firstChild){let o=r.getBoundingClientRect();l=o.left!=o.right&&t.left>(o.left+o.right)/2?1:-1}return n.docView.posFromDOM(r,i,l)}function qE(n,e,t,r){let i=-1;for(let l=e,o=!1;l!=n.dom;){let a=n.docView.nearestDesc(l,!0),f;if(!a)return null;if(a.dom.nodeType==1&&(a.node.isBlock&&a.parent||!a.contentDOM)&&((f=a.dom.getBoundingClientRect()).width||f.height)&&(a.node.isBlock&&a.parent&&(!o&&f.left>r.left||f.top>r.top?i=a.posBefore:(!o&&f.right<r.left||f.bottom<r.top)&&(i=a.posAfter),o=!0),!a.contentDOM&&i<0&&!a.node.isText))return(a.node.isBlock?r.top<(f.top+f.bottom)/2:r.left<(f.left+f.right)/2)?a.posBefore:a.posAfter;l=a.dom.parentNode}return i>-1?i:n.docView.posFromDOM(e,t,-1)}function F3(n,e,t){let r=n.childNodes.length;if(r&&t.top<t.bottom)for(let i=Math.max(0,Math.min(r-1,Math.floor(r*(e.top-t.top)/(t.bottom-t.top))-2)),l=i;;){let o=n.childNodes[l];if(o.nodeType==1){let a=o.getClientRects();for(let f=0;f<a.length;f++){let h=a[f];if(b0(e,h))return F3(o,e,h)}}if((l=(l+1)%r)==i)break}return n}function HE(n,e){let t=n.dom.ownerDocument,r,i=0,l=wE(t,e.left,e.top);l&&({node:r,offset:i}=l);let o=(n.root.elementFromPoint?n.root:t).elementFromPoint(e.left,e.top),a;if(!o||!n.dom.contains(o.nodeType!=1?o.parentNode:o)){let h=n.dom.getBoundingClientRect();if(!b0(e,h)||(o=F3(n.dom,e,h),!o))return null}if(_t)for(let h=o;r&&h;h=hu(h))h.draggable&&(r=void 0);if(o=LE(o,e),r){if(On&&r.nodeType==1&&(i=Math.min(i,r.childNodes.length),i<r.childNodes.length)){let p=r.childNodes[i],g;p.nodeName=="IMG"&&(g=p.getBoundingClientRect()).right<=e.left&&g.bottom>e.top&&i++}let h;po&&i&&r.nodeType==1&&(h=r.childNodes[i-1]).nodeType==1&&h.contentEditable=="false"&&h.getBoundingClientRect().top>=e.top&&i--,r==n.dom&&i==r.childNodes.length-1&&r.lastChild.nodeType==1&&e.top>r.lastChild.getBoundingClientRect().bottom?a=n.state.doc.content.size:(i==0||r.nodeType!=1||r.childNodes[i-1].nodeName!="BR")&&(a=qE(n,r,i,e))}a==null&&(a=IE(n,o,e));let f=n.docView.nearestDesc(o,!0);return{pos:a,inside:f?f.posAtStart-f.border:-1}}function Iy(n){return n.top<n.bottom||n.left<n.right}function Pr(n,e){let t=n.getClientRects();if(t.length){let r=t[e<0?0:t.length-1];if(Iy(r))return r}return Array.prototype.find.call(t,Iy)||n.getBoundingClientRect()}const VE=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;function L3(n,e,t){let{node:r,offset:i,atom:l}=n.docView.domFromPos(e,t<0?-1:1),o=po||On;if(r.nodeType==3)if(o&&(VE.test(r.nodeValue)||(t<0?!i:i==r.nodeValue.length))){let f=Pr(pr(r,i,i),t);if(On&&i&&/\s/.test(r.nodeValue[i-1])&&i<r.nodeValue.length){let h=Pr(pr(r,i-1,i-1),-1);if(h.top==f.top){let p=Pr(pr(r,i,i+1),-1);if(p.top!=f.top)return Es(p,p.left<h.left)}}return f}else{let f=i,h=i,p=t<0?1:-1;return t<0&&!i?(h++,p=-1):t>=0&&i==r.nodeValue.length?(f--,p=1):t<0?f--:h++,Es(Pr(pr(r,f,h),p),p<0)}if(!n.state.doc.resolve(e-(l||0)).parent.inlineContent){if(l==null&&i&&(t<0||i==kn(r))){let f=r.childNodes[i-1];if(f.nodeType==1)return Fh(f.getBoundingClientRect(),!1)}if(l==null&&i<kn(r)){let f=r.childNodes[i];if(f.nodeType==1)return Fh(f.getBoundingClientRect(),!0)}return Fh(r.getBoundingClientRect(),t>=0)}if(l==null&&i&&(t<0||i==kn(r))){let f=r.childNodes[i-1],h=f.nodeType==3?pr(f,kn(f)-(o?0:1)):f.nodeType==1&&(f.nodeName!="BR"||!f.nextSibling)?f:null;if(h)return Es(Pr(h,1),!1)}if(l==null&&i<kn(r)){let f=r.childNodes[i];for(;f.pmViewDesc&&f.pmViewDesc.ignoreForCoords;)f=f.nextSibling;let h=f?f.nodeType==3?pr(f,0,o?0:1):f.nodeType==1?f:null:null;if(h)return Es(Pr(h,-1),!0)}return Es(Pr(r.nodeType==3?pr(r):r,-t),t>=0)}function Es(n,e){if(n.width==0)return n;let t=e?n.left:n.right;return{top:n.top,bottom:n.bottom,left:t,right:t}}function Fh(n,e){if(n.height==0)return n;let t=e?n.top:n.bottom;return{top:t,bottom:t,left:n.left,right:n.right}}function I3(n,e,t){let r=n.state,i=n.root.activeElement;r!=e&&n.updateState(e),i!=n.dom&&n.focus();try{return t()}finally{r!=e&&n.updateState(r),i!=n.dom&&i&&i.focus()}}function UE(n,e,t){let r=e.selection,i=t=="up"?r.$from:r.$to;return I3(n,e,()=>{let{node:l}=n.docView.domFromPos(i.pos,t=="up"?-1:1);for(;;){let a=n.docView.nearestDesc(l,!0);if(!a)break;if(a.node.isBlock){l=a.contentDOM||a.dom;break}l=a.dom.parentNode}let o=L3(n,i.pos,1);for(let a=l.firstChild;a;a=a.nextSibling){let f;if(a.nodeType==1)f=a.getClientRects();else if(a.nodeType==3)f=pr(a,0,a.nodeValue.length).getClientRects();else continue;for(let h=0;h<f.length;h++){let p=f[h];if(p.bottom>p.top+1&&(t=="up"?o.top-p.top>(p.bottom-o.top)*2:p.bottom-o.bottom>(o.bottom-p.top)*2))return!1}}return!0})}const jE=/[\u0590-\u08ac]/;function PE(n,e,t){let{$head:r}=e.selection;if(!r.parent.isTextblock)return!1;let i=r.parentOffset,l=!i,o=i==r.parent.content.size,a=n.domSelection();return a?!jE.test(r.parent.textContent)||!a.modify?t=="left"||t=="backward"?l:o:I3(n,e,()=>{let{focusNode:f,focusOffset:h,anchorNode:p,anchorOffset:g}=n.domSelectionRange(),y=a.caretBidiLevel;a.modify("move",t,"character");let x=r.depth?n.docView.domAfterPos(r.before()):n.dom,{focusNode:k,focusOffset:C}=n.domSelectionRange(),E=k&&!x.contains(k.nodeType==1?k:k.parentNode)||f==k&&h==C;try{a.collapse(p,g),f&&(f!=p||h!=g)&&a.extend&&a.extend(f,h)}catch{}return y!=null&&(a.caretBidiLevel=y),E}):r.pos==r.start()||r.pos==r.end()}let qy=null,Hy=null,Vy=!1;function JE(n,e,t){return qy==e&&Hy==t?Vy:(qy=e,Hy=t,Vy=t=="up"||t=="down"?UE(n,e,t):PE(n,e,t))}const Sn=0,Uy=1,$i=2,Jn=3;class mo{constructor(e,t,r,i){this.parent=e,this.children=t,this.dom=r,this.contentDOM=i,this.dirty=Sn,r.pmViewDesc=this}matchesWidget(e){return!1}matchesMark(e){return!1}matchesNode(e,t,r){return!1}matchesHack(e){return!1}parseRule(){return null}stopEvent(e){return!1}get size(){let e=0;for(let t=0;t<this.children.length;t++)e+=this.children[t].size;return e}get border(){return 0}destroy(){this.parent=void 0,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=void 0);for(let e=0;e<this.children.length;e++)this.children[e].destroy()}posBeforeChild(e){for(let t=0,r=this.posAtStart;;t++){let i=this.children[t];if(i==e)return r;r+=i.size}}get posBefore(){return this.parent.posBeforeChild(this)}get posAtStart(){return this.parent?this.parent.posBeforeChild(this)+this.border:0}get posAfter(){return this.posBefore+this.size}get posAtEnd(){return this.posAtStart+this.size-2*this.border}localPosFromDOM(e,t,r){if(this.contentDOM&&this.contentDOM.contains(e.nodeType==1?e:e.parentNode))if(r<0){let l,o;if(e==this.contentDOM)l=e.childNodes[t-1];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;l=e.previousSibling}for(;l&&!((o=l.pmViewDesc)&&o.parent==this);)l=l.previousSibling;return l?this.posBeforeChild(o)+o.size:this.posAtStart}else{let l,o;if(e==this.contentDOM)l=e.childNodes[t];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;l=e.nextSibling}for(;l&&!((o=l.pmViewDesc)&&o.parent==this);)l=l.nextSibling;return l?this.posBeforeChild(o):this.posAtEnd}let i;if(e==this.dom&&this.contentDOM)i=t>gt(this.contentDOM);else if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))i=e.compareDocumentPosition(this.contentDOM)&2;else if(this.dom.firstChild){if(t==0)for(let l=e;;l=l.parentNode){if(l==this.dom){i=!1;break}if(l.previousSibling)break}if(i==null&&t==e.childNodes.length)for(let l=e;;l=l.parentNode){if(l==this.dom){i=!0;break}if(l.nextSibling)break}}return i??r>0?this.posAtEnd:this.posAtStart}nearestDesc(e,t=!1){for(let r=!0,i=e;i;i=i.parentNode){let l=this.getDesc(i),o;if(l&&(!t||l.node))if(r&&(o=l.nodeDOM)&&!(o.nodeType==1?o.contains(e.nodeType==1?e:e.parentNode):o==e))r=!1;else return l}}getDesc(e){let t=e.pmViewDesc;for(let r=t;r;r=r.parent)if(r==this)return t}posFromDOM(e,t,r){for(let i=e;i;i=i.parentNode){let l=this.getDesc(i);if(l)return l.localPosFromDOM(e,t,r)}return-1}descAt(e){for(let t=0,r=0;t<this.children.length;t++){let i=this.children[t],l=r+i.size;if(r==e&&l!=r){for(;!i.border&&i.children.length;)for(let o=0;o<i.children.length;o++){let a=i.children[o];if(a.size){i=a;break}}return i}if(e<l)return i.descAt(e-r-i.border);r=l}}domFromPos(e,t){if(!this.contentDOM)return{node:this.dom,offset:0,atom:e+1};let r=0,i=0;for(let l=0;r<this.children.length;r++){let o=this.children[r],a=l+o.size;if(a>e||o instanceof H3){i=e-l;break}l=a}if(i)return this.children[r].domFromPos(i-this.children[r].border,t);for(let l;r&&!(l=this.children[r-1]).size&&l instanceof q3&&l.side>=0;r--);if(t<=0){let l,o=!0;for(;l=r?this.children[r-1]:null,!(!l||l.dom.parentNode==this.contentDOM);r--,o=!1);return l&&t&&o&&!l.border&&!l.domAtom?l.domFromPos(l.size,t):{node:this.contentDOM,offset:l?gt(l.dom)+1:0}}else{let l,o=!0;for(;l=r<this.children.length?this.children[r]:null,!(!l||l.dom.parentNode==this.contentDOM);r++,o=!1);return l&&o&&!l.border&&!l.domAtom?l.domFromPos(0,t):{node:this.contentDOM,offset:l?gt(l.dom):this.contentDOM.childNodes.length}}}parseRange(e,t,r=0){if(this.children.length==0)return{node:this.contentDOM,from:e,to:t,fromOffset:0,toOffset:this.contentDOM.childNodes.length};let i=-1,l=-1;for(let o=r,a=0;;a++){let f=this.children[a],h=o+f.size;if(i==-1&&e<=h){let p=o+f.border;if(e>=p&&t<=h-f.border&&f.node&&f.contentDOM&&this.contentDOM.contains(f.contentDOM))return f.parseRange(e,t,p);e=o;for(let g=a;g>0;g--){let y=this.children[g-1];if(y.size&&y.dom.parentNode==this.contentDOM&&!y.emptyChildAt(1)){i=gt(y.dom)+1;break}e-=y.size}i==-1&&(i=0)}if(i>-1&&(h>t||a==this.children.length-1)){t=h;for(let p=a+1;p<this.children.length;p++){let g=this.children[p];if(g.size&&g.dom.parentNode==this.contentDOM&&!g.emptyChildAt(-1)){l=gt(g.dom);break}t+=g.size}l==-1&&(l=this.contentDOM.childNodes.length);break}o=h}return{node:this.contentDOM,from:e,to:t,fromOffset:i,toOffset:l}}emptyChildAt(e){if(this.border||!this.contentDOM||!this.children.length)return!1;let t=this.children[e<0?0:this.children.length-1];return t.size==0||t.emptyChildAt(e)}domAfterPos(e){let{node:t,offset:r}=this.domFromPos(e,0);if(t.nodeType!=1||r==t.childNodes.length)throw new RangeError("No node after pos "+e);return t.childNodes[r]}setSelection(e,t,r,i=!1){let l=Math.min(e,t),o=Math.max(e,t);for(let x=0,k=0;x<this.children.length;x++){let C=this.children[x],E=k+C.size;if(l>k&&o<E)return C.setSelection(e-k-C.border,t-k-C.border,r,i);k=E}let a=this.domFromPos(e,e?-1:1),f=t==e?a:this.domFromPos(t,t?-1:1),h=r.root.getSelection(),p=r.domSelectionRange(),g=!1;if((On||_t)&&e==t){let{node:x,offset:k}=a;if(x.nodeType==3){if(g=!!(k&&x.nodeValue[k-1]==`
`),g&&k==x.nodeValue.length)for(let C=x,E;C;C=C.parentNode){if(E=C.nextSibling){E.nodeName=="BR"&&(a=f={node:E.parentNode,offset:gt(E)+1});break}let A=C.pmViewDesc;if(A&&A.node&&A.node.isBlock)break}}else{let C=x.childNodes[k-1];g=C&&(C.nodeName=="BR"||C.contentEditable=="false")}}if(On&&p.focusNode&&p.focusNode!=f.node&&p.focusNode.nodeType==1){let x=p.focusNode.childNodes[p.focusOffset];x&&x.contentEditable=="false"&&(i=!0)}if(!(i||g&&_t)&&nl(a.node,a.offset,p.anchorNode,p.anchorOffset)&&nl(f.node,f.offset,p.focusNode,p.focusOffset))return;let y=!1;if((h.extend||e==t)&&!g){h.collapse(a.node,a.offset);try{e!=t&&h.extend(f.node,f.offset),y=!0}catch{}}if(!y){if(e>t){let k=a;a=f,f=k}let x=document.createRange();x.setEnd(f.node,f.offset),x.setStart(a.node,a.offset),h.removeAllRanges(),h.addRange(x)}}ignoreMutation(e){return!this.contentDOM&&e.type!="selection"}get contentLost(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)}markDirty(e,t){for(let r=0,i=0;i<this.children.length;i++){let l=this.children[i],o=r+l.size;if(r==o?e<=o&&t>=r:e<o&&t>r){let a=r+l.border,f=o-l.border;if(e>=a&&t<=f){this.dirty=e==r||t==o?$i:Uy,e==a&&t==f&&(l.contentLost||l.dom.parentNode!=this.contentDOM)?l.dirty=Jn:l.markDirty(e-a,t-a);return}else l.dirty=l.dom==l.contentDOM&&l.dom.parentNode==this.contentDOM&&!l.children.length?$i:Jn}r=o}this.dirty=$i}markParentsDirty(){let e=1;for(let t=this.parent;t;t=t.parent,e++){let r=e==1?$i:Uy;t.dirty<r&&(t.dirty=r)}}get domAtom(){return!1}get ignoreForCoords(){return!1}isText(e){return!1}}class q3 extends mo{constructor(e,t,r,i){let l,o=t.type.toDOM;if(typeof o=="function"&&(o=o(r,()=>{if(!l)return i;if(l.parent)return l.parent.posBeforeChild(l)})),!t.type.spec.raw){if(o.nodeType!=1){let a=document.createElement("span");a.appendChild(o),o=a}o.contentEditable="false",o.classList.add("ProseMirror-widget")}super(e,[],o,null),this.widget=t,this.widget=t,l=this}matchesWidget(e){return this.dirty==Sn&&e.type.eq(this.widget.type)}parseRule(){return{ignore:!0}}stopEvent(e){let t=this.widget.spec.stopEvent;return t?t(e):!1}ignoreMutation(e){return e.type!="selection"||this.widget.spec.ignoreSelection}destroy(){this.widget.type.destroy(this.dom),super.destroy()}get domAtom(){return!0}get side(){return this.widget.type.side}}class GE extends mo{constructor(e,t,r,i){super(e,[],t,null),this.textDOM=r,this.text=i}get size(){return this.text.length}localPosFromDOM(e,t){return e!=this.textDOM?this.posAtStart+(t?this.size:0):this.posAtStart+t}domFromPos(e){return{node:this.textDOM,offset:e}}ignoreMutation(e){return e.type==="characterData"&&e.target.nodeValue==e.oldValue}}class rl extends mo{constructor(e,t,r,i,l){super(e,[],r,i),this.mark=t,this.spec=l}static create(e,t,r,i){let l=i.nodeViews[t.type.name],o=l&&l(t,i,r);return(!o||!o.dom)&&(o=co.renderSpec(document,t.type.spec.toDOM(t,r),null,t.attrs)),new rl(e,t,o.dom,o.contentDOM||o.dom,o)}parseRule(){return this.dirty&Jn||this.mark.type.spec.reparseInView?null:{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM}}matchesMark(e){return this.dirty!=Jn&&this.mark.eq(e)}markDirty(e,t){if(super.markDirty(e,t),this.dirty!=Sn){let r=this.parent;for(;!r.node;)r=r.parent;r.dirty<this.dirty&&(r.dirty=this.dirty),this.dirty=Sn}}slice(e,t,r){let i=rl.create(this.parent,this.mark,!0,r),l=this.children,o=this.size;t<o&&(l=Bp(l,t,o,r)),e>0&&(l=Bp(l,0,e,r));for(let a=0;a<l.length;a++)l[a].parent=i;return i.children=l,i}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}}class ri extends mo{constructor(e,t,r,i,l,o,a,f,h){super(e,[],l,o),this.node=t,this.outerDeco=r,this.innerDeco=i,this.nodeDOM=a}static create(e,t,r,i,l,o){let a=l.nodeViews[t.type.name],f,h=a&&a(t,l,()=>{if(!f)return o;if(f.parent)return f.parent.posBeforeChild(f)},r,i),p=h&&h.dom,g=h&&h.contentDOM;if(t.isText){if(!p)p=document.createTextNode(t.text);else if(p.nodeType!=3)throw new RangeError("Text must be rendered as a DOM text node")}else p||({dom:p,contentDOM:g}=co.renderSpec(document,t.type.spec.toDOM(t),null,t.attrs));!g&&!t.isText&&p.nodeName!="BR"&&(p.hasAttribute("contenteditable")||(p.contentEditable="false"),t.type.spec.draggable&&(p.draggable=!0));let y=p;return p=j3(p,r,t),h?f=new KE(e,t,r,i,p,g||null,y,h,l,o+1):t.isText?new Uc(e,t,r,i,p,y,l):new ri(e,t,r,i,p,g||null,y,l,o+1)}parseRule(){if(this.node.type.spec.reparseInView)return null;let e={node:this.node.type.name,attrs:this.node.attrs};if(this.node.type.whitespace=="pre"&&(e.preserveWhitespace="full"),!this.contentDOM)e.getContent=()=>this.node.content;else if(!this.contentLost)e.contentElement=this.contentDOM;else{for(let t=this.children.length-1;t>=0;t--){let r=this.children[t];if(this.dom.contains(r.dom.parentNode)){e.contentElement=r.dom.parentNode;break}}e.contentElement||(e.getContent=()=>j.empty)}return e}matchesNode(e,t,r){return this.dirty==Sn&&e.eq(this.node)&&pc(t,this.outerDeco)&&r.eq(this.innerDeco)}get size(){return this.node.nodeSize}get border(){return this.node.isLeaf?0:1}updateChildren(e,t){let r=this.node.inlineContent,i=t,l=e.composing?this.localCompositionInfo(e,t):null,o=l&&l.pos>-1?l:null,a=l&&l.pos<0,f=new ZE(this,o&&o.node,e);WE(this.node,this.innerDeco,(h,p,g)=>{h.spec.marks?f.syncToMarks(h.spec.marks,r,e):h.type.side>=0&&!g&&f.syncToMarks(p==this.node.childCount?Me.none:this.node.child(p).marks,r,e),f.placeWidget(h,e,i)},(h,p,g,y)=>{f.syncToMarks(h.marks,r,e);let x;f.findNodeMatch(h,p,g,y)||a&&e.state.selection.from>i&&e.state.selection.to<i+h.nodeSize&&(x=f.findIndexWithChild(l.node))>-1&&f.updateNodeAt(h,p,g,x,e)||f.updateNextNode(h,p,g,e,y,i)||f.addNode(h,p,g,e,i),i+=h.nodeSize}),f.syncToMarks([],r,e),this.node.isTextblock&&f.addTextblockHacks(),f.destroyRest(),(f.changed||this.dirty==$i)&&(o&&this.protectLocalComposition(e,o),V3(this.contentDOM,this.children,e),pu&&e8(this.dom))}localCompositionInfo(e,t){let{from:r,to:i}=e.state.selection;if(!(e.state.selection instanceof he)||r<t||i>t+this.node.content.size)return null;let l=e.input.compositionNode;if(!l||!this.dom.contains(l.parentNode))return null;if(this.node.inlineContent){let o=l.nodeValue,a=t8(this.node.content,o,r-t,i-t);return a<0?null:{node:l,pos:a,text:o}}else return{node:l,pos:-1,text:""}}protectLocalComposition(e,{node:t,pos:r,text:i}){if(this.getDesc(t))return;let l=t;for(;l.parentNode!=this.contentDOM;l=l.parentNode){for(;l.previousSibling;)l.parentNode.removeChild(l.previousSibling);for(;l.nextSibling;)l.parentNode.removeChild(l.nextSibling);l.pmViewDesc&&(l.pmViewDesc=void 0)}let o=new GE(this,l,t,i);e.input.compositionNodes.push(o),this.children=Bp(this.children,r,r+i.length,e,o)}update(e,t,r,i){return this.dirty==Jn||!e.sameMarkup(this.node)?!1:(this.updateInner(e,t,r,i),!0)}updateInner(e,t,r,i){this.updateOuterDeco(t),this.node=e,this.innerDeco=r,this.contentDOM&&this.updateChildren(i,this.posAtStart),this.dirty=Sn}updateOuterDeco(e){if(pc(e,this.outerDeco))return;let t=this.nodeDOM.nodeType!=1,r=this.dom;this.dom=U3(this.dom,this.nodeDOM,zp(this.outerDeco,this.node,t),zp(e,this.node,t)),this.dom!=r&&(r.pmViewDesc=void 0,this.dom.pmViewDesc=this),this.outerDeco=e}selectNode(){this.nodeDOM.nodeType==1&&this.nodeDOM.classList.add("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&(this.dom.draggable=!0)}deselectNode(){this.nodeDOM.nodeType==1&&(this.nodeDOM.classList.remove("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&this.dom.removeAttribute("draggable"))}get domAtom(){return this.node.isAtom}}function jy(n,e,t,r,i){j3(r,e,n);let l=new ri(void 0,n,e,t,r,r,r,i,0);return l.contentDOM&&l.updateChildren(i,0),l}class Uc extends ri{constructor(e,t,r,i,l,o,a){super(e,t,r,i,l,null,o,a,0)}parseRule(){let e=this.nodeDOM.parentNode;for(;e&&e!=this.dom&&!e.pmIsDeco;)e=e.parentNode;return{skip:e||!0}}update(e,t,r,i){return this.dirty==Jn||this.dirty!=Sn&&!this.inParent()||!e.sameMarkup(this.node)?!1:(this.updateOuterDeco(t),(this.dirty!=Sn||e.text!=this.node.text)&&e.text!=this.nodeDOM.nodeValue&&(this.nodeDOM.nodeValue=e.text,i.trackWrites==this.nodeDOM&&(i.trackWrites=null)),this.node=e,this.dirty=Sn,!0)}inParent(){let e=this.parent.contentDOM;for(let t=this.nodeDOM;t;t=t.parentNode)if(t==e)return!0;return!1}domFromPos(e){return{node:this.nodeDOM,offset:e}}localPosFromDOM(e,t,r){return e==this.nodeDOM?this.posAtStart+Math.min(t,this.node.text.length):super.localPosFromDOM(e,t,r)}ignoreMutation(e){return e.type!="characterData"&&e.type!="selection"}slice(e,t,r){let i=this.node.cut(e,t),l=document.createTextNode(i.text);return new Uc(this.parent,i,this.outerDeco,this.innerDeco,l,l,r)}markDirty(e,t){super.markDirty(e,t),this.dom!=this.nodeDOM&&(e==0||t==this.nodeDOM.nodeValue.length)&&(this.dirty=Jn)}get domAtom(){return!1}isText(e){return this.node.text==e}}class H3 extends mo{parseRule(){return{ignore:!0}}matchesHack(e){return this.dirty==Sn&&this.dom.nodeName==e}get domAtom(){return!0}get ignoreForCoords(){return this.dom.nodeName=="IMG"}}class KE extends ri{constructor(e,t,r,i,l,o,a,f,h,p){super(e,t,r,i,l,o,a,h,p),this.spec=f}update(e,t,r,i){if(this.dirty==Jn)return!1;if(this.spec.update&&(this.node.type==e.type||this.spec.multiType)){let l=this.spec.update(e,t,r);return l&&this.updateInner(e,t,r,i),l}else return!this.contentDOM&&!e.isLeaf?!1:super.update(e,t,r,i)}selectNode(){this.spec.selectNode?this.spec.selectNode():super.selectNode()}deselectNode(){this.spec.deselectNode?this.spec.deselectNode():super.deselectNode()}setSelection(e,t,r,i){this.spec.setSelection?this.spec.setSelection(e,t,r.root):super.setSelection(e,t,r,i)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}stopEvent(e){return this.spec.stopEvent?this.spec.stopEvent(e):!1}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}}function V3(n,e,t){let r=n.firstChild,i=!1;for(let l=0;l<e.length;l++){let o=e[l],a=o.dom;if(a.parentNode==n){for(;a!=r;)r=Py(r),i=!0;r=r.nextSibling}else i=!0,n.insertBefore(a,r);if(o instanceof rl){let f=r?r.previousSibling:n.lastChild;V3(o.contentDOM,o.children,t),r=f?f.nextSibling:n.firstChild}}for(;r;)r=Py(r),i=!0;i&&t.trackWrites==n&&(t.trackWrites=null)}const qs=function(n){n&&(this.nodeName=n)};qs.prototype=Object.create(null);const Fi=[new qs];function zp(n,e,t){if(n.length==0)return Fi;let r=t?Fi[0]:new qs,i=[r];for(let l=0;l<n.length;l++){let o=n[l].type.attrs;if(o){o.nodeName&&i.push(r=new qs(o.nodeName));for(let a in o){let f=o[a];f!=null&&(t&&i.length==1&&i.push(r=new qs(e.isInline?"span":"div")),a=="class"?r.class=(r.class?r.class+" ":"")+f:a=="style"?r.style=(r.style?r.style+";":"")+f:a!="nodeName"&&(r[a]=f))}}}return i}function U3(n,e,t,r){if(t==Fi&&r==Fi)return e;let i=e;for(let l=0;l<r.length;l++){let o=r[l],a=t[l];if(l){let f;a&&a.nodeName==o.nodeName&&i!=n&&(f=i.parentNode)&&f.nodeName.toLowerCase()==o.nodeName||(f=document.createElement(o.nodeName),f.pmIsDeco=!0,f.appendChild(i),a=Fi[0]),i=f}YE(i,a||Fi[0],o)}return i}function YE(n,e,t){for(let r in e)r!="class"&&r!="style"&&r!="nodeName"&&!(r in t)&&n.removeAttribute(r);for(let r in t)r!="class"&&r!="style"&&r!="nodeName"&&t[r]!=e[r]&&n.setAttribute(r,t[r]);if(e.class!=t.class){let r=e.class?e.class.split(" ").filter(Boolean):[],i=t.class?t.class.split(" ").filter(Boolean):[];for(let l=0;l<r.length;l++)i.indexOf(r[l])==-1&&n.classList.remove(r[l]);for(let l=0;l<i.length;l++)r.indexOf(i[l])==-1&&n.classList.add(i[l]);n.classList.length==0&&n.removeAttribute("class")}if(e.style!=t.style){if(e.style){let r=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g,i;for(;i=r.exec(e.style);)n.style.removeProperty(i[1])}t.style&&(n.style.cssText+=t.style)}}function j3(n,e,t){return U3(n,n,Fi,zp(e,t,n.nodeType!=1))}function pc(n,e){if(n.length!=e.length)return!1;for(let t=0;t<n.length;t++)if(!n[t].type.eq(e[t].type))return!1;return!0}function Py(n){let e=n.nextSibling;return n.parentNode.removeChild(n),e}class ZE{constructor(e,t,r){this.lock=t,this.view=r,this.index=0,this.stack=[],this.changed=!1,this.top=e,this.preMatch=XE(e.node.content,e)}destroyBetween(e,t){if(e!=t){for(let r=e;r<t;r++)this.top.children[r].destroy();this.top.children.splice(e,t-e),this.changed=!0}}destroyRest(){this.destroyBetween(this.index,this.top.children.length)}syncToMarks(e,t,r){let i=0,l=this.stack.length>>1,o=Math.min(l,e.length);for(;i<o&&(i==l-1?this.top:this.stack[i+1<<1]).matchesMark(e[i])&&e[i].type.spec.spanning!==!1;)i++;for(;i<l;)this.destroyRest(),this.top.dirty=Sn,this.index=this.stack.pop(),this.top=this.stack.pop(),l--;for(;l<e.length;){this.stack.push(this.top,this.index+1);let a=-1;for(let f=this.index;f<Math.min(this.index+3,this.top.children.length);f++){let h=this.top.children[f];if(h.matchesMark(e[l])&&!this.isLocked(h.dom)){a=f;break}}if(a>-1)a>this.index&&(this.changed=!0,this.destroyBetween(this.index,a)),this.top=this.top.children[this.index];else{let f=rl.create(this.top,e[l],t,r);this.top.children.splice(this.index,0,f),this.top=f,this.changed=!0}this.index=0,l++}}findNodeMatch(e,t,r,i){let l=-1,o;if(i>=this.preMatch.index&&(o=this.preMatch.matches[i-this.preMatch.index]).parent==this.top&&o.matchesNode(e,t,r))l=this.top.children.indexOf(o,this.index);else for(let a=this.index,f=Math.min(this.top.children.length,a+5);a<f;a++){let h=this.top.children[a];if(h.matchesNode(e,t,r)&&!this.preMatch.matched.has(h)){l=a;break}}return l<0?!1:(this.destroyBetween(this.index,l),this.index++,!0)}updateNodeAt(e,t,r,i,l){let o=this.top.children[i];return o.dirty==Jn&&o.dom==o.contentDOM&&(o.dirty=$i),o.update(e,t,r,l)?(this.destroyBetween(this.index,i),this.index++,!0):!1}findIndexWithChild(e){for(;;){let t=e.parentNode;if(!t)return-1;if(t==this.top.contentDOM){let r=e.pmViewDesc;if(r){for(let i=this.index;i<this.top.children.length;i++)if(this.top.children[i]==r)return i}return-1}e=t}}updateNextNode(e,t,r,i,l,o){for(let a=this.index;a<this.top.children.length;a++){let f=this.top.children[a];if(f instanceof ri){let h=this.preMatch.matched.get(f);if(h!=null&&h!=l)return!1;let p=f.dom,g,y=this.isLocked(p)&&!(e.isText&&f.node&&f.node.isText&&f.nodeDOM.nodeValue==e.text&&f.dirty!=Jn&&pc(t,f.outerDeco));if(!y&&f.update(e,t,r,i))return this.destroyBetween(this.index,a),f.dom!=p&&(this.changed=!0),this.index++,!0;if(!y&&(g=this.recreateWrapper(f,e,t,r,i,o)))return this.destroyBetween(this.index,a),this.top.children[this.index]=g,g.contentDOM&&(g.dirty=$i,g.updateChildren(i,o+1),g.dirty=Sn),this.changed=!0,this.index++,!0;break}}return!1}recreateWrapper(e,t,r,i,l,o){if(e.dirty||t.isAtom||!e.children.length||!e.node.content.eq(t.content)||!pc(r,e.outerDeco)||!i.eq(e.innerDeco))return null;let a=ri.create(this.top,t,r,i,l,o);if(a.contentDOM){a.children=e.children,e.children=[];for(let f of a.children)f.parent=a}return e.destroy(),a}addNode(e,t,r,i,l){let o=ri.create(this.top,e,t,r,i,l);o.contentDOM&&o.updateChildren(i,l+1),this.top.children.splice(this.index++,0,o),this.changed=!0}placeWidget(e,t,r){let i=this.index<this.top.children.length?this.top.children[this.index]:null;if(i&&i.matchesWidget(e)&&(e==i.widget||!i.widget.type.toDOM.parentNode))this.index++;else{let l=new q3(this.top,e,t,r);this.top.children.splice(this.index++,0,l),this.changed=!0}}addTextblockHacks(){let e=this.top.children[this.index-1],t=this.top;for(;e instanceof rl;)t=e,e=t.children[t.children.length-1];(!e||!(e instanceof Uc)||/\n$/.test(e.node.text)||this.view.requiresGeckoHackNode&&/\s$/.test(e.node.text))&&((_t||Ct)&&e&&e.dom.contentEditable=="false"&&this.addHackNode("IMG",t),this.addHackNode("BR",this.top))}addHackNode(e,t){if(t==this.top&&this.index<t.children.length&&t.children[this.index].matchesHack(e))this.index++;else{let r=document.createElement(e);e=="IMG"&&(r.className="ProseMirror-separator",r.alt=""),e=="BR"&&(r.className="ProseMirror-trailingBreak");let i=new H3(this.top,[],r,null);t!=this.top?t.children.push(i):t.children.splice(this.index++,0,i),this.changed=!0}}isLocked(e){return this.lock&&(e==this.lock||e.nodeType==1&&e.contains(this.lock.parentNode))}}function XE(n,e){let t=e,r=t.children.length,i=n.childCount,l=new Map,o=[];e:for(;i>0;){let a;for(;;)if(r){let h=t.children[r-1];if(h instanceof rl)t=h,r=h.children.length;else{a=h,r--;break}}else{if(t==e)break e;r=t.parent.children.indexOf(t),t=t.parent}let f=a.node;if(f){if(f!=n.child(i-1))break;--i,l.set(a,i),o.push(a)}}return{index:i,matched:l,matches:o.reverse()}}function QE(n,e){return n.type.side-e.type.side}function WE(n,e,t,r){let i=e.locals(n),l=0;if(i.length==0){for(let h=0;h<n.childCount;h++){let p=n.child(h);r(p,i,e.forChild(l,p),h),l+=p.nodeSize}return}let o=0,a=[],f=null;for(let h=0;;){let p,g;for(;o<i.length&&i[o].to==l;){let E=i[o++];E.widget&&(p?(g||(g=[p])).push(E):p=E)}if(p)if(g){g.sort(QE);for(let E=0;E<g.length;E++)t(g[E],h,!!f)}else t(p,h,!!f);let y,x;if(f)x=-1,y=f,f=null;else if(h<n.childCount)x=h,y=n.child(h++);else break;for(let E=0;E<a.length;E++)a[E].to<=l&&a.splice(E--,1);for(;o<i.length&&i[o].from<=l&&i[o].to>l;)a.push(i[o++]);let k=l+y.nodeSize;if(y.isText){let E=k;o<i.length&&i[o].from<E&&(E=i[o].from);for(let A=0;A<a.length;A++)a[A].to<E&&(E=a[A].to);E<k&&(f=y.cut(E-l),y=y.cut(0,E-l),k=E,x=-1)}else for(;o<i.length&&i[o].to<k;)o++;let C=y.isInline&&!y.isLeaf?a.filter(E=>!E.inline):a.slice();r(y,C,e.forChild(l,y),x),l=k}}function e8(n){if(n.nodeName=="UL"||n.nodeName=="OL"){let e=n.style.cssText;n.style.cssText=e+"; list-style: square !important",window.getComputedStyle(n).listStyle,n.style.cssText=e}}function t8(n,e,t,r){for(let i=0,l=0;i<n.childCount&&l<=r;){let o=n.child(i++),a=l;if(l+=o.nodeSize,!o.isText)continue;let f=o.text;for(;i<n.childCount;){let h=n.child(i++);if(l+=h.nodeSize,!h.isText)break;f+=h.text}if(l>=t){if(l>=r&&f.slice(r-e.length-a,r-a)==e)return r-e.length;let h=a<r?f.lastIndexOf(e,r-a-1):-1;if(h>=0&&h+e.length+a>=t)return a+h;if(t==r&&f.length>=r+e.length-a&&f.slice(r-a,r-a+e.length)==e)return r}}return-1}function Bp(n,e,t,r,i){let l=[];for(let o=0,a=0;o<n.length;o++){let f=n[o],h=a,p=a+=f.size;h>=t||p<=e?l.push(f):(h<e&&l.push(f.slice(0,e-h,r)),i&&(l.push(i),i=void 0),p>t&&l.push(f.slice(t-h,f.size,r)))}return l}function y0(n,e=null){let t=n.domSelectionRange(),r=n.state.doc;if(!t.focusNode)return null;let i=n.docView.nearestDesc(t.focusNode),l=i&&i.size==0,o=n.docView.posFromDOM(t.focusNode,t.focusOffset,1);if(o<0)return null;let a=r.resolve(o),f,h;if(Vc(t)){for(f=o;i&&!i.node;)i=i.parent;let g=i.node;if(i&&g.isAtom&&oe.isSelectable(g)&&i.parent&&!(g.isInline&&TE(t.focusNode,t.focusOffset,i.dom))){let y=i.posBefore;h=new oe(o==y?a:r.resolve(y))}}else{if(t instanceof n.dom.ownerDocument.defaultView.Selection&&t.rangeCount>1){let g=o,y=o;for(let x=0;x<t.rangeCount;x++){let k=t.getRangeAt(x);g=Math.min(g,n.docView.posFromDOM(k.startContainer,k.startOffset,1)),y=Math.max(y,n.docView.posFromDOM(k.endContainer,k.endOffset,-1))}if(g<0)return null;[f,o]=y==n.state.selection.anchor?[y,g]:[g,y],a=r.resolve(o)}else f=n.docView.posFromDOM(t.anchorNode,t.anchorOffset,1);if(f<0)return null}let p=r.resolve(f);if(!h){let g=e=="pointer"||n.state.selection.head<a.pos&&!l?1:-1;h=x0(n,p,a,g)}return h}function P3(n){return n.editable?n.hasFocus():G3(n)&&document.activeElement&&document.activeElement.contains(n.dom)}function yr(n,e=!1){let t=n.state.selection;if(J3(n,t),!!P3(n)){if(!e&&n.input.mouseDown&&n.input.mouseDown.allowDefault&&Ct){let r=n.domSelectionRange(),i=n.domObserver.currentSelection;if(r.anchorNode&&i.anchorNode&&nl(r.anchorNode,r.anchorOffset,i.anchorNode,i.anchorOffset)){n.input.mouseDown.delayedSelectionSync=!0,n.domObserver.setCurSelection();return}}if(n.domObserver.disconnectSelection(),n.cursorWrapper)r8(n);else{let{anchor:r,head:i}=t,l,o;Jy&&!(t instanceof he)&&(t.$from.parent.inlineContent||(l=Gy(n,t.from)),!t.empty&&!t.$from.parent.inlineContent&&(o=Gy(n,t.to))),n.docView.setSelection(r,i,n,e),Jy&&(l&&Ky(l),o&&Ky(o)),t.visible?n.dom.classList.remove("ProseMirror-hideselection"):(n.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&n8(n))}n.domObserver.setCurSelection(),n.domObserver.connectSelection()}}const Jy=_t||Ct&&R3<63;function Gy(n,e){let{node:t,offset:r}=n.docView.domFromPos(e,0),i=r<t.childNodes.length?t.childNodes[r]:null,l=r?t.childNodes[r-1]:null;if(_t&&i&&i.contentEditable=="false")return Lh(i);if((!i||i.contentEditable=="false")&&(!l||l.contentEditable=="false")){if(i)return Lh(i);if(l)return Lh(l)}}function Lh(n){return n.contentEditable="true",_t&&n.draggable&&(n.draggable=!1,n.wasDraggable=!0),n}function Ky(n){n.contentEditable="false",n.wasDraggable&&(n.draggable=!0,n.wasDraggable=null)}function n8(n){let e=n.dom.ownerDocument;e.removeEventListener("selectionchange",n.input.hideSelectionGuard);let t=n.domSelectionRange(),r=t.anchorNode,i=t.anchorOffset;e.addEventListener("selectionchange",n.input.hideSelectionGuard=()=>{(t.anchorNode!=r||t.anchorOffset!=i)&&(e.removeEventListener("selectionchange",n.input.hideSelectionGuard),setTimeout(()=>{(!P3(n)||n.state.selection.visible)&&n.dom.classList.remove("ProseMirror-hideselection")},20))})}function r8(n){let e=n.domSelection(),t=document.createRange();if(!e)return;let r=n.cursorWrapper.dom,i=r.nodeName=="IMG";i?t.setStart(r.parentNode,gt(r)+1):t.setStart(r,0),t.collapse(!0),e.removeAllRanges(),e.addRange(t),!i&&!n.state.selection.visible&&Vt&&ni<=11&&(r.disabled=!0,r.disabled=!1)}function J3(n,e){if(e instanceof oe){let t=n.docView.descAt(e.from);t!=n.lastSelectedViewDesc&&(Yy(n),t&&t.selectNode(),n.lastSelectedViewDesc=t)}else Yy(n)}function Yy(n){n.lastSelectedViewDesc&&(n.lastSelectedViewDesc.parent&&n.lastSelectedViewDesc.deselectNode(),n.lastSelectedViewDesc=void 0)}function x0(n,e,t,r){return n.someProp("createSelectionBetween",i=>i(n,e,t))||he.between(e,t,r)}function Zy(n){return n.editable&&!n.hasFocus()?!1:G3(n)}function G3(n){let e=n.domSelectionRange();if(!e.anchorNode)return!1;try{return n.dom.contains(e.anchorNode.nodeType==3?e.anchorNode.parentNode:e.anchorNode)&&(n.editable||n.dom.contains(e.focusNode.nodeType==3?e.focusNode.parentNode:e.focusNode))}catch{return!1}}function i8(n){let e=n.docView.domFromPos(n.state.selection.anchor,0),t=n.domSelectionRange();return nl(e.node,e.offset,t.anchorNode,t.anchorOffset)}function $p(n,e){let{$anchor:t,$head:r}=n.selection,i=e>0?t.max(r):t.min(r),l=i.parent.inlineContent?i.depth?n.doc.resolve(e>0?i.after():i.before()):null:i;return l&&de.findFrom(l,e)}function Gr(n,e){return n.dispatch(n.state.tr.setSelection(e).scrollIntoView()),!0}function Xy(n,e,t){let r=n.state.selection;if(r instanceof he)if(t.indexOf("s")>-1){let{$head:i}=r,l=i.textOffset?null:e<0?i.nodeBefore:i.nodeAfter;if(!l||l.isText||!l.isLeaf)return!1;let o=n.state.doc.resolve(i.pos+l.nodeSize*(e<0?-1:1));return Gr(n,new he(r.$anchor,o))}else if(r.empty){if(n.endOfTextblock(e>0?"forward":"backward")){let i=$p(n.state,e);return i&&i instanceof oe?Gr(n,i):!1}else if(!(yn&&t.indexOf("m")>-1)){let i=r.$head,l=i.textOffset?null:e<0?i.nodeBefore:i.nodeAfter,o;if(!l||l.isText)return!1;let a=e<0?i.pos-l.nodeSize:i.pos;return l.isAtom||(o=n.docView.descAt(a))&&!o.contentDOM?oe.isSelectable(l)?Gr(n,new oe(e<0?n.state.doc.resolve(i.pos-l.nodeSize):i)):po?Gr(n,new he(n.state.doc.resolve(e<0?a:a+l.nodeSize))):!1:!1}}else return!1;else{if(r instanceof oe&&r.node.isInline)return Gr(n,new he(e>0?r.$to:r.$from));{let i=$p(n.state,e);return i?Gr(n,i):!1}}}function mc(n){return n.nodeType==3?n.nodeValue.length:n.childNodes.length}function Hs(n,e){let t=n.pmViewDesc;return t&&t.size==0&&(e<0||n.nextSibling||n.nodeName!="BR")}function Zl(n,e){return e<0?l8(n):u8(n)}function l8(n){let e=n.domSelectionRange(),t=e.focusNode,r=e.focusOffset;if(!t)return;let i,l,o=!1;for(On&&t.nodeType==1&&r<mc(t)&&Hs(t.childNodes[r],-1)&&(o=!0);;)if(r>0){if(t.nodeType!=1)break;{let a=t.childNodes[r-1];if(Hs(a,-1))i=t,l=--r;else if(a.nodeType==3)t=a,r=t.nodeValue.length;else break}}else{if(K3(t))break;{let a=t.previousSibling;for(;a&&Hs(a,-1);)i=t.parentNode,l=gt(a),a=a.previousSibling;if(a)t=a,r=mc(t);else{if(t=t.parentNode,t==n.dom)break;r=0}}}o?Fp(n,t,r):i&&Fp(n,i,l)}function u8(n){let e=n.domSelectionRange(),t=e.focusNode,r=e.focusOffset;if(!t)return;let i=mc(t),l,o;for(;;)if(r<i){if(t.nodeType!=1)break;let a=t.childNodes[r];if(Hs(a,1))l=t,o=++r;else break}else{if(K3(t))break;{let a=t.nextSibling;for(;a&&Hs(a,1);)l=a.parentNode,o=gt(a)+1,a=a.nextSibling;if(a)t=a,r=0,i=mc(t);else{if(t=t.parentNode,t==n.dom)break;r=i=0}}}l&&Fp(n,l,o)}function K3(n){let e=n.pmViewDesc;return e&&e.node&&e.node.isBlock}function s8(n,e){for(;n&&e==n.childNodes.length&&!ho(n);)e=gt(n)+1,n=n.parentNode;for(;n&&e<n.childNodes.length;){let t=n.childNodes[e];if(t.nodeType==3)return t;if(t.nodeType==1&&t.contentEditable=="false")break;n=t,e=0}}function o8(n,e){for(;n&&!e&&!ho(n);)e=gt(n),n=n.parentNode;for(;n&&e;){let t=n.childNodes[e-1];if(t.nodeType==3)return t;if(t.nodeType==1&&t.contentEditable=="false")break;n=t,e=n.childNodes.length}}function Fp(n,e,t){if(e.nodeType!=3){let l,o;(o=s8(e,t))?(e=o,t=0):(l=o8(e,t))&&(e=l,t=l.nodeValue.length)}let r=n.domSelection();if(!r)return;if(Vc(r)){let l=document.createRange();l.setEnd(e,t),l.setStart(e,t),r.removeAllRanges(),r.addRange(l)}else r.extend&&r.extend(e,t);n.domObserver.setCurSelection();let{state:i}=n;setTimeout(()=>{n.state==i&&yr(n)},50)}function Qy(n,e){let t=n.state.doc.resolve(e);if(!(Ct||OE)&&t.parent.inlineContent){let i=n.coordsAtPos(e);if(e>t.start()){let l=n.coordsAtPos(e-1),o=(l.top+l.bottom)/2;if(o>i.top&&o<i.bottom&&Math.abs(l.left-i.left)>1)return l.left<i.left?"ltr":"rtl"}if(e<t.end()){let l=n.coordsAtPos(e+1),o=(l.top+l.bottom)/2;if(o>i.top&&o<i.bottom&&Math.abs(l.left-i.left)>1)return l.left>i.left?"ltr":"rtl"}}return getComputedStyle(n.dom).direction=="rtl"?"rtl":"ltr"}function Wy(n,e,t){let r=n.state.selection;if(r instanceof he&&!r.empty||t.indexOf("s")>-1||yn&&t.indexOf("m")>-1)return!1;let{$from:i,$to:l}=r;if(!i.parent.inlineContent||n.endOfTextblock(e<0?"up":"down")){let o=$p(n.state,e);if(o&&o instanceof oe)return Gr(n,o)}if(!i.parent.inlineContent){let o=e<0?i:l,a=r instanceof br?de.near(o,e):de.findFrom(o,e);return a?Gr(n,a):!1}return!1}function e2(n,e){if(!(n.state.selection instanceof he))return!0;let{$head:t,$anchor:r,empty:i}=n.state.selection;if(!t.sameParent(r))return!0;if(!i)return!1;if(n.endOfTextblock(e>0?"forward":"backward"))return!0;let l=!t.textOffset&&(e<0?t.nodeBefore:t.nodeAfter);if(l&&!l.isText){let o=n.state.tr;return e<0?o.delete(t.pos-l.nodeSize,t.pos):o.delete(t.pos,t.pos+l.nodeSize),n.dispatch(o),!0}return!1}function t2(n,e,t){n.domObserver.stop(),e.contentEditable=t,n.domObserver.start()}function a8(n){if(!_t||n.state.selection.$head.parentOffset>0)return!1;let{focusNode:e,focusOffset:t}=n.domSelectionRange();if(e&&e.nodeType==1&&t==0&&e.firstChild&&e.firstChild.contentEditable=="false"){let r=e.firstChild;t2(n,r,"true"),setTimeout(()=>t2(n,r,"false"),20)}return!1}function c8(n){let e="";return n.ctrlKey&&(e+="c"),n.metaKey&&(e+="m"),n.altKey&&(e+="a"),n.shiftKey&&(e+="s"),e}function f8(n,e){let t=e.keyCode,r=c8(e);if(t==8||yn&&t==72&&r=="c")return e2(n,-1)||Zl(n,-1);if(t==46&&!e.shiftKey||yn&&t==68&&r=="c")return e2(n,1)||Zl(n,1);if(t==13||t==27)return!0;if(t==37||yn&&t==66&&r=="c"){let i=t==37?Qy(n,n.state.selection.from)=="ltr"?-1:1:-1;return Xy(n,i,r)||Zl(n,i)}else if(t==39||yn&&t==70&&r=="c"){let i=t==39?Qy(n,n.state.selection.from)=="ltr"?1:-1:1;return Xy(n,i,r)||Zl(n,i)}else{if(t==38||yn&&t==80&&r=="c")return Wy(n,-1,r)||Zl(n,-1);if(t==40||yn&&t==78&&r=="c")return a8(n)||Wy(n,1,r)||Zl(n,1);if(r==(yn?"m":"c")&&(t==66||t==73||t==89||t==90))return!0}return!1}function k0(n,e){n.someProp("transformCopied",x=>{e=x(e,n)});let t=[],{content:r,openStart:i,openEnd:l}=e;for(;i>1&&l>1&&r.childCount==1&&r.firstChild.childCount==1;){i--,l--;let x=r.firstChild;t.push(x.type.name,x.attrs!=x.type.defaultAttrs?x.attrs:null),r=x.content}let o=n.someProp("clipboardSerializer")||co.fromSchema(n.state.schema),a=ek(),f=a.createElement("div");f.appendChild(o.serializeFragment(r,{document:a}));let h=f.firstChild,p,g=0;for(;h&&h.nodeType==1&&(p=W3[h.nodeName.toLowerCase()]);){for(let x=p.length-1;x>=0;x--){let k=a.createElement(p[x]);for(;f.firstChild;)k.appendChild(f.firstChild);f.appendChild(k),g++}h=f.firstChild}h&&h.nodeType==1&&h.setAttribute("data-pm-slice",`${i} ${l}${g?` -${g}`:""} ${JSON.stringify(t)}`);let y=n.someProp("clipboardTextSerializer",x=>x(e,n))||e.content.textBetween(0,e.content.size,`

`);return{dom:f,text:y,slice:e}}function Y3(n,e,t,r,i){let l=i.parent.type.spec.code,o,a;if(!t&&!e)return null;let f=e&&(r||l||!t);if(f){if(n.someProp("transformPastedText",y=>{e=y(e,l||r,n)}),l)return e?new Y(j.from(n.state.schema.text(e.replace(/\r\n?/g,`
`))),0,0):Y.empty;let g=n.someProp("clipboardTextParser",y=>y(e,i,r,n));if(g)a=g;else{let y=i.marks(),{schema:x}=n.state,k=co.fromSchema(x);o=document.createElement("div"),e.split(/(?:\r\n?|\n)+/).forEach(C=>{let E=o.appendChild(document.createElement("p"));C&&E.appendChild(k.serializeNode(x.text(C,y)))})}}else n.someProp("transformPastedHTML",g=>{t=g(t,n)}),o=m8(t),po&&g8(o);let h=o&&o.querySelector("[data-pm-slice]"),p=h&&/^(\d+) (\d+)(?: -(\d+))? (.*)/.exec(h.getAttribute("data-pm-slice")||"");if(p&&p[3])for(let g=+p[3];g>0;g--){let y=o.firstChild;for(;y&&y.nodeType!=1;)y=y.nextSibling;if(!y)break;o=y}if(a||(a=(n.someProp("clipboardParser")||n.someProp("domParser")||ou.fromSchema(n.state.schema)).parseSlice(o,{preserveWhitespace:!!(f||p),context:i,ruleFromNode(y){return y.nodeName=="BR"&&!y.nextSibling&&y.parentNode&&!d8.test(y.parentNode.nodeName)?{ignore:!0}:null}})),p)a=b8(n2(a,+p[1],+p[2]),p[4]);else if(a=Y.maxOpen(h8(a.content,i),!0),a.openStart||a.openEnd){let g=0,y=0;for(let x=a.content.firstChild;g<a.openStart&&!x.type.spec.isolating;g++,x=x.firstChild);for(let x=a.content.lastChild;y<a.openEnd&&!x.type.spec.isolating;y++,x=x.lastChild);a=n2(a,g,y)}return n.someProp("transformPasted",g=>{a=g(a,n)}),a}const d8=/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/i;function h8(n,e){if(n.childCount<2)return n;for(let t=e.depth;t>=0;t--){let i=e.node(t).contentMatchAt(e.index(t)),l,o=[];if(n.forEach(a=>{if(!o)return;let f=i.findWrapping(a.type),h;if(!f)return o=null;if(h=o.length&&l.length&&X3(f,l,a,o[o.length-1],0))o[o.length-1]=h;else{o.length&&(o[o.length-1]=Q3(o[o.length-1],l.length));let p=Z3(a,f);o.push(p),i=i.matchType(p.type),l=f}}),o)return j.from(o)}return n}function Z3(n,e,t=0){for(let r=e.length-1;r>=t;r--)n=e[r].create(null,j.from(n));return n}function X3(n,e,t,r,i){if(i<n.length&&i<e.length&&n[i]==e[i]){let l=X3(n,e,t,r.lastChild,i+1);if(l)return r.copy(r.content.replaceChild(r.childCount-1,l));if(r.contentMatchAt(r.childCount).matchType(i==n.length-1?t.type:n[i+1]))return r.copy(r.content.append(j.from(Z3(t,n,i+1))))}}function Q3(n,e){if(e==0)return n;let t=n.content.replaceChild(n.childCount-1,Q3(n.lastChild,e-1)),r=n.contentMatchAt(n.childCount).fillBefore(j.empty,!0);return n.copy(t.append(r))}function Lp(n,e,t,r,i,l){let o=e<0?n.firstChild:n.lastChild,a=o.content;return n.childCount>1&&(l=0),i<r-1&&(a=Lp(a,e,t,r,i+1,l)),i>=t&&(a=e<0?o.contentMatchAt(0).fillBefore(a,l<=i).append(a):a.append(o.contentMatchAt(o.childCount).fillBefore(j.empty,!0))),n.replaceChild(e<0?0:n.childCount-1,o.copy(a))}function n2(n,e,t){return e<n.openStart&&(n=new Y(Lp(n.content,-1,e,n.openStart,0,n.openEnd),e,n.openEnd)),t<n.openEnd&&(n=new Y(Lp(n.content,1,t,n.openEnd,0,0),n.openStart,t)),n}const W3={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]};let r2=null;function ek(){return r2||(r2=document.implementation.createHTMLDocument("title"))}let Ih=null;function p8(n){let e=window.trustedTypes;return e?(Ih||(Ih=e.defaultPolicy||e.createPolicy("ProseMirrorClipboard",{createHTML:t=>t})),Ih.createHTML(n)):n}function m8(n){let e=/^(\s*<meta [^>]*>)*/.exec(n);e&&(n=n.slice(e[0].length));let t=ek().createElement("div"),r=/<([a-z][^>\s]+)/i.exec(n),i;if((i=r&&W3[r[1].toLowerCase()])&&(n=i.map(l=>"<"+l+">").join("")+n+i.map(l=>"</"+l+">").reverse().join("")),t.innerHTML=p8(n),i)for(let l=0;l<i.length;l++)t=t.querySelector(i[l])||t;return t}function g8(n){let e=n.querySelectorAll(Ct?"span:not([class]):not([style])":"span.Apple-converted-space");for(let t=0;t<e.length;t++){let r=e[t];r.childNodes.length==1&&r.textContent==""&&r.parentNode&&r.parentNode.replaceChild(n.ownerDocument.createTextNode(" "),r)}}function b8(n,e){if(!n.size)return n;let t=n.content.firstChild.type.schema,r;try{r=JSON.parse(e)}catch{return n}let{content:i,openStart:l,openEnd:o}=n;for(let a=r.length-2;a>=0;a-=2){let f=t.nodes[r[a]];if(!f||f.hasRequiredAttrs())break;i=j.from(f.create(r[a+1],i)),l++,o++}return new Y(i,l,o)}const Nt={},Rt={},y8={touchstart:!0,touchmove:!0};class x8{constructor(){this.shiftKey=!1,this.mouseDown=null,this.lastKeyCode=null,this.lastKeyCodeTime=0,this.lastClick={time:0,x:0,y:0,type:"",button:0},this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastIOSEnter=0,this.lastIOSEnterFallbackTimeout=-1,this.lastFocus=0,this.lastTouch=0,this.lastChromeDelete=0,this.composing=!1,this.compositionNode=null,this.composingTimeout=-1,this.compositionNodes=[],this.compositionEndedAt=-2e8,this.compositionID=1,this.compositionPendingChanges=0,this.domChangeCount=0,this.eventHandlers=Object.create(null),this.hideSelectionGuard=null}}function k8(n){for(let e in Nt){let t=Nt[e];n.dom.addEventListener(e,n.input.eventHandlers[e]=r=>{C8(n,r)&&!S0(n,r)&&(n.editable||!(r.type in Rt))&&t(n,r)},y8[e]?{passive:!0}:void 0)}_t&&n.dom.addEventListener("input",()=>null),Ip(n)}function Qr(n,e){n.input.lastSelectionOrigin=e,n.input.lastSelectionTime=Date.now()}function S8(n){n.domObserver.stop();for(let e in n.input.eventHandlers)n.dom.removeEventListener(e,n.input.eventHandlers[e]);clearTimeout(n.input.composingTimeout),clearTimeout(n.input.lastIOSEnterFallbackTimeout)}function Ip(n){n.someProp("handleDOMEvents",e=>{for(let t in e)n.input.eventHandlers[t]||n.dom.addEventListener(t,n.input.eventHandlers[t]=r=>S0(n,r))})}function S0(n,e){return n.someProp("handleDOMEvents",t=>{let r=t[e.type];return r?r(n,e)||e.defaultPrevented:!1})}function C8(n,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let t=e.target;t!=n.dom;t=t.parentNode)if(!t||t.nodeType==11||t.pmViewDesc&&t.pmViewDesc.stopEvent(e))return!1;return!0}function v8(n,e){!S0(n,e)&&Nt[e.type]&&(n.editable||!(e.type in Rt))&&Nt[e.type](n,e)}Rt.keydown=(n,e)=>{let t=e;if(n.input.shiftKey=t.keyCode==16||t.shiftKey,!nk(n,t)&&(n.input.lastKeyCode=t.keyCode,n.input.lastKeyCodeTime=Date.now(),!(mr&&Ct&&t.keyCode==13)))if(t.keyCode!=229&&n.domObserver.forceFlush(),pu&&t.keyCode==13&&!t.ctrlKey&&!t.altKey&&!t.metaKey){let r=Date.now();n.input.lastIOSEnter=r,n.input.lastIOSEnterFallbackTimeout=setTimeout(()=>{n.input.lastIOSEnter==r&&(n.someProp("handleKeyDown",i=>i(n,Ri(13,"Enter"))),n.input.lastIOSEnter=0)},200)}else n.someProp("handleKeyDown",r=>r(n,t))||f8(n,t)?t.preventDefault():Qr(n,"key")};Rt.keyup=(n,e)=>{e.keyCode==16&&(n.input.shiftKey=!1)};Rt.keypress=(n,e)=>{let t=e;if(nk(n,t)||!t.charCode||t.ctrlKey&&!t.altKey||yn&&t.metaKey)return;if(n.someProp("handleKeyPress",i=>i(n,t))){t.preventDefault();return}let r=n.state.selection;if(!(r instanceof he)||!r.$from.sameParent(r.$to)){let i=String.fromCharCode(t.charCode);!/[\r\n]/.test(i)&&!n.someProp("handleTextInput",l=>l(n,r.$from.pos,r.$to.pos,i))&&n.dispatch(n.state.tr.insertText(i).scrollIntoView()),t.preventDefault()}};function jc(n){return{left:n.clientX,top:n.clientY}}function E8(n,e){let t=e.x-n.clientX,r=e.y-n.clientY;return t*t+r*r<100}function C0(n,e,t,r,i){if(r==-1)return!1;let l=n.state.doc.resolve(r);for(let o=l.depth+1;o>0;o--)if(n.someProp(e,a=>o>l.depth?a(n,t,l.nodeAfter,l.before(o),i,!0):a(n,t,l.node(o),l.before(o),i,!1)))return!0;return!1}function au(n,e,t){if(n.focused||n.focus(),n.state.selection.eq(e))return;let r=n.state.tr.setSelection(e);r.setMeta("pointer",!0),n.dispatch(r)}function M8(n,e){if(e==-1)return!1;let t=n.state.doc.resolve(e),r=t.nodeAfter;return r&&r.isAtom&&oe.isSelectable(r)?(au(n,new oe(t)),!0):!1}function A8(n,e){if(e==-1)return!1;let t=n.state.selection,r,i;t instanceof oe&&(r=t.node);let l=n.state.doc.resolve(e);for(let o=l.depth+1;o>0;o--){let a=o>l.depth?l.nodeAfter:l.node(o);if(oe.isSelectable(a)){r&&t.$from.depth>0&&o>=t.$from.depth&&l.before(t.$from.depth+1)==t.$from.pos?i=l.before(t.$from.depth):i=l.before(o);break}}return i!=null?(au(n,oe.create(n.state.doc,i)),!0):!1}function T8(n,e,t,r,i){return C0(n,"handleClickOn",e,t,r)||n.someProp("handleClick",l=>l(n,e,r))||(i?A8(n,t):M8(n,t))}function D8(n,e,t,r){return C0(n,"handleDoubleClickOn",e,t,r)||n.someProp("handleDoubleClick",i=>i(n,e,r))}function w8(n,e,t,r){return C0(n,"handleTripleClickOn",e,t,r)||n.someProp("handleTripleClick",i=>i(n,e,r))||O8(n,t,r)}function O8(n,e,t){if(t.button!=0)return!1;let r=n.state.doc;if(e==-1)return r.inlineContent?(au(n,he.create(r,0,r.content.size)),!0):!1;let i=r.resolve(e);for(let l=i.depth+1;l>0;l--){let o=l>i.depth?i.nodeAfter:i.node(l),a=i.before(l);if(o.inlineContent)au(n,he.create(r,a+1,a+1+o.content.size));else if(oe.isSelectable(o))au(n,oe.create(r,a));else continue;return!0}}function v0(n){return gc(n)}const tk=yn?"metaKey":"ctrlKey";Nt.mousedown=(n,e)=>{let t=e;n.input.shiftKey=t.shiftKey;let r=v0(n),i=Date.now(),l="singleClick";i-n.input.lastClick.time<500&&E8(t,n.input.lastClick)&&!t[tk]&&n.input.lastClick.button==t.button&&(n.input.lastClick.type=="singleClick"?l="doubleClick":n.input.lastClick.type=="doubleClick"&&(l="tripleClick")),n.input.lastClick={time:i,x:t.clientX,y:t.clientY,type:l,button:t.button};let o=n.posAtCoords(jc(t));o&&(l=="singleClick"?(n.input.mouseDown&&n.input.mouseDown.done(),n.input.mouseDown=new _8(n,o,t,!!r)):(l=="doubleClick"?D8:w8)(n,o.pos,o.inside,t)?t.preventDefault():Qr(n,"pointer"))};let _8=class{constructor(e,t,r,i){this.view=e,this.pos=t,this.event=r,this.flushed=i,this.delayedSelectionSync=!1,this.mightDrag=null,this.startDoc=e.state.doc,this.selectNode=!!r[tk],this.allowDefault=r.shiftKey;let l,o;if(t.inside>-1)l=e.state.doc.nodeAt(t.inside),o=t.inside;else{let p=e.state.doc.resolve(t.pos);l=p.parent,o=p.depth?p.before():0}const a=i?null:r.target,f=a?e.docView.nearestDesc(a,!0):null;this.target=f&&f.dom.nodeType==1?f.dom:null;let{selection:h}=e.state;(r.button==0&&l.type.spec.draggable&&l.type.spec.selectable!==!1||h instanceof oe&&h.from<=o&&h.to>o)&&(this.mightDrag={node:l,pos:o,addAttr:!!(this.target&&!this.target.draggable),setUneditable:!!(this.target&&On&&!this.target.hasAttribute("contentEditable"))}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout(()=>{this.view.input.mouseDown==this&&this.target.setAttribute("contentEditable","false")},20),this.view.domObserver.start()),e.root.addEventListener("mouseup",this.up=this.up.bind(this)),e.root.addEventListener("mousemove",this.move=this.move.bind(this)),Qr(e,"pointer")}done(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.delayedSelectionSync&&setTimeout(()=>yr(this.view)),this.view.input.mouseDown=null}up(e){if(this.done(),!this.view.dom.contains(e.target))return;let t=this.pos;this.view.state.doc!=this.startDoc&&(t=this.view.posAtCoords(jc(e))),this.updateAllowDefault(e),this.allowDefault||!t?Qr(this.view,"pointer"):T8(this.view,t.pos,t.inside,e,this.selectNode)?e.preventDefault():e.button==0&&(this.flushed||_t&&this.mightDrag&&!this.mightDrag.node.isAtom||Ct&&!this.view.state.selection.visible&&Math.min(Math.abs(t.pos-this.view.state.selection.from),Math.abs(t.pos-this.view.state.selection.to))<=2)?(au(this.view,de.near(this.view.state.doc.resolve(t.pos))),e.preventDefault()):Qr(this.view,"pointer")}move(e){this.updateAllowDefault(e),Qr(this.view,"pointer"),e.buttons==0&&this.done()}updateAllowDefault(e){!this.allowDefault&&(Math.abs(this.event.x-e.clientX)>4||Math.abs(this.event.y-e.clientY)>4)&&(this.allowDefault=!0)}};Nt.touchstart=n=>{n.input.lastTouch=Date.now(),v0(n),Qr(n,"pointer")};Nt.touchmove=n=>{n.input.lastTouch=Date.now(),Qr(n,"pointer")};Nt.contextmenu=n=>v0(n);function nk(n,e){return n.composing?!0:_t&&Math.abs(e.timeStamp-n.input.compositionEndedAt)<500?(n.input.compositionEndedAt=-2e8,!0):!1}const N8=mr?5e3:-1;Rt.compositionstart=Rt.compositionupdate=n=>{if(!n.composing){n.domObserver.flush();let{state:e}=n,t=e.selection.$to;if(e.selection instanceof he&&(e.storedMarks||!t.textOffset&&t.parentOffset&&t.nodeBefore.marks.some(r=>r.type.spec.inclusive===!1)))n.markCursor=n.state.storedMarks||t.marks(),gc(n,!0),n.markCursor=null;else if(gc(n,!e.selection.empty),On&&e.selection.empty&&t.parentOffset&&!t.textOffset&&t.nodeBefore.marks.length){let r=n.domSelectionRange();for(let i=r.focusNode,l=r.focusOffset;i&&i.nodeType==1&&l!=0;){let o=l<0?i.lastChild:i.childNodes[l-1];if(!o)break;if(o.nodeType==3){let a=n.domSelection();a&&a.collapse(o,o.nodeValue.length);break}else i=o,l=-1}}n.input.composing=!0}rk(n,N8)};Rt.compositionend=(n,e)=>{n.composing&&(n.input.composing=!1,n.input.compositionEndedAt=e.timeStamp,n.input.compositionPendingChanges=n.domObserver.pendingRecords().length?n.input.compositionID:0,n.input.compositionNode=null,n.input.compositionPendingChanges&&Promise.resolve().then(()=>n.domObserver.flush()),n.input.compositionID++,rk(n,20))};function rk(n,e){clearTimeout(n.input.composingTimeout),e>-1&&(n.input.composingTimeout=setTimeout(()=>gc(n),e))}function ik(n){for(n.composing&&(n.input.composing=!1,n.input.compositionEndedAt=z8());n.input.compositionNodes.length>0;)n.input.compositionNodes.pop().markParentsDirty()}function R8(n){let e=n.domSelectionRange();if(!e.focusNode)return null;let t=ME(e.focusNode,e.focusOffset),r=AE(e.focusNode,e.focusOffset);if(t&&r&&t!=r){let i=r.pmViewDesc,l=n.domObserver.lastChangedTextNode;if(t==l||r==l)return l;if(!i||!i.isText(r.nodeValue))return r;if(n.input.compositionNode==r){let o=t.pmViewDesc;if(!(!o||!o.isText(t.nodeValue)))return r}}return t||r}function z8(){let n=document.createEvent("Event");return n.initEvent("event",!0,!0),n.timeStamp}function gc(n,e=!1){if(!(mr&&n.domObserver.flushingSoon>=0)){if(n.domObserver.forceFlush(),ik(n),e||n.docView&&n.docView.dirty){let t=y0(n),r=n.state.selection;return t&&!t.eq(r)?n.dispatch(n.state.tr.setSelection(t)):(n.markCursor||e)&&!r.$from.node(r.$from.sharedDepth(r.to)).inlineContent?n.dispatch(n.state.tr.deleteSelection()):n.updateState(n.state),!0}return!1}}function B8(n,e){if(!n.dom.parentNode)return;let t=n.dom.parentNode.appendChild(document.createElement("div"));t.appendChild(e),t.style.cssText="position: fixed; left: -10000px; top: 10px";let r=getSelection(),i=document.createRange();i.selectNodeContents(e),n.dom.blur(),r.removeAllRanges(),r.addRange(i),setTimeout(()=>{t.parentNode&&t.parentNode.removeChild(t),n.focus()},50)}const Ys=Vt&&ni<15||pu&&_E<604;Nt.copy=Rt.cut=(n,e)=>{let t=e,r=n.state.selection,i=t.type=="cut";if(r.empty)return;let l=Ys?null:t.clipboardData,o=r.content(),{dom:a,text:f}=k0(n,o);l?(t.preventDefault(),l.clearData(),l.setData("text/html",a.innerHTML),l.setData("text/plain",f)):B8(n,a),i&&n.dispatch(n.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))};function $8(n){return n.openStart==0&&n.openEnd==0&&n.content.childCount==1?n.content.firstChild:null}function F8(n,e){if(!n.dom.parentNode)return;let t=n.input.shiftKey||n.state.selection.$from.parent.type.spec.code,r=n.dom.parentNode.appendChild(document.createElement(t?"textarea":"div"));t||(r.contentEditable="true"),r.style.cssText="position: fixed; left: -10000px; top: 10px",r.focus();let i=n.input.shiftKey&&n.input.lastKeyCode!=45;setTimeout(()=>{n.focus(),r.parentNode&&r.parentNode.removeChild(r),t?Zs(n,r.value,null,i,e):Zs(n,r.textContent,r.innerHTML,i,e)},50)}function Zs(n,e,t,r,i){let l=Y3(n,e,t,r,n.state.selection.$from);if(n.someProp("handlePaste",f=>f(n,i,l||Y.empty)))return!0;if(!l)return!1;let o=$8(l),a=o?n.state.tr.replaceSelectionWith(o,r):n.state.tr.replaceSelection(l);return n.dispatch(a.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}function lk(n){let e=n.getData("text/plain")||n.getData("Text");if(e)return e;let t=n.getData("text/uri-list");return t?t.replace(/\r?\n/g," "):""}Rt.paste=(n,e)=>{let t=e;if(n.composing&&!mr)return;let r=Ys?null:t.clipboardData,i=n.input.shiftKey&&n.input.lastKeyCode!=45;r&&Zs(n,lk(r),r.getData("text/html"),i,t)?t.preventDefault():F8(n,t)};let uk=class{constructor(e,t,r){this.slice=e,this.move=t,this.node=r}};const L8=yn?"altKey":"ctrlKey";function sk(n,e){let t=n.someProp("dragCopies",r=>!r(e));return t??!e[L8]}Nt.dragstart=(n,e)=>{let t=e,r=n.input.mouseDown;if(r&&r.done(),!t.dataTransfer)return;let i=n.state.selection,l=i.empty?null:n.posAtCoords(jc(t)),o;if(!(l&&l.pos>=i.from&&l.pos<=(i instanceof oe?i.to-1:i.to))){if(r&&r.mightDrag)o=oe.create(n.state.doc,r.mightDrag.pos);else if(t.target&&t.target.nodeType==1){let g=n.docView.nearestDesc(t.target,!0);g&&g.node.type.spec.draggable&&g!=n.docView&&(o=oe.create(n.state.doc,g.posBefore))}}let a=(o||n.state.selection).content(),{dom:f,text:h,slice:p}=k0(n,a);(!t.dataTransfer.files.length||!Ct||R3>120)&&t.dataTransfer.clearData(),t.dataTransfer.setData(Ys?"Text":"text/html",f.innerHTML),t.dataTransfer.effectAllowed="copyMove",Ys||t.dataTransfer.setData("text/plain",h),n.dragging=new uk(p,sk(n,t),o)};Nt.dragend=n=>{let e=n.dragging;window.setTimeout(()=>{n.dragging==e&&(n.dragging=null)},50)};Rt.dragover=Rt.dragenter=(n,e)=>e.preventDefault();Rt.drop=(n,e)=>{let t=e,r=n.dragging;if(n.dragging=null,!t.dataTransfer)return;let i=n.posAtCoords(jc(t));if(!i)return;let l=n.state.doc.resolve(i.pos),o=r&&r.slice;o?n.someProp("transformPasted",k=>{o=k(o,n)}):o=Y3(n,lk(t.dataTransfer),Ys?null:t.dataTransfer.getData("text/html"),!1,l);let a=!!(r&&sk(n,t));if(n.someProp("handleDrop",k=>k(n,t,o||Y.empty,a))){t.preventDefault();return}if(!o)return;t.preventDefault();let f=o?k3(n.state.doc,l.pos,o):l.pos;f==null&&(f=l.pos);let h=n.state.tr;if(a){let{node:k}=r;k?k.replace(h):h.deleteSelection()}let p=h.mapping.map(f),g=o.openStart==0&&o.openEnd==0&&o.content.childCount==1,y=h.doc;if(g?h.replaceRangeWith(p,p,o.content.firstChild):h.replaceRange(p,p,o),h.doc.eq(y))return;let x=h.doc.resolve(p);if(g&&oe.isSelectable(o.content.firstChild)&&x.nodeAfter&&x.nodeAfter.sameMarkup(o.content.firstChild))h.setSelection(new oe(x));else{let k=h.mapping.map(f);h.mapping.maps[h.mapping.maps.length-1].forEach((C,E,A,N)=>k=N),h.setSelection(x0(n,x,h.doc.resolve(k)))}n.focus(),n.dispatch(h.setMeta("uiEvent","drop"))};Nt.focus=n=>{n.input.lastFocus=Date.now(),n.focused||(n.domObserver.stop(),n.dom.classList.add("ProseMirror-focused"),n.domObserver.start(),n.focused=!0,setTimeout(()=>{n.docView&&n.hasFocus()&&!n.domObserver.currentSelection.eq(n.domSelectionRange())&&yr(n)},20))};Nt.blur=(n,e)=>{let t=e;n.focused&&(n.domObserver.stop(),n.dom.classList.remove("ProseMirror-focused"),n.domObserver.start(),t.relatedTarget&&n.dom.contains(t.relatedTarget)&&n.domObserver.currentSelection.clear(),n.focused=!1)};Nt.beforeinput=(n,e)=>{if(Ct&&mr&&e.inputType=="deleteContentBackward"){n.domObserver.flushSoon();let{domChangeCount:r}=n.input;setTimeout(()=>{if(n.input.domChangeCount!=r||(n.dom.blur(),n.focus(),n.someProp("handleKeyDown",l=>l(n,Ri(8,"Backspace")))))return;let{$cursor:i}=n.state.selection;i&&i.pos>0&&n.dispatch(n.state.tr.delete(i.pos-1,i.pos).scrollIntoView())},50)}};for(let n in Rt)Nt[n]=Rt[n];function Xs(n,e){if(n==e)return!0;for(let t in n)if(n[t]!==e[t])return!1;for(let t in e)if(!(t in n))return!1;return!0}let i2=class ok{constructor(e,t){this.toDOM=e,this.spec=t||Ji,this.side=this.spec.side||0}map(e,t,r,i){let{pos:l,deleted:o}=e.mapResult(t.from+i,this.side<0?-1:1);return o?null:new ll(l-r,l-r,this)}valid(){return!0}eq(e){return this==e||e instanceof ok&&(this.spec.key&&this.spec.key==e.spec.key||this.toDOM==e.toDOM&&Xs(this.spec,e.spec))}destroy(e){this.spec.destroy&&this.spec.destroy(e)}},Vs=class qp{constructor(e,t){this.attrs=e,this.spec=t||Ji}map(e,t,r,i){let l=e.map(t.from+i,this.spec.inclusiveStart?-1:1)-r,o=e.map(t.to+i,this.spec.inclusiveEnd?1:-1)-r;return l>=o?null:new ll(l,o,this)}valid(e,t){return t.from<t.to}eq(e){return this==e||e instanceof qp&&Xs(this.attrs,e.attrs)&&Xs(this.spec,e.spec)}static is(e){return e.type instanceof qp}destroy(){}},I8=class ak{constructor(e,t){this.attrs=e,this.spec=t||Ji}map(e,t,r,i){let l=e.mapResult(t.from+i,1);if(l.deleted)return null;let o=e.mapResult(t.to+i,-1);return o.deleted||o.pos<=l.pos?null:new ll(l.pos-r,o.pos-r,this)}valid(e,t){let{index:r,offset:i}=e.content.findIndex(t.from),l;return i==t.from&&!(l=e.child(r)).isText&&i+l.nodeSize==t.to}eq(e){return this==e||e instanceof ak&&Xs(this.attrs,e.attrs)&&Xs(this.spec,e.spec)}destroy(){}},ll=class Bs{constructor(e,t,r){this.from=e,this.to=t,this.type=r}copy(e,t){return new Bs(e,t,this.type)}eq(e,t=0){return this.type.eq(e.type)&&this.from+t==e.from&&this.to+t==e.to}map(e,t,r){return this.type.map(e,this,t,r)}static widget(e,t,r){return new Bs(e,e,new i2(t,r))}static inline(e,t,r,i){return new Bs(e,t,new Vs(r,i))}static node(e,t,r,i){return new Bs(e,t,new I8(r,i))}get spec(){return this.type.spec}get inline(){return this.type instanceof Vs}get widget(){return this.type instanceof i2}};const nu=[],Ji={};let Dn=class Jr{constructor(e,t){this.local=e.length?e:nu,this.children=t.length?t:nu}static create(e,t){return t.length?bc(t,e,0,Ji):St}find(e,t,r){let i=[];return this.findInner(e??0,t??1e9,i,0,r),i}findInner(e,t,r,i,l){for(let o=0;o<this.local.length;o++){let a=this.local[o];a.from<=t&&a.to>=e&&(!l||l(a.spec))&&r.push(a.copy(a.from+i,a.to+i))}for(let o=0;o<this.children.length;o+=3)if(this.children[o]<t&&this.children[o+1]>e){let a=this.children[o]+1;this.children[o+2].findInner(e-a,t-a,r,i+a,l)}}map(e,t,r){return this==St||e.maps.length==0?this:this.mapInner(e,t,0,0,r||Ji)}mapInner(e,t,r,i,l){let o;for(let a=0;a<this.local.length;a++){let f=this.local[a].map(e,r,i);f&&f.type.valid(t,f)?(o||(o=[])).push(f):l.onRemove&&l.onRemove(this.local[a].spec)}return this.children.length?q8(this.children,o||[],e,t,r,i,l):o?new Jr(o.sort(Gi),nu):St}add(e,t){return t.length?this==St?Jr.create(e,t):this.addInner(e,t,0):this}addInner(e,t,r){let i,l=0;e.forEach((a,f)=>{let h=f+r,p;if(p=dk(t,a,h)){for(i||(i=this.children.slice());l<i.length&&i[l]<f;)l+=3;i[l]==f?i[l+2]=i[l+2].addInner(a,p,h+1):i.splice(l,0,f,f+a.nodeSize,bc(p,a,h+1,Ji)),l+=3}});let o=fk(l?hk(t):t,-r);for(let a=0;a<o.length;a++)o[a].type.valid(e,o[a])||o.splice(a--,1);return new Jr(o.length?this.local.concat(o).sort(Gi):this.local,i||this.children)}remove(e){return e.length==0||this==St?this:this.removeInner(e,0)}removeInner(e,t){let r=this.children,i=this.local;for(let l=0;l<r.length;l+=3){let o,a=r[l]+t,f=r[l+1]+t;for(let p=0,g;p<e.length;p++)(g=e[p])&&g.from>a&&g.to<f&&(e[p]=null,(o||(o=[])).push(g));if(!o)continue;r==this.children&&(r=this.children.slice());let h=r[l+2].removeInner(o,a+1);h!=St?r[l+2]=h:(r.splice(l,3),l-=3)}if(i.length){for(let l=0,o;l<e.length;l++)if(o=e[l])for(let a=0;a<i.length;a++)i[a].eq(o,t)&&(i==this.local&&(i=this.local.slice()),i.splice(a--,1))}return r==this.children&&i==this.local?this:i.length||r.length?new Jr(i,r):St}forChild(e,t){if(this==St)return this;if(t.isLeaf)return Jr.empty;let r,i;for(let a=0;a<this.children.length;a+=3)if(this.children[a]>=e){this.children[a]==e&&(r=this.children[a+2]);break}let l=e+1,o=l+t.content.size;for(let a=0;a<this.local.length;a++){let f=this.local[a];if(f.from<o&&f.to>l&&f.type instanceof Vs){let h=Math.max(l,f.from)-l,p=Math.min(o,f.to)-l;h<p&&(i||(i=[])).push(f.copy(h,p))}}if(i){let a=new Jr(i.sort(Gi),nu);return r?new ck([a,r]):a}return r||St}eq(e){if(this==e)return!0;if(!(e instanceof Jr)||this.local.length!=e.local.length||this.children.length!=e.children.length)return!1;for(let t=0;t<this.local.length;t++)if(!this.local[t].eq(e.local[t]))return!1;for(let t=0;t<this.children.length;t+=3)if(this.children[t]!=e.children[t]||this.children[t+1]!=e.children[t+1]||!this.children[t+2].eq(e.children[t+2]))return!1;return!0}locals(e){return E0(this.localsInner(e))}localsInner(e){if(this==St)return nu;if(e.inlineContent||!this.local.some(Vs.is))return this.local;let t=[];for(let r=0;r<this.local.length;r++)this.local[r].type instanceof Vs||t.push(this.local[r]);return t}forEachSet(e){e(this)}};Dn.empty=new Dn([],[]);Dn.removeOverlap=E0;const St=Dn.empty;let ck=class ru{constructor(e){this.members=e}map(e,t){const r=this.members.map(i=>i.map(e,t,Ji));return ru.from(r)}forChild(e,t){if(t.isLeaf)return Dn.empty;let r=[];for(let i=0;i<this.members.length;i++){let l=this.members[i].forChild(e,t);l!=St&&(l instanceof ru?r=r.concat(l.members):r.push(l))}return ru.from(r)}eq(e){if(!(e instanceof ru)||e.members.length!=this.members.length)return!1;for(let t=0;t<this.members.length;t++)if(!this.members[t].eq(e.members[t]))return!1;return!0}locals(e){let t,r=!0;for(let i=0;i<this.members.length;i++){let l=this.members[i].localsInner(e);if(l.length)if(!t)t=l;else{r&&(t=t.slice(),r=!1);for(let o=0;o<l.length;o++)t.push(l[o])}}return t?E0(r?t:t.sort(Gi)):nu}static from(e){switch(e.length){case 0:return St;case 1:return e[0];default:return new ru(e.every(t=>t instanceof Dn)?e:e.reduce((t,r)=>t.concat(r instanceof Dn?r:r.members),[]))}}forEachSet(e){for(let t=0;t<this.members.length;t++)this.members[t].forEachSet(e)}};function q8(n,e,t,r,i,l,o){let a=n.slice();for(let h=0,p=l;h<t.maps.length;h++){let g=0;t.maps[h].forEach((y,x,k,C)=>{let E=C-k-(x-y);for(let A=0;A<a.length;A+=3){let N=a[A+1];if(N<0||y>N+p-g)continue;let B=a[A]+p-g;x>=B?a[A+1]=y<=B?-2:-1:y>=p&&E&&(a[A]+=E,a[A+1]+=E)}g+=E}),p=t.maps[h].map(p,-1)}let f=!1;for(let h=0;h<a.length;h+=3)if(a[h+1]<0){if(a[h+1]==-2){f=!0,a[h+1]=-1;continue}let p=t.map(n[h]+l),g=p-i;if(g<0||g>=r.content.size){f=!0;continue}let y=t.map(n[h+1]+l,-1),x=y-i,{index:k,offset:C}=r.content.findIndex(g),E=r.maybeChild(k);if(E&&C==g&&C+E.nodeSize==x){let A=a[h+2].mapInner(t,E,p+1,n[h]+l+1,o);A!=St?(a[h]=g,a[h+1]=x,a[h+2]=A):(a[h+1]=-2,f=!0)}else f=!0}if(f){let h=H8(a,n,e,t,i,l,o),p=bc(h,r,0,o);e=p.local;for(let g=0;g<a.length;g+=3)a[g+1]<0&&(a.splice(g,3),g-=3);for(let g=0,y=0;g<p.children.length;g+=3){let x=p.children[g];for(;y<a.length&&a[y]<x;)y+=3;a.splice(y,0,p.children[g],p.children[g+1],p.children[g+2])}}return new Dn(e.sort(Gi),a)}function fk(n,e){if(!e||!n.length)return n;let t=[];for(let r=0;r<n.length;r++){let i=n[r];t.push(new ll(i.from+e,i.to+e,i.type))}return t}function H8(n,e,t,r,i,l,o){function a(f,h){for(let p=0;p<f.local.length;p++){let g=f.local[p].map(r,i,h);g?t.push(g):o.onRemove&&o.onRemove(f.local[p].spec)}for(let p=0;p<f.children.length;p+=3)a(f.children[p+2],f.children[p]+h+1)}for(let f=0;f<n.length;f+=3)n[f+1]==-1&&a(n[f+2],e[f]+l+1);return t}function dk(n,e,t){if(e.isLeaf)return null;let r=t+e.nodeSize,i=null;for(let l=0,o;l<n.length;l++)(o=n[l])&&o.from>t&&o.to<r&&((i||(i=[])).push(o),n[l]=null);return i}function hk(n){let e=[];for(let t=0;t<n.length;t++)n[t]!=null&&e.push(n[t]);return e}function bc(n,e,t,r){let i=[],l=!1;e.forEach((a,f)=>{let h=dk(n,a,f+t);if(h){l=!0;let p=bc(h,a,t+f+1,r);p!=St&&i.push(f,f+a.nodeSize,p)}});let o=fk(l?hk(n):n,-t).sort(Gi);for(let a=0;a<o.length;a++)o[a].type.valid(e,o[a])||(r.onRemove&&r.onRemove(o[a].spec),o.splice(a--,1));return o.length||i.length?new Dn(o,i):St}function Gi(n,e){return n.from-e.from||n.to-e.to}function E0(n){let e=n;for(let t=0;t<e.length-1;t++){let r=e[t];if(r.from!=r.to)for(let i=t+1;i<e.length;i++){let l=e[i];if(l.from==r.from){l.to!=r.to&&(e==n&&(e=n.slice()),e[i]=l.copy(l.from,r.to),l2(e,i+1,l.copy(r.to,l.to)));continue}else{l.from<r.to&&(e==n&&(e=n.slice()),e[t]=r.copy(r.from,l.from),l2(e,i,r.copy(l.from,r.to)));break}}}return e}function l2(n,e,t){for(;e<n.length&&Gi(t,n[e])>0;)e++;n.splice(e,0,t)}function qh(n){let e=[];return n.someProp("decorations",t=>{let r=t(n.state);r&&r!=St&&e.push(r)}),n.cursorWrapper&&e.push(Dn.create(n.state.doc,[n.cursorWrapper.deco])),ck.from(e)}const V8={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},U8=Vt&&ni<=11;class j8{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}set(e){this.anchorNode=e.anchorNode,this.anchorOffset=e.anchorOffset,this.focusNode=e.focusNode,this.focusOffset=e.focusOffset}clear(){this.anchorNode=this.focusNode=null}eq(e){return e.anchorNode==this.anchorNode&&e.anchorOffset==this.anchorOffset&&e.focusNode==this.focusNode&&e.focusOffset==this.focusOffset}}class P8{constructor(e,t){this.view=e,this.handleDOMChange=t,this.queue=[],this.flushingSoon=-1,this.observer=null,this.currentSelection=new j8,this.onCharData=null,this.suppressingSelectionUpdates=!1,this.lastChangedTextNode=null,this.observer=window.MutationObserver&&new window.MutationObserver(r=>{for(let i=0;i<r.length;i++)this.queue.push(r[i]);Vt&&ni<=11&&r.some(i=>i.type=="childList"&&i.removedNodes.length||i.type=="characterData"&&i.oldValue.length>i.target.nodeValue.length)?this.flushSoon():this.flush()}),U8&&(this.onCharData=r=>{this.queue.push({target:r.target,type:"characterData",oldValue:r.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this)}flushSoon(){this.flushingSoon<0&&(this.flushingSoon=window.setTimeout(()=>{this.flushingSoon=-1,this.flush()},20))}forceFlush(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())}start(){this.observer&&(this.observer.takeRecords(),this.observer.observe(this.view.dom,V8)),this.onCharData&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()}stop(){if(this.observer){let e=this.observer.takeRecords();if(e.length){for(let t=0;t<e.length;t++)this.queue.push(e[t]);window.setTimeout(()=>this.flush(),20)}this.observer.disconnect()}this.onCharData&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()}connectSelection(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)}disconnectSelection(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)}suppressSelectionUpdates(){this.suppressingSelectionUpdates=!0,setTimeout(()=>this.suppressingSelectionUpdates=!1,50)}onSelectionChange(){if(Zy(this.view)){if(this.suppressingSelectionUpdates)return yr(this.view);if(Vt&&ni<=11&&!this.view.state.selection.empty){let e=this.view.domSelectionRange();if(e.focusNode&&nl(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset))return this.flushSoon()}this.flush()}}setCurSelection(){this.currentSelection.set(this.view.domSelectionRange())}ignoreSelectionChange(e){if(!e.focusNode)return!0;let t=new Set,r;for(let l=e.focusNode;l;l=hu(l))t.add(l);for(let l=e.anchorNode;l;l=hu(l))if(t.has(l)){r=l;break}let i=r&&this.view.docView.nearestDesc(r);if(i&&i.ignoreMutation({type:"selection",target:r.nodeType==3?r.parentNode:r}))return this.setCurSelection(),!0}pendingRecords(){if(this.observer)for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}flush(){let{view:e}=this;if(!e.docView||this.flushingSoon>-1)return;let t=this.pendingRecords();t.length&&(this.queue=[]);let r=e.domSelectionRange(),i=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(r)&&Zy(e)&&!this.ignoreSelectionChange(r),l=-1,o=-1,a=!1,f=[];if(e.editable)for(let p=0;p<t.length;p++){let g=this.registerMutation(t[p],f);g&&(l=l<0?g.from:Math.min(g.from,l),o=o<0?g.to:Math.max(g.to,o),g.typeOver&&(a=!0))}if(On&&f.length){let p=f.filter(g=>g.nodeName=="BR");if(p.length==2){let[g,y]=p;g.parentNode&&g.parentNode.parentNode==y.parentNode?y.remove():g.remove()}else{let{focusNode:g}=this.currentSelection;for(let y of p){let x=y.parentNode;x&&x.nodeName=="LI"&&(!g||K8(e,g)!=x)&&y.remove()}}}let h=null;l<0&&i&&e.input.lastFocus>Date.now()-200&&Math.max(e.input.lastTouch,e.input.lastClick.time)<Date.now()-300&&Vc(r)&&(h=y0(e))&&h.eq(de.near(e.state.doc.resolve(0),1))?(e.input.lastFocus=0,yr(e),this.currentSelection.set(r),e.scrollToSelection()):(l>-1||i)&&(l>-1&&(e.docView.markDirty(l,o),J8(e)),this.handleDOMChange(l,o,a,f),e.docView&&e.docView.dirty?e.updateState(e.state):this.currentSelection.eq(r)||yr(e),this.currentSelection.set(r))}registerMutation(e,t){if(t.indexOf(e.target)>-1)return null;let r=this.view.docView.nearestDesc(e.target);if(e.type=="attributes"&&(r==this.view.docView||e.attributeName=="contenteditable"||e.attributeName=="style"&&!e.oldValue&&!e.target.getAttribute("style"))||!r||r.ignoreMutation(e))return null;if(e.type=="childList"){for(let p=0;p<e.addedNodes.length;p++){let g=e.addedNodes[p];t.push(g),g.nodeType==3&&(this.lastChangedTextNode=g)}if(r.contentDOM&&r.contentDOM!=r.dom&&!r.contentDOM.contains(e.target))return{from:r.posBefore,to:r.posAfter};let i=e.previousSibling,l=e.nextSibling;if(Vt&&ni<=11&&e.addedNodes.length)for(let p=0;p<e.addedNodes.length;p++){let{previousSibling:g,nextSibling:y}=e.addedNodes[p];(!g||Array.prototype.indexOf.call(e.addedNodes,g)<0)&&(i=g),(!y||Array.prototype.indexOf.call(e.addedNodes,y)<0)&&(l=y)}let o=i&&i.parentNode==e.target?gt(i)+1:0,a=r.localPosFromDOM(e.target,o,-1),f=l&&l.parentNode==e.target?gt(l):e.target.childNodes.length,h=r.localPosFromDOM(e.target,f,1);return{from:a,to:h}}else return e.type=="attributes"?{from:r.posAtStart-r.border,to:r.posAtEnd+r.border}:(this.lastChangedTextNode=e.target,{from:r.posAtStart,to:r.posAtEnd,typeOver:e.target.nodeValue==e.oldValue})}}let u2=new WeakMap,s2=!1;function J8(n){if(!u2.has(n)&&(u2.set(n,null),["normal","nowrap","pre-line"].indexOf(getComputedStyle(n.dom).whiteSpace)!==-1)){if(n.requiresGeckoHackNode=On,s2)return;console.warn("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package."),s2=!0}}function o2(n,e){let t=e.startContainer,r=e.startOffset,i=e.endContainer,l=e.endOffset,o=n.domAtPos(n.state.selection.anchor);return nl(o.node,o.offset,i,l)&&([t,r,i,l]=[i,l,t,r]),{anchorNode:t,anchorOffset:r,focusNode:i,focusOffset:l}}function G8(n,e){if(e.getComposedRanges){let i=e.getComposedRanges(n.root)[0];if(i)return o2(n,i)}let t;function r(i){i.preventDefault(),i.stopImmediatePropagation(),t=i.getTargetRanges()[0]}return n.dom.addEventListener("beforeinput",r,!0),document.execCommand("indent"),n.dom.removeEventListener("beforeinput",r,!0),t?o2(n,t):null}function K8(n,e){for(let t=e.parentNode;t&&t!=n.dom;t=t.parentNode){let r=n.docView.nearestDesc(t,!0);if(r&&r.node.isBlock)return t}return null}function Y8(n,e,t){let{node:r,fromOffset:i,toOffset:l,from:o,to:a}=n.docView.parseRange(e,t),f=n.domSelectionRange(),h,p=f.anchorNode;if(p&&n.dom.contains(p.nodeType==1?p:p.parentNode)&&(h=[{node:p,offset:f.anchorOffset}],Vc(f)||h.push({node:f.focusNode,offset:f.focusOffset})),Ct&&n.input.lastKeyCode===8)for(let E=l;E>i;E--){let A=r.childNodes[E-1],N=A.pmViewDesc;if(A.nodeName=="BR"&&!N){l=E;break}if(!N||N.size)break}let g=n.state.doc,y=n.someProp("domParser")||ou.fromSchema(n.state.schema),x=g.resolve(o),k=null,C=y.parse(r,{topNode:x.parent,topMatch:x.parent.contentMatchAt(x.index()),topOpen:!0,from:i,to:l,preserveWhitespace:x.parent.type.whitespace=="pre"?"full":!0,findPositions:h,ruleFromNode:Z8,context:x});if(h&&h[0].pos!=null){let E=h[0].pos,A=h[1]&&h[1].pos;A==null&&(A=E),k={anchor:E+o,head:A+o}}return{doc:C,sel:k,from:o,to:a}}function Z8(n){let e=n.pmViewDesc;if(e)return e.parseRule();if(n.nodeName=="BR"&&n.parentNode){if(_t&&/^(ul|ol)$/i.test(n.parentNode.nodeName)){let t=document.createElement("div");return t.appendChild(document.createElement("li")),{skip:t}}else if(n.parentNode.lastChild==n||_t&&/^(tr|table)$/i.test(n.parentNode.nodeName))return{ignore:!0}}else if(n.nodeName=="IMG"&&n.getAttribute("mark-placeholder"))return{ignore:!0};return null}const X8=/^(a|abbr|acronym|b|bd[io]|big|br|button|cite|code|data(list)?|del|dfn|em|i|ins|kbd|label|map|mark|meter|output|q|ruby|s|samp|small|span|strong|su[bp]|time|u|tt|var)$/i;function Q8(n,e,t,r,i){let l=n.input.compositionPendingChanges||(n.composing?n.input.compositionID:0);if(n.input.compositionPendingChanges=0,e<0){let ee=n.input.lastSelectionTime>Date.now()-50?n.input.lastSelectionOrigin:null,je=y0(n,ee);if(je&&!n.state.selection.eq(je)){if(Ct&&mr&&n.input.lastKeyCode===13&&Date.now()-100<n.input.lastKeyCodeTime&&n.someProp("handleKeyDown",Ge=>Ge(n,Ri(13,"Enter"))))return;let tt=n.state.tr.setSelection(je);ee=="pointer"?tt.setMeta("pointer",!0):ee=="key"&&tt.scrollIntoView(),l&&tt.setMeta("composition",l),n.dispatch(tt)}return}let o=n.state.doc.resolve(e),a=o.sharedDepth(t);e=o.before(a+1),t=n.state.doc.resolve(t).after(a+1);let f=n.state.selection,h=Y8(n,e,t),p=n.state.doc,g=p.slice(h.from,h.to),y,x;n.input.lastKeyCode===8&&Date.now()-100<n.input.lastKeyCodeTime?(y=n.state.selection.to,x="end"):(y=n.state.selection.from,x="start"),n.input.lastKeyCode=null;let k=tM(g.content,h.doc.content,h.from,y,x);if(k&&n.input.domChangeCount++,(pu&&n.input.lastIOSEnter>Date.now()-225||mr)&&i.some(ee=>ee.nodeType==1&&!X8.test(ee.nodeName))&&(!k||k.endA>=k.endB)&&n.someProp("handleKeyDown",ee=>ee(n,Ri(13,"Enter")))){n.input.lastIOSEnter=0;return}if(!k)if(r&&f instanceof he&&!f.empty&&f.$head.sameParent(f.$anchor)&&!n.composing&&!(h.sel&&h.sel.anchor!=h.sel.head))k={start:f.from,endA:f.to,endB:f.to};else{if(h.sel){let ee=a2(n,n.state.doc,h.sel);if(ee&&!ee.eq(n.state.selection)){let je=n.state.tr.setSelection(ee);l&&je.setMeta("composition",l),n.dispatch(je)}}return}n.state.selection.from<n.state.selection.to&&k.start==k.endB&&n.state.selection instanceof he&&(k.start>n.state.selection.from&&k.start<=n.state.selection.from+2&&n.state.selection.from>=h.from?k.start=n.state.selection.from:k.endA<n.state.selection.to&&k.endA>=n.state.selection.to-2&&n.state.selection.to<=h.to&&(k.endB+=n.state.selection.to-k.endA,k.endA=n.state.selection.to)),Vt&&ni<=11&&k.endB==k.start+1&&k.endA==k.start&&k.start>h.from&&h.doc.textBetween(k.start-h.from-1,k.start-h.from+1)==" "&&(k.start--,k.endA--,k.endB--);let C=h.doc.resolveNoCache(k.start-h.from),E=h.doc.resolveNoCache(k.endB-h.from),A=p.resolve(k.start),N=C.sameParent(E)&&C.parent.inlineContent&&A.end()>=k.endA,B;if((pu&&n.input.lastIOSEnter>Date.now()-225&&(!N||i.some(ee=>ee.nodeName=="DIV"||ee.nodeName=="P"))||!N&&C.pos<h.doc.content.size&&(!C.sameParent(E)||!C.parent.inlineContent)&&!/\S/.test(h.doc.textBetween(C.pos,E.pos,"",""))&&(B=de.findFrom(h.doc.resolve(C.pos+1),1,!0))&&B.head>C.pos)&&n.someProp("handleKeyDown",ee=>ee(n,Ri(13,"Enter")))){n.input.lastIOSEnter=0;return}if(n.state.selection.anchor>k.start&&eM(p,k.start,k.endA,C,E)&&n.someProp("handleKeyDown",ee=>ee(n,Ri(8,"Backspace")))){mr&&Ct&&n.domObserver.suppressSelectionUpdates();return}Ct&&k.endB==k.start&&(n.input.lastChromeDelete=Date.now()),mr&&!N&&C.start()!=E.start()&&E.parentOffset==0&&C.depth==E.depth&&h.sel&&h.sel.anchor==h.sel.head&&h.sel.head==k.endA&&(k.endB-=2,E=h.doc.resolveNoCache(k.endB-h.from),setTimeout(()=>{n.someProp("handleKeyDown",function(ee){return ee(n,Ri(13,"Enter"))})},20));let H=k.start,L=k.endA,U,Q,ne;if(N){if(C.pos==E.pos)Vt&&ni<=11&&C.parentOffset==0&&(n.domObserver.suppressSelectionUpdates(),setTimeout(()=>yr(n),20)),U=n.state.tr.delete(H,L),Q=p.resolve(k.start).marksAcross(p.resolve(k.endA));else if(k.endA==k.endB&&(ne=W8(C.parent.content.cut(C.parentOffset,E.parentOffset),A.parent.content.cut(A.parentOffset,k.endA-A.start()))))U=n.state.tr,ne.type=="add"?U.addMark(H,L,ne.mark):U.removeMark(H,L,ne.mark);else if(C.parent.child(C.index()).isText&&C.index()==E.index()-(E.textOffset?0:1)){let ee=C.parent.textBetween(C.parentOffset,E.parentOffset);if(n.someProp("handleTextInput",je=>je(n,H,L,ee)))return;U=n.state.tr.insertText(ee,H,L)}}if(U||(U=n.state.tr.replace(H,L,h.doc.slice(k.start-h.from,k.endB-h.from))),h.sel){let ee=a2(n,U.doc,h.sel);ee&&!(Ct&&n.composing&&ee.empty&&(k.start!=k.endB||n.input.lastChromeDelete<Date.now()-100)&&(ee.head==H||ee.head==U.mapping.map(L)-1)||Vt&&ee.empty&&ee.head==H)&&U.setSelection(ee)}Q&&U.ensureMarks(Q),l&&U.setMeta("composition",l),n.dispatch(U.scrollIntoView())}function a2(n,e,t){return Math.max(t.anchor,t.head)>e.content.size?null:x0(n,e.resolve(t.anchor),e.resolve(t.head))}function W8(n,e){let t=n.firstChild.marks,r=e.firstChild.marks,i=t,l=r,o,a,f;for(let p=0;p<r.length;p++)i=r[p].removeFromSet(i);for(let p=0;p<t.length;p++)l=t[p].removeFromSet(l);if(i.length==1&&l.length==0)a=i[0],o="add",f=p=>p.mark(a.addToSet(p.marks));else if(i.length==0&&l.length==1)a=l[0],o="remove",f=p=>p.mark(a.removeFromSet(p.marks));else return null;let h=[];for(let p=0;p<e.childCount;p++)h.push(f(e.child(p)));if(j.from(h).eq(n))return{mark:a,type:o}}function eM(n,e,t,r,i){if(t-e<=i.pos-r.pos||Hh(r,!0,!1)<i.pos)return!1;let l=n.resolve(e);if(!r.parent.isTextblock){let a=l.nodeAfter;return a!=null&&t==e+a.nodeSize}if(l.parentOffset<l.parent.content.size||!l.parent.isTextblock)return!1;let o=n.resolve(Hh(l,!0,!0));return!o.parent.isTextblock||o.pos>t||Hh(o,!0,!1)<t?!1:r.parent.content.cut(r.parentOffset).eq(o.parent.content)}function Hh(n,e,t){let r=n.depth,i=e?n.end():n.pos;for(;r>0&&(e||n.indexAfter(r)==n.node(r).childCount);)r--,i++,e=!1;if(t){let l=n.node(r).maybeChild(n.indexAfter(r));for(;l&&!l.isLeaf;)l=l.firstChild,i++}return i}function tM(n,e,t,r,i){let l=n.findDiffStart(e,t);if(l==null)return null;let{a:o,b:a}=n.findDiffEnd(e,t+n.size,t+e.size);if(i=="end"){let f=Math.max(0,l-Math.min(o,a));r-=o+f-l}if(o<l&&n.size<e.size){let f=r<=l&&r>=o?l-r:0;l-=f,l&&l<e.size&&c2(e.textBetween(l-1,l+1))&&(l+=f?1:-1),a=l+(a-o),o=l}else if(a<l){let f=r<=l&&r>=a?l-r:0;l-=f,l&&l<n.size&&c2(n.textBetween(l-1,l+1))&&(l+=f?1:-1),o=l+(o-a),a=l}return{start:l,endA:o,endB:a}}function c2(n){if(n.length!=2)return!1;let e=n.charCodeAt(0),t=n.charCodeAt(1);return e>=56320&&e<=57343&&t>=55296&&t<=56319}class nM{constructor(e,t){this._root=null,this.focused=!1,this.trackWrites=null,this.mounted=!1,this.markCursor=null,this.cursorWrapper=null,this.lastSelectedViewDesc=void 0,this.input=new x8,this.prevDirectPlugins=[],this.pluginViews=[],this.requiresGeckoHackNode=!1,this.dragging=null,this._props=t,this.state=t.state,this.directPlugins=t.plugins||[],this.directPlugins.forEach(m2),this.dispatch=this.dispatch.bind(this),this.dom=e&&e.mount||document.createElement("div"),e&&(e.appendChild?e.appendChild(this.dom):typeof e=="function"?e(this.dom):e.mount&&(this.mounted=!0)),this.editable=h2(this),d2(this),this.nodeViews=p2(this),this.docView=jy(this.state.doc,f2(this),qh(this),this.dom,this),this.domObserver=new P8(this,(r,i,l,o)=>Q8(this,r,i,l,o)),this.domObserver.start(),k8(this),this.updatePluginViews()}get composing(){return this.input.composing}get props(){if(this._props.state!=this.state){let e=this._props;this._props={};for(let t in e)this._props[t]=e[t];this._props.state=this.state}return this._props}update(e){e.handleDOMEvents!=this._props.handleDOMEvents&&Ip(this);let t=this._props;this._props=e,e.plugins&&(e.plugins.forEach(m2),this.directPlugins=e.plugins),this.updateStateInner(e.state,t)}setProps(e){let t={};for(let r in this._props)t[r]=this._props[r];t.state=this.state;for(let r in e)t[r]=e[r];this.update(t)}updateState(e){this.updateStateInner(e,this._props)}updateStateInner(e,t){var r;let i=this.state,l=!1,o=!1;e.storedMarks&&this.composing&&(ik(this),o=!0),this.state=e;let a=i.plugins!=e.plugins||this._props.plugins!=t.plugins;if(a||this._props.plugins!=t.plugins||this._props.nodeViews!=t.nodeViews){let x=p2(this);iM(x,this.nodeViews)&&(this.nodeViews=x,l=!0)}(a||t.handleDOMEvents!=this._props.handleDOMEvents)&&Ip(this),this.editable=h2(this),d2(this);let f=qh(this),h=f2(this),p=i.plugins!=e.plugins&&!i.doc.eq(e.doc)?"reset":e.scrollToSelection>i.scrollToSelection?"to selection":"preserve",g=l||!this.docView.matchesNode(e.doc,h,f);(g||!e.selection.eq(i.selection))&&(o=!0);let y=p=="preserve"&&o&&this.dom.style.overflowAnchor==null&&zE(this);if(o){this.domObserver.stop();let x=g&&(Vt||Ct)&&!this.composing&&!i.selection.empty&&!e.selection.empty&&rM(i.selection,e.selection);if(g){let k=Ct?this.trackWrites=this.domSelectionRange().focusNode:null;this.composing&&(this.input.compositionNode=R8(this)),(l||!this.docView.update(e.doc,h,f,this))&&(this.docView.updateOuterDeco(h),this.docView.destroy(),this.docView=jy(e.doc,h,f,this.dom,this)),k&&!this.trackWrites&&(x=!0)}x||!(this.input.mouseDown&&this.domObserver.currentSelection.eq(this.domSelectionRange())&&i8(this))?yr(this,x):(J3(this,e.selection),this.domObserver.setCurSelection()),this.domObserver.start()}this.updatePluginViews(i),!((r=this.dragging)===null||r===void 0)&&r.node&&!i.doc.eq(e.doc)&&this.updateDraggedNode(this.dragging,i),p=="reset"?this.dom.scrollTop=0:p=="to selection"?this.scrollToSelection():y&&BE(y)}scrollToSelection(){let e=this.domSelectionRange().focusNode;if(!(!e||!this.dom.contains(e.nodeType==1?e:e.parentNode))){if(!this.someProp("handleScrollToSelection",t=>t(this)))if(this.state.selection instanceof oe){let t=this.docView.domAfterPos(this.state.selection.from);t.nodeType==1&&Ly(this,t.getBoundingClientRect(),e)}else Ly(this,this.coordsAtPos(this.state.selection.head,1),e)}}destroyPluginViews(){let e;for(;e=this.pluginViews.pop();)e.destroy&&e.destroy()}updatePluginViews(e){if(!e||e.plugins!=this.state.plugins||this.directPlugins!=this.prevDirectPlugins){this.prevDirectPlugins=this.directPlugins,this.destroyPluginViews();for(let t=0;t<this.directPlugins.length;t++){let r=this.directPlugins[t];r.spec.view&&this.pluginViews.push(r.spec.view(this))}for(let t=0;t<this.state.plugins.length;t++){let r=this.state.plugins[t];r.spec.view&&this.pluginViews.push(r.spec.view(this))}}else for(let t=0;t<this.pluginViews.length;t++){let r=this.pluginViews[t];r.update&&r.update(this,e)}}updateDraggedNode(e,t){let r=e.node,i=-1;if(this.state.doc.nodeAt(r.from)==r.node)i=r.from;else{let l=r.from+(this.state.doc.content.size-t.doc.content.size);(l>0&&this.state.doc.nodeAt(l))==r.node&&(i=l)}this.dragging=new uk(e.slice,e.move,i<0?void 0:oe.create(this.state.doc,i))}someProp(e,t){let r=this._props&&this._props[e],i;if(r!=null&&(i=t?t(r):r))return i;for(let o=0;o<this.directPlugins.length;o++){let a=this.directPlugins[o].props[e];if(a!=null&&(i=t?t(a):a))return i}let l=this.state.plugins;if(l)for(let o=0;o<l.length;o++){let a=l[o].props[e];if(a!=null&&(i=t?t(a):a))return i}}hasFocus(){if(Vt){let e=this.root.activeElement;if(e==this.dom)return!0;if(!e||!this.dom.contains(e))return!1;for(;e&&this.dom!=e&&this.dom.contains(e);){if(e.contentEditable=="false")return!1;e=e.parentElement}return!0}return this.root.activeElement==this.dom}focus(){this.domObserver.stop(),this.editable&&$E(this.dom),yr(this),this.domObserver.start()}get root(){let e=this._root;if(e==null){for(let t=this.dom.parentNode;t;t=t.parentNode)if(t.nodeType==9||t.nodeType==11&&t.host)return t.getSelection||(Object.getPrototypeOf(t).getSelection=()=>t.ownerDocument.getSelection()),this._root=t}return e||document}updateRoot(){this._root=null}posAtCoords(e){return HE(this,e)}coordsAtPos(e,t=1){return L3(this,e,t)}domAtPos(e,t=0){return this.docView.domFromPos(e,t)}nodeDOM(e){let t=this.docView.descAt(e);return t?t.nodeDOM:null}posAtDOM(e,t,r=-1){let i=this.docView.posFromDOM(e,t,r);if(i==null)throw new RangeError("DOM position not inside the editor");return i}endOfTextblock(e,t){return JE(this,t||this.state,e)}pasteHTML(e,t){return Zs(this,"",e,!1,t||new ClipboardEvent("paste"))}pasteText(e,t){return Zs(this,e,null,!0,t||new ClipboardEvent("paste"))}serializeForClipboard(e){return k0(this,e)}destroy(){this.docView&&(S8(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],qh(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null,vE())}get isDestroyed(){return this.docView==null}dispatchEvent(e){return v8(this,e)}dispatch(e){let t=this._props.dispatchTransaction;t?t.call(this,e):this.updateState(this.state.apply(e))}domSelectionRange(){let e=this.domSelection();return e?_t&&this.root.nodeType===11&&DE(this.dom.ownerDocument)==this.dom&&G8(this,e)||e:{focusNode:null,focusOffset:0,anchorNode:null,anchorOffset:0}}domSelection(){return this.root.getSelection()}}function f2(n){let e=Object.create(null);return e.class="ProseMirror",e.contenteditable=String(n.editable),n.someProp("attributes",t=>{if(typeof t=="function"&&(t=t(n.state)),t)for(let r in t)r=="class"?e.class+=" "+t[r]:r=="style"?e.style=(e.style?e.style+";":"")+t[r]:!e[r]&&r!="contenteditable"&&r!="nodeName"&&(e[r]=String(t[r]))}),e.translate||(e.translate="no"),[ll.node(0,n.state.doc.content.size,e)]}function d2(n){if(n.markCursor){let e=document.createElement("img");e.className="ProseMirror-separator",e.setAttribute("mark-placeholder","true"),e.setAttribute("alt",""),n.cursorWrapper={dom:e,deco:ll.widget(n.state.selection.from,e,{raw:!0,marks:n.markCursor})}}else n.cursorWrapper=null}function h2(n){return!n.someProp("editable",e=>e(n.state)===!1)}function rM(n,e){let t=Math.min(n.$anchor.sharedDepth(n.head),e.$anchor.sharedDepth(e.head));return n.$anchor.start(t)!=e.$anchor.start(t)}function p2(n){let e=Object.create(null);function t(r){for(let i in r)Object.prototype.hasOwnProperty.call(e,i)||(e[i]=r[i])}return n.someProp("nodeViews",t),n.someProp("markViews",t),e}function iM(n,e){let t=0,r=0;for(let i in n){if(n[i]!=e[i])return!0;t++}for(let i in e)r++;return t!=r}function m2(n){if(n.spec.state||n.spec.filterTransaction||n.spec.appendTransaction)throw new RangeError("Plugins passed directly to the view must not have a state component")}var li={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},yc={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},lM=typeof navigator<"u"&&/Mac/.test(navigator.platform),uM=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var bt=0;bt<10;bt++)li[48+bt]=li[96+bt]=String(bt);for(var bt=1;bt<=24;bt++)li[bt+111]="F"+bt;for(var bt=65;bt<=90;bt++)li[bt]=String.fromCharCode(bt+32),yc[bt]=String.fromCharCode(bt);for(var Vh in li)yc.hasOwnProperty(Vh)||(yc[Vh]=li[Vh]);function sM(n){var e=lM&&n.metaKey&&n.shiftKey&&!n.ctrlKey&&!n.altKey||uM&&n.shiftKey&&n.key&&n.key.length==1||n.key=="Unidentified",t=!e&&n.key||(n.shiftKey?yc:li)[n.keyCode]||n.key||"Unidentified";return t=="Esc"&&(t="Escape"),t=="Del"&&(t="Delete"),t=="Left"&&(t="ArrowLeft"),t=="Up"&&(t="ArrowUp"),t=="Right"&&(t="ArrowRight"),t=="Down"&&(t="ArrowDown"),t}const oM=typeof navigator<"u"&&/Mac|iP(hone|[oa]d)/.test(navigator.platform),aM=typeof navigator<"u"&&/Win/.test(navigator.platform);function cM(n){let e=n.split(/-(?!$)/),t=e[e.length-1];t=="Space"&&(t=" ");let r,i,l,o;for(let a=0;a<e.length-1;a++){let f=e[a];if(/^(cmd|meta|m)$/i.test(f))o=!0;else if(/^a(lt)?$/i.test(f))r=!0;else if(/^(c|ctrl|control)$/i.test(f))i=!0;else if(/^s(hift)?$/i.test(f))l=!0;else if(/^mod$/i.test(f))oM?o=!0:i=!0;else throw new Error("Unrecognized modifier name: "+f)}return r&&(t="Alt-"+t),i&&(t="Ctrl-"+t),o&&(t="Meta-"+t),l&&(t="Shift-"+t),t}function fM(n){let e=Object.create(null);for(let t in n)e[cM(t)]=n[t];return e}function Uh(n,e,t=!0){return e.altKey&&(n="Alt-"+n),e.ctrlKey&&(n="Ctrl-"+n),e.metaKey&&(n="Meta-"+n),t&&e.shiftKey&&(n="Shift-"+n),n}function dM(n){return new Bt({props:{handleKeyDown:pk(n)}})}function pk(n){let e=fM(n);return function(t,r){let i=sM(r),l,o=e[Uh(i,r)];if(o&&o(t.state,t.dispatch,t))return!0;if(i.length==1&&i!=" "){if(r.shiftKey){let a=e[Uh(i,r,!1)];if(a&&a(t.state,t.dispatch,t))return!0}if((r.altKey||r.metaKey||r.ctrlKey)&&!(aM&&r.ctrlKey&&r.altKey)&&(l=li[r.keyCode])&&l!=i){let a=e[Uh(l,r)];if(a&&a(t.state,t.dispatch,t))return!0}}return!1}}const M0=(n,e)=>n.selection.empty?!1:(e&&e(n.tr.deleteSelection().scrollIntoView()),!0);function mk(n,e){let{$cursor:t}=n.selection;return!t||(e?!e.endOfTextblock("backward",n):t.parentOffset>0)?null:t}const gk=(n,e,t)=>{let r=mk(n,t);if(!r)return!1;let i=A0(r);if(!i){let o=r.blockRange(),a=o&&Su(o);return a==null?!1:(e&&e(n.tr.lift(o,a).scrollIntoView()),!0)}let l=i.nodeBefore;if(Mk(n,i,e,-1))return!0;if(r.parent.content.size==0&&(mu(l,"end")||oe.isSelectable(l)))for(let o=r.depth;;o--){let a=Hc(n.doc,r.before(o),r.after(o),Y.empty);if(a&&a.slice.size<a.to-a.from){if(e){let f=n.tr.step(a);f.setSelection(mu(l,"end")?de.findFrom(f.doc.resolve(f.mapping.map(i.pos,-1)),-1):oe.create(f.doc,i.pos-l.nodeSize)),e(f.scrollIntoView())}return!0}if(o==1||r.node(o-1).childCount>1)break}return l.isAtom&&i.depth==r.depth-1?(e&&e(n.tr.delete(i.pos-l.nodeSize,i.pos).scrollIntoView()),!0):!1},hM=(n,e,t)=>{let r=mk(n,t);if(!r)return!1;let i=A0(r);return i?bk(n,i,e):!1},pM=(n,e,t)=>{let r=xk(n,t);if(!r)return!1;let i=T0(r);return i?bk(n,i,e):!1};function bk(n,e,t){let r=e.nodeBefore,i=r,l=e.pos-1;for(;!i.isTextblock;l--){if(i.type.spec.isolating)return!1;let p=i.lastChild;if(!p)return!1;i=p}let o=e.nodeAfter,a=o,f=e.pos+1;for(;!a.isTextblock;f++){if(a.type.spec.isolating)return!1;let p=a.firstChild;if(!p)return!1;a=p}let h=Hc(n.doc,l,f,Y.empty);if(!h||h.from!=l||h instanceof wn&&h.slice.size>=f-l)return!1;if(t){let p=n.tr.step(h);p.setSelection(he.create(p.doc,l)),t(p.scrollIntoView())}return!0}function mu(n,e,t=!1){for(let r=n;r;r=e=="start"?r.firstChild:r.lastChild){if(r.isTextblock)return!0;if(t&&r.childCount!=1)return!1}return!1}const yk=(n,e,t)=>{let{$head:r,empty:i}=n.selection,l=r;if(!i)return!1;if(r.parent.isTextblock){if(t?!t.endOfTextblock("backward",n):r.parentOffset>0)return!1;l=A0(r)}let o=l&&l.nodeBefore;return!o||!oe.isSelectable(o)?!1:(e&&e(n.tr.setSelection(oe.create(n.doc,l.pos-o.nodeSize)).scrollIntoView()),!0)};function A0(n){if(!n.parent.type.spec.isolating)for(let e=n.depth-1;e>=0;e--){if(n.index(e)>0)return n.doc.resolve(n.before(e+1));if(n.node(e).type.spec.isolating)break}return null}function xk(n,e){let{$cursor:t}=n.selection;return!t||(e?!e.endOfTextblock("forward",n):t.parentOffset<t.parent.content.size)?null:t}const kk=(n,e,t)=>{let r=xk(n,t);if(!r)return!1;let i=T0(r);if(!i)return!1;let l=i.nodeAfter;if(Mk(n,i,e,1))return!0;if(r.parent.content.size==0&&(mu(l,"start")||oe.isSelectable(l))){let o=Hc(n.doc,r.before(),r.after(),Y.empty);if(o&&o.slice.size<o.to-o.from){if(e){let a=n.tr.step(o);a.setSelection(mu(l,"start")?de.findFrom(a.doc.resolve(a.mapping.map(i.pos)),1):oe.create(a.doc,a.mapping.map(i.pos))),e(a.scrollIntoView())}return!0}}return l.isAtom&&i.depth==r.depth-1?(e&&e(n.tr.delete(i.pos,i.pos+l.nodeSize).scrollIntoView()),!0):!1},Sk=(n,e,t)=>{let{$head:r,empty:i}=n.selection,l=r;if(!i)return!1;if(r.parent.isTextblock){if(t?!t.endOfTextblock("forward",n):r.parentOffset<r.parent.content.size)return!1;l=T0(r)}let o=l&&l.nodeAfter;return!o||!oe.isSelectable(o)?!1:(e&&e(n.tr.setSelection(oe.create(n.doc,l.pos)).scrollIntoView()),!0)};function T0(n){if(!n.parent.type.spec.isolating)for(let e=n.depth-1;e>=0;e--){let t=n.node(e);if(n.index(e)+1<t.childCount)return n.doc.resolve(n.after(e+1));if(t.type.spec.isolating)break}return null}const mM=(n,e)=>{let t=n.selection,r=t instanceof oe,i;if(r){if(t.node.isTextblock||!si(n.doc,t.from))return!1;i=t.from}else if(i=qc(n.doc,t.from,-1),i==null)return!1;if(e){let l=n.tr.join(i);r&&l.setSelection(oe.create(l.doc,i-n.doc.resolve(i).nodeBefore.nodeSize)),e(l.scrollIntoView())}return!0},gM=(n,e)=>{let t=n.selection,r;if(t instanceof oe){if(t.node.isTextblock||!si(n.doc,t.to))return!1;r=t.to}else if(r=qc(n.doc,t.to,1),r==null)return!1;return e&&e(n.tr.join(r).scrollIntoView()),!0},bM=(n,e)=>{let{$from:t,$to:r}=n.selection,i=t.blockRange(r),l=i&&Su(i);return l==null?!1:(e&&e(n.tr.lift(i,l).scrollIntoView()),!0)},Ck=(n,e)=>{let{$head:t,$anchor:r}=n.selection;return!t.parent.type.spec.code||!t.sameParent(r)?!1:(e&&e(n.tr.insertText(`
`).scrollIntoView()),!0)};function D0(n){for(let e=0;e<n.edgeCount;e++){let{type:t}=n.edge(e);if(t.isTextblock&&!t.hasRequiredAttrs())return t}return null}const yM=(n,e)=>{let{$head:t,$anchor:r}=n.selection;if(!t.parent.type.spec.code||!t.sameParent(r))return!1;let i=t.node(-1),l=t.indexAfter(-1),o=D0(i.contentMatchAt(l));if(!o||!i.canReplaceWith(l,l,o))return!1;if(e){let a=t.after(),f=n.tr.replaceWith(a,a,o.createAndFill());f.setSelection(de.near(f.doc.resolve(a),1)),e(f.scrollIntoView())}return!0},vk=(n,e)=>{let t=n.selection,{$from:r,$to:i}=t;if(t instanceof br||r.parent.inlineContent||i.parent.inlineContent)return!1;let l=D0(i.parent.contentMatchAt(i.indexAfter()));if(!l||!l.isTextblock)return!1;if(e){let o=(!r.parentOffset&&i.index()<i.parent.childCount?r:i).pos,a=n.tr.insert(o,l.createAndFill());a.setSelection(he.create(a.doc,o+1)),e(a.scrollIntoView())}return!0},Ek=(n,e)=>{let{$cursor:t}=n.selection;if(!t||t.parent.content.size)return!1;if(t.depth>1&&t.after()!=t.end(-1)){let l=t.before();if(gr(n.doc,l))return e&&e(n.tr.split(l).scrollIntoView()),!0}let r=t.blockRange(),i=r&&Su(r);return i==null?!1:(e&&e(n.tr.lift(r,i).scrollIntoView()),!0)};function xM(n){return(e,t)=>{let{$from:r,$to:i}=e.selection;if(e.selection instanceof oe&&e.selection.node.isBlock)return!r.parentOffset||!gr(e.doc,r.pos)?!1:(t&&t(e.tr.split(r.pos).scrollIntoView()),!0);if(!r.depth)return!1;let l=[],o,a,f=!1,h=!1;for(let x=r.depth;;x--)if(r.node(x).isBlock){f=r.end(x)==r.pos+(r.depth-x),h=r.start(x)==r.pos-(r.depth-x),a=D0(r.node(x-1).contentMatchAt(r.indexAfter(x-1))),l.unshift(f&&a?{type:a}:null),o=x;break}else{if(x==1)return!1;l.unshift(null)}let p=e.tr;(e.selection instanceof he||e.selection instanceof br)&&p.deleteSelection();let g=p.mapping.map(r.pos),y=gr(p.doc,g,l.length,l);if(y||(l[0]=a?{type:a}:null,y=gr(p.doc,g,l.length,l)),!y)return!1;if(p.split(g,l.length,l),!f&&h&&r.node(o).type!=a){let x=p.mapping.map(r.before(o)),k=p.doc.resolve(x);a&&r.node(o-1).canReplaceWith(k.index(),k.index()+1,a)&&p.setNodeMarkup(p.mapping.map(r.before(o)),a)}return t&&t(p.scrollIntoView()),!0}}const kM=xM(),SM=(n,e)=>{let{$from:t,to:r}=n.selection,i,l=t.sharedDepth(r);return l==0?!1:(i=t.before(l),e&&e(n.tr.setSelection(oe.create(n.doc,i))),!0)};function CM(n,e,t){let r=e.nodeBefore,i=e.nodeAfter,l=e.index();return!r||!i||!r.type.compatibleContent(i.type)?!1:!r.content.size&&e.parent.canReplace(l-1,l)?(t&&t(n.tr.delete(e.pos-r.nodeSize,e.pos).scrollIntoView()),!0):!e.parent.canReplace(l,l+1)||!(i.isTextblock||si(n.doc,e.pos))?!1:(t&&t(n.tr.join(e.pos).scrollIntoView()),!0)}function Mk(n,e,t,r){let i=e.nodeBefore,l=e.nodeAfter,o,a,f=i.type.spec.isolating||l.type.spec.isolating;if(!f&&CM(n,e,t))return!0;let h=!f&&e.parent.canReplace(e.index(),e.index()+1);if(h&&(o=(a=i.contentMatchAt(i.childCount)).findWrapping(l.type))&&a.matchType(o[0]||l.type).validEnd){if(t){let x=e.pos+l.nodeSize,k=j.empty;for(let A=o.length-1;A>=0;A--)k=j.from(o[A].create(null,k));k=j.from(i.copy(k));let C=n.tr.step(new jt(e.pos-1,x,e.pos,x,new Y(k,1,0),o.length,!0)),E=C.doc.resolve(x+2*o.length);E.nodeAfter&&E.nodeAfter.type==i.type&&si(C.doc,E.pos)&&C.join(E.pos),t(C.scrollIntoView())}return!0}let p=l.type.spec.isolating||r>0&&f?null:de.findFrom(e,1),g=p&&p.$from.blockRange(p.$to),y=g&&Su(g);if(y!=null&&y>=e.depth)return t&&t(n.tr.lift(g,y).scrollIntoView()),!0;if(h&&mu(l,"start",!0)&&mu(i,"end")){let x=i,k=[];for(;k.push(x),!x.isTextblock;)x=x.lastChild;let C=l,E=1;for(;!C.isTextblock;C=C.firstChild)E++;if(x.canReplace(x.childCount,x.childCount,C.content)){if(t){let A=j.empty;for(let B=k.length-1;B>=0;B--)A=j.from(k[B].copy(A));let N=n.tr.step(new jt(e.pos-k.length,e.pos+l.nodeSize,e.pos+E,e.pos+l.nodeSize-E,new Y(A,k.length,0),0,!0));t(N.scrollIntoView())}return!0}}return!1}function Ak(n){return function(e,t){let r=e.selection,i=n<0?r.$from:r.$to,l=i.depth;for(;i.node(l).isInline;){if(!l)return!1;l--}return i.node(l).isTextblock?(t&&t(e.tr.setSelection(he.create(e.doc,n<0?i.start(l):i.end(l)))),!0):!1}}const vM=Ak(-1),EM=Ak(1);function MM(n,e=null){return function(t,r){let{$from:i,$to:l}=t.selection,o=i.blockRange(l),a=o&&g0(o,n,e);return a?(r&&r(t.tr.wrap(o,a).scrollIntoView()),!0):!1}}function g2(n,e=null){return function(t,r){let i=!1;for(let l=0;l<t.selection.ranges.length&&!i;l++){let{$from:{pos:o},$to:{pos:a}}=t.selection.ranges[l];t.doc.nodesBetween(o,a,(f,h)=>{if(i)return!1;if(!(!f.isTextblock||f.hasMarkup(n,e)))if(f.type==n)i=!0;else{let p=t.doc.resolve(h),g=p.index();i=p.parent.canReplaceWith(g,g+1,n)}})}if(!i)return!1;if(r){let l=t.tr;for(let o=0;o<t.selection.ranges.length;o++){let{$from:{pos:a},$to:{pos:f}}=t.selection.ranges[o];l.setBlockType(a,f,n,e)}r(l.scrollIntoView())}return!0}}function w0(...n){return function(e,t,r){for(let i=0;i<n.length;i++)if(n[i](e,t,r))return!0;return!1}}w0(M0,gk,yk);w0(M0,kk,Sk);w0(Ck,vk,Ek,kM);typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):typeof os<"u"&&os.platform&&os.platform()=="darwin";function AM(n,e=null){return function(t,r){let{$from:i,$to:l}=t.selection,o=i.blockRange(l);if(!o)return!1;let a=r?t.tr:null;return TM(a,o,n,e)?(r&&r(a.scrollIntoView()),!0):!1}}function TM(n,e,t,r=null){let i=!1,l=e,o=e.$from.doc;if(e.depth>=2&&e.$from.node(e.depth-1).type.compatibleContent(t)&&e.startIndex==0){if(e.$from.index(e.depth-1)==0)return!1;let f=o.resolve(e.start-2);l=new dc(f,f,e.depth),e.endIndex<e.parent.childCount&&(e=new dc(e.$from,o.resolve(e.$to.end(e.depth)),e.depth)),i=!0}let a=g0(l,t,r,e);return a?(n&&DM(n,e,a,i,t),!0):!1}function DM(n,e,t,r,i){let l=j.empty;for(let p=t.length-1;p>=0;p--)l=j.from(t[p].type.create(t[p].attrs,l));n.step(new jt(e.start-(r?2:0),e.end,e.start,e.end,new Y(l,0,0),t.length,!0));let o=0;for(let p=0;p<t.length;p++)t[p].type==i&&(o=p+1);let a=t.length-o,f=e.start+t.length-(r?2:0),h=e.parent;for(let p=e.startIndex,g=e.endIndex,y=!0;p<g;p++,y=!1)!y&&gr(n.doc,f,a)&&(n.split(f,a),f+=2*a),f+=h.child(p).nodeSize;return n}function wM(n){return function(e,t){let{$from:r,$to:i}=e.selection,l=r.blockRange(i,o=>o.childCount>0&&o.firstChild.type==n);return l?t?r.node(l.depth-1).type==n?OM(e,t,n,l):_M(e,t,l):!0:!1}}function OM(n,e,t,r){let i=n.tr,l=r.end,o=r.$to.end(r.depth);l<o&&(i.step(new jt(l-1,o,l,o,new Y(j.from(t.create(null,r.parent.copy())),1,0),1,!0)),r=new dc(i.doc.resolve(r.$from.pos),i.doc.resolve(o),r.depth));const a=Su(r);if(a==null)return!1;i.lift(r,a);let f=i.doc.resolve(i.mapping.map(l,-1)-1);return si(i.doc,f.pos)&&f.nodeBefore.type==f.nodeAfter.type&&i.join(f.pos),e(i.scrollIntoView()),!0}function _M(n,e,t){let r=n.tr,i=t.parent;for(let x=t.end,k=t.endIndex-1,C=t.startIndex;k>C;k--)x-=i.child(k).nodeSize,r.delete(x-1,x+1);let l=r.doc.resolve(t.start),o=l.nodeAfter;if(r.mapping.map(t.end)!=t.start+l.nodeAfter.nodeSize)return!1;let a=t.startIndex==0,f=t.endIndex==i.childCount,h=l.node(-1),p=l.index(-1);if(!h.canReplace(p+(a?0:1),p+1,o.content.append(f?j.empty:j.from(i))))return!1;let g=l.pos,y=g+o.nodeSize;return r.step(new jt(g-(a?1:0),y+(f?1:0),g+1,y-1,new Y((a?j.empty:j.from(i.copy(j.empty))).append(f?j.empty:j.from(i.copy(j.empty))),a?0:1,f?0:1),a?0:1)),e(r.scrollIntoView()),!0}function NM(n){return function(e,t){let{$from:r,$to:i}=e.selection,l=r.blockRange(i,h=>h.childCount>0&&h.firstChild.type==n);if(!l)return!1;let o=l.startIndex;if(o==0)return!1;let a=l.parent,f=a.child(o-1);if(f.type!=n)return!1;if(t){let h=f.lastChild&&f.lastChild.type==a.type,p=j.from(h?n.create():null),g=new Y(j.from(n.create(null,j.from(a.type.create(null,p)))),h?3:1,0),y=l.start,x=l.end;t(e.tr.step(new jt(y-(h?3:1),x,y,x,g,1,!0)).scrollIntoView())}return!0}}function Pc(n){const{state:e,transaction:t}=n;let{selection:r}=t,{doc:i}=t,{storedMarks:l}=t;return{...e,apply:e.apply.bind(e),applyTransaction:e.applyTransaction.bind(e),plugins:e.plugins,schema:e.schema,reconfigure:e.reconfigure.bind(e),toJSON:e.toJSON.bind(e),get storedMarks(){return l},get selection(){return r},get doc(){return i},get tr(){return r=t.selection,i=t.doc,l=t.storedMarks,t}}}let Jc=class{constructor(e){this.editor=e.editor,this.rawCommands=this.editor.extensionManager.commands,this.customState=e.state}get hasCustomState(){return!!this.customState}get state(){return this.customState||this.editor.state}get commands(){const{rawCommands:e,editor:t,state:r}=this,{view:i}=t,{tr:l}=r,o=this.buildProps(l);return Object.fromEntries(Object.entries(e).map(([a,f])=>[a,(...p)=>{const g=f(...p)(o);return!l.getMeta("preventDispatch")&&!this.hasCustomState&&i.dispatch(l),g}]))}get chain(){return()=>this.createChain()}get can(){return()=>this.createCan()}createChain(e,t=!0){const{rawCommands:r,editor:i,state:l}=this,{view:o}=i,a=[],f=!!e,h=e||l.tr,p=()=>(!f&&t&&!h.getMeta("preventDispatch")&&!this.hasCustomState&&o.dispatch(h),a.every(y=>y===!0)),g={...Object.fromEntries(Object.entries(r).map(([y,x])=>[y,(...C)=>{const E=this.buildProps(h,t),A=x(...C)(E);return a.push(A),g}])),run:p};return g}createCan(e){const{rawCommands:t,state:r}=this,i=!1,l=e||r.tr,o=this.buildProps(l,i);return{...Object.fromEntries(Object.entries(t).map(([f,h])=>[f,(...p)=>h(...p)({...o,dispatch:void 0})])),chain:()=>this.createChain(l,i)}}buildProps(e,t=!0){const{rawCommands:r,editor:i,state:l}=this,{view:o}=i,a={tr:e,editor:i,view:o,state:Pc({state:l,transaction:e}),dispatch:t?()=>{}:void 0,chain:()=>this.createChain(e,t),can:()=>this.createCan(e),get commands(){return Object.fromEntries(Object.entries(r).map(([f,h])=>[f,(...p)=>h(...p)(a)]))}};return a}};class RM{constructor(){this.callbacks={}}on(e,t){return this.callbacks[e]||(this.callbacks[e]=[]),this.callbacks[e].push(t),this}emit(e,...t){const r=this.callbacks[e];return r&&r.forEach(i=>i.apply(this,t)),this}off(e,t){const r=this.callbacks[e];return r&&(t?this.callbacks[e]=r.filter(i=>i!==t):delete this.callbacks[e]),this}once(e,t){const r=(...i)=>{this.off(e,r),t.apply(this,i)};return this.on(e,r)}removeAllListeners(){this.callbacks={}}}function X(n,e,t){return n.config[e]===void 0&&n.parent?X(n.parent,e,t):typeof n.config[e]=="function"?n.config[e].bind({...t,parent:n.parent?X(n.parent,e,t):null}):n.config[e]}function Gc(n){const e=n.filter(i=>i.type==="extension"),t=n.filter(i=>i.type==="node"),r=n.filter(i=>i.type==="mark");return{baseExtensions:e,nodeExtensions:t,markExtensions:r}}function Tk(n){const e=[],{nodeExtensions:t,markExtensions:r}=Gc(n),i=[...t,...r],l={default:null,rendered:!0,renderHTML:null,parseHTML:null,keepOnSplit:!0,isRequired:!1};return n.forEach(o=>{const a={name:o.name,options:o.options,storage:o.storage,extensions:i},f=X(o,"addGlobalAttributes",a);if(!f)return;f().forEach(p=>{p.types.forEach(g=>{Object.entries(p.attributes).forEach(([y,x])=>{e.push({type:g,name:y,attribute:{...l,...x}})})})})}),i.forEach(o=>{const a={name:o.name,options:o.options,storage:o.storage},f=X(o,"addAttributes",a);if(!f)return;const h=f();Object.entries(h).forEach(([p,g])=>{const y={...l,...g};typeof(y==null?void 0:y.default)=="function"&&(y.default=y.default()),y!=null&&y.isRequired&&(y==null?void 0:y.default)===void 0&&delete y.default,e.push({type:o.name,name:p,attribute:y})})}),e}function ct(n,e){if(typeof n=="string"){if(!e.nodes[n])throw Error(`There is no node type named '${n}'. Maybe you forgot to add the extension?`);return e.nodes[n]}return n}function zt(...n){return n.filter(e=>!!e).reduce((e,t)=>{const r={...e};return Object.entries(t).forEach(([i,l])=>{if(!r[i]){r[i]=l;return}if(i==="class"){const a=l?String(l).split(" "):[],f=r[i]?r[i].split(" "):[],h=a.filter(p=>!f.includes(p));r[i]=[...f,...h].join(" ")}else if(i==="style"){const a=l?l.split(";").map(p=>p.trim()).filter(Boolean):[],f=r[i]?r[i].split(";").map(p=>p.trim()).filter(Boolean):[],h=new Map;f.forEach(p=>{const[g,y]=p.split(":").map(x=>x.trim());h.set(g,y)}),a.forEach(p=>{const[g,y]=p.split(":").map(x=>x.trim());h.set(g,y)}),r[i]=Array.from(h.entries()).map(([p,g])=>`${p}: ${g}`).join("; ")}else r[i]=l}),r},{})}function Hp(n,e){return e.filter(t=>t.type===n.type.name).filter(t=>t.attribute.rendered).map(t=>t.attribute.renderHTML?t.attribute.renderHTML(n.attrs)||{}:{[t.name]:n.attrs[t.name]}).reduce((t,r)=>zt(t,r),{})}function Dk(n){return typeof n=="function"}function me(n,e=void 0,...t){return Dk(n)?e?n.bind(e)(...t):n(...t):n}function zM(n={}){return Object.keys(n).length===0&&n.constructor===Object}function BM(n){return typeof n!="string"?n:n.match(/^[+-]?(?:\d*\.)?\d+$/)?Number(n):n==="true"?!0:n==="false"?!1:n}function b2(n,e){return"style"in n?n:{...n,getAttrs:t=>{const r=n.getAttrs?n.getAttrs(t):n.attrs;if(r===!1)return!1;const i=e.reduce((l,o)=>{const a=o.attribute.parseHTML?o.attribute.parseHTML(t):BM(t.getAttribute(o.name));return a==null?l:{...l,[o.name]:a}},{});return{...r,...i}}}}function y2(n){return Object.fromEntries(Object.entries(n).filter(([e,t])=>e==="attrs"&&zM(t)?!1:t!=null))}function $M(n,e){var t;const r=Tk(n),{nodeExtensions:i,markExtensions:l}=Gc(n),o=(t=i.find(h=>X(h,"topNode")))===null||t===void 0?void 0:t.name,a=Object.fromEntries(i.map(h=>{const p=r.filter(A=>A.type===h.name),g={name:h.name,options:h.options,storage:h.storage,editor:e},y=n.reduce((A,N)=>{const B=X(N,"extendNodeSchema",g);return{...A,...B?B(h):{}}},{}),x=y2({...y,content:me(X(h,"content",g)),marks:me(X(h,"marks",g)),group:me(X(h,"group",g)),inline:me(X(h,"inline",g)),atom:me(X(h,"atom",g)),selectable:me(X(h,"selectable",g)),draggable:me(X(h,"draggable",g)),code:me(X(h,"code",g)),whitespace:me(X(h,"whitespace",g)),linebreakReplacement:me(X(h,"linebreakReplacement",g)),defining:me(X(h,"defining",g)),isolating:me(X(h,"isolating",g)),attrs:Object.fromEntries(p.map(A=>{var N;return[A.name,{default:(N=A==null?void 0:A.attribute)===null||N===void 0?void 0:N.default}]}))}),k=me(X(h,"parseHTML",g));k&&(x.parseDOM=k.map(A=>b2(A,p)));const C=X(h,"renderHTML",g);C&&(x.toDOM=A=>C({node:A,HTMLAttributes:Hp(A,p)}));const E=X(h,"renderText",g);return E&&(x.toText=E),[h.name,x]})),f=Object.fromEntries(l.map(h=>{const p=r.filter(E=>E.type===h.name),g={name:h.name,options:h.options,storage:h.storage,editor:e},y=n.reduce((E,A)=>{const N=X(A,"extendMarkSchema",g);return{...E,...N?N(h):{}}},{}),x=y2({...y,inclusive:me(X(h,"inclusive",g)),excludes:me(X(h,"excludes",g)),group:me(X(h,"group",g)),spanning:me(X(h,"spanning",g)),code:me(X(h,"code",g)),attrs:Object.fromEntries(p.map(E=>{var A;return[E.name,{default:(A=E==null?void 0:E.attribute)===null||A===void 0?void 0:A.default}]}))}),k=me(X(h,"parseHTML",g));k&&(x.parseDOM=k.map(E=>b2(E,p)));const C=X(h,"renderHTML",g);return C&&(x.toDOM=E=>C({mark:E,HTMLAttributes:Hp(E,p)})),[h.name,x]}));return new f0({topNode:o,nodes:a,marks:f})}function jh(n,e){return e.nodes[n]||e.marks[n]||null}function x2(n,e){return Array.isArray(e)?e.some(t=>(typeof t=="string"?t:t.name)===n.name):e}function go(n,e){const t=co.fromSchema(e).serializeFragment(n),i=document.implementation.createHTMLDocument().createElement("div");return i.appendChild(t),i.innerHTML}const FM=(n,e=500)=>{let t="";const r=n.parentOffset;return n.parent.nodesBetween(Math.max(0,r-e),r,(i,l,o,a)=>{var f,h;const p=((h=(f=i.type.spec).toText)===null||h===void 0?void 0:h.call(f,{node:i,pos:l,parent:o,index:a}))||i.textContent||"%leaf%";t+=i.isAtom&&!i.isText?p:p.slice(0,Math.max(0,r-l))}),t};function O0(n){return Object.prototype.toString.call(n)==="[object RegExp]"}class Kc{constructor(e){this.find=e.find,this.handler=e.handler}}const LM=(n,e)=>{if(O0(e))return e.exec(n);const t=e(n);if(!t)return null;const r=[t.text];return r.index=t.index,r.input=n,r.data=t.data,t.replaceWith&&(t.text.includes(t.replaceWith)||console.warn('[tiptap warn]: "inputRuleMatch.replaceWith" must be part of "inputRuleMatch.text".'),r.push(t.replaceWith)),r};function Ia(n){var e;const{editor:t,from:r,to:i,text:l,rules:o,plugin:a}=n,{view:f}=t;if(f.composing)return!1;const h=f.state.doc.resolve(r);if(h.parent.type.spec.code||!((e=h.nodeBefore||h.nodeAfter)===null||e===void 0)&&e.marks.find(y=>y.type.spec.code))return!1;let p=!1;const g=FM(h)+l;return o.forEach(y=>{if(p)return;const x=LM(g,y.find);if(!x)return;const k=f.state.tr,C=Pc({state:f.state,transaction:k}),E={from:r-(x[0].length-l.length),to:i},{commands:A,chain:N,can:B}=new Jc({editor:t,state:C});y.handler({state:C,range:E,match:x,commands:A,chain:N,can:B})===null||!k.steps.length||(k.setMeta(a,{transform:k,from:r,to:i,text:l}),f.dispatch(k),p=!0)}),p}function IM(n){const{editor:e,rules:t}=n,r=new Bt({state:{init(){return null},apply(i,l,o){const a=i.getMeta(r);if(a)return a;const f=i.getMeta("applyInputRules");return!!f&&setTimeout(()=>{let{text:p}=f;typeof p=="string"?p=p:p=go(j.from(p),o.schema);const{from:g}=f,y=g+p.length;Ia({editor:e,from:g,to:y,text:p,rules:t,plugin:r})}),i.selectionSet||i.docChanged?null:l}},props:{handleTextInput(i,l,o,a){return Ia({editor:e,from:l,to:o,text:a,rules:t,plugin:r})},handleDOMEvents:{compositionend:i=>(setTimeout(()=>{const{$cursor:l}=i.state.selection;l&&Ia({editor:e,from:l.pos,to:l.pos,text:"",rules:t,plugin:r})}),!1)},handleKeyDown(i,l){if(l.key!=="Enter")return!1;const{$cursor:o}=i.state.selection;return o?Ia({editor:e,from:o.pos,to:o.pos,text:`
`,rules:t,plugin:r}):!1}},isInputRules:!0});return r}function qM(n){return Object.prototype.toString.call(n).slice(8,-1)}function qa(n){return qM(n)!=="Object"?!1:n.constructor===Object&&Object.getPrototypeOf(n)===Object.prototype}function Yc(n,e){const t={...n};return qa(n)&&qa(e)&&Object.keys(e).forEach(r=>{qa(e[r])&&qa(n[r])?t[r]=Yc(n[r],e[r]):t[r]=e[r]}),t}let Nn=class Vp{constructor(e={}){this.type="mark",this.name="mark",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=me(X(this,"addOptions",{name:this.name}))),this.storage=me(X(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new Vp(e)}configure(e={}){const t=this.extend({...this.config,addOptions:()=>Yc(this.options,e)});return t.name=this.name,t.parent=this.parent,t}extend(e={}){const t=new Vp(e);return t.parent=this,this.child=t,t.name=e.name?e.name:t.parent.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${t.name}".`),t.options=me(X(t,"addOptions",{name:t.name})),t.storage=me(X(t,"addStorage",{name:t.name,options:t.options})),t}static handleExit({editor:e,mark:t}){const{tr:r}=e.state,i=e.state.selection.$from;if(i.pos===i.end()){const o=i.marks();if(!!!o.find(h=>(h==null?void 0:h.type.name)===t.name))return!1;const f=o.find(h=>(h==null?void 0:h.type.name)===t.name);return f&&r.removeStoredMark(f),r.insertText(" ",i.pos),e.view.dispatch(r),!0}return!1}};function HM(n){return typeof n=="number"}class VM{constructor(e){this.find=e.find,this.handler=e.handler}}const UM=(n,e,t)=>{if(O0(e))return[...n.matchAll(e)];const r=e(n,t);return r?r.map(i=>{const l=[i.text];return l.index=i.index,l.input=n,l.data=i.data,i.replaceWith&&(i.text.includes(i.replaceWith)||console.warn('[tiptap warn]: "pasteRuleMatch.replaceWith" must be part of "pasteRuleMatch.text".'),l.push(i.replaceWith)),l}):[]};function jM(n){const{editor:e,state:t,from:r,to:i,rule:l,pasteEvent:o,dropEvent:a}=n,{commands:f,chain:h,can:p}=new Jc({editor:e,state:t}),g=[];return t.doc.nodesBetween(r,i,(x,k)=>{if(!x.isTextblock||x.type.spec.code)return;const C=Math.max(r,k),E=Math.min(i,k+x.content.size),A=x.textBetween(C-k,E-k,void 0,"");UM(A,l.find,o).forEach(B=>{if(B.index===void 0)return;const H=C+B.index+1,L=H+B[0].length,U={from:t.tr.mapping.map(H),to:t.tr.mapping.map(L)},Q=l.handler({state:t,range:U,match:B,commands:f,chain:h,can:p,pasteEvent:o,dropEvent:a});g.push(Q)})}),g.every(x=>x!==null)}let Ha=null;const PM=n=>{var e;const t=new ClipboardEvent("paste",{clipboardData:new DataTransfer});return(e=t.clipboardData)===null||e===void 0||e.setData("text/html",n),t};function JM(n){const{editor:e,rules:t}=n;let r=null,i=!1,l=!1,o=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,a;try{a=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{a=null}const f=({state:p,from:g,to:y,rule:x,pasteEvt:k})=>{const C=p.tr,E=Pc({state:p,transaction:C});if(!(!jM({editor:e,state:E,from:Math.max(g-1,0),to:y.b-1,rule:x,pasteEvent:k,dropEvent:a})||!C.steps.length)){try{a=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{a=null}return o=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,C}};return t.map(p=>new Bt({view(g){const y=k=>{var C;r=!((C=g.dom.parentElement)===null||C===void 0)&&C.contains(k.target)?g.dom.parentElement:null,r&&(Ha=e)},x=()=>{Ha&&(Ha=null)};return window.addEventListener("dragstart",y),window.addEventListener("dragend",x),{destroy(){window.removeEventListener("dragstart",y),window.removeEventListener("dragend",x)}}},props:{handleDOMEvents:{drop:(g,y)=>{if(l=r===g.dom.parentElement,a=y,!l){const x=Ha;x&&setTimeout(()=>{const k=x.state.selection;k&&x.commands.deleteRange({from:k.from,to:k.to})},10)}return!1},paste:(g,y)=>{var x;const k=(x=y.clipboardData)===null||x===void 0?void 0:x.getData("text/html");return o=y,i=!!(k!=null&&k.includes("data-pm-slice")),!1}}},appendTransaction:(g,y,x)=>{const k=g[0],C=k.getMeta("uiEvent")==="paste"&&!i,E=k.getMeta("uiEvent")==="drop"&&!l,A=k.getMeta("applyPasteRules"),N=!!A;if(!C&&!E&&!N)return;if(N){let{text:L}=A;typeof L=="string"?L=L:L=go(j.from(L),x.schema);const{from:U}=A,Q=U+L.length,ne=PM(L);return f({rule:p,state:x,from:U,to:{b:Q},pasteEvt:ne})}const B=y.doc.content.findDiffStart(x.doc.content),H=y.doc.content.findDiffEnd(x.doc.content);if(!(!HM(B)||!H||B===H.b))return f({rule:p,state:x,from:B,to:H,pasteEvt:o})}}))}function GM(n){const e=n.filter((t,r)=>n.indexOf(t)!==r);return Array.from(new Set(e))}class su{constructor(e,t){this.splittableMarks=[],this.editor=t,this.extensions=su.resolve(e),this.schema=$M(this.extensions,t),this.setupExtensions()}static resolve(e){const t=su.sort(su.flatten(e)),r=GM(t.map(i=>i.name));return r.length&&console.warn(`[tiptap warn]: Duplicate extension names found: [${r.map(i=>`'${i}'`).join(", ")}]. This can lead to issues.`),t}static flatten(e){return e.map(t=>{const r={name:t.name,options:t.options,storage:t.storage},i=X(t,"addExtensions",r);return i?[t,...this.flatten(i())]:t}).flat(10)}static sort(e){return e.sort((r,i)=>{const l=X(r,"priority")||100,o=X(i,"priority")||100;return l>o?-1:l<o?1:0})}get commands(){return this.extensions.reduce((e,t)=>{const r={name:t.name,options:t.options,storage:t.storage,editor:this.editor,type:jh(t.name,this.schema)},i=X(t,"addCommands",r);return i?{...e,...i()}:e},{})}get plugins(){const{editor:e}=this,t=su.sort([...this.extensions].reverse()),r=[],i=[],l=t.map(o=>{const a={name:o.name,options:o.options,storage:o.storage,editor:e,type:jh(o.name,this.schema)},f=[],h=X(o,"addKeyboardShortcuts",a);let p={};if(o.type==="mark"&&X(o,"exitable",a)&&(p.ArrowRight=()=>Nn.handleExit({editor:e,mark:o})),h){const C=Object.fromEntries(Object.entries(h()).map(([E,A])=>[E,()=>A({editor:e})]));p={...p,...C}}const g=dM(p);f.push(g);const y=X(o,"addInputRules",a);x2(o,e.options.enableInputRules)&&y&&r.push(...y());const x=X(o,"addPasteRules",a);x2(o,e.options.enablePasteRules)&&x&&i.push(...x());const k=X(o,"addProseMirrorPlugins",a);if(k){const C=k();f.push(...C)}return f}).flat();return[IM({editor:e,rules:r}),...JM({editor:e,rules:i}),...l]}get attributes(){return Tk(this.extensions)}get nodeViews(){const{editor:e}=this,{nodeExtensions:t}=Gc(this.extensions);return Object.fromEntries(t.filter(r=>!!X(r,"addNodeView")).map(r=>{const i=this.attributes.filter(f=>f.type===r.name),l={name:r.name,options:r.options,storage:r.storage,editor:e,type:ct(r.name,this.schema)},o=X(r,"addNodeView",l);if(!o)return[];const a=(f,h,p,g,y)=>{const x=Hp(f,i);return o()({node:f,view:h,getPos:p,decorations:g,innerDecorations:y,editor:e,extension:r,HTMLAttributes:x})};return[r.name,a]}))}setupExtensions(){this.extensions.forEach(e=>{var t;this.editor.extensionStorage[e.name]=e.storage;const r={name:e.name,options:e.options,storage:e.storage,editor:this.editor,type:jh(e.name,this.schema)};e.type==="mark"&&(!((t=me(X(e,"keepOnSplit",r)))!==null&&t!==void 0)||t)&&this.splittableMarks.push(e.name);const i=X(e,"onBeforeCreate",r),l=X(e,"onCreate",r),o=X(e,"onUpdate",r),a=X(e,"onSelectionUpdate",r),f=X(e,"onTransaction",r),h=X(e,"onFocus",r),p=X(e,"onBlur",r),g=X(e,"onDestroy",r);i&&this.editor.on("beforeCreate",i),l&&this.editor.on("create",l),o&&this.editor.on("update",o),a&&this.editor.on("selectionUpdate",a),f&&this.editor.on("transaction",f),h&&this.editor.on("focus",h),p&&this.editor.on("blur",p),g&&this.editor.on("destroy",g)})}}let $t=class Up{constructor(e={}){this.type="extension",this.name="extension",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=me(X(this,"addOptions",{name:this.name}))),this.storage=me(X(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new Up(e)}configure(e={}){const t=this.extend({...this.config,addOptions:()=>Yc(this.options,e)});return t.name=this.name,t.parent=this.parent,t}extend(e={}){const t=new Up({...this.config,...e});return t.parent=this,this.child=t,t.name=e.name?e.name:t.parent.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${t.name}".`),t.options=me(X(t,"addOptions",{name:t.name})),t.storage=me(X(t,"addStorage",{name:t.name,options:t.options})),t}};function wk(n,e,t){const{from:r,to:i}=e,{blockSeparator:l=`

`,textSerializers:o={}}=t||{};let a="";return n.nodesBetween(r,i,(f,h,p,g)=>{var y;f.isBlock&&h>r&&(a+=l);const x=o==null?void 0:o[f.type.name];if(x)return p&&(a+=x({node:f,pos:h,parent:p,index:g,range:e})),!1;f.isText&&(a+=(y=f==null?void 0:f.text)===null||y===void 0?void 0:y.slice(Math.max(r,h)-h,i-h))}),a}function Ok(n){return Object.fromEntries(Object.entries(n.nodes).filter(([,e])=>e.spec.toText).map(([e,t])=>[e,t.spec.toText]))}const _k=$t.create({name:"clipboardTextSerializer",addOptions(){return{blockSeparator:void 0}},addProseMirrorPlugins(){return[new Bt({key:new _n("clipboardTextSerializer"),props:{clipboardTextSerializer:()=>{const{editor:n}=this,{state:e,schema:t}=n,{doc:r,selection:i}=e,{ranges:l}=i,o=Math.min(...l.map(p=>p.$from.pos)),a=Math.max(...l.map(p=>p.$to.pos)),f=Ok(t);return wk(r,{from:o,to:a},{...this.options.blockSeparator!==void 0?{blockSeparator:this.options.blockSeparator}:{},textSerializers:f})}}})]}}),KM=()=>({editor:n,view:e})=>(requestAnimationFrame(()=>{var t;n.isDestroyed||(e.dom.blur(),(t=window==null?void 0:window.getSelection())===null||t===void 0||t.removeAllRanges())}),!0),YM=(n=!1)=>({commands:e})=>e.setContent("",n),ZM=()=>({state:n,tr:e,dispatch:t})=>{const{selection:r}=e,{ranges:i}=r;return t&&i.forEach(({$from:l,$to:o})=>{n.doc.nodesBetween(l.pos,o.pos,(a,f)=>{if(a.type.isText)return;const{doc:h,mapping:p}=e,g=h.resolve(p.map(f)),y=h.resolve(p.map(f+a.nodeSize)),x=g.blockRange(y);if(!x)return;const k=Su(x);if(a.type.isTextblock){const{defaultType:C}=g.parent.contentMatchAt(g.index());e.setNodeMarkup(x.start,C)}(k||k===0)&&e.lift(x,k)})}),!0},XM=n=>e=>n(e),QM=()=>({state:n,dispatch:e})=>vk(n,e),WM=(n,e)=>({editor:t,tr:r})=>{const{state:i}=t,l=i.doc.slice(n.from,n.to);r.deleteRange(n.from,n.to);const o=r.mapping.map(e);return r.insert(o,l.content),r.setSelection(new he(r.doc.resolve(o-1))),!0},eA=()=>({tr:n,dispatch:e})=>{const{selection:t}=n,r=t.$anchor.node();if(r.content.size>0)return!1;const i=n.selection.$anchor;for(let l=i.depth;l>0;l-=1)if(i.node(l).type===r.type){if(e){const a=i.before(l),f=i.after(l);n.delete(a,f).scrollIntoView()}return!0}return!1},tA=n=>({tr:e,state:t,dispatch:r})=>{const i=ct(n,t.schema),l=e.selection.$anchor;for(let o=l.depth;o>0;o-=1)if(l.node(o).type===i){if(r){const f=l.before(o),h=l.after(o);e.delete(f,h).scrollIntoView()}return!0}return!1},nA=n=>({tr:e,dispatch:t})=>{const{from:r,to:i}=n;return t&&e.delete(r,i),!0},rA=()=>({state:n,dispatch:e})=>M0(n,e),iA=()=>({commands:n})=>n.keyboardShortcut("Enter"),lA=()=>({state:n,dispatch:e})=>yM(n,e);function xc(n,e,t={strict:!0}){const r=Object.keys(e);return r.length?r.every(i=>t.strict?e[i]===n[i]:O0(e[i])?e[i].test(n[i]):e[i]===n[i]):!0}function Nk(n,e,t={}){return n.find(r=>r.type===e&&xc(Object.fromEntries(Object.keys(t).map(i=>[i,r.attrs[i]])),t))}function k2(n,e,t={}){return!!Nk(n,e,t)}function _0(n,e,t){var r;if(!n||!e)return;let i=n.parent.childAfter(n.parentOffset);if((!i.node||!i.node.marks.some(p=>p.type===e))&&(i=n.parent.childBefore(n.parentOffset)),!i.node||!i.node.marks.some(p=>p.type===e)||(t=t||((r=i.node.marks[0])===null||r===void 0?void 0:r.attrs),!Nk([...i.node.marks],e,t)))return;let o=i.index,a=n.start()+i.offset,f=o+1,h=a+i.node.nodeSize;for(;o>0&&k2([...n.parent.child(o-1).marks],e,t);)o-=1,a-=n.parent.child(o).nodeSize;for(;f<n.parent.childCount&&k2([...n.parent.child(f).marks],e,t);)h+=n.parent.child(f).nodeSize,f+=1;return{from:a,to:h}}function ai(n,e){if(typeof n=="string"){if(!e.marks[n])throw Error(`There is no mark type named '${n}'. Maybe you forgot to add the extension?`);return e.marks[n]}return n}const uA=(n,e={})=>({tr:t,state:r,dispatch:i})=>{const l=ai(n,r.schema),{doc:o,selection:a}=t,{$from:f,from:h,to:p}=a;if(i){const g=_0(f,l,e);if(g&&g.from<=h&&g.to>=p){const y=he.create(o,g.from,g.to);t.setSelection(y)}}return!0},sA=n=>e=>{const t=typeof n=="function"?n(e):n;for(let r=0;r<t.length;r+=1)if(t[r](e))return!0;return!1};function Rk(n){return n instanceof he}function Li(n=0,e=0,t=0){return Math.min(Math.max(n,e),t)}function zk(n,e=null){if(!e)return null;const t=de.atStart(n),r=de.atEnd(n);if(e==="start"||e===!0)return t;if(e==="end")return r;const i=t.from,l=r.to;return e==="all"?he.create(n,Li(0,i,l),Li(n.content.size,i,l)):he.create(n,Li(e,i,l),Li(e,i,l))}function oA(){return navigator.platform==="Android"||/android/i.test(navigator.userAgent)}function N0(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}const aA=(n=null,e={})=>({editor:t,view:r,tr:i,dispatch:l})=>{e={scrollIntoView:!0,...e};const o=()=>{(N0()||oA())&&r.dom.focus(),requestAnimationFrame(()=>{t.isDestroyed||(r.focus(),e!=null&&e.scrollIntoView&&t.commands.scrollIntoView())})};if(r.hasFocus()&&n===null||n===!1)return!0;if(l&&n===null&&!Rk(t.state.selection))return o(),!0;const a=zk(i.doc,n)||t.state.selection,f=t.state.selection.eq(a);return l&&(f||i.setSelection(a),f&&i.storedMarks&&i.setStoredMarks(i.storedMarks),o()),!0},cA=(n,e)=>t=>n.every((r,i)=>e(r,{...t,index:i})),fA=(n,e)=>({tr:t,commands:r})=>r.insertContentAt({from:t.selection.from,to:t.selection.to},n,e),Bk=n=>{const e=n.childNodes;for(let t=e.length-1;t>=0;t-=1){const r=e[t];r.nodeType===3&&r.nodeValue&&/^(\n\s\s|\n)$/.test(r.nodeValue)?n.removeChild(r):r.nodeType===1&&Bk(r)}return n};function Va(n){const e=`<body>${n}</body>`,t=new window.DOMParser().parseFromString(e,"text/html").body;return Bk(t)}function kc(n,e,t){if(n instanceof ti||n instanceof j)return n;t={slice:!0,parseOptions:{},...t};const r=typeof n=="object"&&n!==null,i=typeof n=="string";if(r)try{if(Array.isArray(n)&&n.length>0)return j.fromArray(n.map(a=>e.nodeFromJSON(a)));const o=e.nodeFromJSON(n);return t.errorOnInvalidContent&&o.check(),o}catch(l){if(t.errorOnInvalidContent)throw new Error("[tiptap error]: Invalid JSON content",{cause:l});return console.warn("[tiptap warn]: Invalid content.","Passed value:",n,"Error:",l),kc("",e,t)}if(i){if(t.errorOnInvalidContent){let o=!1,a="";const f=new f0({topNode:e.spec.topNode,marks:e.spec.marks,nodes:e.spec.nodes.append({__tiptap__private__unknown__catch__all__node:{content:"inline*",group:"block",parseDOM:[{tag:"*",getAttrs:h=>(o=!0,a=typeof h=="string"?h:h.outerHTML,null)}]}})});if(t.slice?ou.fromSchema(f).parseSlice(Va(n),t.parseOptions):ou.fromSchema(f).parse(Va(n),t.parseOptions),t.errorOnInvalidContent&&o)throw new Error("[tiptap error]: Invalid HTML content",{cause:new Error(`Invalid element found: ${a}`)})}const l=ou.fromSchema(e);return t.slice?l.parseSlice(Va(n),t.parseOptions).content:l.parse(Va(n),t.parseOptions)}return kc("",e,t)}function dA(n,e,t){const r=n.steps.length-1;if(r<e)return;const i=n.steps[r];if(!(i instanceof wn||i instanceof jt))return;const l=n.mapping.maps[r];let o=0;l.forEach((a,f,h,p)=>{o===0&&(o=p)}),n.setSelection(de.near(n.doc.resolve(o),t))}const hA=n=>!("type"in n),pA=(n,e,t)=>({tr:r,dispatch:i,editor:l})=>{var o;if(i){t={parseOptions:l.options.parseOptions,updateSelection:!0,applyInputRules:!1,applyPasteRules:!1,...t};let a;try{a=kc(e,l.schema,{parseOptions:{preserveWhitespace:"full",...t.parseOptions},errorOnInvalidContent:(o=t.errorOnInvalidContent)!==null&&o!==void 0?o:l.options.enableContentCheck})}catch(k){return l.emit("contentError",{editor:l,error:k,disableCollaboration:()=>{l.storage.collaboration&&(l.storage.collaboration.isDisabled=!0)}}),!1}let{from:f,to:h}=typeof n=="number"?{from:n,to:n}:{from:n.from,to:n.to},p=!0,g=!0;if((hA(a)?a:[a]).forEach(k=>{k.check(),p=p?k.isText&&k.marks.length===0:!1,g=g?k.isBlock:!1}),f===h&&g){const{parent:k}=r.doc.resolve(f);k.isTextblock&&!k.type.spec.code&&!k.childCount&&(f-=1,h+=1)}let x;if(p){if(Array.isArray(e))x=e.map(k=>k.text||"").join("");else if(e instanceof j){let k="";e.forEach(C=>{C.text&&(k+=C.text)}),x=k}else typeof e=="object"&&e&&e.text?x=e.text:x=e;r.insertText(x,f,h)}else x=a,r.replaceWith(f,h,x);t.updateSelection&&dA(r,r.steps.length-1,-1),t.applyInputRules&&r.setMeta("applyInputRules",{from:f,text:x}),t.applyPasteRules&&r.setMeta("applyPasteRules",{from:f,text:x})}return!0},mA=()=>({state:n,dispatch:e})=>mM(n,e),gA=()=>({state:n,dispatch:e})=>gM(n,e),bA=()=>({state:n,dispatch:e})=>gk(n,e),yA=()=>({state:n,dispatch:e})=>kk(n,e),xA=()=>({state:n,dispatch:e,tr:t})=>{try{const r=qc(n.doc,n.selection.$from.pos,-1);return r==null?!1:(t.join(r,2),e&&e(t),!0)}catch{return!1}},kA=()=>({state:n,dispatch:e,tr:t})=>{try{const r=qc(n.doc,n.selection.$from.pos,1);return r==null?!1:(t.join(r,2),e&&e(t),!0)}catch{return!1}},SA=()=>({state:n,dispatch:e})=>hM(n,e),CA=()=>({state:n,dispatch:e})=>pM(n,e);function $k(){return typeof navigator<"u"?/Mac/.test(navigator.platform):!1}function vA(n){const e=n.split(/-(?!$)/);let t=e[e.length-1];t==="Space"&&(t=" ");let r,i,l,o;for(let a=0;a<e.length-1;a+=1){const f=e[a];if(/^(cmd|meta|m)$/i.test(f))o=!0;else if(/^a(lt)?$/i.test(f))r=!0;else if(/^(c|ctrl|control)$/i.test(f))i=!0;else if(/^s(hift)?$/i.test(f))l=!0;else if(/^mod$/i.test(f))N0()||$k()?o=!0:i=!0;else throw new Error(`Unrecognized modifier name: ${f}`)}return r&&(t=`Alt-${t}`),i&&(t=`Ctrl-${t}`),o&&(t=`Meta-${t}`),l&&(t=`Shift-${t}`),t}const EA=n=>({editor:e,view:t,tr:r,dispatch:i})=>{const l=vA(n).split(/-(?!$)/),o=l.find(h=>!["Alt","Ctrl","Meta","Shift"].includes(h)),a=new KeyboardEvent("keydown",{key:o==="Space"?" ":o,altKey:l.includes("Alt"),ctrlKey:l.includes("Ctrl"),metaKey:l.includes("Meta"),shiftKey:l.includes("Shift"),bubbles:!0,cancelable:!0}),f=e.captureTransaction(()=>{t.someProp("handleKeyDown",h=>h(t,a))});return f==null||f.steps.forEach(h=>{const p=h.map(r.mapping);p&&i&&r.maybeStep(p)}),!0};function Qs(n,e,t={}){const{from:r,to:i,empty:l}=n.selection,o=e?ct(e,n.schema):null,a=[];n.doc.nodesBetween(r,i,(g,y)=>{if(g.isText)return;const x=Math.max(r,y),k=Math.min(i,y+g.nodeSize);a.push({node:g,from:x,to:k})});const f=i-r,h=a.filter(g=>o?o.name===g.node.type.name:!0).filter(g=>xc(g.node.attrs,t,{strict:!1}));return l?!!h.length:h.reduce((g,y)=>g+y.to-y.from,0)>=f}const MA=(n,e={})=>({state:t,dispatch:r})=>{const i=ct(n,t.schema);return Qs(t,i,e)?bM(t,r):!1},AA=()=>({state:n,dispatch:e})=>Ek(n,e),TA=n=>({state:e,dispatch:t})=>{const r=ct(n,e.schema);return wM(r)(e,t)},DA=()=>({state:n,dispatch:e})=>Ck(n,e);function Zc(n,e){return e.nodes[n]?"node":e.marks[n]?"mark":null}function S2(n,e){const t=typeof e=="string"?[e]:e;return Object.keys(n).reduce((r,i)=>(t.includes(i)||(r[i]=n[i]),r),{})}const wA=(n,e)=>({tr:t,state:r,dispatch:i})=>{let l=null,o=null;const a=Zc(typeof n=="string"?n:n.name,r.schema);return a?(a==="node"&&(l=ct(n,r.schema)),a==="mark"&&(o=ai(n,r.schema)),i&&t.selection.ranges.forEach(f=>{r.doc.nodesBetween(f.$from.pos,f.$to.pos,(h,p)=>{l&&l===h.type&&t.setNodeMarkup(p,void 0,S2(h.attrs,e)),o&&h.marks.length&&h.marks.forEach(g=>{o===g.type&&t.addMark(p,p+h.nodeSize,o.create(S2(g.attrs,e)))})})}),!0):!1},OA=()=>({tr:n,dispatch:e})=>(e&&n.scrollIntoView(),!0),_A=()=>({tr:n,dispatch:e})=>{if(e){const t=new br(n.doc);n.setSelection(t)}return!0},NA=()=>({state:n,dispatch:e})=>yk(n,e),RA=()=>({state:n,dispatch:e})=>Sk(n,e),zA=()=>({state:n,dispatch:e})=>SM(n,e),BA=()=>({state:n,dispatch:e})=>EM(n,e),$A=()=>({state:n,dispatch:e})=>vM(n,e);function jp(n,e,t={},r={}){return kc(n,e,{slice:!1,parseOptions:t,errorOnInvalidContent:r.errorOnInvalidContent})}const FA=(n,e=!1,t={},r={})=>({editor:i,tr:l,dispatch:o,commands:a})=>{var f,h;const{doc:p}=l;if(t.preserveWhitespace!=="full"){const g=jp(n,i.schema,t,{errorOnInvalidContent:(f=r.errorOnInvalidContent)!==null&&f!==void 0?f:i.options.enableContentCheck});return o&&l.replaceWith(0,p.content.size,g).setMeta("preventUpdate",!e),!0}return o&&l.setMeta("preventUpdate",!e),a.insertContentAt({from:0,to:p.content.size},n,{parseOptions:t,errorOnInvalidContent:(h=r.errorOnInvalidContent)!==null&&h!==void 0?h:i.options.enableContentCheck})};function Fk(n,e){const t=ai(e,n.schema),{from:r,to:i,empty:l}=n.selection,o=[];l?(n.storedMarks&&o.push(...n.storedMarks),o.push(...n.selection.$head.marks())):n.doc.nodesBetween(r,i,f=>{o.push(...f.marks)});const a=o.find(f=>f.type.name===t.name);return a?{...a.attrs}:{}}function LA(n){for(let e=0;e<n.edgeCount;e+=1){const{type:t}=n.edge(e);if(t.isTextblock&&!t.hasRequiredAttrs())return t}return null}function IA(n,e){for(let t=n.depth;t>0;t-=1){const r=n.node(t);if(e(r))return{pos:t>0?n.before(t):0,start:n.start(t),depth:t,node:r}}}function R0(n){return e=>IA(e.$from,n)}function qA(n,e){const t={from:0,to:n.content.size};return wk(n,t,e)}function HA(n,e){const t=ct(e,n.schema),{from:r,to:i}=n.selection,l=[];n.doc.nodesBetween(r,i,a=>{l.push(a)});const o=l.reverse().find(a=>a.type.name===t.name);return o?{...o.attrs}:{}}function VA(n,e){const t=Zc(typeof e=="string"?e:e.name,n.schema);return t==="node"?HA(n,e):t==="mark"?Fk(n,e):{}}function Lk(n,e,t){const r=[];return n===e?t.resolve(n).marks().forEach(i=>{const l=t.resolve(n),o=_0(l,i.type);o&&r.push({mark:i,...o})}):t.nodesBetween(n,e,(i,l)=>{!i||(i==null?void 0:i.nodeSize)===void 0||r.push(...i.marks.map(o=>({from:l,to:l+i.nodeSize,mark:o})))}),r}function rc(n,e,t){return Object.fromEntries(Object.entries(t).filter(([r])=>{const i=n.find(l=>l.type===e&&l.name===r);return i?i.attribute.keepOnSplit:!1}))}function Pp(n,e,t={}){const{empty:r,ranges:i}=n.selection,l=e?ai(e,n.schema):null;if(r)return!!(n.storedMarks||n.selection.$from.marks()).filter(g=>l?l.name===g.type.name:!0).find(g=>xc(g.attrs,t,{strict:!1}));let o=0;const a=[];if(i.forEach(({$from:g,$to:y})=>{const x=g.pos,k=y.pos;n.doc.nodesBetween(x,k,(C,E)=>{if(!C.isText&&!C.marks.length)return;const A=Math.max(x,E),N=Math.min(k,E+C.nodeSize),B=N-A;o+=B,a.push(...C.marks.map(H=>({mark:H,from:A,to:N})))})}),o===0)return!1;const f=a.filter(g=>l?l.name===g.mark.type.name:!0).filter(g=>xc(g.mark.attrs,t,{strict:!1})).reduce((g,y)=>g+y.to-y.from,0),h=a.filter(g=>l?g.mark.type!==l&&g.mark.type.excludes(l):!0).reduce((g,y)=>g+y.to-y.from,0);return(f>0?f+h:f)>=o}function UA(n,e,t={}){if(!e)return Qs(n,null,t)||Pp(n,null,t);const r=Zc(e,n.schema);return r==="node"?Qs(n,e,t):r==="mark"?Pp(n,e,t):!1}function C2(n,e){const{nodeExtensions:t}=Gc(e),r=t.find(o=>o.name===n);if(!r)return!1;const i={name:r.name,options:r.options,storage:r.storage},l=me(X(r,"group",i));return typeof l!="string"?!1:l.split(" ").includes("list")}function z0(n,{checkChildren:e=!0,ignoreWhitespace:t=!1}={}){var r;if(t){if(n.type.name==="hardBreak")return!0;if(n.isText)return/^\s*$/m.test((r=n.text)!==null&&r!==void 0?r:"")}if(n.isText)return!n.text;if(n.isAtom||n.isLeaf)return!1;if(n.content.childCount===0)return!0;if(e){let i=!0;return n.content.forEach(l=>{i!==!1&&(z0(l,{ignoreWhitespace:t,checkChildren:e})||(i=!1))}),i}return!1}function jA(n){return n instanceof oe}function PA(n,e,t){var r;const{selection:i}=e;let l=null;if(Rk(i)&&(l=i.$cursor),l){const a=(r=n.storedMarks)!==null&&r!==void 0?r:l.marks();return!!t.isInSet(a)||!a.some(f=>f.type.excludes(t))}const{ranges:o}=i;return o.some(({$from:a,$to:f})=>{let h=a.depth===0?n.doc.inlineContent&&n.doc.type.allowsMarkType(t):!1;return n.doc.nodesBetween(a.pos,f.pos,(p,g,y)=>{if(h)return!1;if(p.isInline){const x=!y||y.type.allowsMarkType(t),k=!!t.isInSet(p.marks)||!p.marks.some(C=>C.type.excludes(t));h=x&&k}return!h}),h})}const JA=(n,e={})=>({tr:t,state:r,dispatch:i})=>{const{selection:l}=t,{empty:o,ranges:a}=l,f=ai(n,r.schema);if(i)if(o){const h=Fk(r,f);t.addStoredMark(f.create({...h,...e}))}else a.forEach(h=>{const p=h.$from.pos,g=h.$to.pos;r.doc.nodesBetween(p,g,(y,x)=>{const k=Math.max(x,p),C=Math.min(x+y.nodeSize,g);y.marks.find(A=>A.type===f)?y.marks.forEach(A=>{f===A.type&&t.addMark(k,C,f.create({...A.attrs,...e}))}):t.addMark(k,C,f.create(e))})});return PA(r,t,f)},GA=(n,e)=>({tr:t})=>(t.setMeta(n,e),!0),KA=(n,e={})=>({state:t,dispatch:r,chain:i})=>{const l=ct(n,t.schema);let o;return t.selection.$anchor.sameParent(t.selection.$head)&&(o=t.selection.$anchor.parent.attrs),l.isTextblock?i().command(({commands:a})=>g2(l,{...o,...e})(t)?!0:a.clearNodes()).command(({state:a})=>g2(l,{...o,...e})(a,r)).run():(console.warn('[tiptap warn]: Currently "setNode()" only supports text block nodes.'),!1)},YA=n=>({tr:e,dispatch:t})=>{if(t){const{doc:r}=e,i=Li(n,0,r.content.size),l=oe.create(r,i);e.setSelection(l)}return!0},ZA=n=>({tr:e,dispatch:t})=>{if(t){const{doc:r}=e,{from:i,to:l}=typeof n=="number"?{from:n,to:n}:n,o=he.atStart(r).from,a=he.atEnd(r).to,f=Li(i,o,a),h=Li(l,o,a),p=he.create(r,f,h);e.setSelection(p)}return!0},XA=n=>({state:e,dispatch:t})=>{const r=ct(n,e.schema);return NM(r)(e,t)};function v2(n,e){const t=n.storedMarks||n.selection.$to.parentOffset&&n.selection.$from.marks();if(t){const r=t.filter(i=>e==null?void 0:e.includes(i.type.name));n.tr.ensureMarks(r)}}const QA=({keepMarks:n=!0}={})=>({tr:e,state:t,dispatch:r,editor:i})=>{const{selection:l,doc:o}=e,{$from:a,$to:f}=l,h=i.extensionManager.attributes,p=rc(h,a.node().type.name,a.node().attrs);if(l instanceof oe&&l.node.isBlock)return!a.parentOffset||!gr(o,a.pos)?!1:(r&&(n&&v2(t,i.extensionManager.splittableMarks),e.split(a.pos).scrollIntoView()),!0);if(!a.parent.isBlock)return!1;const g=f.parentOffset===f.parent.content.size,y=a.depth===0?void 0:LA(a.node(-1).contentMatchAt(a.indexAfter(-1)));let x=g&&y?[{type:y,attrs:p}]:void 0,k=gr(e.doc,e.mapping.map(a.pos),1,x);if(!x&&!k&&gr(e.doc,e.mapping.map(a.pos),1,y?[{type:y}]:void 0)&&(k=!0,x=y?[{type:y,attrs:p}]:void 0),r){if(k&&(l instanceof he&&e.deleteSelection(),e.split(e.mapping.map(a.pos),1,x),y&&!g&&!a.parentOffset&&a.parent.type!==y)){const C=e.mapping.map(a.before()),E=e.doc.resolve(C);a.node(-1).canReplaceWith(E.index(),E.index()+1,y)&&e.setNodeMarkup(e.mapping.map(a.before()),y)}n&&v2(t,i.extensionManager.splittableMarks),e.scrollIntoView()}return k},WA=(n,e={})=>({tr:t,state:r,dispatch:i,editor:l})=>{var o;const a=ct(n,r.schema),{$from:f,$to:h}=r.selection,p=r.selection.node;if(p&&p.isBlock||f.depth<2||!f.sameParent(h))return!1;const g=f.node(-1);if(g.type!==a)return!1;const y=l.extensionManager.attributes;if(f.parent.content.size===0&&f.node(-1).childCount===f.indexAfter(-1)){if(f.depth===2||f.node(-3).type!==a||f.index(-2)!==f.node(-2).childCount-1)return!1;if(i){let A=j.empty;const N=f.index(-1)?1:f.index(-2)?2:3;for(let ne=f.depth-N;ne>=f.depth-3;ne-=1)A=j.from(f.node(ne).copy(A));const B=f.indexAfter(-1)<f.node(-2).childCount?1:f.indexAfter(-2)<f.node(-3).childCount?2:3,H={...rc(y,f.node().type.name,f.node().attrs),...e},L=((o=a.contentMatch.defaultType)===null||o===void 0?void 0:o.createAndFill(H))||void 0;A=A.append(j.from(a.createAndFill(null,L)||void 0));const U=f.before(f.depth-(N-1));t.replace(U,f.after(-B),new Y(A,4-N,0));let Q=-1;t.doc.nodesBetween(U,t.doc.content.size,(ne,ee)=>{if(Q>-1)return!1;ne.isTextblock&&ne.content.size===0&&(Q=ee+1)}),Q>-1&&t.setSelection(he.near(t.doc.resolve(Q))),t.scrollIntoView()}return!0}const x=h.pos===f.end()?g.contentMatchAt(0).defaultType:null,k={...rc(y,g.type.name,g.attrs),...e},C={...rc(y,f.node().type.name,f.node().attrs),...e};t.delete(f.pos,h.pos);const E=x?[{type:a,attrs:k},{type:x,attrs:C}]:[{type:a,attrs:k}];if(!gr(t.doc,f.pos,2))return!1;if(i){const{selection:A,storedMarks:N}=r,{splittableMarks:B}=l.extensionManager,H=N||A.$to.parentOffset&&A.$from.marks();if(t.split(f.pos,2,E).scrollIntoView(),!H||!i)return!0;const L=H.filter(U=>B.includes(U.type.name));t.ensureMarks(L)}return!0},Ph=(n,e)=>{const t=R0(o=>o.type===e)(n.selection);if(!t)return!0;const r=n.doc.resolve(Math.max(0,t.pos-1)).before(t.depth);if(r===void 0)return!0;const i=n.doc.nodeAt(r);return t.node.type===(i==null?void 0:i.type)&&si(n.doc,t.pos)&&n.join(t.pos),!0},Jh=(n,e)=>{const t=R0(o=>o.type===e)(n.selection);if(!t)return!0;const r=n.doc.resolve(t.start).after(t.depth);if(r===void 0)return!0;const i=n.doc.nodeAt(r);return t.node.type===(i==null?void 0:i.type)&&si(n.doc,r)&&n.join(r),!0},eT=(n,e,t,r={})=>({editor:i,tr:l,state:o,dispatch:a,chain:f,commands:h,can:p})=>{const{extensions:g,splittableMarks:y}=i.extensionManager,x=ct(n,o.schema),k=ct(e,o.schema),{selection:C,storedMarks:E}=o,{$from:A,$to:N}=C,B=A.blockRange(N),H=E||C.$to.parentOffset&&C.$from.marks();if(!B)return!1;const L=R0(U=>C2(U.type.name,g))(C);if(B.depth>=1&&L&&B.depth-L.depth<=1){if(L.node.type===x)return h.liftListItem(k);if(C2(L.node.type.name,g)&&x.validContent(L.node.content)&&a)return f().command(()=>(l.setNodeMarkup(L.pos,x),!0)).command(()=>Ph(l,x)).command(()=>Jh(l,x)).run()}return!t||!H||!a?f().command(()=>p().wrapInList(x,r)?!0:h.clearNodes()).wrapInList(x,r).command(()=>Ph(l,x)).command(()=>Jh(l,x)).run():f().command(()=>{const U=p().wrapInList(x,r),Q=H.filter(ne=>y.includes(ne.type.name));return l.ensureMarks(Q),U?!0:h.clearNodes()}).wrapInList(x,r).command(()=>Ph(l,x)).command(()=>Jh(l,x)).run()},tT=(n,e={},t={})=>({state:r,commands:i})=>{const{extendEmptyMarkRange:l=!1}=t,o=ai(n,r.schema);return Pp(r,o,e)?i.unsetMark(o,{extendEmptyMarkRange:l}):i.setMark(o,e)},nT=(n,e,t={})=>({state:r,commands:i})=>{const l=ct(n,r.schema),o=ct(e,r.schema),a=Qs(r,l,t);let f;return r.selection.$anchor.sameParent(r.selection.$head)&&(f=r.selection.$anchor.parent.attrs),a?i.setNode(o,f):i.setNode(l,{...f,...t})},rT=(n,e={})=>({state:t,commands:r})=>{const i=ct(n,t.schema);return Qs(t,i,e)?r.lift(i):r.wrapIn(i,e)},iT=()=>({state:n,dispatch:e})=>{const t=n.plugins;for(let r=0;r<t.length;r+=1){const i=t[r];let l;if(i.spec.isInputRules&&(l=i.getState(n))){if(e){const o=n.tr,a=l.transform;for(let f=a.steps.length-1;f>=0;f-=1)o.step(a.steps[f].invert(a.docs[f]));if(l.text){const f=o.doc.resolve(l.from).marks();o.replaceWith(l.from,l.to,n.schema.text(l.text,f))}else o.delete(l.from,l.to)}return!0}}return!1},lT=()=>({tr:n,dispatch:e})=>{const{selection:t}=n,{empty:r,ranges:i}=t;return r||e&&i.forEach(l=>{n.removeMark(l.$from.pos,l.$to.pos)}),!0},uT=(n,e={})=>({tr:t,state:r,dispatch:i})=>{var l;const{extendEmptyMarkRange:o=!1}=e,{selection:a}=t,f=ai(n,r.schema),{$from:h,empty:p,ranges:g}=a;if(!i)return!0;if(p&&o){let{from:y,to:x}=a;const k=(l=h.marks().find(E=>E.type===f))===null||l===void 0?void 0:l.attrs,C=_0(h,f,k);C&&(y=C.from,x=C.to),t.removeMark(y,x,f)}else g.forEach(y=>{t.removeMark(y.$from.pos,y.$to.pos,f)});return t.removeStoredMark(f),!0},sT=(n,e={})=>({tr:t,state:r,dispatch:i})=>{let l=null,o=null;const a=Zc(typeof n=="string"?n:n.name,r.schema);return a?(a==="node"&&(l=ct(n,r.schema)),a==="mark"&&(o=ai(n,r.schema)),i&&t.selection.ranges.forEach(f=>{const h=f.$from.pos,p=f.$to.pos;let g,y,x,k;t.selection.empty?r.doc.nodesBetween(h,p,(C,E)=>{l&&l===C.type&&(x=Math.max(E,h),k=Math.min(E+C.nodeSize,p),g=E,y=C)}):r.doc.nodesBetween(h,p,(C,E)=>{E<h&&l&&l===C.type&&(x=Math.max(E,h),k=Math.min(E+C.nodeSize,p),g=E,y=C),E>=h&&E<=p&&(l&&l===C.type&&t.setNodeMarkup(E,void 0,{...C.attrs,...e}),o&&C.marks.length&&C.marks.forEach(A=>{if(o===A.type){const N=Math.max(E,h),B=Math.min(E+C.nodeSize,p);t.addMark(N,B,o.create({...A.attrs,...e}))}}))}),y&&(g!==void 0&&t.setNodeMarkup(g,void 0,{...y.attrs,...e}),o&&y.marks.length&&y.marks.forEach(C=>{o===C.type&&t.addMark(x,k,o.create({...C.attrs,...e}))}))}),!0):!1},oT=(n,e={})=>({state:t,dispatch:r})=>{const i=ct(n,t.schema);return MM(i,e)(t,r)},aT=(n,e={})=>({state:t,dispatch:r})=>{const i=ct(n,t.schema);return AM(i,e)(t,r)};var cT=Object.freeze({__proto__:null,blur:KM,clearContent:YM,clearNodes:ZM,command:XM,createParagraphNear:QM,cut:WM,deleteCurrentNode:eA,deleteNode:tA,deleteRange:nA,deleteSelection:rA,enter:iA,exitCode:lA,extendMarkRange:uA,first:sA,focus:aA,forEach:cA,insertContent:fA,insertContentAt:pA,joinBackward:bA,joinDown:gA,joinForward:yA,joinItemBackward:xA,joinItemForward:kA,joinTextblockBackward:SA,joinTextblockForward:CA,joinUp:mA,keyboardShortcut:EA,lift:MA,liftEmptyBlock:AA,liftListItem:TA,newlineInCode:DA,resetAttributes:wA,scrollIntoView:OA,selectAll:_A,selectNodeBackward:NA,selectNodeForward:RA,selectParentNode:zA,selectTextblockEnd:BA,selectTextblockStart:$A,setContent:FA,setMark:JA,setMeta:GA,setNode:KA,setNodeSelection:YA,setTextSelection:ZA,sinkListItem:XA,splitBlock:QA,splitListItem:WA,toggleList:eT,toggleMark:tT,toggleNode:nT,toggleWrap:rT,undoInputRule:iT,unsetAllMarks:lT,unsetMark:uT,updateAttributes:sT,wrapIn:oT,wrapInList:aT});const Ik=$t.create({name:"commands",addCommands(){return{...cT}}}),qk=$t.create({name:"drop",addProseMirrorPlugins(){return[new Bt({key:new _n("tiptapDrop"),props:{handleDrop:(n,e,t,r)=>{this.editor.emit("drop",{editor:this.editor,event:e,slice:t,moved:r})}}})]}}),Hk=$t.create({name:"editable",addProseMirrorPlugins(){return[new Bt({key:new _n("editable"),props:{editable:()=>this.editor.options.editable}})]}}),Vk=new _n("focusEvents"),Uk=$t.create({name:"focusEvents",addProseMirrorPlugins(){const{editor:n}=this;return[new Bt({key:Vk,props:{handleDOMEvents:{focus:(e,t)=>{n.isFocused=!0;const r=n.state.tr.setMeta("focus",{event:t}).setMeta("addToHistory",!1);return e.dispatch(r),!1},blur:(e,t)=>{n.isFocused=!1;const r=n.state.tr.setMeta("blur",{event:t}).setMeta("addToHistory",!1);return e.dispatch(r),!1}}}})]}}),jk=$t.create({name:"keymap",addKeyboardShortcuts(){const n=()=>this.editor.commands.first(({commands:o})=>[()=>o.undoInputRule(),()=>o.command(({tr:a})=>{const{selection:f,doc:h}=a,{empty:p,$anchor:g}=f,{pos:y,parent:x}=g,k=g.parent.isTextblock&&y>0?a.doc.resolve(y-1):g,C=k.parent.type.spec.isolating,E=g.pos-g.parentOffset,A=C&&k.parent.childCount===1?E===g.pos:de.atStart(h).from===y;return!p||!x.type.isTextblock||x.textContent.length||!A||A&&g.parent.type.name==="paragraph"?!1:o.clearNodes()}),()=>o.deleteSelection(),()=>o.joinBackward(),()=>o.selectNodeBackward()]),e=()=>this.editor.commands.first(({commands:o})=>[()=>o.deleteSelection(),()=>o.deleteCurrentNode(),()=>o.joinForward(),()=>o.selectNodeForward()]),r={Enter:()=>this.editor.commands.first(({commands:o})=>[()=>o.newlineInCode(),()=>o.createParagraphNear(),()=>o.liftEmptyBlock(),()=>o.splitBlock()]),"Mod-Enter":()=>this.editor.commands.exitCode(),Backspace:n,"Mod-Backspace":n,"Shift-Backspace":n,Delete:e,"Mod-Delete":e,"Mod-a":()=>this.editor.commands.selectAll()},i={...r},l={...r,"Ctrl-h":n,"Alt-Backspace":n,"Ctrl-d":e,"Ctrl-Alt-Backspace":e,"Alt-Delete":e,"Alt-d":e,"Ctrl-a":()=>this.editor.commands.selectTextblockStart(),"Ctrl-e":()=>this.editor.commands.selectTextblockEnd()};return N0()||$k()?l:i},addProseMirrorPlugins(){return[new Bt({key:new _n("clearDocument"),appendTransaction:(n,e,t)=>{if(n.some(C=>C.getMeta("composition")))return;const r=n.some(C=>C.docChanged)&&!e.doc.eq(t.doc),i=n.some(C=>C.getMeta("preventClearDocument"));if(!r||i)return;const{empty:l,from:o,to:a}=e.selection,f=de.atStart(e.doc).from,h=de.atEnd(e.doc).to;if(l||!(o===f&&a===h)||!z0(t.doc))return;const y=t.tr,x=Pc({state:t,transaction:y}),{commands:k}=new Jc({editor:this.editor,state:x});if(k.clearNodes(),!!y.steps.length)return y}})]}}),Pk=$t.create({name:"paste",addProseMirrorPlugins(){return[new Bt({key:new _n("tiptapPaste"),props:{handlePaste:(n,e,t)=>{this.editor.emit("paste",{editor:this.editor,event:e,slice:t})}}})]}}),Jk=$t.create({name:"tabindex",addProseMirrorPlugins(){return[new Bt({key:new _n("tabindex"),props:{attributes:()=>this.editor.isEditable?{tabindex:"0"}:{}}})]}});var fT=Object.freeze({__proto__:null,ClipboardTextSerializer:_k,Commands:Ik,Drop:qk,Editable:Hk,FocusEvents:Uk,Keymap:jk,Paste:Pk,Tabindex:Jk,focusEventsPluginKey:Vk});class zi{get name(){return this.node.type.name}constructor(e,t,r=!1,i=null){this.currentNode=null,this.actualDepth=null,this.isBlock=r,this.resolvedPos=e,this.editor=t,this.currentNode=i}get node(){return this.currentNode||this.resolvedPos.node()}get element(){return this.editor.view.domAtPos(this.pos).node}get depth(){var e;return(e=this.actualDepth)!==null&&e!==void 0?e:this.resolvedPos.depth}get pos(){return this.resolvedPos.pos}get content(){return this.node.content}set content(e){let t=this.from,r=this.to;if(this.isBlock){if(this.content.size===0){console.error(`You cant set content on a block node. Tried to set content on ${this.name} at ${this.pos}`);return}t=this.from+1,r=this.to-1}this.editor.commands.insertContentAt({from:t,to:r},e)}get attributes(){return this.node.attrs}get textContent(){return this.node.textContent}get size(){return this.node.nodeSize}get from(){return this.isBlock?this.pos:this.resolvedPos.start(this.resolvedPos.depth)}get range(){return{from:this.from,to:this.to}}get to(){return this.isBlock?this.pos+this.size:this.resolvedPos.end(this.resolvedPos.depth)+(this.node.isText?0:1)}get parent(){if(this.depth===0)return null;const e=this.resolvedPos.start(this.resolvedPos.depth-1),t=this.resolvedPos.doc.resolve(e);return new zi(t,this.editor)}get before(){let e=this.resolvedPos.doc.resolve(this.from-(this.isBlock?1:2));return e.depth!==this.depth&&(e=this.resolvedPos.doc.resolve(this.from-3)),new zi(e,this.editor)}get after(){let e=this.resolvedPos.doc.resolve(this.to+(this.isBlock?2:1));return e.depth!==this.depth&&(e=this.resolvedPos.doc.resolve(this.to+3)),new zi(e,this.editor)}get children(){const e=[];return this.node.content.forEach((t,r)=>{const i=t.isBlock&&!t.isTextblock,l=t.isAtom&&!t.isText,o=this.pos+r+(l?0:1),a=this.resolvedPos.doc.resolve(o);if(!i&&a.depth<=this.depth)return;const f=new zi(a,this.editor,i,i?t:null);i&&(f.actualDepth=this.depth+1),e.push(new zi(a,this.editor,i,i?t:null))}),e}get firstChild(){return this.children[0]||null}get lastChild(){const e=this.children;return e[e.length-1]||null}closest(e,t={}){let r=null,i=this.parent;for(;i&&!r;){if(i.node.type.name===e)if(Object.keys(t).length>0){const l=i.node.attrs,o=Object.keys(t);for(let a=0;a<o.length;a+=1){const f=o[a];if(l[f]!==t[f])break}}else r=i;i=i.parent}return r}querySelector(e,t={}){return this.querySelectorAll(e,t,!0)[0]||null}querySelectorAll(e,t={},r=!1){let i=[];if(!this.children||this.children.length===0)return i;const l=Object.keys(t);return this.children.forEach(o=>{r&&i.length>0||(o.node.type.name===e&&l.every(f=>t[f]===o.node.attrs[f])&&i.push(o),!(r&&i.length>0)&&(i=i.concat(o.querySelectorAll(e,t,r))))}),i}setAttribute(e){const{tr:t}=this.editor.state;t.setNodeMarkup(this.from,void 0,{...this.node.attrs,...e}),this.editor.view.dispatch(t)}}const dT=`.ProseMirror {
  position: relative;
}

.ProseMirror {
  word-wrap: break-word;
  white-space: pre-wrap;
  white-space: break-spaces;
  -webkit-font-variant-ligatures: none;
  font-variant-ligatures: none;
  font-feature-settings: "liga" 0; /* the above doesn't seem to work in Edge */
}

.ProseMirror [contenteditable="false"] {
  white-space: normal;
}

.ProseMirror [contenteditable="false"] [contenteditable="true"] {
  white-space: pre-wrap;
}

.ProseMirror pre {
  white-space: pre-wrap;
}

img.ProseMirror-separator {
  display: inline !important;
  border: none !important;
  margin: 0 !important;
  width: 0 !important;
  height: 0 !important;
}

.ProseMirror-gapcursor {
  display: none;
  pointer-events: none;
  position: absolute;
  margin: 0;
}

.ProseMirror-gapcursor:after {
  content: "";
  display: block;
  position: absolute;
  top: -2px;
  width: 20px;
  border-top: 1px solid black;
  animation: ProseMirror-cursor-blink 1.1s steps(2, start) infinite;
}

@keyframes ProseMirror-cursor-blink {
  to {
    visibility: hidden;
  }
}

.ProseMirror-hideselection *::selection {
  background: transparent;
}

.ProseMirror-hideselection *::-moz-selection {
  background: transparent;
}

.ProseMirror-hideselection * {
  caret-color: transparent;
}

.ProseMirror-focused .ProseMirror-gapcursor {
  display: block;
}

.tippy-box[data-animation=fade][data-state=hidden] {
  opacity: 0
}`;function hT(n,e,t){const r=document.querySelector("style[data-tiptap-style]");if(r!==null)return r;const i=document.createElement("style");return e&&i.setAttribute("nonce",e),i.setAttribute("data-tiptap-style",""),i.innerHTML=n,document.getElementsByTagName("head")[0].appendChild(i),i}class pT extends RM{constructor(e={}){super(),this.isFocused=!1,this.isInitialized=!1,this.extensionStorage={},this.options={element:document.createElement("div"),content:"",injectCSS:!0,injectNonce:void 0,extensions:[],autofocus:!1,editable:!0,editorProps:{},parseOptions:{},coreExtensionOptions:{},enableInputRules:!0,enablePasteRules:!0,enableCoreExtensions:!0,enableContentCheck:!1,onBeforeCreate:()=>null,onCreate:()=>null,onUpdate:()=>null,onSelectionUpdate:()=>null,onTransaction:()=>null,onFocus:()=>null,onBlur:()=>null,onDestroy:()=>null,onContentError:({error:t})=>{throw t},onPaste:()=>null,onDrop:()=>null},this.isCapturingTransaction=!1,this.capturedTransaction=null,this.setOptions(e),this.createExtensionManager(),this.createCommandManager(),this.createSchema(),this.on("beforeCreate",this.options.onBeforeCreate),this.emit("beforeCreate",{editor:this}),this.on("contentError",this.options.onContentError),this.createView(),this.injectCSS(),this.on("create",this.options.onCreate),this.on("update",this.options.onUpdate),this.on("selectionUpdate",this.options.onSelectionUpdate),this.on("transaction",this.options.onTransaction),this.on("focus",this.options.onFocus),this.on("blur",this.options.onBlur),this.on("destroy",this.options.onDestroy),this.on("drop",({event:t,slice:r,moved:i})=>this.options.onDrop(t,r,i)),this.on("paste",({event:t,slice:r})=>this.options.onPaste(t,r)),window.setTimeout(()=>{this.isDestroyed||(this.commands.focus(this.options.autofocus),this.emit("create",{editor:this}),this.isInitialized=!0)},0)}get storage(){return this.extensionStorage}get commands(){return this.commandManager.commands}chain(){return this.commandManager.chain()}can(){return this.commandManager.can()}injectCSS(){this.options.injectCSS&&document&&(this.css=hT(dT,this.options.injectNonce))}setOptions(e={}){this.options={...this.options,...e},!(!this.view||!this.state||this.isDestroyed)&&(this.options.editorProps&&this.view.setProps(this.options.editorProps),this.view.updateState(this.state))}setEditable(e,t=!0){this.setOptions({editable:e}),t&&this.emit("update",{editor:this,transaction:this.state.tr})}get isEditable(){return this.options.editable&&this.view&&this.view.editable}get state(){return this.view.state}registerPlugin(e,t){const r=Dk(t)?t(e,[...this.state.plugins]):[...this.state.plugins,e],i=this.state.reconfigure({plugins:r});return this.view.updateState(i),i}unregisterPlugin(e){if(this.isDestroyed)return;const t=this.state.plugins;let r=t;if([].concat(e).forEach(l=>{const o=typeof l=="string"?`${l}$`:l.key;r=r.filter(a=>!a.key.startsWith(o))}),t.length===r.length)return;const i=this.state.reconfigure({plugins:r});return this.view.updateState(i),i}createExtensionManager(){var e,t;const i=[...this.options.enableCoreExtensions?[Hk,_k.configure({blockSeparator:(t=(e=this.options.coreExtensionOptions)===null||e===void 0?void 0:e.clipboardTextSerializer)===null||t===void 0?void 0:t.blockSeparator}),Ik,Uk,jk,Jk,qk,Pk].filter(l=>typeof this.options.enableCoreExtensions=="object"?this.options.enableCoreExtensions[l.name]!==!1:!0):[],...this.options.extensions].filter(l=>["extension","node","mark"].includes(l==null?void 0:l.type));this.extensionManager=new su(i,this)}createCommandManager(){this.commandManager=new Jc({editor:this})}createSchema(){this.schema=this.extensionManager.schema}createView(){var e;let t;try{t=jp(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:this.options.enableContentCheck})}catch(o){if(!(o instanceof Error)||!["[tiptap error]: Invalid JSON content","[tiptap error]: Invalid HTML content"].includes(o.message))throw o;this.emit("contentError",{editor:this,error:o,disableCollaboration:()=>{this.storage.collaboration&&(this.storage.collaboration.isDisabled=!0),this.options.extensions=this.options.extensions.filter(a=>a.name!=="collaboration"),this.createExtensionManager()}}),t=jp(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:!1})}const r=zk(t,this.options.autofocus);this.view=new nM(this.options.element,{...this.options.editorProps,attributes:{role:"textbox",...(e=this.options.editorProps)===null||e===void 0?void 0:e.attributes},dispatchTransaction:this.dispatchTransaction.bind(this),state:uu.create({doc:t,selection:r||void 0})});const i=this.state.reconfigure({plugins:this.extensionManager.plugins});this.view.updateState(i),this.createNodeViews(),this.prependClass();const l=this.view.dom;l.editor=this}createNodeViews(){this.view.isDestroyed||this.view.setProps({nodeViews:this.extensionManager.nodeViews})}prependClass(){this.view.dom.className=`tiptap ${this.view.dom.className}`}captureTransaction(e){this.isCapturingTransaction=!0,e(),this.isCapturingTransaction=!1;const t=this.capturedTransaction;return this.capturedTransaction=null,t}dispatchTransaction(e){if(this.view.isDestroyed)return;if(this.isCapturingTransaction){if(!this.capturedTransaction){this.capturedTransaction=e;return}e.steps.forEach(o=>{var a;return(a=this.capturedTransaction)===null||a===void 0?void 0:a.step(o)});return}const t=this.state.apply(e),r=!this.state.selection.eq(t.selection);this.emit("beforeTransaction",{editor:this,transaction:e,nextState:t}),this.view.updateState(t),this.emit("transaction",{editor:this,transaction:e}),r&&this.emit("selectionUpdate",{editor:this,transaction:e});const i=e.getMeta("focus"),l=e.getMeta("blur");i&&this.emit("focus",{editor:this,event:i.event,transaction:e}),l&&this.emit("blur",{editor:this,event:l.event,transaction:e}),!(!e.docChanged||e.getMeta("preventUpdate"))&&this.emit("update",{editor:this,transaction:e})}getAttributes(e){return VA(this.state,e)}isActive(e,t){const r=typeof e=="string"?e:null,i=typeof e=="string"?t:e;return UA(this.state,r,i)}getJSON(){return this.state.doc.toJSON()}getHTML(){return go(this.state.doc.content,this.schema)}getText(e){const{blockSeparator:t=`

`,textSerializers:r={}}=e||{};return qA(this.state.doc,{blockSeparator:t,textSerializers:{...Ok(this.schema),...r}})}get isEmpty(){return z0(this.state.doc)}getCharacterCount(){return console.warn('[tiptap warn]: "editor.getCharacterCount()" is deprecated. Please use "editor.storage.characterCount.characters()" instead.'),this.state.doc.content.size-2}destroy(){if(this.emit("destroy"),this.view){const e=this.view.dom;e&&e.editor&&delete e.editor,this.view.destroy()}this.removeAllListeners()}get isDestroyed(){var e;return!(!((e=this.view)===null||e===void 0)&&e.docView)}$node(e,t){var r;return((r=this.$doc)===null||r===void 0?void 0:r.querySelector(e,t))||null}$nodes(e,t){var r;return((r=this.$doc)===null||r===void 0?void 0:r.querySelectorAll(e,t))||null}$pos(e){const t=this.state.doc.resolve(e);return new zi(t,this)}get $doc(){return this.$pos(0)}}function gu(n){return new Kc({find:n.find,handler:({state:e,range:t,match:r})=>{const i=me(n.getAttributes,void 0,r);if(i===!1||i===null)return null;const{tr:l}=e,o=r[r.length-1],a=r[0];if(o){const f=a.search(/\S/),h=t.from+a.indexOf(o),p=h+o.length;if(Lk(t.from,t.to,e.doc).filter(x=>x.mark.type.excluded.find(C=>C===n.type&&C!==x.mark.type)).filter(x=>x.to>h).length)return null;p<t.to&&l.delete(p,t.to),h>t.from&&l.delete(t.from+f,h);const y=t.from+f+o.length;l.addMark(t.from+f,y,n.type.create(i||{})),l.removeStoredMark(n.type)}}})}function mT(n){return new Kc({find:n.find,handler:({state:e,range:t,match:r})=>{const i=me(n.getAttributes,void 0,r)||{},{tr:l}=e,o=t.from;let a=t.to;const f=n.type.create(i);if(r[1]){const h=r[0].lastIndexOf(r[1]);let p=o+h;p>a?p=a:a=p+r[1].length;const g=r[0][r[0].length-1];l.insertText(g,o+r[0].length-1),l.replaceWith(p,a,f)}else if(r[0]){const h=n.type.isInline?o:o-1;l.insert(h,n.type.create(i)).delete(l.mapping.map(o),l.mapping.map(a))}l.scrollIntoView()}})}function Jp(n){return new Kc({find:n.find,handler:({state:e,range:t,match:r})=>{const i=e.doc.resolve(t.from),l=me(n.getAttributes,void 0,r)||{};if(!i.node(-1).canReplaceWith(i.index(-1),i.indexAfter(-1),n.type))return null;e.tr.delete(t.from,t.to).setBlockType(t.from,t.from,n.type,l)}})}function Ws(n){return new Kc({find:n.find,handler:({state:e,range:t,match:r,chain:i})=>{const l=me(n.getAttributes,void 0,r)||{},o=e.tr.delete(t.from,t.to),f=o.doc.resolve(t.from).blockRange(),h=f&&g0(f,n.type,l);if(!h)return null;if(o.wrap(f,h),n.keepMarks&&n.editor){const{selection:g,storedMarks:y}=e,{splittableMarks:x}=n.editor.extensionManager,k=y||g.$to.parentOffset&&g.$from.marks();if(k){const C=k.filter(E=>x.includes(E.type.name));o.ensureMarks(C)}}if(n.keepAttributes){const g=n.type.name==="bulletList"||n.type.name==="orderedList"?"listItem":"taskList";i().updateAttributes(g,l).run()}const p=o.doc.resolve(t.from-1).nodeBefore;p&&p.type===n.type&&si(o.doc,t.from-1)&&(!n.joinPredicate||n.joinPredicate(r,p))&&o.join(t.from-1)}})}let $e=class Gp{constructor(e={}){this.type="node",this.name="node",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=me(X(this,"addOptions",{name:this.name}))),this.storage=me(X(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new Gp(e)}configure(e={}){const t=this.extend({...this.config,addOptions:()=>Yc(this.options,e)});return t.name=this.name,t.parent=this.parent,t}extend(e={}){const t=new Gp(e);return t.parent=this,this.child=t,t.name=e.name?e.name:t.parent.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${t.name}".`),t.options=me(X(t,"addOptions",{name:t.name})),t.storage=me(X(t,"addStorage",{name:t.name,options:t.options})),t}};function bu(n){return new VM({find:n.find,handler:({state:e,range:t,match:r,pasteEvent:i})=>{const l=me(n.getAttributes,void 0,r,i);if(l===!1||l===null)return null;const{tr:o}=e,a=r[r.length-1],f=r[0];let h=t.to;if(a){const p=f.search(/\S/),g=t.from+f.indexOf(a),y=g+a.length;if(Lk(t.from,t.to,e.doc).filter(k=>k.mark.type.excluded.find(E=>E===n.type&&E!==k.mark.type)).filter(k=>k.to>g).length)return null;y<t.to&&o.delete(y,t.to),g>t.from&&o.delete(t.from+p,g),h=t.from+p+a.length,o.addMark(t.from+p,h,n.type.create(l||{})),o.removeStoredMark(n.type)}}})}var gT=jx();const bT=a0(gT);function yT(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Gk={exports:{}},Gh={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var E2;function xT(){if(E2)return Gh;E2=1;var n=wt;function e(g,y){return g===y&&(g!==0||1/g===1/y)||g!==g&&y!==y}var t=typeof Object.is=="function"?Object.is:e,r=n.useState,i=n.useEffect,l=n.useLayoutEffect,o=n.useDebugValue;function a(g,y){var x=y(),k=r({inst:{value:x,getSnapshot:y}}),C=k[0].inst,E=k[1];return l(function(){C.value=x,C.getSnapshot=y,f(C)&&E({inst:C})},[g,x,y]),i(function(){return f(C)&&E({inst:C}),g(function(){f(C)&&E({inst:C})})},[g]),o(x),x}function f(g){var y=g.getSnapshot;g=g.value;try{var x=y();return!t(g,x)}catch{return!0}}function h(g,y){return y()}var p=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?h:a;return Gh.useSyncExternalStore=n.useSyncExternalStore!==void 0?n.useSyncExternalStore:p,Gh}Gk.exports=xT();var B0=Gk.exports;const kT=(...n)=>e=>{n.forEach(t=>{typeof t=="function"?t(e):t&&(t.current=e)})},ST=({contentComponent:n})=>{const e=B0.useSyncExternalStore(n.subscribe,n.getSnapshot,n.getServerSnapshot);return wt.createElement(wt.Fragment,null,Object.values(e))};function CT(){const n=new Set;let e={};return{subscribe(t){return n.add(t),()=>{n.delete(t)}},getSnapshot(){return e},getServerSnapshot(){return e},setRenderer(t,r){e={...e,[t]:bT.createPortal(r.reactElement,r.element,t)},n.forEach(i=>i())},removeRenderer(t){const r={...e};delete r[t],e=r,n.forEach(i=>i())}}}class vT extends wt.Component{constructor(e){var t;super(e),this.editorContentRef=wt.createRef(),this.initialized=!1,this.state={hasContentComponentInitialized:!!(!((t=e.editor)===null||t===void 0)&&t.contentComponent)}}componentDidMount(){this.init()}componentDidUpdate(){this.init()}init(){const e=this.props.editor;if(e&&!e.isDestroyed&&e.options.element){if(e.contentComponent)return;const t=this.editorContentRef.current;t.append(...e.options.element.childNodes),e.setOptions({element:t}),e.contentComponent=CT(),this.state.hasContentComponentInitialized||(this.unsubscribeToContentComponent=e.contentComponent.subscribe(()=>{this.setState(r=>r.hasContentComponentInitialized?r:{hasContentComponentInitialized:!0}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent()})),e.createNodeViews(),this.initialized=!0}}componentWillUnmount(){const e=this.props.editor;if(!e||(this.initialized=!1,e.isDestroyed||e.view.setProps({nodeViews:{}}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent(),e.contentComponent=null,!e.options.element.firstChild))return;const t=document.createElement("div");t.append(...e.options.element.childNodes),e.setOptions({element:t})}render(){const{editor:e,innerRef:t,...r}=this.props;return wt.createElement(wt.Fragment,null,wt.createElement("div",{ref:kT(t,this.editorContentRef),...r}),(e==null?void 0:e.contentComponent)&&wt.createElement(ST,{contentComponent:e.contentComponent}))}}const ET=et.forwardRef((n,e)=>{const t=wt.useMemo(()=>Math.floor(Math.random()*4294967295).toString(),[n.editor]);return wt.createElement(vT,{key:t,innerRef:e,...n})}),M2=wt.memo(ET);var MT=function n(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){if(e.constructor!==t.constructor)return!1;var r,i,l;if(Array.isArray(e)){if(r=e.length,r!=t.length)return!1;for(i=r;i--!==0;)if(!n(e[i],t[i]))return!1;return!0}if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(i of e.entries())if(!t.has(i[0]))return!1;for(i of e.entries())if(!n(i[1],t.get(i[0])))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(i of e.entries())if(!t.has(i[0]))return!1;return!0}if(ArrayBuffer.isView(e)&&ArrayBuffer.isView(t)){if(r=e.length,r!=t.length)return!1;for(i=r;i--!==0;)if(e[i]!==t[i])return!1;return!0}if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===t.toString();if(l=Object.keys(e),r=l.length,r!==Object.keys(t).length)return!1;for(i=r;i--!==0;)if(!Object.prototype.hasOwnProperty.call(t,l[i]))return!1;for(i=r;i--!==0;){var o=l[i];if(!(o==="_owner"&&e.$$typeof)&&!n(e[o],t[o]))return!1}return!0}return e!==e&&t!==t},AT=yT(MT),Kk={exports:{}},Kh={};/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var A2;function TT(){if(A2)return Kh;A2=1;var n=wt,e=B0;function t(h,p){return h===p&&(h!==0||1/h===1/p)||h!==h&&p!==p}var r=typeof Object.is=="function"?Object.is:t,i=e.useSyncExternalStore,l=n.useRef,o=n.useEffect,a=n.useMemo,f=n.useDebugValue;return Kh.useSyncExternalStoreWithSelector=function(h,p,g,y,x){var k=l(null);if(k.current===null){var C={hasValue:!1,value:null};k.current=C}else C=k.current;k=a(function(){function A(U){if(!N){if(N=!0,B=U,U=y(U),x!==void 0&&C.hasValue){var Q=C.value;if(x(Q,U))return H=Q}return H=U}if(Q=H,r(B,U))return Q;var ne=y(U);return x!==void 0&&x(Q,ne)?Q:(B=U,H=ne)}var N=!1,B,H,L=g===void 0?null:g;return[function(){return A(p())},L===null?void 0:function(){return A(L())}]},[p,g,y,x]);var E=i(h,k[0],k[1]);return o(function(){C.hasValue=!0,C.value=E},[E]),f(E),E},Kh}Kk.exports=TT();var DT=Kk.exports;const wT=typeof window<"u"?et.useLayoutEffect:et.useEffect;class OT{constructor(e){this.transactionNumber=0,this.lastTransactionNumber=0,this.subscribers=new Set,this.editor=e,this.lastSnapshot={editor:e,transactionNumber:0},this.getSnapshot=this.getSnapshot.bind(this),this.getServerSnapshot=this.getServerSnapshot.bind(this),this.watch=this.watch.bind(this),this.subscribe=this.subscribe.bind(this)}getSnapshot(){return this.transactionNumber===this.lastTransactionNumber?this.lastSnapshot:(this.lastTransactionNumber=this.transactionNumber,this.lastSnapshot={editor:this.editor,transactionNumber:this.transactionNumber},this.lastSnapshot)}getServerSnapshot(){return{editor:null,transactionNumber:0}}subscribe(e){return this.subscribers.add(e),()=>{this.subscribers.delete(e)}}watch(e){if(this.editor=e,this.editor){const t=()=>{this.transactionNumber+=1,this.subscribers.forEach(i=>i())},r=this.editor;return r.on("transaction",t),()=>{r.off("transaction",t)}}}}function _T(n){var e;const[t]=et.useState(()=>new OT(n.editor)),r=DT.useSyncExternalStoreWithSelector(t.subscribe,t.getSnapshot,t.getServerSnapshot,n.selector,(e=n.equalityFn)!==null&&e!==void 0?e:AT);return wT(()=>t.watch(n.editor),[n.editor,t]),et.useDebugValue(r),r}const NT=!1,Kp=typeof window>"u",RT=Kp||!!(typeof window<"u"&&window.next);class $0{constructor(e){this.editor=null,this.subscriptions=new Set,this.isComponentMounted=!1,this.previousDeps=null,this.instanceId="",this.options=e,this.subscriptions=new Set,this.setEditor(this.getInitialEditor()),this.scheduleDestroy(),this.getEditor=this.getEditor.bind(this),this.getServerSnapshot=this.getServerSnapshot.bind(this),this.subscribe=this.subscribe.bind(this),this.refreshEditorInstance=this.refreshEditorInstance.bind(this),this.scheduleDestroy=this.scheduleDestroy.bind(this),this.onRender=this.onRender.bind(this),this.createEditor=this.createEditor.bind(this)}setEditor(e){this.editor=e,this.instanceId=Math.random().toString(36).slice(2,9),this.subscriptions.forEach(t=>t())}getInitialEditor(){return this.options.current.immediatelyRender===void 0?Kp||RT?null:this.createEditor():(this.options.current.immediatelyRender,this.options.current.immediatelyRender?this.createEditor():null)}createEditor(){const e={...this.options.current,onBeforeCreate:(...r)=>{var i,l;return(l=(i=this.options.current).onBeforeCreate)===null||l===void 0?void 0:l.call(i,...r)},onBlur:(...r)=>{var i,l;return(l=(i=this.options.current).onBlur)===null||l===void 0?void 0:l.call(i,...r)},onCreate:(...r)=>{var i,l;return(l=(i=this.options.current).onCreate)===null||l===void 0?void 0:l.call(i,...r)},onDestroy:(...r)=>{var i,l;return(l=(i=this.options.current).onDestroy)===null||l===void 0?void 0:l.call(i,...r)},onFocus:(...r)=>{var i,l;return(l=(i=this.options.current).onFocus)===null||l===void 0?void 0:l.call(i,...r)},onSelectionUpdate:(...r)=>{var i,l;return(l=(i=this.options.current).onSelectionUpdate)===null||l===void 0?void 0:l.call(i,...r)},onTransaction:(...r)=>{var i,l;return(l=(i=this.options.current).onTransaction)===null||l===void 0?void 0:l.call(i,...r)},onUpdate:(...r)=>{var i,l;return(l=(i=this.options.current).onUpdate)===null||l===void 0?void 0:l.call(i,...r)},onContentError:(...r)=>{var i,l;return(l=(i=this.options.current).onContentError)===null||l===void 0?void 0:l.call(i,...r)},onDrop:(...r)=>{var i,l;return(l=(i=this.options.current).onDrop)===null||l===void 0?void 0:l.call(i,...r)},onPaste:(...r)=>{var i,l;return(l=(i=this.options.current).onPaste)===null||l===void 0?void 0:l.call(i,...r)}};return new pT(e)}getEditor(){return this.editor}getServerSnapshot(){return null}subscribe(e){return this.subscriptions.add(e),()=>{this.subscriptions.delete(e)}}static compareOptions(e,t){return Object.keys(e).every(r=>["onCreate","onBeforeCreate","onDestroy","onUpdate","onTransaction","onFocus","onBlur","onSelectionUpdate","onContentError","onDrop","onPaste"].includes(r)?!0:r==="extensions"&&e.extensions&&t.extensions?e.extensions.length!==t.extensions.length?!1:e.extensions.every((i,l)=>{var o;return i===((o=t.extensions)===null||o===void 0?void 0:o[l])}):e[r]===t[r])}onRender(e){return()=>(this.isComponentMounted=!0,clearTimeout(this.scheduledDestructionTimeout),this.editor&&!this.editor.isDestroyed&&e.length===0?$0.compareOptions(this.options.current,this.editor.options)||this.editor.setOptions({...this.options.current,editable:this.editor.isEditable}):this.refreshEditorInstance(e),()=>{this.isComponentMounted=!1,this.scheduleDestroy()})}refreshEditorInstance(e){if(this.editor&&!this.editor.isDestroyed){if(this.previousDeps===null){this.previousDeps=e;return}if(this.previousDeps.length===e.length&&this.previousDeps.every((r,i)=>r===e[i]))return}this.editor&&!this.editor.isDestroyed&&this.editor.destroy(),this.setEditor(this.createEditor()),this.previousDeps=e}scheduleDestroy(){const e=this.instanceId,t=this.editor;this.scheduledDestructionTimeout=setTimeout(()=>{if(this.isComponentMounted&&this.instanceId===e){t&&t.setOptions(this.options.current);return}t&&!t.isDestroyed&&(t.destroy(),this.instanceId===e&&this.setEditor(null))},1)}}function T2(n={},e=[]){const t=et.useRef(n);t.current=n;const[r]=et.useState(()=>new $0(t)),i=B0.useSyncExternalStore(r.subscribe,r.getEditor,r.getServerSnapshot);return et.useDebugValue(i),et.useEffect(r.onRender(e)),_T({editor:i,selector:({transactionNumber:l})=>n.shouldRerenderOnTransaction===!1?null:n.immediatelyRender&&l===0?0:l+1}),i}const zT=et.createContext({editor:null});zT.Consumer;const BT=et.createContext({onDragStart:void 0}),$T=()=>et.useContext(BT);wt.forwardRef((n,e)=>{const{onDragStart:t}=$T(),r=n.as||"div";return wt.createElement(r,{...n,ref:e,"data-node-view-wrapper":"",onDragStart:t,style:{whiteSpace:"normal",...n.style}})});const FT=/^\s*>\s$/,LT=$e.create({name:"blockquote",addOptions(){return{HTMLAttributes:{}}},content:"block+",group:"block",defining:!0,parseHTML(){return[{tag:"blockquote"}]},renderHTML({HTMLAttributes:n}){return["blockquote",zt(this.options.HTMLAttributes,n),0]},addCommands(){return{setBlockquote:()=>({commands:n})=>n.wrapIn(this.name),toggleBlockquote:()=>({commands:n})=>n.toggleWrap(this.name),unsetBlockquote:()=>({commands:n})=>n.lift(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-b":()=>this.editor.commands.toggleBlockquote()}},addInputRules(){return[Ws({find:FT,type:this.type})]}}),IT=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))$/,qT=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))/g,HT=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))$/,VT=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))/g,UT=Nn.create({name:"bold",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"strong"},{tag:"b",getAttrs:n=>n.style.fontWeight!=="normal"&&null},{style:"font-weight=400",clearMark:n=>n.type.name===this.name},{style:"font-weight",getAttrs:n=>/^(bold(er)?|[5-9]\d{2,})$/.test(n)&&null}]},renderHTML({HTMLAttributes:n}){return["strong",zt(this.options.HTMLAttributes,n),0]},addCommands(){return{setBold:()=>({commands:n})=>n.setMark(this.name),toggleBold:()=>({commands:n})=>n.toggleMark(this.name),unsetBold:()=>({commands:n})=>n.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-b":()=>this.editor.commands.toggleBold(),"Mod-B":()=>this.editor.commands.toggleBold()}},addInputRules(){return[gu({find:IT,type:this.type}),gu({find:HT,type:this.type})]},addPasteRules(){return[bu({find:qT,type:this.type}),bu({find:VT,type:this.type})]}}),jT="listItem",D2="textStyle",w2=/^\s*([-+*])\s$/,PT=$e.create({name:"bulletList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:"ul"}]},renderHTML({HTMLAttributes:n}){return["ul",zt(this.options.HTMLAttributes,n),0]},addCommands(){return{toggleBulletList:()=>({commands:n,chain:e})=>this.options.keepAttributes?e().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(jT,this.editor.getAttributes(D2)).run():n.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-8":()=>this.editor.commands.toggleBulletList()}},addInputRules(){let n=Ws({find:w2,type:this.type});return(this.options.keepMarks||this.options.keepAttributes)&&(n=Ws({find:w2,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:()=>this.editor.getAttributes(D2),editor:this.editor})),[n]}}),JT=/(^|[^`])`([^`]+)`(?!`)/,GT=/(^|[^`])`([^`]+)`(?!`)/g,KT=Nn.create({name:"code",addOptions(){return{HTMLAttributes:{}}},excludes:"_",code:!0,exitable:!0,parseHTML(){return[{tag:"code"}]},renderHTML({HTMLAttributes:n}){return["code",zt(this.options.HTMLAttributes,n),0]},addCommands(){return{setCode:()=>({commands:n})=>n.setMark(this.name),toggleCode:()=>({commands:n})=>n.toggleMark(this.name),unsetCode:()=>({commands:n})=>n.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-e":()=>this.editor.commands.toggleCode()}},addInputRules(){return[gu({find:JT,type:this.type})]},addPasteRules(){return[bu({find:GT,type:this.type})]}}),YT=/^```([a-z]+)?[\s\n]$/,ZT=/^~~~([a-z]+)?[\s\n]$/,XT=$e.create({name:"codeBlock",addOptions(){return{languageClassPrefix:"language-",exitOnTripleEnter:!0,exitOnArrowDown:!0,defaultLanguage:null,HTMLAttributes:{}}},content:"text*",marks:"",group:"block",code:!0,defining:!0,addAttributes(){return{language:{default:this.options.defaultLanguage,parseHTML:n=>{var e;const{languageClassPrefix:t}=this.options,l=[...((e=n.firstElementChild)===null||e===void 0?void 0:e.classList)||[]].filter(o=>o.startsWith(t)).map(o=>o.replace(t,""))[0];return l||null},rendered:!1}}},parseHTML(){return[{tag:"pre",preserveWhitespace:"full"}]},renderHTML({node:n,HTMLAttributes:e}){return["pre",zt(this.options.HTMLAttributes,e),["code",{class:n.attrs.language?this.options.languageClassPrefix+n.attrs.language:null},0]]},addCommands(){return{setCodeBlock:n=>({commands:e})=>e.setNode(this.name,n),toggleCodeBlock:n=>({commands:e})=>e.toggleNode(this.name,"paragraph",n)}},addKeyboardShortcuts(){return{"Mod-Alt-c":()=>this.editor.commands.toggleCodeBlock(),Backspace:()=>{const{empty:n,$anchor:e}=this.editor.state.selection,t=e.pos===1;return!n||e.parent.type.name!==this.name?!1:t||!e.parent.textContent.length?this.editor.commands.clearNodes():!1},Enter:({editor:n})=>{if(!this.options.exitOnTripleEnter)return!1;const{state:e}=n,{selection:t}=e,{$from:r,empty:i}=t;if(!i||r.parent.type!==this.type)return!1;const l=r.parentOffset===r.parent.nodeSize-2,o=r.parent.textContent.endsWith(`

`);return!l||!o?!1:n.chain().command(({tr:a})=>(a.delete(r.pos-2,r.pos),!0)).exitCode().run()},ArrowDown:({editor:n})=>{if(!this.options.exitOnArrowDown)return!1;const{state:e}=n,{selection:t,doc:r}=e,{$from:i,empty:l}=t;if(!l||i.parent.type!==this.type||!(i.parentOffset===i.parent.nodeSize-2))return!1;const a=i.after();return a===void 0?!1:r.nodeAt(a)?n.commands.command(({tr:h})=>(h.setSelection(de.near(r.resolve(a))),!0)):n.commands.exitCode()}}},addInputRules(){return[Jp({find:YT,type:this.type,getAttributes:n=>({language:n[1]})}),Jp({find:ZT,type:this.type,getAttributes:n=>({language:n[1]})})]},addProseMirrorPlugins(){return[new Bt({key:new _n("codeBlockVSCodeHandler"),props:{handlePaste:(n,e)=>{if(!e.clipboardData||this.editor.isActive(this.type.name))return!1;const t=e.clipboardData.getData("text/plain"),r=e.clipboardData.getData("vscode-editor-data"),i=r?JSON.parse(r):void 0,l=i==null?void 0:i.mode;if(!t||!l)return!1;const{tr:o,schema:a}=n.state,f=a.text(t.replace(/\r\n?/g,`
`));return o.replaceSelectionWith(this.type.create({language:l},f)),o.selection.$from.parent.type!==this.type&&o.setSelection(he.near(o.doc.resolve(Math.max(0,o.selection.from-2)))),o.setMeta("paste",!0),n.dispatch(o),!0}}})]}}),QT=$e.create({name:"doc",topNode:!0,content:"block+"});function WT(n={}){return new Bt({view(e){return new eD(e,n)}})}class eD{constructor(e,t){var r;this.editorView=e,this.cursorPos=null,this.element=null,this.timeout=-1,this.width=(r=t.width)!==null&&r!==void 0?r:1,this.color=t.color===!1?void 0:t.color||"black",this.class=t.class,this.handlers=["dragover","dragend","drop","dragleave"].map(i=>{let l=o=>{this[i](o)};return e.dom.addEventListener(i,l),{name:i,handler:l}})}destroy(){this.handlers.forEach(({name:e,handler:t})=>this.editorView.dom.removeEventListener(e,t))}update(e,t){this.cursorPos!=null&&t.doc!=e.state.doc&&(this.cursorPos>e.state.doc.content.size?this.setCursor(null):this.updateOverlay())}setCursor(e){e!=this.cursorPos&&(this.cursorPos=e,e==null?(this.element.parentNode.removeChild(this.element),this.element=null):this.updateOverlay())}updateOverlay(){let e=this.editorView.state.doc.resolve(this.cursorPos),t=!e.parent.inlineContent,r,i=this.editorView.dom,l=i.getBoundingClientRect(),o=l.width/i.offsetWidth,a=l.height/i.offsetHeight;if(t){let g=e.nodeBefore,y=e.nodeAfter;if(g||y){let x=this.editorView.nodeDOM(this.cursorPos-(g?g.nodeSize:0));if(x){let k=x.getBoundingClientRect(),C=g?k.bottom:k.top;g&&y&&(C=(C+this.editorView.nodeDOM(this.cursorPos).getBoundingClientRect().top)/2);let E=this.width/2*a;r={left:k.left,right:k.right,top:C-E,bottom:C+E}}}}if(!r){let g=this.editorView.coordsAtPos(this.cursorPos),y=this.width/2*o;r={left:g.left-y,right:g.left+y,top:g.top,bottom:g.bottom}}let f=this.editorView.dom.offsetParent;this.element||(this.element=f.appendChild(document.createElement("div")),this.class&&(this.element.className=this.class),this.element.style.cssText="position: absolute; z-index: 50; pointer-events: none;",this.color&&(this.element.style.backgroundColor=this.color)),this.element.classList.toggle("prosemirror-dropcursor-block",t),this.element.classList.toggle("prosemirror-dropcursor-inline",!t);let h,p;if(!f||f==document.body&&getComputedStyle(f).position=="static")h=-pageXOffset,p=-pageYOffset;else{let g=f.getBoundingClientRect(),y=g.width/f.offsetWidth,x=g.height/f.offsetHeight;h=g.left-f.scrollLeft*y,p=g.top-f.scrollTop*x}this.element.style.left=(r.left-h)/o+"px",this.element.style.top=(r.top-p)/a+"px",this.element.style.width=(r.right-r.left)/o+"px",this.element.style.height=(r.bottom-r.top)/a+"px"}scheduleRemoval(e){clearTimeout(this.timeout),this.timeout=setTimeout(()=>this.setCursor(null),e)}dragover(e){if(!this.editorView.editable)return;let t=this.editorView.posAtCoords({left:e.clientX,top:e.clientY}),r=t&&t.inside>=0&&this.editorView.state.doc.nodeAt(t.inside),i=r&&r.type.spec.disableDropCursor,l=typeof i=="function"?i(this.editorView,t,e):i;if(t&&!l){let o=t.pos;if(this.editorView.dragging&&this.editorView.dragging.slice){let a=k3(this.editorView.state.doc,o,this.editorView.dragging.slice);a!=null&&(o=a)}this.setCursor(o),this.scheduleRemoval(5e3)}}dragend(){this.scheduleRemoval(20)}drop(){this.scheduleRemoval(20)}dragleave(e){this.editorView.dom.contains(e.relatedTarget)||this.setCursor(null)}}const tD=$t.create({name:"dropCursor",addOptions(){return{color:"currentColor",width:1,class:void 0}},addProseMirrorPlugins(){return[WT(this.options)]}});class Ue extends de{constructor(e){super(e,e)}map(e,t){let r=e.resolve(t.map(this.head));return Ue.valid(r)?new Ue(r):de.near(r)}content(){return Y.empty}eq(e){return e instanceof Ue&&e.head==this.head}toJSON(){return{type:"gapcursor",pos:this.head}}static fromJSON(e,t){if(typeof t.pos!="number")throw new RangeError("Invalid input for GapCursor.fromJSON");return new Ue(e.resolve(t.pos))}getBookmark(){return new F0(this.anchor)}static valid(e){let t=e.parent;if(t.isTextblock||!nD(e)||!rD(e))return!1;let r=t.type.spec.allowGapCursor;if(r!=null)return r;let i=t.contentMatchAt(e.index()).defaultType;return i&&i.isTextblock}static findGapCursorFrom(e,t,r=!1){e:for(;;){if(!r&&Ue.valid(e))return e;let i=e.pos,l=null;for(let o=e.depth;;o--){let a=e.node(o);if(t>0?e.indexAfter(o)<a.childCount:e.index(o)>0){l=a.child(t>0?e.indexAfter(o):e.index(o)-1);break}else if(o==0)return null;i+=t;let f=e.doc.resolve(i);if(Ue.valid(f))return f}for(;;){let o=t>0?l.firstChild:l.lastChild;if(!o){if(l.isAtom&&!l.isText&&!oe.isSelectable(l)){e=e.doc.resolve(i+l.nodeSize*t),r=!1;continue e}break}l=o,i+=t;let a=e.doc.resolve(i);if(Ue.valid(a))return a}return null}}}Ue.prototype.visible=!1;Ue.findFrom=Ue.findGapCursorFrom;de.jsonID("gapcursor",Ue);class F0{constructor(e){this.pos=e}map(e){return new F0(e.map(this.pos))}resolve(e){let t=e.resolve(this.pos);return Ue.valid(t)?new Ue(t):de.near(t)}}function nD(n){for(let e=n.depth;e>=0;e--){let t=n.index(e),r=n.node(e);if(t==0){if(r.type.spec.isolating)return!0;continue}for(let i=r.child(t-1);;i=i.lastChild){if(i.childCount==0&&!i.inlineContent||i.isAtom||i.type.spec.isolating)return!0;if(i.inlineContent)return!1}}return!0}function rD(n){for(let e=n.depth;e>=0;e--){let t=n.indexAfter(e),r=n.node(e);if(t==r.childCount){if(r.type.spec.isolating)return!0;continue}for(let i=r.child(t);;i=i.firstChild){if(i.childCount==0&&!i.inlineContent||i.isAtom||i.type.spec.isolating)return!0;if(i.inlineContent)return!1}}return!0}function iD(){return new Bt({props:{decorations:oD,createSelectionBetween(n,e,t){return e.pos==t.pos&&Ue.valid(t)?new Ue(t):null},handleClick:uD,handleKeyDown:lD,handleDOMEvents:{beforeinput:sD}}})}const lD=pk({ArrowLeft:Ua("horiz",-1),ArrowRight:Ua("horiz",1),ArrowUp:Ua("vert",-1),ArrowDown:Ua("vert",1)});function Ua(n,e){const t=n=="vert"?e>0?"down":"up":e>0?"right":"left";return function(r,i,l){let o=r.selection,a=e>0?o.$to:o.$from,f=o.empty;if(o instanceof he){if(!l.endOfTextblock(t)||a.depth==0)return!1;f=!1,a=r.doc.resolve(e>0?a.after():a.before())}let h=Ue.findGapCursorFrom(a,e,f);return h?(i&&i(r.tr.setSelection(new Ue(h))),!0):!1}}function uD(n,e,t){if(!n||!n.editable)return!1;let r=n.state.doc.resolve(e);if(!Ue.valid(r))return!1;let i=n.posAtCoords({left:t.clientX,top:t.clientY});return i&&i.inside>-1&&oe.isSelectable(n.state.doc.nodeAt(i.inside))?!1:(n.dispatch(n.state.tr.setSelection(new Ue(r))),!0)}function sD(n,e){if(e.inputType!="insertCompositionText"||!(n.state.selection instanceof Ue))return!1;let{$from:t}=n.state.selection,r=t.parent.contentMatchAt(t.index()).findWrapping(n.state.schema.nodes.text);if(!r)return!1;let i=j.empty;for(let o=r.length-1;o>=0;o--)i=j.from(r[o].createAndFill(null,i));let l=n.state.tr.replace(t.pos,t.pos,new Y(i,0,0));return l.setSelection(he.near(l.doc.resolve(t.pos+1))),n.dispatch(l),!1}function oD(n){if(!(n.selection instanceof Ue))return null;let e=document.createElement("div");return e.className="ProseMirror-gapcursor",Dn.create(n.doc,[ll.widget(n.selection.head,e,{key:"gapcursor"})])}const aD=$t.create({name:"gapCursor",addProseMirrorPlugins(){return[iD()]},extendNodeSchema(n){var e;const t={name:n.name,options:n.options,storage:n.storage};return{allowGapCursor:(e=me(X(n,"allowGapCursor",t)))!==null&&e!==void 0?e:null}}}),cD=$e.create({name:"hardBreak",addOptions(){return{keepMarks:!0,HTMLAttributes:{}}},inline:!0,group:"inline",selectable:!1,linebreakReplacement:!0,parseHTML(){return[{tag:"br"}]},renderHTML({HTMLAttributes:n}){return["br",zt(this.options.HTMLAttributes,n)]},renderText(){return`
`},addCommands(){return{setHardBreak:()=>({commands:n,chain:e,state:t,editor:r})=>n.first([()=>n.exitCode(),()=>n.command(()=>{const{selection:i,storedMarks:l}=t;if(i.$from.parent.type.spec.isolating)return!1;const{keepMarks:o}=this.options,{splittableMarks:a}=r.extensionManager,f=l||i.$to.parentOffset&&i.$from.marks();return e().insertContent({type:this.name}).command(({tr:h,dispatch:p})=>{if(p&&f&&o){const g=f.filter(y=>a.includes(y.type.name));h.ensureMarks(g)}return!0}).run()})])}},addKeyboardShortcuts(){return{"Mod-Enter":()=>this.editor.commands.setHardBreak(),"Shift-Enter":()=>this.editor.commands.setHardBreak()}}}),fD=$e.create({name:"heading",addOptions(){return{levels:[1,2,3,4,5,6],HTMLAttributes:{}}},content:"inline*",group:"block",defining:!0,addAttributes(){return{level:{default:1,rendered:!1}}},parseHTML(){return this.options.levels.map(n=>({tag:`h${n}`,attrs:{level:n}}))},renderHTML({node:n,HTMLAttributes:e}){return[`h${this.options.levels.includes(n.attrs.level)?n.attrs.level:this.options.levels[0]}`,zt(this.options.HTMLAttributes,e),0]},addCommands(){return{setHeading:n=>({commands:e})=>this.options.levels.includes(n.level)?e.setNode(this.name,n):!1,toggleHeading:n=>({commands:e})=>this.options.levels.includes(n.level)?e.toggleNode(this.name,"paragraph",n):!1}},addKeyboardShortcuts(){return this.options.levels.reduce((n,e)=>({...n,[`Mod-Alt-${e}`]:()=>this.editor.commands.toggleHeading({level:e})}),{})},addInputRules(){return this.options.levels.map(n=>Jp({find:new RegExp(`^(#{${Math.min(...this.options.levels)},${n}})\\s$`),type:this.type,getAttributes:{level:n}}))}});var Sc=200,at=function(){};at.prototype.append=function(e){return e.length?(e=at.from(e),!this.length&&e||e.length<Sc&&this.leafAppend(e)||this.length<Sc&&e.leafPrepend(this)||this.appendInner(e)):this};at.prototype.prepend=function(e){return e.length?at.from(e).append(this):this};at.prototype.appendInner=function(e){return new dD(this,e)};at.prototype.slice=function(e,t){return e===void 0&&(e=0),t===void 0&&(t=this.length),e>=t?at.empty:this.sliceInner(Math.max(0,e),Math.min(this.length,t))};at.prototype.get=function(e){if(!(e<0||e>=this.length))return this.getInner(e)};at.prototype.forEach=function(e,t,r){t===void 0&&(t=0),r===void 0&&(r=this.length),t<=r?this.forEachInner(e,t,r,0):this.forEachInvertedInner(e,t,r,0)};at.prototype.map=function(e,t,r){t===void 0&&(t=0),r===void 0&&(r=this.length);var i=[];return this.forEach(function(l,o){return i.push(e(l,o))},t,r),i};at.from=function(e){return e instanceof at?e:e&&e.length?new Yk(e):at.empty};var Yk=function(n){function e(r){n.call(this),this.values=r}n&&(e.__proto__=n),e.prototype=Object.create(n&&n.prototype),e.prototype.constructor=e;var t={length:{configurable:!0},depth:{configurable:!0}};return e.prototype.flatten=function(){return this.values},e.prototype.sliceInner=function(i,l){return i==0&&l==this.length?this:new e(this.values.slice(i,l))},e.prototype.getInner=function(i){return this.values[i]},e.prototype.forEachInner=function(i,l,o,a){for(var f=l;f<o;f++)if(i(this.values[f],a+f)===!1)return!1},e.prototype.forEachInvertedInner=function(i,l,o,a){for(var f=l-1;f>=o;f--)if(i(this.values[f],a+f)===!1)return!1},e.prototype.leafAppend=function(i){if(this.length+i.length<=Sc)return new e(this.values.concat(i.flatten()))},e.prototype.leafPrepend=function(i){if(this.length+i.length<=Sc)return new e(i.flatten().concat(this.values))},t.length.get=function(){return this.values.length},t.depth.get=function(){return 0},Object.defineProperties(e.prototype,t),e}(at);at.empty=new Yk([]);var dD=function(n){function e(t,r){n.call(this),this.left=t,this.right=r,this.length=t.length+r.length,this.depth=Math.max(t.depth,r.depth)+1}return n&&(e.__proto__=n),e.prototype=Object.create(n&&n.prototype),e.prototype.constructor=e,e.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},e.prototype.getInner=function(r){return r<this.left.length?this.left.get(r):this.right.get(r-this.left.length)},e.prototype.forEachInner=function(r,i,l,o){var a=this.left.length;if(i<a&&this.left.forEachInner(r,i,Math.min(l,a),o)===!1||l>a&&this.right.forEachInner(r,Math.max(i-a,0),Math.min(this.length,l)-a,o+a)===!1)return!1},e.prototype.forEachInvertedInner=function(r,i,l,o){var a=this.left.length;if(i>a&&this.right.forEachInvertedInner(r,i-a,Math.max(l,a)-a,o+a)===!1||l<a&&this.left.forEachInvertedInner(r,Math.min(i,a),l,o)===!1)return!1},e.prototype.sliceInner=function(r,i){if(r==0&&i==this.length)return this;var l=this.left.length;return i<=l?this.left.slice(r,i):r>=l?this.right.slice(r-l,i-l):this.left.slice(r,l).append(this.right.slice(0,i-l))},e.prototype.leafAppend=function(r){var i=this.right.leafAppend(r);if(i)return new e(this.left,i)},e.prototype.leafPrepend=function(r){var i=this.left.leafPrepend(r);if(i)return new e(i,this.right)},e.prototype.appendInner=function(r){return this.left.depth>=Math.max(this.right.depth,r.depth)+1?new e(this.left,new e(this.right,r)):new e(this,r)},e}(at);const hD=500;class An{constructor(e,t){this.items=e,this.eventCount=t}popEvent(e,t){if(this.eventCount==0)return null;let r=this.items.length;for(;;r--)if(this.items.get(r-1).selection){--r;break}let i,l;t&&(i=this.remapping(r,this.items.length),l=i.maps.length);let o=e.tr,a,f,h=[],p=[];return this.items.forEach((g,y)=>{if(!g.step){i||(i=this.remapping(r,y+1),l=i.maps.length),l--,p.push(g);return}if(i){p.push(new Vn(g.map));let x=g.step.map(i.slice(l)),k;x&&o.maybeStep(x).doc&&(k=o.mapping.maps[o.mapping.maps.length-1],h.push(new Vn(k,void 0,void 0,h.length+p.length))),l--,k&&i.appendMap(k,l)}else o.maybeStep(g.step);if(g.selection)return a=i?g.selection.map(i.slice(l)):g.selection,f=new An(this.items.slice(0,r).append(p.reverse().concat(h)),this.eventCount-1),!1},this.items.length,0),{remaining:f,transform:o,selection:a}}addTransform(e,t,r,i){let l=[],o=this.eventCount,a=this.items,f=!i&&a.length?a.get(a.length-1):null;for(let p=0;p<e.steps.length;p++){let g=e.steps[p].invert(e.docs[p]),y=new Vn(e.mapping.maps[p],g,t),x;(x=f&&f.merge(y))&&(y=x,p?l.pop():a=a.slice(0,a.length-1)),l.push(y),t&&(o++,t=void 0),i||(f=y)}let h=o-r.depth;return h>mD&&(a=pD(a,h),o-=h),new An(a.append(l),o)}remapping(e,t){let r=new Ks;return this.items.forEach((i,l)=>{let o=i.mirrorOffset!=null&&l-i.mirrorOffset>=e?r.maps.length-i.mirrorOffset:void 0;r.appendMap(i.map,o)},e,t),r}addMaps(e){return this.eventCount==0?this:new An(this.items.append(e.map(t=>new Vn(t))),this.eventCount)}rebased(e,t){if(!this.eventCount)return this;let r=[],i=Math.max(0,this.items.length-t),l=e.mapping,o=e.steps.length,a=this.eventCount;this.items.forEach(y=>{y.selection&&a--},i);let f=t;this.items.forEach(y=>{let x=l.getMirror(--f);if(x==null)return;o=Math.min(o,x);let k=l.maps[x];if(y.step){let C=e.steps[x].invert(e.docs[x]),E=y.selection&&y.selection.map(l.slice(f+1,x));E&&a++,r.push(new Vn(k,C,E))}else r.push(new Vn(k))},i);let h=[];for(let y=t;y<o;y++)h.push(new Vn(l.maps[y]));let p=this.items.slice(0,i).append(h).append(r),g=new An(p,a);return g.emptyItemCount()>hD&&(g=g.compress(this.items.length-r.length)),g}emptyItemCount(){let e=0;return this.items.forEach(t=>{t.step||e++}),e}compress(e=this.items.length){let t=this.remapping(0,e),r=t.maps.length,i=[],l=0;return this.items.forEach((o,a)=>{if(a>=e)i.push(o),o.selection&&l++;else if(o.step){let f=o.step.map(t.slice(r)),h=f&&f.getMap();if(r--,h&&t.appendMap(h,r),f){let p=o.selection&&o.selection.map(t.slice(r));p&&l++;let g=new Vn(h.invert(),f,p),y,x=i.length-1;(y=i.length&&i[x].merge(g))?i[x]=y:i.push(g)}}else o.map&&r--},this.items.length,0),new An(at.from(i.reverse()),l)}}An.empty=new An(at.empty,0);function pD(n,e){let t;return n.forEach((r,i)=>{if(r.selection&&e--==0)return t=i,!1}),n.slice(t)}class Vn{constructor(e,t,r,i){this.map=e,this.step=t,this.selection=r,this.mirrorOffset=i}merge(e){if(this.step&&e.step&&!e.selection){let t=e.step.merge(this.step);if(t)return new Vn(t.getMap().invert(),t,this.selection)}}}class Kr{constructor(e,t,r,i,l){this.done=e,this.undone=t,this.prevRanges=r,this.prevTime=i,this.prevComposition=l}}const mD=20;function gD(n,e,t,r){let i=t.getMeta(Ki),l;if(i)return i.historyState;t.getMeta(xD)&&(n=new Kr(n.done,n.undone,null,0,-1));let o=t.getMeta("appendedTransaction");if(t.steps.length==0)return n;if(o&&o.getMeta(Ki))return o.getMeta(Ki).redo?new Kr(n.done.addTransform(t,void 0,r,ic(e)),n.undone,O2(t.mapping.maps),n.prevTime,n.prevComposition):new Kr(n.done,n.undone.addTransform(t,void 0,r,ic(e)),null,n.prevTime,n.prevComposition);if(t.getMeta("addToHistory")!==!1&&!(o&&o.getMeta("addToHistory")===!1)){let a=t.getMeta("composition"),f=n.prevTime==0||!o&&n.prevComposition!=a&&(n.prevTime<(t.time||0)-r.newGroupDelay||!bD(t,n.prevRanges)),h=o?Yh(n.prevRanges,t.mapping):O2(t.mapping.maps);return new Kr(n.done.addTransform(t,f?e.selection.getBookmark():void 0,r,ic(e)),An.empty,h,t.time,a??n.prevComposition)}else return(l=t.getMeta("rebased"))?new Kr(n.done.rebased(t,l),n.undone.rebased(t,l),Yh(n.prevRanges,t.mapping),n.prevTime,n.prevComposition):new Kr(n.done.addMaps(t.mapping.maps),n.undone.addMaps(t.mapping.maps),Yh(n.prevRanges,t.mapping),n.prevTime,n.prevComposition)}function bD(n,e){if(!e)return!1;if(!n.docChanged)return!0;let t=!1;return n.mapping.maps[0].forEach((r,i)=>{for(let l=0;l<e.length;l+=2)r<=e[l+1]&&i>=e[l]&&(t=!0)}),t}function O2(n){let e=[];for(let t=n.length-1;t>=0&&e.length==0;t--)n[t].forEach((r,i,l,o)=>e.push(l,o));return e}function Yh(n,e){if(!n)return null;let t=[];for(let r=0;r<n.length;r+=2){let i=e.map(n[r],1),l=e.map(n[r+1],-1);i<=l&&t.push(i,l)}return t}function yD(n,e,t){let r=ic(e),i=Ki.get(e).spec.config,l=(t?n.undone:n.done).popEvent(e,r);if(!l)return null;let o=l.selection.resolve(l.transform.doc),a=(t?n.done:n.undone).addTransform(l.transform,e.selection.getBookmark(),i,r),f=new Kr(t?a:l.remaining,t?l.remaining:a,null,0,-1);return l.transform.setSelection(o).setMeta(Ki,{redo:t,historyState:f})}let Zh=!1,_2=null;function ic(n){let e=n.plugins;if(_2!=e){Zh=!1,_2=e;for(let t=0;t<e.length;t++)if(e[t].spec.historyPreserveItems){Zh=!0;break}}return Zh}const Ki=new _n("history"),xD=new _n("closeHistory");function kD(n={}){return n={depth:n.depth||100,newGroupDelay:n.newGroupDelay||500},new Bt({key:Ki,state:{init(){return new Kr(An.empty,An.empty,null,0,-1)},apply(e,t,r){return gD(t,r,e,n)}},config:n,props:{handleDOMEvents:{beforeinput(e,t){let r=t.inputType,i=r=="historyUndo"?Xk:r=="historyRedo"?Qk:null;return i?(t.preventDefault(),i(e.state,e.dispatch)):!1}}}})}function Zk(n,e){return(t,r)=>{let i=Ki.getState(t);if(!i||(n?i.undone:i.done).eventCount==0)return!1;if(r){let l=yD(i,t,n);l&&r(e?l.scrollIntoView():l)}return!0}}const Xk=Zk(!1,!0),Qk=Zk(!0,!0),SD=$t.create({name:"history",addOptions(){return{depth:100,newGroupDelay:500}},addCommands(){return{undo:()=>({state:n,dispatch:e})=>Xk(n,e),redo:()=>({state:n,dispatch:e})=>Qk(n,e)}},addProseMirrorPlugins(){return[kD(this.options)]},addKeyboardShortcuts(){return{"Mod-z":()=>this.editor.commands.undo(),"Shift-Mod-z":()=>this.editor.commands.redo(),"Mod-y":()=>this.editor.commands.redo(),"Mod-":()=>this.editor.commands.undo(),"Shift-Mod-":()=>this.editor.commands.redo()}}}),CD=$e.create({name:"horizontalRule",addOptions(){return{HTMLAttributes:{}}},group:"block",parseHTML(){return[{tag:"hr"}]},renderHTML({HTMLAttributes:n}){return["hr",zt(this.options.HTMLAttributes,n)]},addCommands(){return{setHorizontalRule:()=>({chain:n,state:e})=>{const{selection:t}=e,{$from:r,$to:i}=t,l=n();return r.parentOffset===0?l.insertContentAt({from:Math.max(r.pos-1,0),to:i.pos},{type:this.name}):jA(t)?l.insertContentAt(i.pos,{type:this.name}):l.insertContent({type:this.name}),l.command(({tr:o,dispatch:a})=>{var f;if(a){const{$to:h}=o.selection,p=h.end();if(h.nodeAfter)h.nodeAfter.isTextblock?o.setSelection(he.create(o.doc,h.pos+1)):h.nodeAfter.isBlock?o.setSelection(oe.create(o.doc,h.pos)):o.setSelection(he.create(o.doc,h.pos));else{const g=(f=h.parent.type.contentMatch.defaultType)===null||f===void 0?void 0:f.create();g&&(o.insert(p,g),o.setSelection(he.create(o.doc,p+1)))}o.scrollIntoView()}return!0}).run()}}},addInputRules(){return[mT({find:/^(?:---|-|___\s|\*\*\*\s)$/,type:this.type})]}}),vD=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))$/,ED=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))/g,MD=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))$/,AD=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))/g,TD=Nn.create({name:"italic",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"em"},{tag:"i",getAttrs:n=>n.style.fontStyle!=="normal"&&null},{style:"font-style=normal",clearMark:n=>n.type.name===this.name},{style:"font-style=italic"}]},renderHTML({HTMLAttributes:n}){return["em",zt(this.options.HTMLAttributes,n),0]},addCommands(){return{setItalic:()=>({commands:n})=>n.setMark(this.name),toggleItalic:()=>({commands:n})=>n.toggleMark(this.name),unsetItalic:()=>({commands:n})=>n.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-i":()=>this.editor.commands.toggleItalic(),"Mod-I":()=>this.editor.commands.toggleItalic()}},addInputRules(){return[gu({find:vD,type:this.type}),gu({find:MD,type:this.type})]},addPasteRules(){return[bu({find:ED,type:this.type}),bu({find:AD,type:this.type})]}}),DD=$e.create({name:"listItem",addOptions(){return{HTMLAttributes:{},bulletListTypeName:"bulletList",orderedListTypeName:"orderedList"}},content:"paragraph block*",defining:!0,parseHTML(){return[{tag:"li"}]},renderHTML({HTMLAttributes:n}){return["li",zt(this.options.HTMLAttributes,n),0]},addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}}),wD="listItem",N2="textStyle",R2=/^(\d+)\.\s$/,OD=$e.create({name:"orderedList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},addAttributes(){return{start:{default:1,parseHTML:n=>n.hasAttribute("start")?parseInt(n.getAttribute("start")||"",10):1},type:{default:null,parseHTML:n=>n.getAttribute("type")}}},parseHTML(){return[{tag:"ol"}]},renderHTML({HTMLAttributes:n}){const{start:e,...t}=n;return e===1?["ol",zt(this.options.HTMLAttributes,t),0]:["ol",zt(this.options.HTMLAttributes,n),0]},addCommands(){return{toggleOrderedList:()=>({commands:n,chain:e})=>this.options.keepAttributes?e().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(wD,this.editor.getAttributes(N2)).run():n.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-7":()=>this.editor.commands.toggleOrderedList()}},addInputRules(){let n=Ws({find:R2,type:this.type,getAttributes:e=>({start:+e[1]}),joinPredicate:(e,t)=>t.childCount+t.attrs.start===+e[1]});return(this.options.keepMarks||this.options.keepAttributes)&&(n=Ws({find:R2,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:e=>({start:+e[1],...this.editor.getAttributes(N2)}),joinPredicate:(e,t)=>t.childCount+t.attrs.start===+e[1],editor:this.editor})),[n]}}),_D=$e.create({name:"paragraph",priority:1e3,addOptions(){return{HTMLAttributes:{}}},group:"block",content:"inline*",parseHTML(){return[{tag:"p"}]},renderHTML({HTMLAttributes:n}){return["p",zt(this.options.HTMLAttributes,n),0]},addCommands(){return{setParagraph:()=>({commands:n})=>n.setNode(this.name)}},addKeyboardShortcuts(){return{"Mod-Alt-0":()=>this.editor.commands.setParagraph()}}}),ND=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))$/,RD=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))/g,zD=Nn.create({name:"strike",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"s"},{tag:"del"},{tag:"strike"},{style:"text-decoration",consuming:!1,getAttrs:n=>n.includes("line-through")?{}:!1}]},renderHTML({HTMLAttributes:n}){return["s",zt(this.options.HTMLAttributes,n),0]},addCommands(){return{setStrike:()=>({commands:n})=>n.setMark(this.name),toggleStrike:()=>({commands:n})=>n.toggleMark(this.name),unsetStrike:()=>({commands:n})=>n.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-s":()=>this.editor.commands.toggleStrike()}},addInputRules(){return[gu({find:ND,type:this.type})]},addPasteRules(){return[bu({find:RD,type:this.type})]}}),BD=$e.create({name:"text",group:"inline"}),z2=$t.create({name:"starterKit",addExtensions(){const n=[];return this.options.bold!==!1&&n.push(UT.configure(this.options.bold)),this.options.blockquote!==!1&&n.push(LT.configure(this.options.blockquote)),this.options.bulletList!==!1&&n.push(PT.configure(this.options.bulletList)),this.options.code!==!1&&n.push(KT.configure(this.options.code)),this.options.codeBlock!==!1&&n.push(XT.configure(this.options.codeBlock)),this.options.document!==!1&&n.push(QT.configure(this.options.document)),this.options.dropcursor!==!1&&n.push(tD.configure(this.options.dropcursor)),this.options.gapcursor!==!1&&n.push(aD.configure(this.options.gapcursor)),this.options.hardBreak!==!1&&n.push(cD.configure(this.options.hardBreak)),this.options.heading!==!1&&n.push(fD.configure(this.options.heading)),this.options.history!==!1&&n.push(SD.configure(this.options.history)),this.options.horizontalRule!==!1&&n.push(CD.configure(this.options.horizontalRule)),this.options.italic!==!1&&n.push(TD.configure(this.options.italic)),this.options.listItem!==!1&&n.push(DD.configure(this.options.listItem)),this.options.orderedList!==!1&&n.push(OD.configure(this.options.orderedList)),this.options.paragraph!==!1&&n.push(_D.configure(this.options.paragraph)),this.options.strike!==!1&&n.push(zD.configure(this.options.strike)),this.options.text!==!1&&n.push(BD.configure(this.options.text)),n}}),B2={};function $D(n){let e=B2[n];if(e)return e;e=B2[n]=[];for(let t=0;t<128;t++){const r=String.fromCharCode(t);e.push(r)}for(let t=0;t<n.length;t++){const r=n.charCodeAt(t);e[r]="%"+("0"+r.toString(16).toUpperCase()).slice(-2)}return e}function yu(n,e){typeof e!="string"&&(e=yu.defaultChars);const t=$D(e);return n.replace(/(%[a-f0-9]{2})+/gi,function(r){let i="";for(let l=0,o=r.length;l<o;l+=3){const a=parseInt(r.slice(l+1,l+3),16);if(a<128){i+=t[a];continue}if((a&224)===192&&l+3<o){const f=parseInt(r.slice(l+4,l+6),16);if((f&192)===128){const h=a<<6&1984|f&63;h<128?i+="":i+=String.fromCharCode(h),l+=3;continue}}if((a&240)===224&&l+6<o){const f=parseInt(r.slice(l+4,l+6),16),h=parseInt(r.slice(l+7,l+9),16);if((f&192)===128&&(h&192)===128){const p=a<<12&61440|f<<6&4032|h&63;p<2048||p>=55296&&p<=57343?i+="":i+=String.fromCharCode(p),l+=6;continue}}if((a&248)===240&&l+9<o){const f=parseInt(r.slice(l+4,l+6),16),h=parseInt(r.slice(l+7,l+9),16),p=parseInt(r.slice(l+10,l+12),16);if((f&192)===128&&(h&192)===128&&(p&192)===128){let g=a<<18&1835008|f<<12&258048|h<<6&4032|p&63;g<65536||g>1114111?i+="":(g-=65536,i+=String.fromCharCode(55296+(g>>10),56320+(g&1023))),l+=9;continue}}i+=""}return i})}yu.defaultChars=";/?:@&=+$,#";yu.componentChars="";const $2={};function FD(n){let e=$2[n];if(e)return e;e=$2[n]=[];for(let t=0;t<128;t++){const r=String.fromCharCode(t);/^[0-9a-z]$/i.test(r)?e.push(r):e.push("%"+("0"+t.toString(16).toUpperCase()).slice(-2))}for(let t=0;t<n.length;t++)e[n.charCodeAt(t)]=n[t];return e}function bo(n,e,t){typeof e!="string"&&(t=e,e=bo.defaultChars),typeof t>"u"&&(t=!0);const r=FD(e);let i="";for(let l=0,o=n.length;l<o;l++){const a=n.charCodeAt(l);if(t&&a===37&&l+2<o&&/^[0-9a-f]{2}$/i.test(n.slice(l+1,l+3))){i+=n.slice(l,l+3),l+=2;continue}if(a<128){i+=r[a];continue}if(a>=55296&&a<=57343){if(a>=55296&&a<=56319&&l+1<o){const f=n.charCodeAt(l+1);if(f>=56320&&f<=57343){i+=encodeURIComponent(n[l]+n[l+1]),l++;continue}}i+="%EF%BF%BD";continue}i+=encodeURIComponent(n[l])}return i}bo.defaultChars=";/?:@&=+$,-_.!~*'()#";bo.componentChars="-_.!~*'()";function L0(n){let e="";return e+=n.protocol||"",e+=n.slashes?"//":"",e+=n.auth?n.auth+"@":"",n.hostname&&n.hostname.indexOf(":")!==-1?e+="["+n.hostname+"]":e+=n.hostname||"",e+=n.port?":"+n.port:"",e+=n.pathname||"",e+=n.search||"",e+=n.hash||"",e}function Cc(){this.protocol=null,this.slashes=null,this.auth=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.pathname=null}const LD=/^([a-z0-9.+-]+:)/i,ID=/:[0-9]*$/,qD=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,HD=["<",">",'"',"`"," ","\r",`
`,"	"],VD=["{","}","|","\\","^","`"].concat(HD),UD=["'"].concat(VD),F2=["%","/","?",";","#"].concat(UD),L2=["/","?","#"],jD=255,I2=/^[+a-z0-9A-Z_-]{0,63}$/,PD=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,q2={javascript:!0,"javascript:":!0},H2={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0};function I0(n,e){if(n&&n instanceof Cc)return n;const t=new Cc;return t.parse(n,e),t}Cc.prototype.parse=function(n,e){let t,r,i,l=n;if(l=l.trim(),!e&&n.split("#").length===1){const h=qD.exec(l);if(h)return this.pathname=h[1],h[2]&&(this.search=h[2]),this}let o=LD.exec(l);if(o&&(o=o[0],t=o.toLowerCase(),this.protocol=o,l=l.substr(o.length)),(e||o||l.match(/^\/\/[^@\/]+@[^@\/]+/))&&(i=l.substr(0,2)==="//",i&&!(o&&q2[o])&&(l=l.substr(2),this.slashes=!0)),!q2[o]&&(i||o&&!H2[o])){let h=-1;for(let k=0;k<L2.length;k++)r=l.indexOf(L2[k]),r!==-1&&(h===-1||r<h)&&(h=r);let p,g;h===-1?g=l.lastIndexOf("@"):g=l.lastIndexOf("@",h),g!==-1&&(p=l.slice(0,g),l=l.slice(g+1),this.auth=p),h=-1;for(let k=0;k<F2.length;k++)r=l.indexOf(F2[k]),r!==-1&&(h===-1||r<h)&&(h=r);h===-1&&(h=l.length),l[h-1]===":"&&h--;const y=l.slice(0,h);l=l.slice(h),this.parseHost(y),this.hostname=this.hostname||"";const x=this.hostname[0]==="["&&this.hostname[this.hostname.length-1]==="]";if(!x){const k=this.hostname.split(/\./);for(let C=0,E=k.length;C<E;C++){const A=k[C];if(A&&!A.match(I2)){let N="";for(let B=0,H=A.length;B<H;B++)A.charCodeAt(B)>127?N+="x":N+=A[B];if(!N.match(I2)){const B=k.slice(0,C),H=k.slice(C+1),L=A.match(PD);L&&(B.push(L[1]),H.unshift(L[2])),H.length&&(l=H.join(".")+l),this.hostname=B.join(".");break}}}}this.hostname.length>jD&&(this.hostname=""),x&&(this.hostname=this.hostname.substr(1,this.hostname.length-2))}const a=l.indexOf("#");a!==-1&&(this.hash=l.substr(a),l=l.slice(0,a));const f=l.indexOf("?");return f!==-1&&(this.search=l.substr(f),l=l.slice(0,f)),l&&(this.pathname=l),H2[t]&&this.hostname&&!this.pathname&&(this.pathname=""),this};Cc.prototype.parseHost=function(n){let e=ID.exec(n);e&&(e=e[0],e!==":"&&(this.port=e.substr(1)),n=n.substr(0,n.length-e.length)),n&&(this.hostname=n)};const JD=Object.freeze(Object.defineProperty({__proto__:null,decode:yu,encode:bo,format:L0,parse:I0},Symbol.toStringTag,{value:"Module"})),Wk=/[\0-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,eS=/[\0-\x1F\x7F-\x9F]/,GD=/[\xAD\u0600-\u0605\u061C\u06DD\u070F\u0890\u0891\u08E2\u180E\u200B-\u200F\u202A-\u202E\u2060-\u2064\u2066-\u206F\uFEFF\uFFF9-\uFFFB]|\uD804[\uDCBD\uDCCD]|\uD80D[\uDC30-\uDC3F]|\uD82F[\uDCA0-\uDCA3]|\uD834[\uDD73-\uDD7A]|\uDB40[\uDC01\uDC20-\uDC7F]/,q0=/[!-#%-\*,-\/:;\?@\[-\]_\{\}\xA1\xA7\xAB\xB6\xB7\xBB\xBF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061D-\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u09FD\u0A76\u0AF0\u0C77\u0C84\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1B7D\u1B7E\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2308-\u230B\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E4F\u2E52-\u2E5D\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA8FC\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]|\uD800[\uDD00-\uDD02\uDF9F\uDFD0]|\uD801\uDD6F|\uD802[\uDC57\uDD1F\uDD3F\uDE50-\uDE58\uDE7F\uDEF0-\uDEF6\uDF39-\uDF3F\uDF99-\uDF9C]|\uD803[\uDEAD\uDF55-\uDF59\uDF86-\uDF89]|\uD804[\uDC47-\uDC4D\uDCBB\uDCBC\uDCBE-\uDCC1\uDD40-\uDD43\uDD74\uDD75\uDDC5-\uDDC8\uDDCD\uDDDB\uDDDD-\uDDDF\uDE38-\uDE3D\uDEA9]|\uD805[\uDC4B-\uDC4F\uDC5A\uDC5B\uDC5D\uDCC6\uDDC1-\uDDD7\uDE41-\uDE43\uDE60-\uDE6C\uDEB9\uDF3C-\uDF3E]|\uD806[\uDC3B\uDD44-\uDD46\uDDE2\uDE3F-\uDE46\uDE9A-\uDE9C\uDE9E-\uDEA2\uDF00-\uDF09]|\uD807[\uDC41-\uDC45\uDC70\uDC71\uDEF7\uDEF8\uDF43-\uDF4F\uDFFF]|\uD809[\uDC70-\uDC74]|\uD80B[\uDFF1\uDFF2]|\uD81A[\uDE6E\uDE6F\uDEF5\uDF37-\uDF3B\uDF44]|\uD81B[\uDE97-\uDE9A\uDFE2]|\uD82F\uDC9F|\uD836[\uDE87-\uDE8B]|\uD83A[\uDD5E\uDD5F]/,tS=/[\$\+<->\^`\|~\xA2-\xA6\xA8\xA9\xAC\xAE-\xB1\xB4\xB8\xD7\xF7\u02C2-\u02C5\u02D2-\u02DF\u02E5-\u02EB\u02ED\u02EF-\u02FF\u0375\u0384\u0385\u03F6\u0482\u058D-\u058F\u0606-\u0608\u060B\u060E\u060F\u06DE\u06E9\u06FD\u06FE\u07F6\u07FE\u07FF\u0888\u09F2\u09F3\u09FA\u09FB\u0AF1\u0B70\u0BF3-\u0BFA\u0C7F\u0D4F\u0D79\u0E3F\u0F01-\u0F03\u0F13\u0F15-\u0F17\u0F1A-\u0F1F\u0F34\u0F36\u0F38\u0FBE-\u0FC5\u0FC7-\u0FCC\u0FCE\u0FCF\u0FD5-\u0FD8\u109E\u109F\u1390-\u1399\u166D\u17DB\u1940\u19DE-\u19FF\u1B61-\u1B6A\u1B74-\u1B7C\u1FBD\u1FBF-\u1FC1\u1FCD-\u1FCF\u1FDD-\u1FDF\u1FED-\u1FEF\u1FFD\u1FFE\u2044\u2052\u207A-\u207C\u208A-\u208C\u20A0-\u20C0\u2100\u2101\u2103-\u2106\u2108\u2109\u2114\u2116-\u2118\u211E-\u2123\u2125\u2127\u2129\u212E\u213A\u213B\u2140-\u2144\u214A-\u214D\u214F\u218A\u218B\u2190-\u2307\u230C-\u2328\u232B-\u2426\u2440-\u244A\u249C-\u24E9\u2500-\u2767\u2794-\u27C4\u27C7-\u27E5\u27F0-\u2982\u2999-\u29D7\u29DC-\u29FB\u29FE-\u2B73\u2B76-\u2B95\u2B97-\u2BFF\u2CE5-\u2CEA\u2E50\u2E51\u2E80-\u2E99\u2E9B-\u2EF3\u2F00-\u2FD5\u2FF0-\u2FFF\u3004\u3012\u3013\u3020\u3036\u3037\u303E\u303F\u309B\u309C\u3190\u3191\u3196-\u319F\u31C0-\u31E3\u31EF\u3200-\u321E\u322A-\u3247\u3250\u3260-\u327F\u328A-\u32B0\u32C0-\u33FF\u4DC0-\u4DFF\uA490-\uA4C6\uA700-\uA716\uA720\uA721\uA789\uA78A\uA828-\uA82B\uA836-\uA839\uAA77-\uAA79\uAB5B\uAB6A\uAB6B\uFB29\uFBB2-\uFBC2\uFD40-\uFD4F\uFDCF\uFDFC-\uFDFF\uFE62\uFE64-\uFE66\uFE69\uFF04\uFF0B\uFF1C-\uFF1E\uFF3E\uFF40\uFF5C\uFF5E\uFFE0-\uFFE6\uFFE8-\uFFEE\uFFFC\uFFFD]|\uD800[\uDD37-\uDD3F\uDD79-\uDD89\uDD8C-\uDD8E\uDD90-\uDD9C\uDDA0\uDDD0-\uDDFC]|\uD802[\uDC77\uDC78\uDEC8]|\uD805\uDF3F|\uD807[\uDFD5-\uDFF1]|\uD81A[\uDF3C-\uDF3F\uDF45]|\uD82F\uDC9C|\uD833[\uDF50-\uDFC3]|\uD834[\uDC00-\uDCF5\uDD00-\uDD26\uDD29-\uDD64\uDD6A-\uDD6C\uDD83\uDD84\uDD8C-\uDDA9\uDDAE-\uDDEA\uDE00-\uDE41\uDE45\uDF00-\uDF56]|\uD835[\uDEC1\uDEDB\uDEFB\uDF15\uDF35\uDF4F\uDF6F\uDF89\uDFA9\uDFC3]|\uD836[\uDC00-\uDDFF\uDE37-\uDE3A\uDE6D-\uDE74\uDE76-\uDE83\uDE85\uDE86]|\uD838[\uDD4F\uDEFF]|\uD83B[\uDCAC\uDCB0\uDD2E\uDEF0\uDEF1]|\uD83C[\uDC00-\uDC2B\uDC30-\uDC93\uDCA0-\uDCAE\uDCB1-\uDCBF\uDCC1-\uDCCF\uDCD1-\uDCF5\uDD0D-\uDDAD\uDDE6-\uDE02\uDE10-\uDE3B\uDE40-\uDE48\uDE50\uDE51\uDE60-\uDE65\uDF00-\uDFFF]|\uD83D[\uDC00-\uDED7\uDEDC-\uDEEC\uDEF0-\uDEFC\uDF00-\uDF76\uDF7B-\uDFD9\uDFE0-\uDFEB\uDFF0]|\uD83E[\uDC00-\uDC0B\uDC10-\uDC47\uDC50-\uDC59\uDC60-\uDC87\uDC90-\uDCAD\uDCB0\uDCB1\uDD00-\uDE53\uDE60-\uDE6D\uDE70-\uDE7C\uDE80-\uDE88\uDE90-\uDEBD\uDEBF-\uDEC5\uDECE-\uDEDB\uDEE0-\uDEE8\uDEF0-\uDEF8\uDF00-\uDF92\uDF94-\uDFCA]/,nS=/[ \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000]/,KD=Object.freeze(Object.defineProperty({__proto__:null,Any:Wk,Cc:eS,Cf:GD,P:q0,S:tS,Z:nS},Symbol.toStringTag,{value:"Module"})),YD=new Uint16Array('<\0\0\0\0\0\0EMabcfglmnoprstu\\bfmsligP&cutereve;iyx}rc;r;ravepha;acr;d;gpon;f;plyFunction;ingcsr;ign;ildemlaceforsucrkslash;;ed;y;crtause;noullis;a;r;pf;eve;cmpeq;HOacdefhilorsucy;PYcpyute;;italDifferentialD;leys;aeioron;dilrc;nint;ot;dnilla;terDot;i;rcleDMPTot;inus;lus;imes;ocskwiseContourIntegral;eCurlyDQoubleQuote;uote;lnpuon;e;gitruent;nt;ourIntegral;fr;oduct;nterClockwiseContourIntegral;oss;cr;p;Cap;DJSZacefios;otrahd;cy;cy;cy;grsger;r;hv;ayron;;l;ta;r;afcmriticalADGTcute;o;bleAcute;rave;ilde;ond;ferentialD;\0\0\0\0f;;DEot;qual;bleCDLRUVontourIntegrao\0\0nArrow;eoftARTrrow;ightArrow;engLReftARrrow;ightArrow;ightArrow;ightATrrow;ee;p\0\0rrow;ownArrow;erticalBar;nABLRTarrow;BUar;pArrow;reve;eft\0\0ightVector;eeVector;ector;Bar;ight\0eeVector;ector;Bar;ee;Arrow;ctr;rok;NTacdfglmopqstuxG;Hcuteaiyron;rc;ot;r;raveement;apcr;ty\0\0mallSquare;erySmallSquare;gpon;f;silon;uail;Tilde;librium;cir;m;a;mlipsts;onentialE;cfiosy;r;lled\0\0mallSquare;erySmallSquare;\0\0\0f;All;riertrf;cJTabcdfgorstcy;>mma;d;reve;eiydil;rc;;ot;r;;pf;eaterEFGLSTqual;Less;ullEqual;reater;ess;lantEqual;ilde;cr;;AacfiosuRDcy;ctek;;irc;r;lbertSpace;\0f;izontalLine;ctrok;mpownHumqual;EJOacdfgmnostucy;lig;cy;cuteiyrc;ot;r;rave;apcgr;inaryI;lie\0;egrral;section;isibleCTomma;imes;gpton;f;a;cr;ilde;\0cy;lcfosuiyrc;;r;pf;\0r;rcy;kcy;HJacfoscy;cy;ppa;eydil;;r;pf;cr;JTaceflmostcy;<cmnprute;bda;g;lacetrf;r;aeyron;dil;;fstACDFRTUVarnrgleBracket;row;BRar;ightArrow;eiling;o\0bleBracket;n\0eeVector;ector;Bar;loor;ightAVrrow;ector;ere;AVrrow;ector;iangle;BEar;qual;pDTVownVector;eeVector;ector;Bar;ector;Bar;ightsEFGLSTqualGreater;ullEqual;reater;ess;lantEqual;ilde;r;;eftarrow;idot;npwgLRlreftARrrow;ightArrow;ightArrow;eftarightightf;erLReftArrow;ightArrow;cht;rok;;acefiosup;y;dliumSpace;lintrf;r;nusPlus;pf;c;Jacefostucy;cute;aeyron;dil;;gswativeMTVediumSpace;hicneryThitedGLreaterGreateessLesLine;r;Bnptreak;BreakingSpace;f;;CDEGHLNPRSTVoungruent;pCap;oubleVerticalBar;lqxement;ual;Tilde;ists;reater;EFGLSTqual;ullEqual;reater;ess;lantEqual;ilde;umpownHump;qual;efstTriangle;BEar;qual;s;EGLSTqual;reater;ess;lantEqual;ilde;estedGLreaterGreater;essLess;recedes;ESqual;lantEqual;eiverseElement;ghtTriangle;BEar;qual;quuareSubpset;Equal;erset;Equal;bcpset;Equal;ceeds;ESTqual;lantEqual;ilde;erset;Equal;ilde;EFTqual;ullEqual;ilde;erticalBar;cr;ilde;Eacdfgmoprstuvlig;cuteiyrc;blac;r;raveaeicr;ga;cron;pf;enCurlyDQoubleQuote;uote;;clr;ashidees;mlerBParr;acek;et;arenthesis;acfhilorsrtialD;y;r;i;;usMinus;ipncareplanf;;eiocedes;ESTqual;lantEqual;ilde;me;dpuct;ortion;al;cir;;UfosOT"r;pf;cr;BEacefhiorsuarr;Gcnrute;g;r;tl;aeyron;dil;;;verseEUlqement;uilibrium;pEquilibrium;ro;ghtACDFTUVanrgleBracket;row;BLar;eftArrow;eiling;o\0bleBracket;n\0eeVector;ector;Bar;loor;ere;AVrrow;ector;iangle;BEar;qual;pDTVownVector;eeVector;ector;Bar;ector;Bar;puf;ndImplies;ightarrow;chr;;leDelayed;HOacfhimoqstuCcHcy;y;FTcy;cute;;aeiyron;dil;rc;;r;ortDLRUownArroweftArrowightArrowpArrow;gma;allCircle;pf;\0\0t;are;ISUntersection;ubpset;Equal;erset;Equal;nion;cr;ar;bcmp;set;Equal;cheeds;ESTqual;lantEqual;ilde;Th;;esrset;Equal;etHRSacfhiorsORNADE;Hccy;y;bu;;aeyron;dil;;r;ei\0efore;a;cnkSpace;Space;lde;EFTqual;ullEqual;ilde;pf;ipleDot;ctr;rok;\0\0\0\0\0\0\0cruter;ocir;r\0y;ve;iyrc;blac;r;raveacr;dierBParr;acek;et;arenthesis;on;Plus;gpon;f;ADETadpsrrow;BDar;ownArrow;ownArrow;quilibrium;ee;Arrow;ownerLReftArrow;ightArrow;i;lon;ing;cr;ilde;mlDbcdefosvash;ar;y;ash;l;er;btyar;;icalBLSTar;ine;eparator;ilde;ThinSpace;r;pf;cr;dash;cefosirc;dge;r;pf;cr;fiosr;;pf;cr;AIUacfosucy;cy;cy;cuteiyrc;;r;pf;cr;ml;Hacdefoscy;cute;ayron;;ot;\0oWidta;r;pf;cr;\0\0\0\0\0\0\0cutereve;;Ediuy;;rcte;lig;r;raveepfpsym;ha;apcclr;g;\0\0;adsvnd;;lope;;;elmrsz;esd;a;;;;;;;;t;vb;d;pth;arr;gpon;f;;Eaeiop;cir;;d;s;rox;eingctyr;;mp;eildemlcioninnt;Nabcdefiklnoprsuot;crkcepsong;psilon;rime;im;eq;ee;ed;gerk;tbrk;oy;quo;cmprtaus;eptyv;snoahw;;een;r;gcostuvwaiurc;pdptot;lus;imes;\0\0cup;ar;riangleduown;p;plus;earow;akocnklstozenge;riangle;dlrown;eft;ight;k;\0\0;;4;ck;eo;q=uiv;t;ptwxf;;tomtie;DHUVbdhmptuvLRlr;;;;;DUdu;;;;LRlr;;;;;HLRhlr;;;;;;ox;LRlr;;;;;DUdu;;;;inus;lus;imes;LRlr;;;;;HLRhlr;;;;;;evbarceior;mi;m;el;bh;sub;l;etp;Ee;;q\0\0\0\0\0\0\0\0\0\0cprute;;abcdsnd;rcup;aup;p;ot;;eot;aeiu\0s;on;dilrc;ps;sm;ot;dmnilptyv;t;err;ceiy;ck;mark;r;Ecefms;;elq;e\0\0rrowlreft;ight;RSacd;st;irc;ash;nint;id;cir;ubs;uit\0on;e;q\0\0a;t;;flemxente\0;dot;nfry;o;sr;aorr;ss;cur;bp;e;;e;dot;delprvwarrlr;;\0\0r;c;arr;p;;bcdosrcap;aup;p;ot;r;;alrvrr;m;yevwq\0\0reuee;edge;enearrowlreftightecioninnt;lcty;AHabcdefhijlorstuwzrar;glrsger;eth;h;varow;aayron;;;aogrr;tseq;glmta;ptyv;irsht;;arlraegsvm;osnd;suit;amma;in;;iode;ontimes;ncy;c\0\0rn;op;lptuwlar;f;;empsq;dot;inus;lus;quare;blebarwedgnadhownarrowarpoonlrefighkaro\0\0rn;op;cotry;;l;rok;drot;i;fahraangle;ciy;grarr;DacdefglmnopqrstuxDoocsuteter;aioyron;r;clon;;ot;Drot;;;rsave;dot;;ilsnters;;;dot;apscr;ty;svetp1;;;gs;p;gpon;f;alsr;sl;us;i;lvon;csuviorc\0\0antgltressaeils;st;v;DD;parsl;Daot;rr;cdir;oah;mrlo;cipl;seoctationential\0\0\0\0\0\0\0llingdotsey;male;ilrlig;\0\0g;ig;;lig;lig;fjaltt;ig;ns;of;\0f;ak;v;artint;aocs\0\0;;;;\0;;\0\0;;5;\0;;8;l;wn;cr;Eabcdefgijlnorstv;l;cmpute;ma;d;reve;iyrc;;ot;;lqs;qslan;cdlc;ot;o;l;;es;r;;gmel;cy;;Eaj;;;Eaes;p;prox;q;qim;pf;cir;m;el;;>;cdlqrci;r;ot;Par;uest;adels\0pror;qlqlesienrtneqq;Aabcefkosyrilmrrsfildrcy;;cwir;;ar;irc;alrrts;uitlip;con;r;sewarow;arow;amoprrr;tht;klreftarrow;ightarrow;f;bar;cltr;asrok;bpull;hen\0\0\0\0\0\0cute;iyrc;cxy;clfr;rave;inoinnt;t;fin;ta;lig;aopcgtr;elpinarh;f;ed;;cfotare;in;tie;do;celpal;grerarhk;rod;cgpty;on;f;a;uestcir;n;Edsv;ot;;v;;ilde;\0cy;lcfmosuiyrc;;r;ath;pf;\0r;rcy;kcy;acfghjosppa;v;eydil;;r;reen;cy;cy;pf;cr;ABEHabcdefghjlmnoprstuvartrail;arr;;g;ar;\0\0\0\0\0\0\0\0\0ute;mptyv;rabda;g;dl;;uor;bfhlpst;fs;s;p;l;im;l;;aeil;;s;abrrr;rk;akcek;;es;ldu;;aeuyron;diil;;cqrsa;uo;rduhar;shar;h;;fgqstahlrtrrow;taarpoonduownpeftarrows;ightahsrrow;sarpoonquigarrohreetimes;;qslan;cdgsc;ot;o;r;;es;adegspproot;qgqgtiilrsht;;;E;rdu;l;lk;cy;;achtrorneard;ri;iodot;ust;acheEaes;p;prox;q;qim;abnoptwznrg;r;rglmreftarightapsto;ightparrowlrefight;aflr;;us;imes;st;;efngear;lt;achmtrornear;d;;ri;achiqtquo;r;m;eg;;buo;r;rok;<;cdhilqrci;r;remes;arr;uest;Piar;;efrdushar;har;enrtneqq;DacdefhilnopsuDot;clprret;;ese;sto;dluowefker;oymma;;ash;asuredangler;o;cdnro;acdsir;otus;bd;u;p;dpels;f;ctr;pos;lmtimap;GLRVabcdefghijlmoprstuvwgt;;veltftarrrow;ightarrow;;;vightarrow;Ddash;ash;bcnptlaute;g;;Eiop;d;s;rour;al;s\0pmp;eaeouy\0;on;dil;ng;dot;p;;ash;;Aadqsxrr;rhrk;;oot;uieiar;ist;sr;Eest;qs;qslani;rAaprrr;ar;;sv;d;cy;AEadestr;rr;r;;fqstarrroightarro;qslan;si;ri;eiptf;;inn;Edv;ot;;;i;v;;aorr;astllel;;lint;;ceu;c;eAaitrrr;cw;;ghtarrowri;echimpqu;ceru;ort\0\0arm;e;qsubpbcp;Ees;et;eq;qc;e;Ees;et;eq;qgilrldeianglelreft;eight;e;m;esro;p;DHadgilrsash;arr;p;ash;et;;>nfin;Aetrr;;;r<ie;Atrr;rie;im;Aanrr;rhrk;;oear;\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0csuteiyr;c;abioslac;v;old;lig;crir;;\0\0\0n;ave;bmar;acitrirr;oss;n;aeicr;ga;cdnron;;pf;aelr;rp;;adiosvr;efmr;ofgof;r;lope;;cloashl;idees;as;mlbar;\0\0\0\0\0\0\0\0\0r;ast;lle\0\0m;;y;rcimptnt;od;il;enk;r;imo;v;mane;;tvchfork;aunckk;h;s;abcdemstcir;ir;ou;;nim;wo;ipuntint;f;nd;Eaceinosu;p;u;c;acenspprourlyeaespprox;qq;im;ime;sEasdfpalslar;ine;urf;;trel;cir;;ncsp;fiopsur;pf;rime;cr;aeoteirnionnt;st;eABHabcdefhilmnoprstuxartrail;arar;cdenqrteu;te;imptyv;g;del;;uor;abcfhlpstwp;;fs;;s;l;im;l;;aiil;o;nalabrrrk;akcek;;es;ldu;;aeuyron;diil;;clqsa;dhar;uo;rh;acgl;ipsnart;ilrsht;;aordu;l;;v;gnshtahlrstrrow;taarpoonduowpeftahrrowarpoonightarrows;quigarrohreetimes;g;ingdotseahmra;oust;achemid;abptnrg;r;raflr;;us;imes;apr;gt;olint;arachqquo;r;buo;rhirremes;i;efltri;luhar;;\0\0\0\0\0\0\0cute;qu;Eaceinpsy;\0;on;u;dil;rc;Eas;p;im;olint;i;ot;be;Aacmstxrr;rhr;oti;war;minnut;r;oacoyrp;hycy;;rt\0\0iaragmma;fv;;deglnprot;;q;E;;E;e;lus;arr;araeitlslsetmhp;parsl;dle;;e;s;flptcy;;b;ar;f;adres;uitcsuaup;s;p;s;ubp;eset;e;eset;e;afrarcemtr;tmiararr;fanighteppsilohsbcmnp;Edemnprs;ot;;dot;ult;Ee;;lus;arr;eiut;enq;qeq;qm;bp;;c;acenspprourlyeaespproqg;123;Edehlmnps;ost;ub;;dot;soul;b;arr;ult;Ee;;lus;eiut;enq;qeq;qm;bp;;Aanrr;rhr;owar;lig\0\0\0\0\0\0\0\0\0\0\0\0get;;raeyron;dil;;lrec;r;eiko\0e4fa;svym;cnkaspproimsasrnes;bd;ar;;eps;bcfot;ir;;ork;rime;aipdadempstngle;dlqrowneft;e;ight;eot;inus;lus;b;ime;ezium;chtry;;cy;rok;ioxheadlreftarroightarrowAHabcdfghlmoprstuwrar;cruter\0y;ve;iyrc;abhrlac;airsht;;raverlrlk;ct\0\0rn;erop;ri;alcr;gpon;f;adhlsuownarpoonlrefighi;hlonparrows;cit\0\0rn;erop;ng;ri;cr;dirot;lde;i;famrlangle;ABDacdeflnoprszrar;v;asnrgrt;eknprstappothinhirop;hiugmbpsetneq;q;setneq;q;hretianglelreftighty;ashelr;bear;q;lip;btar;trsubppf;rotrcur;bpnEenEeigzag;cefoprsirc;dibgar;e;q;erp;r;pf;;eatcr;\0\0\0\0\0\0\0trr;Aarr;Aarrais;dptfl;imAarrcqr;ptracefiosucuyte;iyrc;;nr;cy;pf;cr;cmy;lacdefhioswcute;ayron;;ot;ettra;r;cy;grarr;pf;cr;jn;j;'.split("").map(n=>n.charCodeAt(0))),ZD=new Uint16Array("aglq	\x1B\0\0p;os;t;t;uot;".split("").map(n=>n.charCodeAt(0)));var Xh;const XD=new Map([[0,65533],[128,8364],[130,8218],[131,402],[132,8222],[133,8230],[134,8224],[135,8225],[136,710],[137,8240],[138,352],[139,8249],[140,338],[142,381],[145,8216],[146,8217],[147,8220],[148,8221],[149,8226],[150,8211],[151,8212],[152,732],[153,8482],[154,353],[155,8250],[156,339],[158,382],[159,376]]),QD=(Xh=String.fromCodePoint)!==null&&Xh!==void 0?Xh:function(n){let e="";return n>65535&&(n-=65536,e+=String.fromCharCode(n>>>10&1023|55296),n=56320|n&1023),e+=String.fromCharCode(n),e};function WD(n){var e;return n>=55296&&n<=57343||n>1114111?65533:(e=XD.get(n))!==null&&e!==void 0?e:n}var ot;(function(n){n[n.NUM=35]="NUM",n[n.SEMI=59]="SEMI",n[n.EQUALS=61]="EQUALS",n[n.ZERO=48]="ZERO",n[n.NINE=57]="NINE",n[n.LOWER_A=97]="LOWER_A",n[n.LOWER_F=102]="LOWER_F",n[n.LOWER_X=120]="LOWER_X",n[n.LOWER_Z=122]="LOWER_Z",n[n.UPPER_A=65]="UPPER_A",n[n.UPPER_F=70]="UPPER_F",n[n.UPPER_Z=90]="UPPER_Z"})(ot||(ot={}));const e5=32;var Wr;(function(n){n[n.VALUE_LENGTH=49152]="VALUE_LENGTH",n[n.BRANCH_LENGTH=16256]="BRANCH_LENGTH",n[n.JUMP_TABLE=127]="JUMP_TABLE"})(Wr||(Wr={}));function Yp(n){return n>=ot.ZERO&&n<=ot.NINE}function t5(n){return n>=ot.UPPER_A&&n<=ot.UPPER_F||n>=ot.LOWER_A&&n<=ot.LOWER_F}function n5(n){return n>=ot.UPPER_A&&n<=ot.UPPER_Z||n>=ot.LOWER_A&&n<=ot.LOWER_Z||Yp(n)}function r5(n){return n===ot.EQUALS||n5(n)}var ut;(function(n){n[n.EntityStart=0]="EntityStart",n[n.NumericStart=1]="NumericStart",n[n.NumericDecimal=2]="NumericDecimal",n[n.NumericHex=3]="NumericHex",n[n.NamedEntity=4]="NamedEntity"})(ut||(ut={}));var Xr;(function(n){n[n.Legacy=0]="Legacy",n[n.Strict=1]="Strict",n[n.Attribute=2]="Attribute"})(Xr||(Xr={}));class i5{constructor(e,t,r){this.decodeTree=e,this.emitCodePoint=t,this.errors=r,this.state=ut.EntityStart,this.consumed=1,this.result=0,this.treeIndex=0,this.excess=1,this.decodeMode=Xr.Strict}startEntity(e){this.decodeMode=e,this.state=ut.EntityStart,this.result=0,this.treeIndex=0,this.excess=1,this.consumed=1}write(e,t){switch(this.state){case ut.EntityStart:return e.charCodeAt(t)===ot.NUM?(this.state=ut.NumericStart,this.consumed+=1,this.stateNumericStart(e,t+1)):(this.state=ut.NamedEntity,this.stateNamedEntity(e,t));case ut.NumericStart:return this.stateNumericStart(e,t);case ut.NumericDecimal:return this.stateNumericDecimal(e,t);case ut.NumericHex:return this.stateNumericHex(e,t);case ut.NamedEntity:return this.stateNamedEntity(e,t)}}stateNumericStart(e,t){return t>=e.length?-1:(e.charCodeAt(t)|e5)===ot.LOWER_X?(this.state=ut.NumericHex,this.consumed+=1,this.stateNumericHex(e,t+1)):(this.state=ut.NumericDecimal,this.stateNumericDecimal(e,t))}addToNumericResult(e,t,r,i){if(t!==r){const l=r-t;this.result=this.result*Math.pow(i,l)+parseInt(e.substr(t,l),i),this.consumed+=l}}stateNumericHex(e,t){const r=t;for(;t<e.length;){const i=e.charCodeAt(t);if(Yp(i)||t5(i))t+=1;else return this.addToNumericResult(e,r,t,16),this.emitNumericEntity(i,3)}return this.addToNumericResult(e,r,t,16),-1}stateNumericDecimal(e,t){const r=t;for(;t<e.length;){const i=e.charCodeAt(t);if(Yp(i))t+=1;else return this.addToNumericResult(e,r,t,10),this.emitNumericEntity(i,2)}return this.addToNumericResult(e,r,t,10),-1}emitNumericEntity(e,t){var r;if(this.consumed<=t)return(r=this.errors)===null||r===void 0||r.absenceOfDigitsInNumericCharacterReference(this.consumed),0;if(e===ot.SEMI)this.consumed+=1;else if(this.decodeMode===Xr.Strict)return 0;return this.emitCodePoint(WD(this.result),this.consumed),this.errors&&(e!==ot.SEMI&&this.errors.missingSemicolonAfterCharacterReference(),this.errors.validateNumericCharacterReference(this.result)),this.consumed}stateNamedEntity(e,t){const{decodeTree:r}=this;let i=r[this.treeIndex],l=(i&Wr.VALUE_LENGTH)>>14;for(;t<e.length;t++,this.excess++){const o=e.charCodeAt(t);if(this.treeIndex=l5(r,i,this.treeIndex+Math.max(1,l),o),this.treeIndex<0)return this.result===0||this.decodeMode===Xr.Attribute&&(l===0||r5(o))?0:this.emitNotTerminatedNamedEntity();if(i=r[this.treeIndex],l=(i&Wr.VALUE_LENGTH)>>14,l!==0){if(o===ot.SEMI)return this.emitNamedEntityData(this.treeIndex,l,this.consumed+this.excess);this.decodeMode!==Xr.Strict&&(this.result=this.treeIndex,this.consumed+=this.excess,this.excess=0)}}return-1}emitNotTerminatedNamedEntity(){var e;const{result:t,decodeTree:r}=this,i=(r[t]&Wr.VALUE_LENGTH)>>14;return this.emitNamedEntityData(t,i,this.consumed),(e=this.errors)===null||e===void 0||e.missingSemicolonAfterCharacterReference(),this.consumed}emitNamedEntityData(e,t,r){const{decodeTree:i}=this;return this.emitCodePoint(t===1?i[e]&~Wr.VALUE_LENGTH:i[e+1],r),t===3&&this.emitCodePoint(i[e+2],r),r}end(){var e;switch(this.state){case ut.NamedEntity:return this.result!==0&&(this.decodeMode!==Xr.Attribute||this.result===this.treeIndex)?this.emitNotTerminatedNamedEntity():0;case ut.NumericDecimal:return this.emitNumericEntity(0,2);case ut.NumericHex:return this.emitNumericEntity(0,3);case ut.NumericStart:return(e=this.errors)===null||e===void 0||e.absenceOfDigitsInNumericCharacterReference(this.consumed),0;case ut.EntityStart:return 0}}}function rS(n){let e="";const t=new i5(n,r=>e+=QD(r));return function(i,l){let o=0,a=0;for(;(a=i.indexOf("&",a))>=0;){e+=i.slice(o,a),t.startEntity(l);const h=t.write(i,a+1);if(h<0){o=a+t.end();break}o=a+h,a=h===0?o+1:o}const f=e+i.slice(o);return e="",f}}function l5(n,e,t,r){const i=(e&Wr.BRANCH_LENGTH)>>7,l=e&Wr.JUMP_TABLE;if(i===0)return l!==0&&r===l?t:-1;if(l){const f=r-l;return f<0||f>=i?-1:n[t+f]-1}let o=t,a=o+i-1;for(;o<=a;){const f=o+a>>>1,h=n[f];if(h<r)o=f+1;else if(h>r)a=f-1;else return n[f+i]}return-1}const u5=rS(YD);rS(ZD);function iS(n,e=Xr.Legacy){return u5(n,e)}function s5(n){return Object.prototype.toString.call(n)}function H0(n){return s5(n)==="[object String]"}const o5=Object.prototype.hasOwnProperty;function a5(n,e){return o5.call(n,e)}function Xc(n){return Array.prototype.slice.call(arguments,1).forEach(function(t){if(t){if(typeof t!="object")throw new TypeError(t+"must be object");Object.keys(t).forEach(function(r){n[r]=t[r]})}}),n}function lS(n,e,t){return[].concat(n.slice(0,e),t,n.slice(e+1))}function V0(n){return!(n>=55296&&n<=57343||n>=64976&&n<=65007||(n&65535)===65535||(n&65535)===65534||n>=0&&n<=8||n===11||n>=14&&n<=31||n>=127&&n<=159||n>1114111)}function vc(n){if(n>65535){n-=65536;const e=55296+(n>>10),t=56320+(n&1023);return String.fromCharCode(e,t)}return String.fromCharCode(n)}const uS=/\\([!"#$%&'()*+,\-./:;<=>?@[\\\]^_`{|}~])/g,c5=/&([a-z#][a-z0-9]{1,31});/gi,f5=new RegExp(uS.source+"|"+c5.source,"gi"),d5=/^#((?:x[a-f0-9]{1,8}|[0-9]{1,8}))$/i;function h5(n,e){if(e.charCodeAt(0)===35&&d5.test(e)){const r=e[1].toLowerCase()==="x"?parseInt(e.slice(2),16):parseInt(e.slice(1),10);return V0(r)?vc(r):n}const t=iS(n);return t!==n?t:n}function p5(n){return n.indexOf("\\")<0?n:n.replace(uS,"$1")}function xu(n){return n.indexOf("\\")<0&&n.indexOf("&")<0?n:n.replace(f5,function(e,t,r){return t||h5(e,r)})}const m5=/[&<>"]/,g5=/[&<>"]/g,b5={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;"};function y5(n){return b5[n]}function ui(n){return m5.test(n)?n.replace(g5,y5):n}const x5=/[.?*+^$[\]\\(){}|-]/g;function k5(n){return n.replace(x5,"\\$&")}function Be(n){switch(n){case 9:case 32:return!0}return!1}function eo(n){if(n>=8192&&n<=8202)return!0;switch(n){case 9:case 10:case 11:case 12:case 13:case 32:case 160:case 5760:case 8239:case 8287:case 12288:return!0}return!1}function to(n){return q0.test(n)||tS.test(n)}function no(n){switch(n){case 33:case 34:case 35:case 36:case 37:case 38:case 39:case 40:case 41:case 42:case 43:case 44:case 45:case 46:case 47:case 58:case 59:case 60:case 61:case 62:case 63:case 64:case 91:case 92:case 93:case 94:case 95:case 96:case 123:case 124:case 125:case 126:return!0;default:return!1}}function Qc(n){return n=n.trim().replace(/\s+/g," "),"".toLowerCase()===""&&(n=n.replace(//g,"")),n.toLowerCase().toUpperCase()}const S5={mdurl:JD,ucmicro:KD},C5=Object.freeze(Object.defineProperty({__proto__:null,arrayReplaceAt:lS,assign:Xc,escapeHtml:ui,escapeRE:k5,fromCodePoint:vc,has:a5,isMdAsciiPunct:no,isPunctChar:to,isSpace:Be,isString:H0,isValidEntityCode:V0,isWhiteSpace:eo,lib:S5,normalizeReference:Qc,unescapeAll:xu,unescapeMd:p5},Symbol.toStringTag,{value:"Module"}));function v5(n,e,t){let r,i,l,o;const a=n.posMax,f=n.pos;for(n.pos=e+1,r=1;n.pos<a;){if(l=n.src.charCodeAt(n.pos),l===93&&(r--,r===0)){i=!0;break}if(o=n.pos,n.md.inline.skipToken(n),l===91){if(o===n.pos-1)r++;else if(t)return n.pos=f,-1}}let h=-1;return i&&(h=n.pos),n.pos=f,h}function E5(n,e,t){let r,i=e;const l={ok:!1,pos:0,str:""};if(n.charCodeAt(i)===60){for(i++;i<t;){if(r=n.charCodeAt(i),r===10||r===60)return l;if(r===62)return l.pos=i+1,l.str=xu(n.slice(e+1,i)),l.ok=!0,l;if(r===92&&i+1<t){i+=2;continue}i++}return l}let o=0;for(;i<t&&(r=n.charCodeAt(i),!(r===32||r<32||r===127));){if(r===92&&i+1<t){if(n.charCodeAt(i+1)===32)break;i+=2;continue}if(r===40&&(o++,o>32))return l;if(r===41){if(o===0)break;o--}i++}return e===i||o!==0||(l.str=xu(n.slice(e,i)),l.pos=i,l.ok=!0),l}function M5(n,e,t,r){let i,l=e;const o={ok:!1,can_continue:!1,pos:0,str:"",marker:0};if(r)o.str=r.str,o.marker=r.marker;else{if(l>=t)return o;let a=n.charCodeAt(l);if(a!==34&&a!==39&&a!==40)return o;e++,l++,a===40&&(a=41),o.marker=a}for(;l<t;){if(i=n.charCodeAt(l),i===o.marker)return o.pos=l+1,o.str+=xu(n.slice(e,l)),o.ok=!0,o;if(i===40&&o.marker===41)return o;i===92&&l+1<t&&l++,l++}return o.can_continue=!0,o.str+=xu(n.slice(e,l)),o}const A5=Object.freeze(Object.defineProperty({__proto__:null,parseLinkDestination:E5,parseLinkLabel:v5,parseLinkTitle:M5},Symbol.toStringTag,{value:"Module"})),Kn={};Kn.code_inline=function(n,e,t,r,i){const l=n[e];return"<code"+i.renderAttrs(l)+">"+ui(l.content)+"</code>"};Kn.code_block=function(n,e,t,r,i){const l=n[e];return"<pre"+i.renderAttrs(l)+"><code>"+ui(n[e].content)+`</code></pre>
`};Kn.fence=function(n,e,t,r,i){const l=n[e],o=l.info?xu(l.info).trim():"";let a="",f="";if(o){const p=o.split(/(\s+)/g);a=p[0],f=p.slice(2).join("")}let h;if(t.highlight?h=t.highlight(l.content,a,f)||ui(l.content):h=ui(l.content),h.indexOf("<pre")===0)return h+`
`;if(o){const p=l.attrIndex("class"),g=l.attrs?l.attrs.slice():[];p<0?g.push(["class",t.langPrefix+a]):(g[p]=g[p].slice(),g[p][1]+=" "+t.langPrefix+a);const y={attrs:g};return`<pre><code${i.renderAttrs(y)}>${h}</code></pre>
`}return`<pre><code${i.renderAttrs(l)}>${h}</code></pre>
`};Kn.image=function(n,e,t,r,i){const l=n[e];return l.attrs[l.attrIndex("alt")][1]=i.renderInlineAsText(l.children,t,r),i.renderToken(n,e,t)};Kn.hardbreak=function(n,e,t){return t.xhtmlOut?`<br />
`:`<br>
`};Kn.softbreak=function(n,e,t){return t.breaks?t.xhtmlOut?`<br />
`:`<br>
`:`
`};Kn.text=function(n,e){return ui(n[e].content)};Kn.html_block=function(n,e){return n[e].content};Kn.html_inline=function(n,e){return n[e].content};function Cu(){this.rules=Xc({},Kn)}Cu.prototype.renderAttrs=function(e){let t,r,i;if(!e.attrs)return"";for(i="",t=0,r=e.attrs.length;t<r;t++)i+=" "+ui(e.attrs[t][0])+'="'+ui(e.attrs[t][1])+'"';return i};Cu.prototype.renderToken=function(e,t,r){const i=e[t];let l="";if(i.hidden)return"";i.block&&i.nesting!==-1&&t&&e[t-1].hidden&&(l+=`
`),l+=(i.nesting===-1?"</":"<")+i.tag,l+=this.renderAttrs(i),i.nesting===0&&r.xhtmlOut&&(l+=" /");let o=!1;if(i.block&&(o=!0,i.nesting===1&&t+1<e.length)){const a=e[t+1];(a.type==="inline"||a.hidden||a.nesting===-1&&a.tag===i.tag)&&(o=!1)}return l+=o?`>
`:">",l};Cu.prototype.renderInline=function(n,e,t){let r="";const i=this.rules;for(let l=0,o=n.length;l<o;l++){const a=n[l].type;typeof i[a]<"u"?r+=i[a](n,l,e,t,this):r+=this.renderToken(n,l,e)}return r};Cu.prototype.renderInlineAsText=function(n,e,t){let r="";for(let i=0,l=n.length;i<l;i++)switch(n[i].type){case"text":r+=n[i].content;break;case"image":r+=this.renderInlineAsText(n[i].children,e,t);break;case"html_inline":case"html_block":r+=n[i].content;break;case"softbreak":case"hardbreak":r+=`
`;break}return r};Cu.prototype.render=function(n,e,t){let r="";const i=this.rules;for(let l=0,o=n.length;l<o;l++){const a=n[l].type;a==="inline"?r+=this.renderInline(n[l].children,e,t):typeof i[a]<"u"?r+=i[a](n,l,e,t,this):r+=this.renderToken(n,l,e,t)}return r};function Pt(){this.__rules__=[],this.__cache__=null}Pt.prototype.__find__=function(n){for(let e=0;e<this.__rules__.length;e++)if(this.__rules__[e].name===n)return e;return-1};Pt.prototype.__compile__=function(){const n=this,e=[""];n.__rules__.forEach(function(t){t.enabled&&t.alt.forEach(function(r){e.indexOf(r)<0&&e.push(r)})}),n.__cache__={},e.forEach(function(t){n.__cache__[t]=[],n.__rules__.forEach(function(r){r.enabled&&(t&&r.alt.indexOf(t)<0||n.__cache__[t].push(r.fn))})})};Pt.prototype.at=function(n,e,t){const r=this.__find__(n),i=t||{};if(r===-1)throw new Error("Parser rule not found: "+n);this.__rules__[r].fn=e,this.__rules__[r].alt=i.alt||[],this.__cache__=null};Pt.prototype.before=function(n,e,t,r){const i=this.__find__(n),l=r||{};if(i===-1)throw new Error("Parser rule not found: "+n);this.__rules__.splice(i,0,{name:e,enabled:!0,fn:t,alt:l.alt||[]}),this.__cache__=null};Pt.prototype.after=function(n,e,t,r){const i=this.__find__(n),l=r||{};if(i===-1)throw new Error("Parser rule not found: "+n);this.__rules__.splice(i+1,0,{name:e,enabled:!0,fn:t,alt:l.alt||[]}),this.__cache__=null};Pt.prototype.push=function(n,e,t){const r=t||{};this.__rules__.push({name:n,enabled:!0,fn:e,alt:r.alt||[]}),this.__cache__=null};Pt.prototype.enable=function(n,e){Array.isArray(n)||(n=[n]);const t=[];return n.forEach(function(r){const i=this.__find__(r);if(i<0){if(e)return;throw new Error("Rules manager: invalid rule name "+r)}this.__rules__[i].enabled=!0,t.push(r)},this),this.__cache__=null,t};Pt.prototype.enableOnly=function(n,e){Array.isArray(n)||(n=[n]),this.__rules__.forEach(function(t){t.enabled=!1}),this.enable(n,e)};Pt.prototype.disable=function(n,e){Array.isArray(n)||(n=[n]);const t=[];return n.forEach(function(r){const i=this.__find__(r);if(i<0){if(e)return;throw new Error("Rules manager: invalid rule name "+r)}this.__rules__[i].enabled=!1,t.push(r)},this),this.__cache__=null,t};Pt.prototype.getRules=function(n){return this.__cache__===null&&this.__compile__(),this.__cache__[n]||[]};function Rn(n,e,t){this.type=n,this.tag=e,this.attrs=null,this.map=null,this.nesting=t,this.level=0,this.children=null,this.content="",this.markup="",this.info="",this.meta=null,this.block=!1,this.hidden=!1}Rn.prototype.attrIndex=function(e){if(!this.attrs)return-1;const t=this.attrs;for(let r=0,i=t.length;r<i;r++)if(t[r][0]===e)return r;return-1};Rn.prototype.attrPush=function(e){this.attrs?this.attrs.push(e):this.attrs=[e]};Rn.prototype.attrSet=function(e,t){const r=this.attrIndex(e),i=[e,t];r<0?this.attrPush(i):this.attrs[r]=i};Rn.prototype.attrGet=function(e){const t=this.attrIndex(e);let r=null;return t>=0&&(r=this.attrs[t][1]),r};Rn.prototype.attrJoin=function(e,t){const r=this.attrIndex(e);r<0?this.attrPush([e,t]):this.attrs[r][1]=this.attrs[r][1]+" "+t};function sS(n,e,t){this.src=n,this.env=t,this.tokens=[],this.inlineMode=!1,this.md=e}sS.prototype.Token=Rn;const T5=/\r\n?|\n/g,D5=/\0/g;function w5(n){let e;e=n.src.replace(T5,`
`),e=e.replace(D5,""),n.src=e}function O5(n){let e;n.inlineMode?(e=new n.Token("inline","",0),e.content=n.src,e.map=[0,1],e.children=[],n.tokens.push(e)):n.md.block.parse(n.src,n.md,n.env,n.tokens)}function _5(n){const e=n.tokens;for(let t=0,r=e.length;t<r;t++){const i=e[t];i.type==="inline"&&n.md.inline.parse(i.content,n.md,n.env,i.children)}}function N5(n){return/^<a[>\s]/i.test(n)}function R5(n){return/^<\/a\s*>/i.test(n)}function z5(n){const e=n.tokens;if(n.md.options.linkify)for(let t=0,r=e.length;t<r;t++){if(e[t].type!=="inline"||!n.md.linkify.pretest(e[t].content))continue;let i=e[t].children,l=0;for(let o=i.length-1;o>=0;o--){const a=i[o];if(a.type==="link_close"){for(o--;i[o].level!==a.level&&i[o].type!=="link_open";)o--;continue}if(a.type==="html_inline"&&(N5(a.content)&&l>0&&l--,R5(a.content)&&l++),!(l>0)&&a.type==="text"&&n.md.linkify.test(a.content)){const f=a.content;let h=n.md.linkify.match(f);const p=[];let g=a.level,y=0;h.length>0&&h[0].index===0&&o>0&&i[o-1].type==="text_special"&&(h=h.slice(1));for(let x=0;x<h.length;x++){const k=h[x].url,C=n.md.normalizeLink(k);if(!n.md.validateLink(C))continue;let E=h[x].text;h[x].schema?h[x].schema==="mailto:"&&!/^mailto:/i.test(E)?E=n.md.normalizeLinkText("mailto:"+E).replace(/^mailto:/,""):E=n.md.normalizeLinkText(E):E=n.md.normalizeLinkText("http://"+E).replace(/^http:\/\//,"");const A=h[x].index;if(A>y){const L=new n.Token("text","",0);L.content=f.slice(y,A),L.level=g,p.push(L)}const N=new n.Token("link_open","a",1);N.attrs=[["href",C]],N.level=g++,N.markup="linkify",N.info="auto",p.push(N);const B=new n.Token("text","",0);B.content=E,B.level=g,p.push(B);const H=new n.Token("link_close","a",-1);H.level=--g,H.markup="linkify",H.info="auto",p.push(H),y=h[x].lastIndex}if(y<f.length){const x=new n.Token("text","",0);x.content=f.slice(y),x.level=g,p.push(x)}e[t].children=i=lS(i,o,p)}}}}const oS=/\+-|\.\.|\?\?\?\?|!!!!|,,|--/,B5=/\((c|tm|r)\)/i,$5=/\((c|tm|r)\)/ig,F5={c:"",r:"",tm:""};function L5(n,e){return F5[e.toLowerCase()]}function I5(n){let e=0;for(let t=n.length-1;t>=0;t--){const r=n[t];r.type==="text"&&!e&&(r.content=r.content.replace($5,L5)),r.type==="link_open"&&r.info==="auto"&&e--,r.type==="link_close"&&r.info==="auto"&&e++}}function q5(n){let e=0;for(let t=n.length-1;t>=0;t--){const r=n[t];r.type==="text"&&!e&&oS.test(r.content)&&(r.content=r.content.replace(/\+-/g,"").replace(/\.{2,}/g,"").replace(/([?!])/g,"$1..").replace(/([?!]){4,}/g,"$1$1$1").replace(/,{2,}/g,",").replace(/(^|[^-])---(?=[^-]|$)/mg,"$1").replace(/(^|\s)--(?=\s|$)/mg,"$1").replace(/(^|[^-\s])--(?=[^-\s]|$)/mg,"$1")),r.type==="link_open"&&r.info==="auto"&&e--,r.type==="link_close"&&r.info==="auto"&&e++}}function H5(n){let e;if(n.md.options.typographer)for(e=n.tokens.length-1;e>=0;e--)n.tokens[e].type==="inline"&&(B5.test(n.tokens[e].content)&&I5(n.tokens[e].children),oS.test(n.tokens[e].content)&&q5(n.tokens[e].children))}const V5=/['"]/,V2=/['"]/g,U2="";function ja(n,e,t){return n.slice(0,e)+t+n.slice(e+1)}function U5(n,e){let t;const r=[];for(let i=0;i<n.length;i++){const l=n[i],o=n[i].level;for(t=r.length-1;t>=0&&!(r[t].level<=o);t--);if(r.length=t+1,l.type!=="text")continue;let a=l.content,f=0,h=a.length;e:for(;f<h;){V2.lastIndex=f;const p=V2.exec(a);if(!p)break;let g=!0,y=!0;f=p.index+1;const x=p[0]==="'";let k=32;if(p.index-1>=0)k=a.charCodeAt(p.index-1);else for(t=i-1;t>=0&&!(n[t].type==="softbreak"||n[t].type==="hardbreak");t--)if(n[t].content){k=n[t].content.charCodeAt(n[t].content.length-1);break}let C=32;if(f<h)C=a.charCodeAt(f);else for(t=i+1;t<n.length&&!(n[t].type==="softbreak"||n[t].type==="hardbreak");t++)if(n[t].content){C=n[t].content.charCodeAt(0);break}const E=no(k)||to(String.fromCharCode(k)),A=no(C)||to(String.fromCharCode(C)),N=eo(k),B=eo(C);if(B?g=!1:A&&(N||E||(g=!1)),N?y=!1:E&&(B||A||(y=!1)),C===34&&p[0]==='"'&&k>=48&&k<=57&&(y=g=!1),g&&y&&(g=E,y=A),!g&&!y){x&&(l.content=ja(l.content,p.index,U2));continue}if(y)for(t=r.length-1;t>=0;t--){let H=r[t];if(r[t].level<o)break;if(H.single===x&&r[t].level===o){H=r[t];let L,U;x?(L=e.md.options.quotes[2],U=e.md.options.quotes[3]):(L=e.md.options.quotes[0],U=e.md.options.quotes[1]),l.content=ja(l.content,p.index,U),n[H.token].content=ja(n[H.token].content,H.pos,L),f+=U.length-1,H.token===i&&(f+=L.length-1),a=l.content,h=a.length,r.length=t;continue e}}g?r.push({token:i,pos:p.index,single:x,level:o}):y&&x&&(l.content=ja(l.content,p.index,U2))}}}function j5(n){if(n.md.options.typographer)for(let e=n.tokens.length-1;e>=0;e--)n.tokens[e].type!=="inline"||!V5.test(n.tokens[e].content)||U5(n.tokens[e].children,n)}function P5(n){let e,t;const r=n.tokens,i=r.length;for(let l=0;l<i;l++){if(r[l].type!=="inline")continue;const o=r[l].children,a=o.length;for(e=0;e<a;e++)o[e].type==="text_special"&&(o[e].type="text");for(e=t=0;e<a;e++)o[e].type==="text"&&e+1<a&&o[e+1].type==="text"?o[e+1].content=o[e].content+o[e+1].content:(e!==t&&(o[t]=o[e]),t++);e!==t&&(o.length=t)}}const Qh=[["normalize",w5],["block",O5],["inline",_5],["linkify",z5],["replacements",H5],["smartquotes",j5],["text_join",P5]];function U0(){this.ruler=new Pt;for(let n=0;n<Qh.length;n++)this.ruler.push(Qh[n][0],Qh[n][1])}U0.prototype.process=function(n){const e=this.ruler.getRules("");for(let t=0,r=e.length;t<r;t++)e[t](n)};U0.prototype.State=sS;function Yn(n,e,t,r){this.src=n,this.md=e,this.env=t,this.tokens=r,this.bMarks=[],this.eMarks=[],this.tShift=[],this.sCount=[],this.bsCount=[],this.blkIndent=0,this.line=0,this.lineMax=0,this.tight=!1,this.ddIndent=-1,this.listIndent=-1,this.parentType="root",this.level=0;const i=this.src;for(let l=0,o=0,a=0,f=0,h=i.length,p=!1;o<h;o++){const g=i.charCodeAt(o);if(!p)if(Be(g)){a++,g===9?f+=4-f%4:f++;continue}else p=!0;(g===10||o===h-1)&&(g!==10&&o++,this.bMarks.push(l),this.eMarks.push(o),this.tShift.push(a),this.sCount.push(f),this.bsCount.push(0),p=!1,a=0,f=0,l=o+1)}this.bMarks.push(i.length),this.eMarks.push(i.length),this.tShift.push(0),this.sCount.push(0),this.bsCount.push(0),this.lineMax=this.bMarks.length-1}Yn.prototype.push=function(n,e,t){const r=new Rn(n,e,t);return r.block=!0,t<0&&this.level--,r.level=this.level,t>0&&this.level++,this.tokens.push(r),r};Yn.prototype.isEmpty=function(e){return this.bMarks[e]+this.tShift[e]>=this.eMarks[e]};Yn.prototype.skipEmptyLines=function(e){for(let t=this.lineMax;e<t&&!(this.bMarks[e]+this.tShift[e]<this.eMarks[e]);e++);return e};Yn.prototype.skipSpaces=function(e){for(let t=this.src.length;e<t;e++){const r=this.src.charCodeAt(e);if(!Be(r))break}return e};Yn.prototype.skipSpacesBack=function(e,t){if(e<=t)return e;for(;e>t;)if(!Be(this.src.charCodeAt(--e)))return e+1;return e};Yn.prototype.skipChars=function(e,t){for(let r=this.src.length;e<r&&this.src.charCodeAt(e)===t;e++);return e};Yn.prototype.skipCharsBack=function(e,t,r){if(e<=r)return e;for(;e>r;)if(t!==this.src.charCodeAt(--e))return e+1;return e};Yn.prototype.getLines=function(e,t,r,i){if(e>=t)return"";const l=new Array(t-e);for(let o=0,a=e;a<t;a++,o++){let f=0;const h=this.bMarks[a];let p=h,g;for(a+1<t||i?g=this.eMarks[a]+1:g=this.eMarks[a];p<g&&f<r;){const y=this.src.charCodeAt(p);if(Be(y))y===9?f+=4-(f+this.bsCount[a])%4:f++;else if(p-h<this.tShift[a])f++;else break;p++}f>r?l[o]=new Array(f-r+1).join(" ")+this.src.slice(p,g):l[o]=this.src.slice(p,g)}return l.join("")};Yn.prototype.Token=Rn;const J5=65536;function Wh(n,e){const t=n.bMarks[e]+n.tShift[e],r=n.eMarks[e];return n.src.slice(t,r)}function j2(n){const e=[],t=n.length;let r=0,i=n.charCodeAt(r),l=!1,o=0,a="";for(;r<t;)i===124&&(l?(a+=n.substring(o,r-1),o=r):(e.push(a+n.substring(o,r)),a="",o=r+1)),l=i===92,r++,i=n.charCodeAt(r);return e.push(a+n.substring(o)),e}function G5(n,e,t,r){if(e+2>t)return!1;let i=e+1;if(n.sCount[i]<n.blkIndent||n.sCount[i]-n.blkIndent>=4)return!1;let l=n.bMarks[i]+n.tShift[i];if(l>=n.eMarks[i])return!1;const o=n.src.charCodeAt(l++);if(o!==124&&o!==45&&o!==58||l>=n.eMarks[i])return!1;const a=n.src.charCodeAt(l++);if(a!==124&&a!==45&&a!==58&&!Be(a)||o===45&&Be(a))return!1;for(;l<n.eMarks[i];){const H=n.src.charCodeAt(l);if(H!==124&&H!==45&&H!==58&&!Be(H))return!1;l++}let f=Wh(n,e+1),h=f.split("|");const p=[];for(let H=0;H<h.length;H++){const L=h[H].trim();if(!L){if(H===0||H===h.length-1)continue;return!1}if(!/^:?-+:?$/.test(L))return!1;L.charCodeAt(L.length-1)===58?p.push(L.charCodeAt(0)===58?"center":"right"):L.charCodeAt(0)===58?p.push("left"):p.push("")}if(f=Wh(n,e).trim(),f.indexOf("|")===-1||n.sCount[e]-n.blkIndent>=4)return!1;h=j2(f),h.length&&h[0]===""&&h.shift(),h.length&&h[h.length-1]===""&&h.pop();const g=h.length;if(g===0||g!==p.length)return!1;if(r)return!0;const y=n.parentType;n.parentType="table";const x=n.md.block.ruler.getRules("blockquote"),k=n.push("table_open","table",1),C=[e,0];k.map=C;const E=n.push("thead_open","thead",1);E.map=[e,e+1];const A=n.push("tr_open","tr",1);A.map=[e,e+1];for(let H=0;H<h.length;H++){const L=n.push("th_open","th",1);p[H]&&(L.attrs=[["style","text-align:"+p[H]]]);const U=n.push("inline","",0);U.content=h[H].trim(),U.children=[],n.push("th_close","th",-1)}n.push("tr_close","tr",-1),n.push("thead_close","thead",-1);let N,B=0;for(i=e+2;i<t&&!(n.sCount[i]<n.blkIndent);i++){let H=!1;for(let U=0,Q=x.length;U<Q;U++)if(x[U](n,i,t,!0)){H=!0;break}if(H||(f=Wh(n,i).trim(),!f)||n.sCount[i]-n.blkIndent>=4||(h=j2(f),h.length&&h[0]===""&&h.shift(),h.length&&h[h.length-1]===""&&h.pop(),B+=g-h.length,B>J5))break;if(i===e+2){const U=n.push("tbody_open","tbody",1);U.map=N=[e+2,0]}const L=n.push("tr_open","tr",1);L.map=[i,i+1];for(let U=0;U<g;U++){const Q=n.push("td_open","td",1);p[U]&&(Q.attrs=[["style","text-align:"+p[U]]]);const ne=n.push("inline","",0);ne.content=h[U]?h[U].trim():"",ne.children=[],n.push("td_close","td",-1)}n.push("tr_close","tr",-1)}return N&&(n.push("tbody_close","tbody",-1),N[1]=i),n.push("table_close","table",-1),C[1]=i,n.parentType=y,n.line=i,!0}function K5(n,e,t){if(n.sCount[e]-n.blkIndent<4)return!1;let r=e+1,i=r;for(;r<t;){if(n.isEmpty(r)){r++;continue}if(n.sCount[r]-n.blkIndent>=4){r++,i=r;continue}break}n.line=i;const l=n.push("code_block","code",0);return l.content=n.getLines(e,i,4+n.blkIndent,!1)+`
`,l.map=[e,n.line],!0}function Y5(n,e,t,r){let i=n.bMarks[e]+n.tShift[e],l=n.eMarks[e];if(n.sCount[e]-n.blkIndent>=4||i+3>l)return!1;const o=n.src.charCodeAt(i);if(o!==126&&o!==96)return!1;let a=i;i=n.skipChars(i,o);let f=i-a;if(f<3)return!1;const h=n.src.slice(a,i),p=n.src.slice(i,l);if(o===96&&p.indexOf(String.fromCharCode(o))>=0)return!1;if(r)return!0;let g=e,y=!1;for(;g++,!(g>=t||(i=a=n.bMarks[g]+n.tShift[g],l=n.eMarks[g],i<l&&n.sCount[g]<n.blkIndent));)if(n.src.charCodeAt(i)===o&&!(n.sCount[g]-n.blkIndent>=4)&&(i=n.skipChars(i,o),!(i-a<f)&&(i=n.skipSpaces(i),!(i<l)))){y=!0;break}f=n.sCount[e],n.line=g+(y?1:0);const x=n.push("fence","code",0);return x.info=p,x.content=n.getLines(e+1,g,f,!0),x.markup=h,x.map=[e,n.line],!0}function Z5(n,e,t,r){let i=n.bMarks[e]+n.tShift[e],l=n.eMarks[e];const o=n.lineMax;if(n.sCount[e]-n.blkIndent>=4||n.src.charCodeAt(i)!==62)return!1;if(r)return!0;const a=[],f=[],h=[],p=[],g=n.md.block.ruler.getRules("blockquote"),y=n.parentType;n.parentType="blockquote";let x=!1,k;for(k=e;k<t;k++){const B=n.sCount[k]<n.blkIndent;if(i=n.bMarks[k]+n.tShift[k],l=n.eMarks[k],i>=l)break;if(n.src.charCodeAt(i++)===62&&!B){let L=n.sCount[k]+1,U,Q;n.src.charCodeAt(i)===32?(i++,L++,Q=!1,U=!0):n.src.charCodeAt(i)===9?(U=!0,(n.bsCount[k]+L)%4===3?(i++,L++,Q=!1):Q=!0):U=!1;let ne=L;for(a.push(n.bMarks[k]),n.bMarks[k]=i;i<l;){const ee=n.src.charCodeAt(i);if(Be(ee))ee===9?ne+=4-(ne+n.bsCount[k]+(Q?1:0))%4:ne++;else break;i++}x=i>=l,f.push(n.bsCount[k]),n.bsCount[k]=n.sCount[k]+1+(U?1:0),h.push(n.sCount[k]),n.sCount[k]=ne-L,p.push(n.tShift[k]),n.tShift[k]=i-n.bMarks[k];continue}if(x)break;let H=!1;for(let L=0,U=g.length;L<U;L++)if(g[L](n,k,t,!0)){H=!0;break}if(H){n.lineMax=k,n.blkIndent!==0&&(a.push(n.bMarks[k]),f.push(n.bsCount[k]),p.push(n.tShift[k]),h.push(n.sCount[k]),n.sCount[k]-=n.blkIndent);break}a.push(n.bMarks[k]),f.push(n.bsCount[k]),p.push(n.tShift[k]),h.push(n.sCount[k]),n.sCount[k]=-1}const C=n.blkIndent;n.blkIndent=0;const E=n.push("blockquote_open","blockquote",1);E.markup=">";const A=[e,0];E.map=A,n.md.block.tokenize(n,e,k);const N=n.push("blockquote_close","blockquote",-1);N.markup=">",n.lineMax=o,n.parentType=y,A[1]=n.line;for(let B=0;B<p.length;B++)n.bMarks[B+e]=a[B],n.tShift[B+e]=p[B],n.sCount[B+e]=h[B],n.bsCount[B+e]=f[B];return n.blkIndent=C,!0}function X5(n,e,t,r){const i=n.eMarks[e];if(n.sCount[e]-n.blkIndent>=4)return!1;let l=n.bMarks[e]+n.tShift[e];const o=n.src.charCodeAt(l++);if(o!==42&&o!==45&&o!==95)return!1;let a=1;for(;l<i;){const h=n.src.charCodeAt(l++);if(h!==o&&!Be(h))return!1;h===o&&a++}if(a<3)return!1;if(r)return!0;n.line=e+1;const f=n.push("hr","hr",0);return f.map=[e,n.line],f.markup=Array(a+1).join(String.fromCharCode(o)),!0}function P2(n,e){const t=n.eMarks[e];let r=n.bMarks[e]+n.tShift[e];const i=n.src.charCodeAt(r++);if(i!==42&&i!==45&&i!==43)return-1;if(r<t){const l=n.src.charCodeAt(r);if(!Be(l))return-1}return r}function J2(n,e){const t=n.bMarks[e]+n.tShift[e],r=n.eMarks[e];let i=t;if(i+1>=r)return-1;let l=n.src.charCodeAt(i++);if(l<48||l>57)return-1;for(;;){if(i>=r)return-1;if(l=n.src.charCodeAt(i++),l>=48&&l<=57){if(i-t>=10)return-1;continue}if(l===41||l===46)break;return-1}return i<r&&(l=n.src.charCodeAt(i),!Be(l))?-1:i}function Q5(n,e){const t=n.level+2;for(let r=e+2,i=n.tokens.length-2;r<i;r++)n.tokens[r].level===t&&n.tokens[r].type==="paragraph_open"&&(n.tokens[r+2].hidden=!0,n.tokens[r].hidden=!0,r+=2)}function W5(n,e,t,r){let i,l,o,a,f=e,h=!0;if(n.sCount[f]-n.blkIndent>=4||n.listIndent>=0&&n.sCount[f]-n.listIndent>=4&&n.sCount[f]<n.blkIndent)return!1;let p=!1;r&&n.parentType==="paragraph"&&n.sCount[f]>=n.blkIndent&&(p=!0);let g,y,x;if((x=J2(n,f))>=0){if(g=!0,o=n.bMarks[f]+n.tShift[f],y=Number(n.src.slice(o,x-1)),p&&y!==1)return!1}else if((x=P2(n,f))>=0)g=!1;else return!1;if(p&&n.skipSpaces(x)>=n.eMarks[f])return!1;if(r)return!0;const k=n.src.charCodeAt(x-1),C=n.tokens.length;g?(a=n.push("ordered_list_open","ol",1),y!==1&&(a.attrs=[["start",y]])):a=n.push("bullet_list_open","ul",1);const E=[f,0];a.map=E,a.markup=String.fromCharCode(k);let A=!1;const N=n.md.block.ruler.getRules("list"),B=n.parentType;for(n.parentType="list";f<t;){l=x,i=n.eMarks[f];const H=n.sCount[f]+x-(n.bMarks[f]+n.tShift[f]);let L=H;for(;l<i;){const Ie=n.src.charCodeAt(l);if(Ie===9)L+=4-(L+n.bsCount[f])%4;else if(Ie===32)L++;else break;l++}const U=l;let Q;U>=i?Q=1:Q=L-H,Q>4&&(Q=1);const ne=H+Q;a=n.push("list_item_open","li",1),a.markup=String.fromCharCode(k);const ee=[f,0];a.map=ee,g&&(a.info=n.src.slice(o,x-1));const je=n.tight,tt=n.tShift[f],Ge=n.sCount[f],Xn=n.listIndent;if(n.listIndent=n.blkIndent,n.blkIndent=ne,n.tight=!0,n.tShift[f]=U-n.bMarks[f],n.sCount[f]=L,U>=i&&n.isEmpty(f+1)?n.line=Math.min(n.line+2,t):n.md.block.tokenize(n,f,t,!0),(!n.tight||A)&&(h=!1),A=n.line-f>1&&n.isEmpty(n.line-1),n.blkIndent=n.listIndent,n.listIndent=Xn,n.tShift[f]=tt,n.sCount[f]=Ge,n.tight=je,a=n.push("list_item_close","li",-1),a.markup=String.fromCharCode(k),f=n.line,ee[1]=f,f>=t||n.sCount[f]<n.blkIndent||n.sCount[f]-n.blkIndent>=4)break;let Bn=!1;for(let Ie=0,$=N.length;Ie<$;Ie++)if(N[Ie](n,f,t,!0)){Bn=!0;break}if(Bn)break;if(g){if(x=J2(n,f),x<0)break;o=n.bMarks[f]+n.tShift[f]}else if(x=P2(n,f),x<0)break;if(k!==n.src.charCodeAt(x-1))break}return g?a=n.push("ordered_list_close","ol",-1):a=n.push("bullet_list_close","ul",-1),a.markup=String.fromCharCode(k),E[1]=f,n.line=f,n.parentType=B,h&&Q5(n,C),!0}function ew(n,e,t,r){let i=n.bMarks[e]+n.tShift[e],l=n.eMarks[e],o=e+1;if(n.sCount[e]-n.blkIndent>=4||n.src.charCodeAt(i)!==91)return!1;function a(N){const B=n.lineMax;if(N>=B||n.isEmpty(N))return null;let H=!1;if(n.sCount[N]-n.blkIndent>3&&(H=!0),n.sCount[N]<0&&(H=!0),!H){const Q=n.md.block.ruler.getRules("reference"),ne=n.parentType;n.parentType="reference";let ee=!1;for(let je=0,tt=Q.length;je<tt;je++)if(Q[je](n,N,B,!0)){ee=!0;break}if(n.parentType=ne,ee)return null}const L=n.bMarks[N]+n.tShift[N],U=n.eMarks[N];return n.src.slice(L,U+1)}let f=n.src.slice(i,l+1);l=f.length;let h=-1;for(i=1;i<l;i++){const N=f.charCodeAt(i);if(N===91)return!1;if(N===93){h=i;break}else if(N===10){const B=a(o);B!==null&&(f+=B,l=f.length,o++)}else if(N===92&&(i++,i<l&&f.charCodeAt(i)===10)){const B=a(o);B!==null&&(f+=B,l=f.length,o++)}}if(h<0||f.charCodeAt(h+1)!==58)return!1;for(i=h+2;i<l;i++){const N=f.charCodeAt(i);if(N===10){const B=a(o);B!==null&&(f+=B,l=f.length,o++)}else if(!Be(N))break}const p=n.md.helpers.parseLinkDestination(f,i,l);if(!p.ok)return!1;const g=n.md.normalizeLink(p.str);if(!n.md.validateLink(g))return!1;i=p.pos;const y=i,x=o,k=i;for(;i<l;i++){const N=f.charCodeAt(i);if(N===10){const B=a(o);B!==null&&(f+=B,l=f.length,o++)}else if(!Be(N))break}let C=n.md.helpers.parseLinkTitle(f,i,l);for(;C.can_continue;){const N=a(o);if(N===null)break;f+=N,i=l,l=f.length,o++,C=n.md.helpers.parseLinkTitle(f,i,l,C)}let E;for(i<l&&k!==i&&C.ok?(E=C.str,i=C.pos):(E="",i=y,o=x);i<l;){const N=f.charCodeAt(i);if(!Be(N))break;i++}if(i<l&&f.charCodeAt(i)!==10&&E)for(E="",i=y,o=x;i<l;){const N=f.charCodeAt(i);if(!Be(N))break;i++}if(i<l&&f.charCodeAt(i)!==10)return!1;const A=Qc(f.slice(1,h));return A?(r||(typeof n.env.references>"u"&&(n.env.references={}),typeof n.env.references[A]>"u"&&(n.env.references[A]={title:E,href:g}),n.line=o),!0):!1}const tw=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],nw="[a-zA-Z_:][a-zA-Z0-9:._-]*",rw="[^\"'=<>`\\x00-\\x20]+",iw="'[^']*'",lw='"[^"]*"',uw="(?:"+rw+"|"+iw+"|"+lw+")",sw="(?:\\s+"+nw+"(?:\\s*=\\s*"+uw+")?)",aS="<[A-Za-z][A-Za-z0-9\\-]*"+sw+"*\\s*\\/?>",cS="<\\/[A-Za-z][A-Za-z0-9\\-]*\\s*>",ow="<!---?>|<!--(?:[^-]|-[^-]|--[^>])*-->",aw="<[?][\\s\\S]*?[?]>",cw="<![A-Za-z][^>]*>",fw="<!\\[CDATA\\[[\\s\\S]*?\\]\\]>",dw=new RegExp("^(?:"+aS+"|"+cS+"|"+ow+"|"+aw+"|"+cw+"|"+fw+")"),hw=new RegExp("^(?:"+aS+"|"+cS+")"),Xl=[[/^<(script|pre|style|textarea)(?=(\s|>|$))/i,/<\/(script|pre|style|textarea)>/i,!0],[/^<!--/,/-->/,!0],[/^<\?/,/\?>/,!0],[/^<![A-Z]/,/>/,!0],[/^<!\[CDATA\[/,/\]\]>/,!0],[new RegExp("^</?("+tw.join("|")+")(?=(\\s|/?>|$))","i"),/^$/,!0],[new RegExp(hw.source+"\\s*$"),/^$/,!1]];function pw(n,e,t,r){let i=n.bMarks[e]+n.tShift[e],l=n.eMarks[e];if(n.sCount[e]-n.blkIndent>=4||!n.md.options.html||n.src.charCodeAt(i)!==60)return!1;let o=n.src.slice(i,l),a=0;for(;a<Xl.length&&!Xl[a][0].test(o);a++);if(a===Xl.length)return!1;if(r)return Xl[a][2];let f=e+1;if(!Xl[a][1].test(o)){for(;f<t&&!(n.sCount[f]<n.blkIndent);f++)if(i=n.bMarks[f]+n.tShift[f],l=n.eMarks[f],o=n.src.slice(i,l),Xl[a][1].test(o)){o.length!==0&&f++;break}}n.line=f;const h=n.push("html_block","",0);return h.map=[e,f],h.content=n.getLines(e,f,n.blkIndent,!0),!0}function mw(n,e,t,r){let i=n.bMarks[e]+n.tShift[e],l=n.eMarks[e];if(n.sCount[e]-n.blkIndent>=4)return!1;let o=n.src.charCodeAt(i);if(o!==35||i>=l)return!1;let a=1;for(o=n.src.charCodeAt(++i);o===35&&i<l&&a<=6;)a++,o=n.src.charCodeAt(++i);if(a>6||i<l&&!Be(o))return!1;if(r)return!0;l=n.skipSpacesBack(l,i);const f=n.skipCharsBack(l,35,i);f>i&&Be(n.src.charCodeAt(f-1))&&(l=f),n.line=e+1;const h=n.push("heading_open","h"+String(a),1);h.markup="########".slice(0,a),h.map=[e,n.line];const p=n.push("inline","",0);p.content=n.src.slice(i,l).trim(),p.map=[e,n.line],p.children=[];const g=n.push("heading_close","h"+String(a),-1);return g.markup="########".slice(0,a),!0}function gw(n,e,t){const r=n.md.block.ruler.getRules("paragraph");if(n.sCount[e]-n.blkIndent>=4)return!1;const i=n.parentType;n.parentType="paragraph";let l=0,o,a=e+1;for(;a<t&&!n.isEmpty(a);a++){if(n.sCount[a]-n.blkIndent>3)continue;if(n.sCount[a]>=n.blkIndent){let x=n.bMarks[a]+n.tShift[a];const k=n.eMarks[a];if(x<k&&(o=n.src.charCodeAt(x),(o===45||o===61)&&(x=n.skipChars(x,o),x=n.skipSpaces(x),x>=k))){l=o===61?1:2;break}}if(n.sCount[a]<0)continue;let y=!1;for(let x=0,k=r.length;x<k;x++)if(r[x](n,a,t,!0)){y=!0;break}if(y)break}if(!l)return!1;const f=n.getLines(e,a,n.blkIndent,!1).trim();n.line=a+1;const h=n.push("heading_open","h"+String(l),1);h.markup=String.fromCharCode(o),h.map=[e,n.line];const p=n.push("inline","",0);p.content=f,p.map=[e,n.line-1],p.children=[];const g=n.push("heading_close","h"+String(l),-1);return g.markup=String.fromCharCode(o),n.parentType=i,!0}function bw(n,e,t){const r=n.md.block.ruler.getRules("paragraph"),i=n.parentType;let l=e+1;for(n.parentType="paragraph";l<t&&!n.isEmpty(l);l++){if(n.sCount[l]-n.blkIndent>3||n.sCount[l]<0)continue;let h=!1;for(let p=0,g=r.length;p<g;p++)if(r[p](n,l,t,!0)){h=!0;break}if(h)break}const o=n.getLines(e,l,n.blkIndent,!1).trim();n.line=l;const a=n.push("paragraph_open","p",1);a.map=[e,n.line];const f=n.push("inline","",0);return f.content=o,f.map=[e,n.line],f.children=[],n.push("paragraph_close","p",-1),n.parentType=i,!0}const Pa=[["table",G5,["paragraph","reference"]],["code",K5],["fence",Y5,["paragraph","reference","blockquote","list"]],["blockquote",Z5,["paragraph","reference","blockquote","list"]],["hr",X5,["paragraph","reference","blockquote","list"]],["list",W5,["paragraph","reference","blockquote"]],["reference",ew],["html_block",pw,["paragraph","reference","blockquote"]],["heading",mw,["paragraph","reference","blockquote"]],["lheading",gw],["paragraph",bw]];function Wc(){this.ruler=new Pt;for(let n=0;n<Pa.length;n++)this.ruler.push(Pa[n][0],Pa[n][1],{alt:(Pa[n][2]||[]).slice()})}Wc.prototype.tokenize=function(n,e,t){const r=this.ruler.getRules(""),i=r.length,l=n.md.options.maxNesting;let o=e,a=!1;for(;o<t&&(n.line=o=n.skipEmptyLines(o),!(o>=t||n.sCount[o]<n.blkIndent));){if(n.level>=l){n.line=t;break}const f=n.line;let h=!1;for(let p=0;p<i;p++)if(h=r[p](n,o,t,!1),h){if(f>=n.line)throw new Error("block rule didn't increment state.line");break}if(!h)throw new Error("none of the block rules matched");n.tight=!a,n.isEmpty(n.line-1)&&(a=!0),o=n.line,o<t&&n.isEmpty(o)&&(a=!0,o++,n.line=o)}};Wc.prototype.parse=function(n,e,t,r){if(!n)return;const i=new this.State(n,e,t,r);this.tokenize(i,i.line,i.lineMax)};Wc.prototype.State=Yn;function yo(n,e,t,r){this.src=n,this.env=t,this.md=e,this.tokens=r,this.tokens_meta=Array(r.length),this.pos=0,this.posMax=this.src.length,this.level=0,this.pending="",this.pendingLevel=0,this.cache={},this.delimiters=[],this._prev_delimiters=[],this.backticks={},this.backticksScanned=!1,this.linkLevel=0}yo.prototype.pushPending=function(){const n=new Rn("text","",0);return n.content=this.pending,n.level=this.pendingLevel,this.tokens.push(n),this.pending="",n};yo.prototype.push=function(n,e,t){this.pending&&this.pushPending();const r=new Rn(n,e,t);let i=null;return t<0&&(this.level--,this.delimiters=this._prev_delimiters.pop()),r.level=this.level,t>0&&(this.level++,this._prev_delimiters.push(this.delimiters),this.delimiters=[],i={delimiters:this.delimiters}),this.pendingLevel=this.level,this.tokens.push(r),this.tokens_meta.push(i),r};yo.prototype.scanDelims=function(n,e){const t=this.posMax,r=this.src.charCodeAt(n),i=n>0?this.src.charCodeAt(n-1):32;let l=n;for(;l<t&&this.src.charCodeAt(l)===r;)l++;const o=l-n,a=l<t?this.src.charCodeAt(l):32,f=no(i)||to(String.fromCharCode(i)),h=no(a)||to(String.fromCharCode(a)),p=eo(i),g=eo(a),y=!g&&(!h||p||f),x=!p&&(!f||g||h);return{can_open:y&&(e||!x||f),can_close:x&&(e||!y||h),length:o}};yo.prototype.Token=Rn;function yw(n){switch(n){case 10:case 33:case 35:case 36:case 37:case 38:case 42:case 43:case 45:case 58:case 60:case 61:case 62:case 64:case 91:case 92:case 93:case 94:case 95:case 96:case 123:case 125:case 126:return!0;default:return!1}}function xw(n,e){let t=n.pos;for(;t<n.posMax&&!yw(n.src.charCodeAt(t));)t++;return t===n.pos?!1:(e||(n.pending+=n.src.slice(n.pos,t)),n.pos=t,!0)}const kw=/(?:^|[^a-z0-9.+-])([a-z][a-z0-9.+-]*)$/i;function Sw(n,e){if(!n.md.options.linkify||n.linkLevel>0)return!1;const t=n.pos,r=n.posMax;if(t+3>r||n.src.charCodeAt(t)!==58||n.src.charCodeAt(t+1)!==47||n.src.charCodeAt(t+2)!==47)return!1;const i=n.pending.match(kw);if(!i)return!1;const l=i[1],o=n.md.linkify.matchAtStart(n.src.slice(t-l.length));if(!o)return!1;let a=o.url;if(a.length<=l.length)return!1;a=a.replace(/\*+$/,"");const f=n.md.normalizeLink(a);if(!n.md.validateLink(f))return!1;if(!e){n.pending=n.pending.slice(0,-l.length);const h=n.push("link_open","a",1);h.attrs=[["href",f]],h.markup="linkify",h.info="auto";const p=n.push("text","",0);p.content=n.md.normalizeLinkText(a);const g=n.push("link_close","a",-1);g.markup="linkify",g.info="auto"}return n.pos+=a.length-l.length,!0}function Cw(n,e){let t=n.pos;if(n.src.charCodeAt(t)!==10)return!1;const r=n.pending.length-1,i=n.posMax;if(!e)if(r>=0&&n.pending.charCodeAt(r)===32)if(r>=1&&n.pending.charCodeAt(r-1)===32){let l=r-1;for(;l>=1&&n.pending.charCodeAt(l-1)===32;)l--;n.pending=n.pending.slice(0,l),n.push("hardbreak","br",0)}else n.pending=n.pending.slice(0,-1),n.push("softbreak","br",0);else n.push("softbreak","br",0);for(t++;t<i&&Be(n.src.charCodeAt(t));)t++;return n.pos=t,!0}const j0=[];for(let n=0;n<256;n++)j0.push(0);"\\!\"#$%&'()*+,./:;<=>?@[]^_`{|}~-".split("").forEach(function(n){j0[n.charCodeAt(0)]=1});function vw(n,e){let t=n.pos;const r=n.posMax;if(n.src.charCodeAt(t)!==92||(t++,t>=r))return!1;let i=n.src.charCodeAt(t);if(i===10){for(e||n.push("hardbreak","br",0),t++;t<r&&(i=n.src.charCodeAt(t),!!Be(i));)t++;return n.pos=t,!0}let l=n.src[t];if(i>=55296&&i<=56319&&t+1<r){const a=n.src.charCodeAt(t+1);a>=56320&&a<=57343&&(l+=n.src[t+1],t++)}const o="\\"+l;if(!e){const a=n.push("text_special","",0);i<256&&j0[i]!==0?a.content=l:a.content=o,a.markup=o,a.info="escape"}return n.pos=t+1,!0}function Ew(n,e){let t=n.pos;if(n.src.charCodeAt(t)!==96)return!1;const i=t;t++;const l=n.posMax;for(;t<l&&n.src.charCodeAt(t)===96;)t++;const o=n.src.slice(i,t),a=o.length;if(n.backticksScanned&&(n.backticks[a]||0)<=i)return e||(n.pending+=o),n.pos+=a,!0;let f=t,h;for(;(h=n.src.indexOf("`",f))!==-1;){for(f=h+1;f<l&&n.src.charCodeAt(f)===96;)f++;const p=f-h;if(p===a){if(!e){const g=n.push("code_inline","code",0);g.markup=o,g.content=n.src.slice(t,h).replace(/\n/g," ").replace(/^ (.+) $/,"$1")}return n.pos=f,!0}n.backticks[p]=h}return n.backticksScanned=!0,e||(n.pending+=o),n.pos+=a,!0}function Mw(n,e){const t=n.pos,r=n.src.charCodeAt(t);if(e||r!==126)return!1;const i=n.scanDelims(n.pos,!0);let l=i.length;const o=String.fromCharCode(r);if(l<2)return!1;let a;l%2&&(a=n.push("text","",0),a.content=o,l--);for(let f=0;f<l;f+=2)a=n.push("text","",0),a.content=o+o,n.delimiters.push({marker:r,length:0,token:n.tokens.length-1,end:-1,open:i.can_open,close:i.can_close});return n.pos+=i.length,!0}function G2(n,e){let t;const r=[],i=e.length;for(let l=0;l<i;l++){const o=e[l];if(o.marker!==126||o.end===-1)continue;const a=e[o.end];t=n.tokens[o.token],t.type="s_open",t.tag="s",t.nesting=1,t.markup="~~",t.content="",t=n.tokens[a.token],t.type="s_close",t.tag="s",t.nesting=-1,t.markup="~~",t.content="",n.tokens[a.token-1].type==="text"&&n.tokens[a.token-1].content==="~"&&r.push(a.token-1)}for(;r.length;){const l=r.pop();let o=l+1;for(;o<n.tokens.length&&n.tokens[o].type==="s_close";)o++;o--,l!==o&&(t=n.tokens[o],n.tokens[o]=n.tokens[l],n.tokens[l]=t)}}function Aw(n){const e=n.tokens_meta,t=n.tokens_meta.length;G2(n,n.delimiters);for(let r=0;r<t;r++)e[r]&&e[r].delimiters&&G2(n,e[r].delimiters)}const fS={tokenize:Mw,postProcess:Aw};function Tw(n,e){const t=n.pos,r=n.src.charCodeAt(t);if(e||r!==95&&r!==42)return!1;const i=n.scanDelims(n.pos,r===42);for(let l=0;l<i.length;l++){const o=n.push("text","",0);o.content=String.fromCharCode(r),n.delimiters.push({marker:r,length:i.length,token:n.tokens.length-1,end:-1,open:i.can_open,close:i.can_close})}return n.pos+=i.length,!0}function K2(n,e){const t=e.length;for(let r=t-1;r>=0;r--){const i=e[r];if(i.marker!==95&&i.marker!==42||i.end===-1)continue;const l=e[i.end],o=r>0&&e[r-1].end===i.end+1&&e[r-1].marker===i.marker&&e[r-1].token===i.token-1&&e[i.end+1].token===l.token+1,a=String.fromCharCode(i.marker),f=n.tokens[i.token];f.type=o?"strong_open":"em_open",f.tag=o?"strong":"em",f.nesting=1,f.markup=o?a+a:a,f.content="";const h=n.tokens[l.token];h.type=o?"strong_close":"em_close",h.tag=o?"strong":"em",h.nesting=-1,h.markup=o?a+a:a,h.content="",o&&(n.tokens[e[r-1].token].content="",n.tokens[e[i.end+1].token].content="",r--)}}function Dw(n){const e=n.tokens_meta,t=n.tokens_meta.length;K2(n,n.delimiters);for(let r=0;r<t;r++)e[r]&&e[r].delimiters&&K2(n,e[r].delimiters)}const dS={tokenize:Tw,postProcess:Dw};function ww(n,e){let t,r,i,l,o="",a="",f=n.pos,h=!0;if(n.src.charCodeAt(n.pos)!==91)return!1;const p=n.pos,g=n.posMax,y=n.pos+1,x=n.md.helpers.parseLinkLabel(n,n.pos,!0);if(x<0)return!1;let k=x+1;if(k<g&&n.src.charCodeAt(k)===40){for(h=!1,k++;k<g&&(t=n.src.charCodeAt(k),!(!Be(t)&&t!==10));k++);if(k>=g)return!1;if(f=k,i=n.md.helpers.parseLinkDestination(n.src,k,n.posMax),i.ok){for(o=n.md.normalizeLink(i.str),n.md.validateLink(o)?k=i.pos:o="",f=k;k<g&&(t=n.src.charCodeAt(k),!(!Be(t)&&t!==10));k++);if(i=n.md.helpers.parseLinkTitle(n.src,k,n.posMax),k<g&&f!==k&&i.ok)for(a=i.str,k=i.pos;k<g&&(t=n.src.charCodeAt(k),!(!Be(t)&&t!==10));k++);}(k>=g||n.src.charCodeAt(k)!==41)&&(h=!0),k++}if(h){if(typeof n.env.references>"u")return!1;if(k<g&&n.src.charCodeAt(k)===91?(f=k+1,k=n.md.helpers.parseLinkLabel(n,k),k>=0?r=n.src.slice(f,k++):k=x+1):k=x+1,r||(r=n.src.slice(y,x)),l=n.env.references[Qc(r)],!l)return n.pos=p,!1;o=l.href,a=l.title}if(!e){n.pos=y,n.posMax=x;const C=n.push("link_open","a",1),E=[["href",o]];C.attrs=E,a&&E.push(["title",a]),n.linkLevel++,n.md.inline.tokenize(n),n.linkLevel--,n.push("link_close","a",-1)}return n.pos=k,n.posMax=g,!0}function Ow(n,e){let t,r,i,l,o,a,f,h,p="";const g=n.pos,y=n.posMax;if(n.src.charCodeAt(n.pos)!==33||n.src.charCodeAt(n.pos+1)!==91)return!1;const x=n.pos+2,k=n.md.helpers.parseLinkLabel(n,n.pos+1,!1);if(k<0)return!1;if(l=k+1,l<y&&n.src.charCodeAt(l)===40){for(l++;l<y&&(t=n.src.charCodeAt(l),!(!Be(t)&&t!==10));l++);if(l>=y)return!1;for(h=l,a=n.md.helpers.parseLinkDestination(n.src,l,n.posMax),a.ok&&(p=n.md.normalizeLink(a.str),n.md.validateLink(p)?l=a.pos:p=""),h=l;l<y&&(t=n.src.charCodeAt(l),!(!Be(t)&&t!==10));l++);if(a=n.md.helpers.parseLinkTitle(n.src,l,n.posMax),l<y&&h!==l&&a.ok)for(f=a.str,l=a.pos;l<y&&(t=n.src.charCodeAt(l),!(!Be(t)&&t!==10));l++);else f="";if(l>=y||n.src.charCodeAt(l)!==41)return n.pos=g,!1;l++}else{if(typeof n.env.references>"u")return!1;if(l<y&&n.src.charCodeAt(l)===91?(h=l+1,l=n.md.helpers.parseLinkLabel(n,l),l>=0?i=n.src.slice(h,l++):l=k+1):l=k+1,i||(i=n.src.slice(x,k)),o=n.env.references[Qc(i)],!o)return n.pos=g,!1;p=o.href,f=o.title}if(!e){r=n.src.slice(x,k);const C=[];n.md.inline.parse(r,n.md,n.env,C);const E=n.push("image","img",0),A=[["src",p],["alt",""]];E.attrs=A,E.children=C,E.content=r,f&&A.push(["title",f])}return n.pos=l,n.posMax=y,!0}const _w=/^([a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*)$/,Nw=/^([a-zA-Z][a-zA-Z0-9+.-]{1,31}):([^<>\x00-\x20]*)$/;function Rw(n,e){let t=n.pos;if(n.src.charCodeAt(t)!==60)return!1;const r=n.pos,i=n.posMax;for(;;){if(++t>=i)return!1;const o=n.src.charCodeAt(t);if(o===60)return!1;if(o===62)break}const l=n.src.slice(r+1,t);if(Nw.test(l)){const o=n.md.normalizeLink(l);if(!n.md.validateLink(o))return!1;if(!e){const a=n.push("link_open","a",1);a.attrs=[["href",o]],a.markup="autolink",a.info="auto";const f=n.push("text","",0);f.content=n.md.normalizeLinkText(l);const h=n.push("link_close","a",-1);h.markup="autolink",h.info="auto"}return n.pos+=l.length+2,!0}if(_w.test(l)){const o=n.md.normalizeLink("mailto:"+l);if(!n.md.validateLink(o))return!1;if(!e){const a=n.push("link_open","a",1);a.attrs=[["href",o]],a.markup="autolink",a.info="auto";const f=n.push("text","",0);f.content=n.md.normalizeLinkText(l);const h=n.push("link_close","a",-1);h.markup="autolink",h.info="auto"}return n.pos+=l.length+2,!0}return!1}function zw(n){return/^<a[>\s]/i.test(n)}function Bw(n){return/^<\/a\s*>/i.test(n)}function $w(n){const e=n|32;return e>=97&&e<=122}function Fw(n,e){if(!n.md.options.html)return!1;const t=n.posMax,r=n.pos;if(n.src.charCodeAt(r)!==60||r+2>=t)return!1;const i=n.src.charCodeAt(r+1);if(i!==33&&i!==63&&i!==47&&!$w(i))return!1;const l=n.src.slice(r).match(dw);if(!l)return!1;if(!e){const o=n.push("html_inline","",0);o.content=l[0],zw(o.content)&&n.linkLevel++,Bw(o.content)&&n.linkLevel--}return n.pos+=l[0].length,!0}const Lw=/^&#((?:x[a-f0-9]{1,6}|[0-9]{1,7}));/i,Iw=/^&([a-z][a-z0-9]{1,31});/i;function qw(n,e){const t=n.pos,r=n.posMax;if(n.src.charCodeAt(t)!==38||t+1>=r)return!1;if(n.src.charCodeAt(t+1)===35){const l=n.src.slice(t).match(Lw);if(l){if(!e){const o=l[1][0].toLowerCase()==="x"?parseInt(l[1].slice(1),16):parseInt(l[1],10),a=n.push("text_special","",0);a.content=V0(o)?vc(o):vc(65533),a.markup=l[0],a.info="entity"}return n.pos+=l[0].length,!0}}else{const l=n.src.slice(t).match(Iw);if(l){const o=iS(l[0]);if(o!==l[0]){if(!e){const a=n.push("text_special","",0);a.content=o,a.markup=l[0],a.info="entity"}return n.pos+=l[0].length,!0}}}return!1}function Y2(n){const e={},t=n.length;if(!t)return;let r=0,i=-2;const l=[];for(let o=0;o<t;o++){const a=n[o];if(l.push(0),(n[r].marker!==a.marker||i!==a.token-1)&&(r=o),i=a.token,a.length=a.length||0,!a.close)continue;e.hasOwnProperty(a.marker)||(e[a.marker]=[-1,-1,-1,-1,-1,-1]);const f=e[a.marker][(a.open?3:0)+a.length%3];let h=r-l[r]-1,p=h;for(;h>f;h-=l[h]+1){const g=n[h];if(g.marker===a.marker&&g.open&&g.end<0){let y=!1;if((g.close||a.open)&&(g.length+a.length)%3===0&&(g.length%3!==0||a.length%3!==0)&&(y=!0),!y){const x=h>0&&!n[h-1].open?l[h-1]+1:0;l[o]=o-h+x,l[h]=x,a.open=!1,g.end=o,g.close=!1,p=-1,i=-2;break}}}p!==-1&&(e[a.marker][(a.open?3:0)+(a.length||0)%3]=p)}}function Hw(n){const e=n.tokens_meta,t=n.tokens_meta.length;Y2(n.delimiters);for(let r=0;r<t;r++)e[r]&&e[r].delimiters&&Y2(e[r].delimiters)}function Vw(n){let e,t,r=0;const i=n.tokens,l=n.tokens.length;for(e=t=0;e<l;e++)i[e].nesting<0&&r--,i[e].level=r,i[e].nesting>0&&r++,i[e].type==="text"&&e+1<l&&i[e+1].type==="text"?i[e+1].content=i[e].content+i[e+1].content:(e!==t&&(i[t]=i[e]),t++);e!==t&&(i.length=t)}const ep=[["text",xw],["linkify",Sw],["newline",Cw],["escape",vw],["backticks",Ew],["strikethrough",fS.tokenize],["emphasis",dS.tokenize],["link",ww],["image",Ow],["autolink",Rw],["html_inline",Fw],["entity",qw]],tp=[["balance_pairs",Hw],["strikethrough",fS.postProcess],["emphasis",dS.postProcess],["fragments_join",Vw]];function xo(){this.ruler=new Pt;for(let n=0;n<ep.length;n++)this.ruler.push(ep[n][0],ep[n][1]);this.ruler2=new Pt;for(let n=0;n<tp.length;n++)this.ruler2.push(tp[n][0],tp[n][1])}xo.prototype.skipToken=function(n){const e=n.pos,t=this.ruler.getRules(""),r=t.length,i=n.md.options.maxNesting,l=n.cache;if(typeof l[e]<"u"){n.pos=l[e];return}let o=!1;if(n.level<i){for(let a=0;a<r;a++)if(n.level++,o=t[a](n,!0),n.level--,o){if(e>=n.pos)throw new Error("inline rule didn't increment state.pos");break}}else n.pos=n.posMax;o||n.pos++,l[e]=n.pos};xo.prototype.tokenize=function(n){const e=this.ruler.getRules(""),t=e.length,r=n.posMax,i=n.md.options.maxNesting;for(;n.pos<r;){const l=n.pos;let o=!1;if(n.level<i){for(let a=0;a<t;a++)if(o=e[a](n,!1),o){if(l>=n.pos)throw new Error("inline rule didn't increment state.pos");break}}if(o){if(n.pos>=r)break;continue}n.pending+=n.src[n.pos++]}n.pending&&n.pushPending()};xo.prototype.parse=function(n,e,t,r){const i=new this.State(n,e,t,r);this.tokenize(i);const l=this.ruler2.getRules(""),o=l.length;for(let a=0;a<o;a++)l[a](i)};xo.prototype.State=yo;function Uw(n){const e={};n=n||{},e.src_Any=Wk.source,e.src_Cc=eS.source,e.src_Z=nS.source,e.src_P=q0.source,e.src_ZPCc=[e.src_Z,e.src_P,e.src_Cc].join("|"),e.src_ZCc=[e.src_Z,e.src_Cc].join("|");const t="[><]";return e.src_pseudo_letter="(?:(?!"+t+"|"+e.src_ZPCc+")"+e.src_Any+")",e.src_ip4="(?:(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.){3}(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)",e.src_auth="(?:(?:(?!"+e.src_ZCc+"|[@/\\[\\]()]).)+@)?",e.src_port="(?::(?:6(?:[0-4]\\d{3}|5(?:[0-4]\\d{2}|5(?:[0-2]\\d|3[0-5])))|[1-5]?\\d{1,4}))?",e.src_host_terminator="(?=$|"+t+"|"+e.src_ZPCc+")(?!"+(n["---"]?"-(?!--)|":"-|")+"_|:\\d|\\.-|\\.(?!$|"+e.src_ZPCc+"))",e.src_path="(?:[/?#](?:(?!"+e.src_ZCc+"|"+t+`|[()[\\]{}.,"'?!\\-;]).|\\[(?:(?!`+e.src_ZCc+"|\\]).)*\\]|\\((?:(?!"+e.src_ZCc+"|[)]).)*\\)|\\{(?:(?!"+e.src_ZCc+'|[}]).)*\\}|\\"(?:(?!'+e.src_ZCc+`|["]).)+\\"|\\'(?:(?!`+e.src_ZCc+"|[']).)+\\'|\\'(?="+e.src_pseudo_letter+"|[-])|\\.{2,}[a-zA-Z0-9%/&]|\\.(?!"+e.src_ZCc+"|[.]|$)|"+(n["---"]?"\\-(?!--(?:[^-]|$))(?:-*)|":"\\-+|")+",(?!"+e.src_ZCc+"|$)|;(?!"+e.src_ZCc+"|$)|\\!+(?!"+e.src_ZCc+"|[!]|$)|\\?(?!"+e.src_ZCc+"|[?]|$))+|\\/)?",e.src_email_name='[\\-;:&=\\+\\$,\\.a-zA-Z0-9_][\\-;:&=\\+\\$,\\"\\.a-zA-Z0-9_]*',e.src_xn="xn--[a-z0-9\\-]{1,59}",e.src_domain_root="(?:"+e.src_xn+"|"+e.src_pseudo_letter+"{1,63})",e.src_domain="(?:"+e.src_xn+"|(?:"+e.src_pseudo_letter+")|(?:"+e.src_pseudo_letter+"(?:-|"+e.src_pseudo_letter+"){0,61}"+e.src_pseudo_letter+"))",e.src_host="(?:(?:(?:(?:"+e.src_domain+")\\.)*"+e.src_domain+"))",e.tpl_host_fuzzy="(?:"+e.src_ip4+"|(?:(?:(?:"+e.src_domain+")\\.)+(?:%TLDS%)))",e.tpl_host_no_ip_fuzzy="(?:(?:(?:"+e.src_domain+")\\.)+(?:%TLDS%))",e.src_host_strict=e.src_host+e.src_host_terminator,e.tpl_host_fuzzy_strict=e.tpl_host_fuzzy+e.src_host_terminator,e.src_host_port_strict=e.src_host+e.src_port+e.src_host_terminator,e.tpl_host_port_fuzzy_strict=e.tpl_host_fuzzy+e.src_port+e.src_host_terminator,e.tpl_host_port_no_ip_fuzzy_strict=e.tpl_host_no_ip_fuzzy+e.src_port+e.src_host_terminator,e.tpl_host_fuzzy_test="localhost|www\\.|\\.\\d{1,3}\\.|(?:\\.(?:%TLDS%)(?:"+e.src_ZPCc+"|>|$))",e.tpl_email_fuzzy="(^|"+t+'|"|\\(|'+e.src_ZCc+")("+e.src_email_name+"@"+e.tpl_host_fuzzy_strict+")",e.tpl_link_fuzzy="(^|(?![.:/\\-_@])(?:[$+<=>^`|]|"+e.src_ZPCc+"))((?![$+<=>^`|])"+e.tpl_host_port_fuzzy_strict+e.src_path+")",e.tpl_link_no_ip_fuzzy="(^|(?![.:/\\-_@])(?:[$+<=>^`|]|"+e.src_ZPCc+"))((?![$+<=>^`|])"+e.tpl_host_port_no_ip_fuzzy_strict+e.src_path+")",e}function Zp(n){return Array.prototype.slice.call(arguments,1).forEach(function(t){t&&Object.keys(t).forEach(function(r){n[r]=t[r]})}),n}function ef(n){return Object.prototype.toString.call(n)}function jw(n){return ef(n)==="[object String]"}function Pw(n){return ef(n)==="[object Object]"}function Jw(n){return ef(n)==="[object RegExp]"}function Z2(n){return ef(n)==="[object Function]"}function Gw(n){return n.replace(/[.?*+^$[\]\\(){}|-]/g,"\\$&")}const hS={fuzzyLink:!0,fuzzyEmail:!0,fuzzyIP:!1};function Kw(n){return Object.keys(n||{}).reduce(function(e,t){return e||hS.hasOwnProperty(t)},!1)}const Yw={"http:":{validate:function(n,e,t){const r=n.slice(e);return t.re.http||(t.re.http=new RegExp("^\\/\\/"+t.re.src_auth+t.re.src_host_port_strict+t.re.src_path,"i")),t.re.http.test(r)?r.match(t.re.http)[0].length:0}},"https:":"http:","ftp:":"http:","//":{validate:function(n,e,t){const r=n.slice(e);return t.re.no_http||(t.re.no_http=new RegExp("^"+t.re.src_auth+"(?:localhost|(?:(?:"+t.re.src_domain+")\\.)+"+t.re.src_domain_root+")"+t.re.src_port+t.re.src_host_terminator+t.re.src_path,"i")),t.re.no_http.test(r)?e>=3&&n[e-3]===":"||e>=3&&n[e-3]==="/"?0:r.match(t.re.no_http)[0].length:0}},"mailto:":{validate:function(n,e,t){const r=n.slice(e);return t.re.mailto||(t.re.mailto=new RegExp("^"+t.re.src_email_name+"@"+t.re.src_host_strict,"i")),t.re.mailto.test(r)?r.match(t.re.mailto)[0].length:0}}},Zw="a[cdefgilmnoqrstuwxz]|b[abdefghijmnorstvwyz]|c[acdfghiklmnoruvwxyz]|d[ejkmoz]|e[cegrstu]|f[ijkmor]|g[abdefghilmnpqrstuwy]|h[kmnrtu]|i[delmnoqrst]|j[emop]|k[eghimnprwyz]|l[abcikrstuvy]|m[acdeghklmnopqrstuvwxyz]|n[acefgilopruz]|om|p[aefghklmnrstwy]|qa|r[eosuw]|s[abcdeghijklmnortuvxyz]|t[cdfghjklmnortvwz]|u[agksyz]|v[aceginu]|w[fs]|y[et]|z[amw]",Xw="biz|com|edu|gov|net|org|pro|web|xxx|aero|asia|coop|info|museum|name|shop|".split("|");function Qw(n){n.__index__=-1,n.__text_cache__=""}function Ww(n){return function(e,t){const r=e.slice(t);return n.test(r)?r.match(n)[0].length:0}}function X2(){return function(n,e){e.normalize(n)}}function Ec(n){const e=n.re=Uw(n.__opts__),t=n.__tlds__.slice();n.onCompile(),n.__tlds_replaced__||t.push(Zw),t.push(e.src_xn),e.src_tlds=t.join("|");function r(a){return a.replace("%TLDS%",e.src_tlds)}e.email_fuzzy=RegExp(r(e.tpl_email_fuzzy),"i"),e.link_fuzzy=RegExp(r(e.tpl_link_fuzzy),"i"),e.link_no_ip_fuzzy=RegExp(r(e.tpl_link_no_ip_fuzzy),"i"),e.host_fuzzy_test=RegExp(r(e.tpl_host_fuzzy_test),"i");const i=[];n.__compiled__={};function l(a,f){throw new Error('(LinkifyIt) Invalid schema "'+a+'": '+f)}Object.keys(n.__schemas__).forEach(function(a){const f=n.__schemas__[a];if(f===null)return;const h={validate:null,link:null};if(n.__compiled__[a]=h,Pw(f)){Jw(f.validate)?h.validate=Ww(f.validate):Z2(f.validate)?h.validate=f.validate:l(a,f),Z2(f.normalize)?h.normalize=f.normalize:f.normalize?l(a,f):h.normalize=X2();return}if(jw(f)){i.push(a);return}l(a,f)}),i.forEach(function(a){n.__compiled__[n.__schemas__[a]]&&(n.__compiled__[a].validate=n.__compiled__[n.__schemas__[a]].validate,n.__compiled__[a].normalize=n.__compiled__[n.__schemas__[a]].normalize)}),n.__compiled__[""]={validate:null,normalize:X2()};const o=Object.keys(n.__compiled__).filter(function(a){return a.length>0&&n.__compiled__[a]}).map(Gw).join("|");n.re.schema_test=RegExp("(^|(?!_)(?:[><]|"+e.src_ZPCc+"))("+o+")","i"),n.re.schema_search=RegExp("(^|(?!_)(?:[><]|"+e.src_ZPCc+"))("+o+")","ig"),n.re.schema_at_start=RegExp("^"+n.re.schema_search.source,"i"),n.re.pretest=RegExp("("+n.re.schema_test.source+")|("+n.re.host_fuzzy_test.source+")|@","i"),Qw(n)}function eO(n,e){const t=n.__index__,r=n.__last_index__,i=n.__text_cache__.slice(t,r);this.schema=n.__schema__.toLowerCase(),this.index=t+e,this.lastIndex=r+e,this.raw=i,this.text=i,this.url=i}function Xp(n,e){const t=new eO(n,e);return n.__compiled__[t.schema].normalize(t,n),t}function sn(n,e){if(!(this instanceof sn))return new sn(n,e);e||Kw(n)&&(e=n,n={}),this.__opts__=Zp({},hS,e),this.__index__=-1,this.__last_index__=-1,this.__schema__="",this.__text_cache__="",this.__schemas__=Zp({},Yw,n),this.__compiled__={},this.__tlds__=Xw,this.__tlds_replaced__=!1,this.re={},Ec(this)}sn.prototype.add=function(e,t){return this.__schemas__[e]=t,Ec(this),this};sn.prototype.set=function(e){return this.__opts__=Zp(this.__opts__,e),this};sn.prototype.test=function(e){if(this.__text_cache__=e,this.__index__=-1,!e.length)return!1;let t,r,i,l,o,a,f,h,p;if(this.re.schema_test.test(e)){for(f=this.re.schema_search,f.lastIndex=0;(t=f.exec(e))!==null;)if(l=this.testSchemaAt(e,t[2],f.lastIndex),l){this.__schema__=t[2],this.__index__=t.index+t[1].length,this.__last_index__=t.index+t[0].length+l;break}}return this.__opts__.fuzzyLink&&this.__compiled__["http:"]&&(h=e.search(this.re.host_fuzzy_test),h>=0&&(this.__index__<0||h<this.__index__)&&(r=e.match(this.__opts__.fuzzyIP?this.re.link_fuzzy:this.re.link_no_ip_fuzzy))!==null&&(o=r.index+r[1].length,(this.__index__<0||o<this.__index__)&&(this.__schema__="",this.__index__=o,this.__last_index__=r.index+r[0].length))),this.__opts__.fuzzyEmail&&this.__compiled__["mailto:"]&&(p=e.indexOf("@"),p>=0&&(i=e.match(this.re.email_fuzzy))!==null&&(o=i.index+i[1].length,a=i.index+i[0].length,(this.__index__<0||o<this.__index__||o===this.__index__&&a>this.__last_index__)&&(this.__schema__="mailto:",this.__index__=o,this.__last_index__=a))),this.__index__>=0};sn.prototype.pretest=function(e){return this.re.pretest.test(e)};sn.prototype.testSchemaAt=function(e,t,r){return this.__compiled__[t.toLowerCase()]?this.__compiled__[t.toLowerCase()].validate(e,r,this):0};sn.prototype.match=function(e){const t=[];let r=0;this.__index__>=0&&this.__text_cache__===e&&(t.push(Xp(this,r)),r=this.__last_index__);let i=r?e.slice(r):e;for(;this.test(i);)t.push(Xp(this,r)),i=i.slice(this.__last_index__),r+=this.__last_index__;return t.length?t:null};sn.prototype.matchAtStart=function(e){if(this.__text_cache__=e,this.__index__=-1,!e.length)return null;const t=this.re.schema_at_start.exec(e);if(!t)return null;const r=this.testSchemaAt(e,t[2],t[0].length);return r?(this.__schema__=t[2],this.__index__=t.index+t[1].length,this.__last_index__=t.index+t[0].length+r,Xp(this,0)):null};sn.prototype.tlds=function(e,t){return e=Array.isArray(e)?e:[e],t?(this.__tlds__=this.__tlds__.concat(e).sort().filter(function(r,i,l){return r!==l[i-1]}).reverse(),Ec(this),this):(this.__tlds__=e.slice(),this.__tlds_replaced__=!0,Ec(this),this)};sn.prototype.normalize=function(e){e.schema||(e.url="http://"+e.url),e.schema==="mailto:"&&!/^mailto:/i.test(e.url)&&(e.url="mailto:"+e.url)};sn.prototype.onCompile=function(){};const cu=2147483647,Un=36,P0=1,ro=26,tO=38,nO=700,pS=72,mS=128,gS="-",rO=/^xn--/,iO=/[^\0-\x7F]/,lO=/[\x2E\u3002\uFF0E\uFF61]/g,uO={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},np=Un-P0,jn=Math.floor,rp=String.fromCharCode;function Yr(n){throw new RangeError(uO[n])}function sO(n,e){const t=[];let r=n.length;for(;r--;)t[r]=e(n[r]);return t}function bS(n,e){const t=n.split("@");let r="";t.length>1&&(r=t[0]+"@",n=t[1]),n=n.replace(lO,".");const i=n.split("."),l=sO(i,e).join(".");return r+l}function yS(n){const e=[];let t=0;const r=n.length;for(;t<r;){const i=n.charCodeAt(t++);if(i>=55296&&i<=56319&&t<r){const l=n.charCodeAt(t++);(l&64512)==56320?e.push(((i&1023)<<10)+(l&1023)+65536):(e.push(i),t--)}else e.push(i)}return e}const oO=n=>String.fromCodePoint(...n),aO=function(n){return n>=48&&n<58?26+(n-48):n>=65&&n<91?n-65:n>=97&&n<123?n-97:Un},Q2=function(n,e){return n+22+75*(n<26)-((e!=0)<<5)},xS=function(n,e,t){let r=0;for(n=t?jn(n/nO):n>>1,n+=jn(n/e);n>np*ro>>1;r+=Un)n=jn(n/np);return jn(r+(np+1)*n/(n+tO))},kS=function(n){const e=[],t=n.length;let r=0,i=mS,l=pS,o=n.lastIndexOf(gS);o<0&&(o=0);for(let a=0;a<o;++a)n.charCodeAt(a)>=128&&Yr("not-basic"),e.push(n.charCodeAt(a));for(let a=o>0?o+1:0;a<t;){const f=r;for(let p=1,g=Un;;g+=Un){a>=t&&Yr("invalid-input");const y=aO(n.charCodeAt(a++));y>=Un&&Yr("invalid-input"),y>jn((cu-r)/p)&&Yr("overflow"),r+=y*p;const x=g<=l?P0:g>=l+ro?ro:g-l;if(y<x)break;const k=Un-x;p>jn(cu/k)&&Yr("overflow"),p*=k}const h=e.length+1;l=xS(r-f,h,f==0),jn(r/h)>cu-i&&Yr("overflow"),i+=jn(r/h),r%=h,e.splice(r++,0,i)}return String.fromCodePoint(...e)},SS=function(n){const e=[];n=yS(n);const t=n.length;let r=mS,i=0,l=pS;for(const f of n)f<128&&e.push(rp(f));const o=e.length;let a=o;for(o&&e.push(gS);a<t;){let f=cu;for(const p of n)p>=r&&p<f&&(f=p);const h=a+1;f-r>jn((cu-i)/h)&&Yr("overflow"),i+=(f-r)*h,r=f;for(const p of n)if(p<r&&++i>cu&&Yr("overflow"),p===r){let g=i;for(let y=Un;;y+=Un){const x=y<=l?P0:y>=l+ro?ro:y-l;if(g<x)break;const k=g-x,C=Un-x;e.push(rp(Q2(x+k%C,0))),g=jn(k/C)}e.push(rp(Q2(g,0))),l=xS(i,h,a===o),i=0,++a}++i,++r}return e.join("")},cO=function(n){return bS(n,function(e){return rO.test(e)?kS(e.slice(4).toLowerCase()):e})},fO=function(n){return bS(n,function(e){return iO.test(e)?"xn--"+SS(e):e})},CS={version:"2.3.1",ucs2:{decode:yS,encode:oO},decode:kS,encode:SS,toASCII:fO,toUnicode:cO},dO={options:{html:!1,xhtmlOut:!1,breaks:!1,langPrefix:"language-",linkify:!1,typographer:!1,quotes:"",highlight:null,maxNesting:100},components:{core:{},block:{},inline:{}}},hO={options:{html:!1,xhtmlOut:!1,breaks:!1,langPrefix:"language-",linkify:!1,typographer:!1,quotes:"",highlight:null,maxNesting:20},components:{core:{rules:["normalize","block","inline","text_join"]},block:{rules:["paragraph"]},inline:{rules:["text"],rules2:["balance_pairs","fragments_join"]}}},pO={options:{html:!0,xhtmlOut:!0,breaks:!1,langPrefix:"language-",linkify:!1,typographer:!1,quotes:"",highlight:null,maxNesting:20},components:{core:{rules:["normalize","block","inline","text_join"]},block:{rules:["blockquote","code","fence","heading","hr","html_block","lheading","list","reference","paragraph"]},inline:{rules:["autolink","backticks","emphasis","entity","escape","html_inline","image","link","newline","text"],rules2:["balance_pairs","emphasis","fragments_join"]}}},mO={default:dO,zero:hO,commonmark:pO},gO=/^(vbscript|javascript|file|data):/,bO=/^data:image\/(gif|png|jpeg|webp);/;function yO(n){const e=n.trim().toLowerCase();return gO.test(e)?bO.test(e):!0}const vS=["http:","https:","mailto:"];function xO(n){const e=I0(n,!0);if(e.hostname&&(!e.protocol||vS.indexOf(e.protocol)>=0))try{e.hostname=CS.toASCII(e.hostname)}catch{}return bo(L0(e))}function kO(n){const e=I0(n,!0);if(e.hostname&&(!e.protocol||vS.indexOf(e.protocol)>=0))try{e.hostname=CS.toUnicode(e.hostname)}catch{}return yu(L0(e),yu.defaultChars+"%")}function Jt(n,e){if(!(this instanceof Jt))return new Jt(n,e);e||H0(n)||(e=n||{},n="default"),this.inline=new xo,this.block=new Wc,this.core=new U0,this.renderer=new Cu,this.linkify=new sn,this.validateLink=yO,this.normalizeLink=xO,this.normalizeLinkText=kO,this.utils=C5,this.helpers=Xc({},A5),this.options={},this.configure(n),e&&this.set(e)}Jt.prototype.set=function(n){return Xc(this.options,n),this};Jt.prototype.configure=function(n){const e=this;if(H0(n)){const t=n;if(n=mO[t],!n)throw new Error('Wrong `markdown-it` preset "'+t+'", check name')}if(!n)throw new Error("Wrong `markdown-it` preset, can't be empty");return n.options&&e.set(n.options),n.components&&Object.keys(n.components).forEach(function(t){n.components[t].rules&&e[t].ruler.enableOnly(n.components[t].rules),n.components[t].rules2&&e[t].ruler2.enableOnly(n.components[t].rules2)}),this};Jt.prototype.enable=function(n,e){let t=[];Array.isArray(n)||(n=[n]),["core","block","inline"].forEach(function(i){t=t.concat(this[i].ruler.enable(n,!0))},this),t=t.concat(this.inline.ruler2.enable(n,!0));const r=n.filter(function(i){return t.indexOf(i)<0});if(r.length&&!e)throw new Error("MarkdownIt. Failed to enable unknown rule(s): "+r);return this};Jt.prototype.disable=function(n,e){let t=[];Array.isArray(n)||(n=[n]),["core","block","inline"].forEach(function(i){t=t.concat(this[i].ruler.disable(n,!0))},this),t=t.concat(this.inline.ruler2.disable(n,!0));const r=n.filter(function(i){return t.indexOf(i)<0});if(r.length&&!e)throw new Error("MarkdownIt. Failed to disable unknown rule(s): "+r);return this};Jt.prototype.use=function(n){const e=[this].concat(Array.prototype.slice.call(arguments,1));return n.apply(n,e),this};Jt.prototype.parse=function(n,e){if(typeof n!="string")throw new Error("Input data should be a String");const t=new this.core.State(n,this,e);return this.core.process(t),t.tokens};Jt.prototype.render=function(n,e){return e=e||{},this.renderer.render(this.parse(n,e),this.options,e)};Jt.prototype.parseInline=function(n,e){const t=new this.core.State(n,this,e);return t.inlineMode=!0,this.core.process(t),t.tokens};Jt.prototype.renderInline=function(n,e){return e=e||{},this.renderer.render(this.parseInline(n,e),this.options,e)};const SO=new f0({nodes:{doc:{content:"block+"},paragraph:{content:"inline*",group:"block",parseDOM:[{tag:"p"}],toDOM(){return["p",0]}},blockquote:{content:"block+",group:"block",parseDOM:[{tag:"blockquote"}],toDOM(){return["blockquote",0]}},horizontal_rule:{group:"block",parseDOM:[{tag:"hr"}],toDOM(){return["div",["hr"]]}},heading:{attrs:{level:{default:1}},content:"(text | image)*",group:"block",defining:!0,parseDOM:[{tag:"h1",attrs:{level:1}},{tag:"h2",attrs:{level:2}},{tag:"h3",attrs:{level:3}},{tag:"h4",attrs:{level:4}},{tag:"h5",attrs:{level:5}},{tag:"h6",attrs:{level:6}}],toDOM(n){return["h"+n.attrs.level,0]}},code_block:{content:"text*",group:"block",code:!0,defining:!0,marks:"",attrs:{params:{default:""}},parseDOM:[{tag:"pre",preserveWhitespace:"full",getAttrs:n=>({params:n.getAttribute("data-params")||""})}],toDOM(n){return["pre",n.attrs.params?{"data-params":n.attrs.params}:{},["code",0]]}},ordered_list:{content:"list_item+",group:"block",attrs:{order:{default:1},tight:{default:!1}},parseDOM:[{tag:"ol",getAttrs(n){return{order:n.hasAttribute("start")?+n.getAttribute("start"):1,tight:n.hasAttribute("data-tight")}}}],toDOM(n){return["ol",{start:n.attrs.order==1?null:n.attrs.order,"data-tight":n.attrs.tight?"true":null},0]}},bullet_list:{content:"list_item+",group:"block",attrs:{tight:{default:!1}},parseDOM:[{tag:"ul",getAttrs:n=>({tight:n.hasAttribute("data-tight")})}],toDOM(n){return["ul",{"data-tight":n.attrs.tight?"true":null},0]}},list_item:{content:"block+",defining:!0,parseDOM:[{tag:"li"}],toDOM(){return["li",0]}},text:{group:"inline"},image:{inline:!0,attrs:{src:{},alt:{default:null},title:{default:null}},group:"inline",draggable:!0,parseDOM:[{tag:"img[src]",getAttrs(n){return{src:n.getAttribute("src"),title:n.getAttribute("title"),alt:n.getAttribute("alt")}}}],toDOM(n){return["img",n.attrs]}},hard_break:{inline:!0,group:"inline",selectable:!1,parseDOM:[{tag:"br"}],toDOM(){return["br"]}}},marks:{em:{parseDOM:[{tag:"i"},{tag:"em"},{style:"font-style=italic"},{style:"font-style=normal",clearMark:n=>n.type.name=="em"}],toDOM(){return["em"]}},strong:{parseDOM:[{tag:"strong"},{tag:"b",getAttrs:n=>n.style.fontWeight!="normal"&&null},{style:"font-weight=400",clearMark:n=>n.type.name=="strong"},{style:"font-weight",getAttrs:n=>/^(bold(er)?|[5-9]\d{2,})$/.test(n)&&null}],toDOM(){return["strong"]}},link:{attrs:{href:{},title:{default:null}},inclusive:!1,parseDOM:[{tag:"a[href]",getAttrs(n){return{href:n.getAttribute("href"),title:n.getAttribute("title")}}}],toDOM(n){return["a",n.attrs]}},code:{code:!0,parseDOM:[{tag:"code"}],toDOM(){return["code"]}}}});function CO(n,e){if(n.isText&&e.isText&&Me.sameSet(n.marks,e.marks))return n.withText(n.text+e.text)}class vO{constructor(e,t){this.schema=e,this.tokenHandlers=t,this.stack=[{type:e.topNodeType,attrs:null,content:[],marks:Me.none}]}top(){return this.stack[this.stack.length-1]}push(e){this.stack.length&&this.top().content.push(e)}addText(e){if(!e)return;let t=this.top(),r=t.content,i=r[r.length-1],l=this.schema.text(e,t.marks),o;i&&(o=CO(i,l))?r[r.length-1]=o:r.push(l)}openMark(e){let t=this.top();t.marks=e.addToSet(t.marks)}closeMark(e){let t=this.top();t.marks=e.removeFromSet(t.marks)}parseTokens(e){for(let t=0;t<e.length;t++){let r=e[t],i=this.tokenHandlers[r.type];if(!i)throw new Error("Token type `"+r.type+"` not supported by Markdown parser");i(this,r,e,t)}}addNode(e,t,r){let i=this.top(),l=e.createAndFill(t,r,i?i.marks:[]);return l?(this.push(l),l):null}openNode(e,t){this.stack.push({type:e,attrs:t,content:[],marks:Me.none})}closeNode(){let e=this.stack.pop();return this.addNode(e.type,e.attrs,e.content)}}function Ms(n,e,t,r){return n.getAttrs?n.getAttrs(e,t,r):n.attrs instanceof Function?n.attrs(e):n.attrs}function ip(n,e){return n.noCloseToken||e=="code_inline"||e=="code_block"||e=="fence"}function W2(n){return n[n.length-1]==`
`?n.slice(0,n.length-1):n}function lp(){}function EO(n,e){let t=Object.create(null);for(let r in e){let i=e[r];if(i.block){let l=n.nodeType(i.block);ip(i,r)?t[r]=(o,a,f,h)=>{o.openNode(l,Ms(i,a,f,h)),o.addText(W2(a.content)),o.closeNode()}:(t[r+"_open"]=(o,a,f,h)=>o.openNode(l,Ms(i,a,f,h)),t[r+"_close"]=o=>o.closeNode())}else if(i.node){let l=n.nodeType(i.node);t[r]=(o,a,f,h)=>o.addNode(l,Ms(i,a,f,h))}else if(i.mark){let l=n.marks[i.mark];ip(i,r)?t[r]=(o,a,f,h)=>{o.openMark(l.create(Ms(i,a,f,h))),o.addText(W2(a.content)),o.closeMark(l)}:(t[r+"_open"]=(o,a,f,h)=>o.openMark(l.create(Ms(i,a,f,h))),t[r+"_close"]=o=>o.closeMark(l))}else if(i.ignore)ip(i,r)?t[r]=lp:(t[r+"_open"]=lp,t[r+"_close"]=lp);else throw new RangeError("Unrecognized parsing spec "+JSON.stringify(i))}return t.text=(r,i)=>r.addText(i.content),t.inline=(r,i)=>r.parseTokens(i.children),t.softbreak=t.softbreak||(r=>r.addText(" ")),t}let MO=class{constructor(e,t,r){this.schema=e,this.tokenizer=t,this.tokens=r,this.tokenHandlers=EO(e,r)}parse(e,t={}){let r=new vO(this.schema,this.tokenHandlers),i;r.parseTokens(this.tokenizer.parse(e,t));do i=r.closeNode();while(r.stack.length);return i||this.schema.topNodeType.createAndFill()}};function ex(n,e){for(;++e<n.length;)if(n[e].type!="list_item_open")return n[e].hidden;return!1}new MO(SO,Jt("commonmark",{html:!1}),{blockquote:{block:"blockquote"},paragraph:{block:"paragraph"},list_item:{block:"list_item"},bullet_list:{block:"bullet_list",getAttrs:(n,e,t)=>({tight:ex(e,t)})},ordered_list:{block:"ordered_list",getAttrs:(n,e,t)=>({order:+n.attrGet("start")||1,tight:ex(e,t)})},heading:{block:"heading",getAttrs:n=>({level:+n.tag.slice(1)})},code_block:{block:"code_block",noCloseToken:!0},fence:{block:"code_block",getAttrs:n=>({params:n.info||""}),noCloseToken:!0},hr:{node:"horizontal_rule"},image:{node:"image",getAttrs:n=>({src:n.attrGet("src"),title:n.attrGet("title")||null,alt:n.children[0]&&n.children[0].content||null})},hardbreak:{node:"hard_break"},em:{mark:"em"},strong:{mark:"strong"},link:{mark:"link",getAttrs:n=>({href:n.attrGet("href"),title:n.attrGet("title")||null})},code_inline:{mark:"code",noCloseToken:!0}});const AO={open:"",close:"",mixable:!0};let TO=class{constructor(e,t,r={}){this.nodes=e,this.marks=t,this.options=r}serialize(e,t={}){t=Object.assign({},this.options,t);let r=new ES(this.nodes,this.marks,t);return r.renderContent(e),r.out}};const Zn=new TO({blockquote(n,e){n.wrapBlock("> ",null,e,()=>n.renderContent(e))},code_block(n,e){const t=e.textContent.match(/`{3,}/gm),r=t?t.sort().slice(-1)[0]+"`":"```";n.write(r+(e.attrs.params||"")+`
`),n.text(e.textContent,!1),n.write(`
`),n.write(r),n.closeBlock(e)},heading(n,e){n.write(n.repeat("#",e.attrs.level)+" "),n.renderInline(e,!1),n.closeBlock(e)},horizontal_rule(n,e){n.write(e.attrs.markup||"---"),n.closeBlock(e)},bullet_list(n,e){n.renderList(e,"  ",()=>(e.attrs.bullet||"*")+" ")},ordered_list(n,e){let t=e.attrs.order||1,r=String(t+e.childCount-1).length,i=n.repeat(" ",r+2);n.renderList(e,i,l=>{let o=String(t+l);return n.repeat(" ",r-o.length)+o+". "})},list_item(n,e){n.renderContent(e)},paragraph(n,e){n.renderInline(e),n.closeBlock(e)},image(n,e){n.write("!["+n.esc(e.attrs.alt||"")+"]("+e.attrs.src.replace(/[\(\)]/g,"\\$&")+(e.attrs.title?' "'+e.attrs.title.replace(/"/g,'\\"')+'"':"")+")")},hard_break(n,e,t,r){for(let i=r+1;i<t.childCount;i++)if(t.child(i).type!=e.type){n.write(`\\
`);return}},text(n,e){n.text(e.text,!n.inAutolink)}},{em:{open:"*",close:"*",mixable:!0,expelEnclosingWhitespace:!0},strong:{open:"**",close:"**",mixable:!0,expelEnclosingWhitespace:!0},link:{open(n,e,t,r){return n.inAutolink=DO(e,t,r),n.inAutolink?"<":"["},close(n,e,t,r){let{inAutolink:i}=n;return n.inAutolink=void 0,i?">":"]("+e.attrs.href.replace(/[\(\)"]/g,"\\$&")+(e.attrs.title?` "${e.attrs.title.replace(/"/g,'\\"')}"`:"")+")"},mixable:!0},code:{open(n,e,t,r){return tx(t.child(r),-1)},close(n,e,t,r){return tx(t.child(r-1),1)},escape:!1}});function tx(n,e){let t=/`+/g,r,i=0;if(n.isText)for(;r=t.exec(n.text);)i=Math.max(i,r[0].length);let l=i>0&&e>0?" `":"`";for(let o=0;o<i;o++)l+="`";return i>0&&e<0&&(l+=" "),l}function DO(n,e,t){if(n.attrs.title||!/^\w+:/.test(n.attrs.href))return!1;let r=e.child(t);return!r.isText||r.text!=n.attrs.href||r.marks[r.marks.length-1]!=n?!1:t==e.childCount-1||!n.isInSet(e.child(t+1).marks)}let ES=class{constructor(e,t,r){this.nodes=e,this.marks=t,this.options=r,this.delim="",this.out="",this.closed=null,this.inAutolink=void 0,this.atBlockStart=!1,this.inTightList=!1,typeof this.options.tightLists>"u"&&(this.options.tightLists=!1),typeof this.options.hardBreakNodeName>"u"&&(this.options.hardBreakNodeName="hard_break")}flushClose(e=2){if(this.closed){if(this.atBlank()||(this.out+=`
`),e>1){let t=this.delim,r=/\s+$/.exec(t);r&&(t=t.slice(0,t.length-r[0].length));for(let i=1;i<e;i++)this.out+=t+`
`}this.closed=null}}getMark(e){let t=this.marks[e];if(!t){if(this.options.strict!==!1)throw new Error(`Mark type \`${e}\` not supported by Markdown renderer`);t=AO}return t}wrapBlock(e,t,r,i){let l=this.delim;this.write(t??e),this.delim+=e,i(),this.delim=l,this.closeBlock(r)}atBlank(){return/(^|\n)$/.test(this.out)}ensureNewLine(){this.atBlank()||(this.out+=`
`)}write(e){this.flushClose(),this.delim&&this.atBlank()&&(this.out+=this.delim),e&&(this.out+=e)}closeBlock(e){this.closed=e}text(e,t=!0){let r=e.split(`
`);for(let i=0;i<r.length;i++)this.write(),!t&&r[i][0]=="["&&/(^|[^\\])\!$/.test(this.out)&&(this.out=this.out.slice(0,this.out.length-1)+"\\!"),this.out+=t?this.esc(r[i],this.atBlockStart):r[i],i!=r.length-1&&(this.out+=`
`)}render(e,t,r){if(this.nodes[e.type.name])this.nodes[e.type.name](this,e,t,r);else{if(this.options.strict!==!1)throw new Error("Token type `"+e.type.name+"` not supported by Markdown renderer");e.type.isLeaf||(e.type.inlineContent?this.renderInline(e):this.renderContent(e),e.isBlock&&this.closeBlock(e))}}renderContent(e){e.forEach((t,r,i)=>this.render(t,e,i))}renderInline(e,t=!0){this.atBlockStart=t;let r=[],i="",l=(o,a,f)=>{let h=o?o.marks:[];o&&o.type.name===this.options.hardBreakNodeName&&(h=h.filter(C=>{if(f+1==e.childCount)return!1;let E=e.child(f+1);return C.isInSet(E.marks)&&(!E.isText||/\S/.test(E.text))}));let p=i;if(i="",o&&o.isText&&h.some(C=>{let E=this.getMark(C.type.name);return E&&E.expelEnclosingWhitespace&&!C.isInSet(r)})){let[C,E,A]=/^(\s*)(.*)$/m.exec(o.text);E&&(p+=E,o=A?o.withText(A):null,o||(h=r))}if(o&&o.isText&&h.some(C=>{let E=this.getMark(C.type.name);return E&&E.expelEnclosingWhitespace&&(f==e.childCount-1||!C.isInSet(e.child(f+1).marks))})){let[C,E,A]=/^(.*?)(\s*)$/m.exec(o.text);A&&(i=A,o=E?o.withText(E):null,o||(h=r))}let g=h.length?h[h.length-1]:null,y=g&&this.getMark(g.type.name).escape===!1,x=h.length-(y?1:0);e:for(let C=0;C<x;C++){let E=h[C];if(!this.getMark(E.type.name).mixable)break;for(let A=0;A<r.length;A++){let N=r[A];if(!this.getMark(N.type.name).mixable)break;if(E.eq(N)){C>A?h=h.slice(0,A).concat(E).concat(h.slice(A,C)).concat(h.slice(C+1,x)):A>C&&(h=h.slice(0,C).concat(h.slice(C+1,A)).concat(E).concat(h.slice(A,x)));continue e}}}let k=0;for(;k<Math.min(r.length,x)&&h[k].eq(r[k]);)++k;for(;k<r.length;)this.text(this.markString(r.pop(),!1,e,f),!1);if(p&&this.text(p),o){for(;r.length<x;){let C=h[r.length];r.push(C),this.text(this.markString(C,!0,e,f),!1),this.atBlockStart=!1}y&&o.isText?this.text(this.markString(g,!0,e,f)+o.text+this.markString(g,!1,e,f+1),!1):this.render(o,e,f),this.atBlockStart=!1}o!=null&&o.isText&&o.nodeSize>0&&(this.atBlockStart=!1)};e.forEach(l),l(null,0,e.childCount),this.atBlockStart=!1}renderList(e,t,r){this.closed&&this.closed.type==e.type?this.flushClose(3):this.inTightList&&this.flushClose(1);let i=typeof e.attrs.tight<"u"?e.attrs.tight:this.options.tightLists,l=this.inTightList;this.inTightList=i,e.forEach((o,a,f)=>{f&&i&&this.flushClose(1),this.wrapBlock(t,r(f),e,()=>this.render(o,e,f))}),this.inTightList=l}esc(e,t=!1){return e=e.replace(/[`*\\~\[\]_]/g,(r,i)=>r=="_"&&i>0&&i+1<e.length&&e[i-1].match(/\w/)&&e[i+1].match(/\w/)?r:"\\"+r),t&&(e=e.replace(/^(\+[ ]|[\-*>])/,"\\$&").replace(/^(\s*)(#{1,6})(\s|$)/,"$1\\$2$3").replace(/^(\s*\d+)\.\s/,"$1\\. ")),this.options.escapeExtraCharacters&&(e=e.replace(this.options.escapeExtraCharacters,"\\$&")),e}quote(e){let t=e.indexOf('"')==-1?'""':e.indexOf("'")==-1?"''":"()";return t[0]+e+t[1]}repeat(e,t){let r="";for(let i=0;i<t;i++)r+=e;return r}markString(e,t,r,i){let l=this.getMark(e.type.name),o=t?l.open:l.close;return typeof o=="string"?o:o(this,e,r,i)}getEnclosingWhitespace(e){return{leading:(e.match(/^(\s+)/)||[void 0])[0],trailing:(e.match(/(\s+)$/)||[void 0])[0]}}};var up,nx;function wO(){if(nx)return up;nx=1;var n=!0,e=!1,t=!1;up=function(C,E){E&&(n=!E.enabled,e=!!E.label,t=!!E.labelAfter),C.core.ruler.after("inline","github-task-lists",function(A){for(var N=A.tokens,B=2;B<N.length;B++)l(N,B)&&(o(N[B],A.Token),r(N[B-2],"class","task-list-item"+(n?"":" enabled")),r(N[i(N,B-2)],"class","contains-task-list"))})};function r(C,E,A){var N=C.attrIndex(E),B=[E,A];N<0?C.attrPush(B):C.attrs[N]=B}function i(C,E){for(var A=C[E].level-1,N=E-1;N>=0;N--)if(C[N].level===A)return N;return-1}function l(C,E){return g(C[E])&&y(C[E-1])&&x(C[E-2])&&k(C[E])}function o(C,E){if(C.children.unshift(a(C,E)),C.children[1].content=C.children[1].content.slice(3),C.content=C.content.slice(3),e)if(t){C.children.pop();var A="task-item-"+Math.ceil(Math.random()*(1e4*1e3)-1e3);C.children[0].content=C.children[0].content.slice(0,-1)+' id="'+A+'">',C.children.push(p(C.content,A,E))}else C.children.unshift(f(E)),C.children.push(h(E))}function a(C,E){var A=new E("html_inline","",0),N=n?' disabled="" ':"";return C.content.indexOf("[ ] ")===0?A.content='<input class="task-list-item-checkbox"'+N+'type="checkbox">':(C.content.indexOf("[x] ")===0||C.content.indexOf("[X] ")===0)&&(A.content='<input class="task-list-item-checkbox" checked=""'+N+'type="checkbox">'),A}function f(C){var E=new C("html_inline","",0);return E.content="<label>",E}function h(C){var E=new C("html_inline","",0);return E.content="</label>",E}function p(C,E,A){var N=new A("html_inline","",0);return N.content='<label class="task-list-item-label" for="'+E+'">'+C+"</label>",N.attrs=[{for:E}],N}function g(C){return C.type==="inline"}function y(C){return C.type==="paragraph_open"}function x(C){return C.type==="list_item_open"}function k(C){return C.content.indexOf("[ ] ")===0||C.content.indexOf("[x] ")===0||C.content.indexOf("[X] ")===0}return up}var OO=wO();const _O=a0(OO);var NO=Object.defineProperty,RO=(n,e,t)=>e in n?NO(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,Mc=(n,e,t)=>(RO(n,typeof e!="symbol"?e+"":e,t),t);const zO=$t.create({name:"markdownTightLists",addOptions:()=>({tight:!0,tightClass:"tight",listTypes:["bulletList","orderedList"]}),addGlobalAttributes(){return[{types:this.options.listTypes,attributes:{tight:{default:this.options.tight,parseHTML:n=>n.getAttribute("data-tight")==="true"||!n.querySelector("p"),renderHTML:n=>({class:n.tight?this.options.tightClass:null,"data-tight":n.tight?"true":null})}}}]},addCommands(){var n=this;return{toggleTight:function(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;return t=>{let{editor:r,commands:i}=t;function l(o){if(!r.isActive(o))return!1;const a=r.getAttributes(o);return i.updateAttributes(o,{tight:e??!(a!=null&&a.tight)})}return n.options.listTypes.some(o=>l(o))}}}}}),rx=Jt();function MS(n,e){return rx.inline.State.prototype.scanDelims.call({src:n,posMax:n.length}),new rx.inline.State(n,null,null,[]).scanDelims(e,!0)}function AS(n,e,t,r){let i=n.substring(0,t)+n.substring(t+e.length);return i=i.substring(0,t+r)+e+i.substring(t+r),i}function BO(n,e,t,r){let i=t,l=n;for(;i<r&&!MS(l,i).can_open;)l=AS(l,e,i,1),i++;return{text:l,from:i,to:r}}function $O(n,e,t,r){let i=r,l=n;for(;i>t&&!MS(l,i).can_close;)l=AS(l,e,i,-1),i--;return{text:l,from:t,to:i}}function FO(n,e,t,r){let i={text:n,from:t,to:r};return i=BO(i.text,e,i.from,i.to),i=$O(i.text,e,i.from,i.to),i.to-i.from<e.length+1&&(i.text=i.text.substring(0,i.from)+i.text.substring(i.to+e.length)),i.text}class LO extends ES{constructor(e,t,r){super(e,t,r??{}),Mc(this,"inTable",!1),this.inlines=[]}render(e,t,r){super.render(e,t,r);const i=this.inlines[this.inlines.length-1];if(i!=null&&i.start&&i!==null&&i!==void 0&&i.end){const{delimiter:l,start:o,end:a}=this.normalizeInline(i);this.out=FO(this.out,l,o,a),this.inlines.pop()}}markString(e,t,r,i){const l=this.marks[e.type.name];if(l.expelEnclosingWhitespace)if(t)this.inlines.push({start:this.out.length,delimiter:l.open});else{const o=this.inlines.pop();this.inlines.push({...o,end:this.out.length})}return super.markString(e,t,r,i)}normalizeInline(e){let{start:t,end:r}=e;for(;this.out.charAt(t).match(/\s/);)t++;return{...e,start:t}}}const TS=Nn.create({name:"markdownHTMLMark",addStorage(){return{markdown:{serialize:{open(n,e){var t,r;return this.editor.storage.markdown.options.html?(t=(r=ix(e))===null||r===void 0?void 0:r[0])!==null&&t!==void 0?t:"":(console.warn(`Tiptap Markdown: "${e.type.name}" mark is only available in html mode`),"")},close(n,e){var t,r;return this.editor.storage.markdown.options.html&&(t=(r=ix(e))===null||r===void 0?void 0:r[1])!==null&&t!==void 0?t:""}},parse:{}}}}});function ix(n){const e=n.type.schema,t=e.text(" ",[n]),i=go(j.from(t),e).match(/^(<.*?>) (<\/.*?>)$/);return i?[i[1],i[2]]:null}function J0(n){const e=`<body>${n}</body>`;return new window.DOMParser().parseFromString(e,"text/html").body}function IO(n){return n==null?void 0:n.replace(/</g,"&lt;").replace(/>/g,"&gt;")}function qO(n){const e=n.parentElement,t=e.cloneNode();for(;e.firstChild&&e.firstChild!==n;)t.appendChild(e.firstChild);t.childNodes.length>0&&e.parentElement.insertBefore(t,e),e.parentElement.insertBefore(n,e),e.childNodes.length===0&&e.remove()}function HO(n){const e=n.parentNode;for(;n.firstChild;)e.insertBefore(n.firstChild,n);e.removeChild(n)}const tf=$e.create({name:"markdownHTMLNode",addStorage(){return{markdown:{serialize(n,e,t){this.editor.storage.markdown.options.html?n.write(VO(e,t)):(console.warn(`Tiptap Markdown: "${e.type.name}" node is only available in html mode`),n.write(`[${e.type.name}]`)),e.isBlock&&n.closeBlock(e)},parse:{}}}}});function VO(n,e){const t=n.type.schema,r=go(j.from(n),t);return n.isBlock&&(e instanceof j||e.type.name===t.topNodeType.name)?UO(r):r}function UO(n){const t=J0(n).firstElementChild;return t.innerHTML=t.innerHTML.trim()?`
${t.innerHTML}
`:`
`,t.outerHTML}const jO=$e.create({name:"blockquote"}),PO=jO.extend({addStorage(){return{markdown:{serialize:Zn.nodes.blockquote,parse:{}}}}}),JO=$e.create({name:"bulletList"}),DS=JO.extend({addStorage(){return{markdown:{serialize(n,e){return n.renderList(e,"  ",()=>(this.editor.storage.markdown.options.bulletListMarker||"-")+" ")},parse:{}}}}}),GO=$e.create({name:"codeBlock"}),KO=GO.extend({addStorage(){return{markdown:{serialize(n,e){n.write("```"+(e.attrs.language||"")+`
`),n.text(e.textContent,!1),n.ensureNewLine(),n.write("```"),n.closeBlock(e)},parse:{setup(n){var e;n.set({langPrefix:(e=this.options.languageClassPrefix)!==null&&e!==void 0?e:"language-"})},updateDOM(n){n.innerHTML=n.innerHTML.replace(/\n<\/code><\/pre>/g,"</code></pre>")}}}}}}),YO=$e.create({name:"hardBreak"}),wS=YO.extend({addStorage(){return{markdown:{serialize(n,e,t,r){for(let i=r+1;i<t.childCount;i++)if(t.child(i).type!=e.type){n.write(n.inTable?tf.storage.markdown.serialize.call(this,n,e,t):`\\
`);return}},parse:{}}}}}),ZO=$e.create({name:"heading"}),XO=ZO.extend({addStorage(){return{markdown:{serialize:Zn.nodes.heading,parse:{}}}}}),QO=$e.create({name:"horizontalRule"}),WO=QO.extend({addStorage(){return{markdown:{serialize:Zn.nodes.horizontal_rule,parse:{}}}}}),e9=$e.create({name:"image"}),t9=e9.extend({addStorage(){return{markdown:{serialize:Zn.nodes.image,parse:{}}}}}),n9=$e.create({name:"listItem"}),r9=n9.extend({addStorage(){return{markdown:{serialize:Zn.nodes.list_item,parse:{}}}}}),i9=$e.create({name:"orderedList"});function l9(n,e,t){let r=0;for(;t-r>0&&e.child(t-r-1).type.name===n.type.name;r++);return r}const u9=i9.extend({addStorage(){return{markdown:{serialize(n,e,t,r){const i=e.attrs.start||1,l=String(i+e.childCount-1).length,o=n.repeat(" ",l+2),f=l9(e,t,r)%2?") ":". ";n.renderList(e,o,h=>{const p=String(i+h);return n.repeat(" ",l-p.length)+p+f})},parse:{}}}}}),s9=$e.create({name:"paragraph"}),o9=s9.extend({addStorage(){return{markdown:{serialize:Zn.nodes.paragraph,parse:{}}}}});function sp(n){var e,t;return(e=n==null||(t=n.content)===null||t===void 0?void 0:t.content)!==null&&e!==void 0?e:[]}const a9=$e.create({name:"table"}),c9=a9.extend({addStorage(){return{markdown:{serialize(n,e,t){if(!f9(e)){tf.storage.markdown.serialize.call(this,n,e,t);return}n.inTable=!0,e.forEach((r,i,l)=>{if(n.write("| "),r.forEach((o,a,f)=>{f&&n.write(" | ");const h=o.firstChild;h.textContent.trim()&&n.renderInline(h)}),n.write(" |"),n.ensureNewLine(),!l){const o=Array.from({length:r.childCount}).map(()=>"---").join(" | ");n.write(`| ${o} |`),n.ensureNewLine()}}),n.closeBlock(e),n.inTable=!1},parse:{}}}}});function lx(n){return n.attrs.colspan>1||n.attrs.rowspan>1}function f9(n){const e=sp(n),t=e[0],r=e.slice(1);return!(sp(t).some(i=>i.type.name!=="tableHeader"||lx(i)||i.childCount>1)||r.some(i=>sp(i).some(l=>l.type.name==="tableHeader"||lx(l)||l.childCount>1)))}const d9=$e.create({name:"taskItem"}),h9=d9.extend({addStorage(){return{markdown:{serialize(n,e){const t=e.attrs.checked?"[x]":"[ ]";n.write(`${t} `),n.renderContent(e)},parse:{updateDOM(n){[...n.querySelectorAll(".task-list-item")].forEach(e=>{const t=e.querySelector("input");e.setAttribute("data-type","taskItem"),t&&(e.setAttribute("data-checked",t.checked),t.remove())})}}}}}}),p9=$e.create({name:"taskList"}),m9=p9.extend({addStorage(){return{markdown:{serialize:DS.storage.markdown.serialize,parse:{setup(n){n.use(_O)},updateDOM(n){[...n.querySelectorAll(".contains-task-list")].forEach(e=>{e.setAttribute("data-type","taskList")})}}}}}}),g9=$e.create({name:"text"}),b9=g9.extend({addStorage(){return{markdown:{serialize(n,e){n.text(IO(e.text))},parse:{}}}}}),y9=Nn.create({name:"bold"}),x9=y9.extend({addStorage(){return{markdown:{serialize:Zn.marks.strong,parse:{}}}}}),k9=Nn.create({name:"code"}),S9=k9.extend({addStorage(){return{markdown:{serialize:Zn.marks.code,parse:{}}}}}),C9=Nn.create({name:"italic"}),v9=C9.extend({addStorage(){return{markdown:{serialize:Zn.marks.em,parse:{}}}}}),E9=Nn.create({name:"link"}),M9=E9.extend({addStorage(){return{markdown:{serialize:Zn.marks.link,parse:{}}}}}),A9=Nn.create({name:"strike"}),T9=A9.extend({addStorage(){return{markdown:{serialize:{open:"~~",close:"~~",expelEnclosingWhitespace:!0},parse:{}}}}}),D9=[PO,DS,KO,wS,XO,WO,tf,t9,r9,u9,o9,c9,h9,m9,b9,x9,S9,TS,v9,M9,T9];function Ac(n){var e,t;const r=(e=n.storage)===null||e===void 0?void 0:e.markdown,i=(t=D9.find(l=>l.name===n.name))===null||t===void 0?void 0:t.storage.markdown;return r||i?{...i,...r}:null}class w9{constructor(e){Mc(this,"editor",null),this.editor=e}serialize(e){const t=new LO(this.nodes,this.marks,{hardBreakNodeName:wS.name});return t.renderContent(e),t.out}get nodes(){var e;return{...Object.fromEntries(Object.keys(this.editor.schema.nodes).map(t=>[t,this.serializeNode(tf)])),...Object.fromEntries((e=this.editor.extensionManager.extensions.filter(t=>t.type==="node"&&this.serializeNode(t)).map(t=>[t.name,this.serializeNode(t)]))!==null&&e!==void 0?e:[])}}get marks(){var e;return{...Object.fromEntries(Object.keys(this.editor.schema.marks).map(t=>[t,this.serializeMark(TS)])),...Object.fromEntries((e=this.editor.extensionManager.extensions.filter(t=>t.type==="mark"&&this.serializeMark(t)).map(t=>[t.name,this.serializeMark(t)]))!==null&&e!==void 0?e:[])}}serializeNode(e){var t;return(t=Ac(e))===null||t===void 0||(t=t.serialize)===null||t===void 0?void 0:t.bind({editor:this.editor,options:e.options})}serializeMark(e){var t;const r=(t=Ac(e))===null||t===void 0?void 0:t.serialize;return r?{...r,open:typeof r.open=="function"?r.open.bind({editor:this.editor,options:e.options}):r.open,close:typeof r.close=="function"?r.close.bind({editor:this.editor,options:e.options}):r.close}:null}}class O9{constructor(e,t){Mc(this,"editor",null),Mc(this,"md",null);let{html:r,linkify:i,breaks:l}=t;this.editor=e,this.md=this.withPatchedRenderer(Jt({html:r,linkify:i,breaks:l}))}parse(e){let{inline:t}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(typeof e=="string"){this.editor.extensionManager.extensions.forEach(l=>{var o;return(o=Ac(l))===null||o===void 0||(o=o.parse)===null||o===void 0||(o=o.setup)===null||o===void 0?void 0:o.call({editor:this.editor,options:l.options},this.md)});const r=this.md.render(e),i=J0(r);return this.editor.extensionManager.extensions.forEach(l=>{var o;return(o=Ac(l))===null||o===void 0||(o=o.parse)===null||o===void 0||(o=o.updateDOM)===null||o===void 0?void 0:o.call({editor:this.editor,options:l.options},i)}),this.normalizeDOM(i,{inline:t,content:e}),i.innerHTML}return e}normalizeDOM(e,t){let{inline:r,content:i}=t;return this.normalizeBlocks(e),e.querySelectorAll("*").forEach(l=>{var o;((o=l.nextSibling)===null||o===void 0?void 0:o.nodeType)===Node.TEXT_NODE&&!l.closest("pre")&&(l.nextSibling.textContent=l.nextSibling.textContent.replace(/^\n/,""))}),r&&this.normalizeInline(e,i),e}normalizeBlocks(e){const r=Object.values(this.editor.schema.nodes).filter(i=>i.isBlock).map(i=>{var l;return(l=i.spec.parseDOM)===null||l===void 0?void 0:l.map(o=>o.tag)}).flat().filter(Boolean).join(",");r&&[...e.querySelectorAll(r)].forEach(i=>{i.parentElement.matches("p")&&qO(i)})}normalizeInline(e,t){var r;if((r=e.firstElementChild)!==null&&r!==void 0&&r.matches("p")){var i,l,o,a;const f=e.firstElementChild,{nextElementSibling:h}=f,p=(i=(l=t.match(/^\s+/))===null||l===void 0?void 0:l[0])!==null&&i!==void 0?i:"",g=h?"":(o=(a=t.match(/\s+$/))===null||a===void 0?void 0:a[0])!==null&&o!==void 0?o:"";if(t.match(/^\n\n/)){f.innerHTML=`${f.innerHTML}${g}`;return}HO(f),e.innerHTML=`${p}${e.innerHTML}${g}`}}withPatchedRenderer(e){const t=r=>function(){const i=r(...arguments);return i===`
`?i:i[i.length-1]===`
`?i.slice(0,-1):i};return e.renderer.rules.hardbreak=t(e.renderer.rules.hardbreak),e.renderer.rules.softbreak=t(e.renderer.rules.softbreak),e.renderer.rules.fence=t(e.renderer.rules.fence),e.renderer.rules.code_block=t(e.renderer.rules.code_block),e.renderer.renderToken=t(e.renderer.renderToken.bind(e.renderer)),e}}const _9=$t.create({name:"markdownClipboard",addOptions(){return{transformPastedText:!1,transformCopiedText:!1}},addProseMirrorPlugins(){return[new Bt({key:new _n("markdownClipboard"),props:{clipboardTextParser:(n,e,t)=>{if(t||!this.options.transformPastedText)return null;const r=this.editor.storage.markdown.parser.parse(n,{inline:!0});return ou.fromSchema(this.editor.schema).parseSlice(J0(r),{preserveWhitespace:!0,context:e})},clipboardTextSerializer:n=>this.options.transformCopiedText?this.editor.storage.markdown.serializer.serialize(n.content):null}})]}}),ux=$t.create({name:"markdown",priority:50,addOptions(){return{html:!0,tightLists:!0,tightListClass:"tight",bulletListMarker:"-",linkify:!1,breaks:!1,transformPastedText:!1,transformCopiedText:!1}},addCommands(){const n=fT.Commands.config.addCommands();return{setContent:(e,t,r)=>i=>n.setContent(i.editor.storage.markdown.parser.parse(e),t,r)(i),insertContentAt:(e,t,r)=>i=>n.insertContentAt(e,i.editor.storage.markdown.parser.parse(t,{inline:!0}),r)(i)}},onBeforeCreate(){this.editor.storage.markdown={options:{...this.options},parser:new O9(this.editor,this.options),serializer:new w9(this.editor),getMarkdown:()=>this.editor.storage.markdown.serializer.serialize(this.editor.state.doc)},this.editor.options.initialContent=this.editor.options.content,this.editor.options.content=this.editor.storage.markdown.parser.parse(this.editor.options.content)},onCreate(){this.editor.options.content=this.editor.options.initialContent,delete this.editor.options.initialContent},addStorage(){return{}},addExtensions(){return[zO.configure({tight:this.options.tightLists,tightClass:this.options.tightListClass}),_9.configure({transformPastedText:this.options.transformPastedText,transformCopiedText:this.options.transformCopiedText})]}});function mt(n){this.content=n}mt.prototype={constructor:mt,find:function(n){for(var e=0;e<this.content.length;e+=2)if(this.content[e]===n)return e;return-1},get:function(n){var e=this.find(n);return e==-1?void 0:this.content[e+1]},update:function(n,e,t){var r=t&&t!=n?this.remove(t):this,i=r.find(n),l=r.content.slice();return i==-1?l.push(t||n,e):(l[i+1]=e,t&&(l[i]=t)),new mt(l)},remove:function(n){var e=this.find(n);if(e==-1)return this;var t=this.content.slice();return t.splice(e,2),new mt(t)},addToStart:function(n,e){return new mt([n,e].concat(this.remove(n).content))},addToEnd:function(n,e){var t=this.remove(n).content.slice();return t.push(n,e),new mt(t)},addBefore:function(n,e,t){var r=this.remove(e),i=r.content.slice(),l=r.find(n);return i.splice(l==-1?i.length:l,0,e,t),new mt(i)},forEach:function(n){for(var e=0;e<this.content.length;e+=2)n(this.content[e],this.content[e+1])},prepend:function(n){return n=mt.from(n),n.size?new mt(n.content.concat(this.subtract(n).content)):this},append:function(n){return n=mt.from(n),n.size?new mt(this.subtract(n).content.concat(n.content)):this},subtract:function(n){var e=this;n=mt.from(n);for(var t=0;t<n.content.length;t+=2)e=e.remove(n.content[t]);return e},toObject:function(){var n={};return this.forEach(function(e,t){n[e]=t}),n},get size(){return this.content.length>>1}};mt.from=function(n){if(n instanceof mt)return n;var e=[];if(n)for(var t in n)e.push(t,n[t]);return new mt(e)};function OS(n,e,t){for(let r=0;;r++){if(r==n.childCount||r==e.childCount)return n.childCount==e.childCount?null:t;let i=n.child(r),l=e.child(r);if(i==l){t+=i.nodeSize;continue}if(!i.sameMarkup(l))return t;if(i.isText&&i.text!=l.text){for(let o=0;i.text[o]==l.text[o];o++)t++;return t}if(i.content.size||l.content.size){let o=OS(i.content,l.content,t+1);if(o!=null)return o}t+=i.nodeSize}}function _S(n,e,t,r){for(let i=n.childCount,l=e.childCount;;){if(i==0||l==0)return i==l?null:{a:t,b:r};let o=n.child(--i),a=e.child(--l),f=o.nodeSize;if(o==a){t-=f,r-=f;continue}if(!o.sameMarkup(a))return{a:t,b:r};if(o.isText&&o.text!=a.text){let h=0,p=Math.min(o.text.length,a.text.length);for(;h<p&&o.text[o.text.length-h-1]==a.text[a.text.length-h-1];)h++,t--,r--;return{a:t,b:r}}if(o.content.size||a.content.size){let h=_S(o.content,a.content,t-1,r-1);if(h)return h}t-=f,r-=f}}class P{constructor(e,t){if(this.content=e,this.size=t||0,t==null)for(let r=0;r<e.length;r++)this.size+=e[r].nodeSize}nodesBetween(e,t,r,i=0,l){for(let o=0,a=0;a<t;o++){let f=this.content[o],h=a+f.nodeSize;if(h>e&&r(f,i+a,l||null,o)!==!1&&f.content.size){let p=a+1;f.nodesBetween(Math.max(0,e-p),Math.min(f.content.size,t-p),r,i+p)}a=h}}descendants(e){this.nodesBetween(0,this.size,e)}textBetween(e,t,r,i){let l="",o=!0;return this.nodesBetween(e,t,(a,f)=>{let h=a.isText?a.text.slice(Math.max(e,f)-f,t-f):a.isLeaf?i?typeof i=="function"?i(a):i:a.type.spec.leafText?a.type.spec.leafText(a):"":"";a.isBlock&&(a.isLeaf&&h||a.isTextblock)&&r&&(o?o=!1:l+=r),l+=h},0),l}append(e){if(!e.size)return this;if(!this.size)return e;let t=this.lastChild,r=e.firstChild,i=this.content.slice(),l=0;for(t.isText&&t.sameMarkup(r)&&(i[i.length-1]=t.withText(t.text+r.text),l=1);l<e.content.length;l++)i.push(e.content[l]);return new P(i,this.size+e.size)}cut(e,t=this.size){if(e==0&&t==this.size)return this;let r=[],i=0;if(t>e)for(let l=0,o=0;o<t;l++){let a=this.content[l],f=o+a.nodeSize;f>e&&((o<e||f>t)&&(a.isText?a=a.cut(Math.max(0,e-o),Math.min(a.text.length,t-o)):a=a.cut(Math.max(0,e-o-1),Math.min(a.content.size,t-o-1))),r.push(a),i+=a.nodeSize),o=f}return new P(r,i)}cutByIndex(e,t){return e==t?P.empty:e==0&&t==this.content.length?this:new P(this.content.slice(e,t))}replaceChild(e,t){let r=this.content[e];if(r==t)return this;let i=this.content.slice(),l=this.size+t.nodeSize-r.nodeSize;return i[e]=t,new P(i,l)}addToStart(e){return new P([e].concat(this.content),this.size+e.nodeSize)}addToEnd(e){return new P(this.content.concat(e),this.size+e.nodeSize)}eq(e){if(this.content.length!=e.content.length)return!1;for(let t=0;t<this.content.length;t++)if(!this.content[t].eq(e.content[t]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(e){let t=this.content[e];if(!t)throw new RangeError("Index "+e+" out of range for "+this);return t}maybeChild(e){return this.content[e]||null}forEach(e){for(let t=0,r=0;t<this.content.length;t++){let i=this.content[t];e(i,r,t),r+=i.nodeSize}}findDiffStart(e,t=0){return OS(this,e,t)}findDiffEnd(e,t=this.size,r=e.size){return _S(this,e,t,r)}findIndex(e,t=-1){if(e==0)return Ja(0,e);if(e==this.size)return Ja(this.content.length,e);if(e>this.size||e<0)throw new RangeError(`Position ${e} outside of fragment (${this})`);for(let r=0,i=0;;r++){let l=this.child(r),o=i+l.nodeSize;if(o>=e)return o==e||t>0?Ja(r+1,o):Ja(r,i);i=o}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map(e=>e.toJSON()):null}static fromJSON(e,t){if(!t)return P.empty;if(!Array.isArray(t))throw new RangeError("Invalid input for Fragment.fromJSON");return new P(t.map(e.nodeFromJSON))}static fromArray(e){if(!e.length)return P.empty;let t,r=0;for(let i=0;i<e.length;i++){let l=e[i];r+=l.nodeSize,i&&l.isText&&e[i-1].sameMarkup(l)?(t||(t=e.slice(0,i)),t[t.length-1]=l.withText(t[t.length-1].text+l.text)):t&&t.push(l)}return new P(t||e,r)}static from(e){if(!e)return P.empty;if(e instanceof P)return e;if(Array.isArray(e))return this.fromArray(e);if(e.attrs)return new P([e],e.nodeSize);throw new RangeError("Can not convert "+e+" to a Fragment"+(e.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}}P.empty=new P([],0);const op={index:0,offset:0};function Ja(n,e){return op.index=n,op.offset=e,op}function Tc(n,e){if(n===e)return!0;if(!(n&&typeof n=="object")||!(e&&typeof e=="object"))return!1;let t=Array.isArray(n);if(Array.isArray(e)!=t)return!1;if(t){if(n.length!=e.length)return!1;for(let r=0;r<n.length;r++)if(!Tc(n[r],e[r]))return!1}else{for(let r in n)if(!(r in e)||!Tc(n[r],e[r]))return!1;for(let r in e)if(!(r in n))return!1}return!0}class ze{constructor(e,t){this.type=e,this.attrs=t}addToSet(e){let t,r=!1;for(let i=0;i<e.length;i++){let l=e[i];if(this.eq(l))return e;if(this.type.excludes(l.type))t||(t=e.slice(0,i));else{if(l.type.excludes(this.type))return e;!r&&l.type.rank>this.type.rank&&(t||(t=e.slice(0,i)),t.push(this),r=!0),t&&t.push(l)}}return t||(t=e.slice()),r||t.push(this),t}removeFromSet(e){for(let t=0;t<e.length;t++)if(this.eq(e[t]))return e.slice(0,t).concat(e.slice(t+1));return e}isInSet(e){for(let t=0;t<e.length;t++)if(this.eq(e[t]))return!0;return!1}eq(e){return this==e||this.type==e.type&&Tc(this.attrs,e.attrs)}toJSON(){let e={type:this.type.name};for(let t in this.attrs){e.attrs=this.attrs;break}return e}static fromJSON(e,t){if(!t)throw new RangeError("Invalid input for Mark.fromJSON");let r=e.marks[t.type];if(!r)throw new RangeError(`There is no mark type ${t.type} in this schema`);let i=r.create(t.attrs);return r.checkAttrs(i.attrs),i}static sameSet(e,t){if(e==t)return!0;if(e.length!=t.length)return!1;for(let r=0;r<e.length;r++)if(!e[r].eq(t[r]))return!1;return!0}static setFrom(e){if(!e||Array.isArray(e)&&e.length==0)return ze.none;if(e instanceof ze)return[e];let t=e.slice();return t.sort((r,i)=>r.type.rank-i.type.rank),t}}ze.none=[];class Dc extends Error{}class te{constructor(e,t,r){this.content=e,this.openStart=t,this.openEnd=r}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(e,t){let r=RS(this.content,e+this.openStart,t);return r&&new te(r,this.openStart,this.openEnd)}removeBetween(e,t){return new te(NS(this.content,e+this.openStart,t+this.openStart),this.openStart,this.openEnd)}eq(e){return this.content.eq(e.content)&&this.openStart==e.openStart&&this.openEnd==e.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let e={content:this.content.toJSON()};return this.openStart>0&&(e.openStart=this.openStart),this.openEnd>0&&(e.openEnd=this.openEnd),e}static fromJSON(e,t){if(!t)return te.empty;let r=t.openStart||0,i=t.openEnd||0;if(typeof r!="number"||typeof i!="number")throw new RangeError("Invalid input for Slice.fromJSON");return new te(P.fromJSON(e,t.content),r,i)}static maxOpen(e,t=!0){let r=0,i=0;for(let l=e.firstChild;l&&!l.isLeaf&&(t||!l.type.spec.isolating);l=l.firstChild)r++;for(let l=e.lastChild;l&&!l.isLeaf&&(t||!l.type.spec.isolating);l=l.lastChild)i++;return new te(e,r,i)}}te.empty=new te(P.empty,0,0);function NS(n,e,t){let{index:r,offset:i}=n.findIndex(e),l=n.maybeChild(r),{index:o,offset:a}=n.findIndex(t);if(i==e||l.isText){if(a!=t&&!n.child(o).isText)throw new RangeError("Removing non-flat range");return n.cut(0,e).append(n.cut(t))}if(r!=o)throw new RangeError("Removing non-flat range");return n.replaceChild(r,l.copy(NS(l.content,e-i-1,t-i-1)))}function RS(n,e,t,r){let{index:i,offset:l}=n.findIndex(e),o=n.maybeChild(i);if(l==e||o.isText)return n.cut(0,e).append(t).append(n.cut(e));let a=RS(o.content,e-l-1,t);return a&&n.replaceChild(i,o.copy(a))}function N9(n,e,t){if(t.openStart>n.depth)throw new Dc("Inserted content deeper than insertion position");if(n.depth-t.openStart!=e.depth-t.openEnd)throw new Dc("Inconsistent open depths");return zS(n,e,t,0)}function zS(n,e,t,r){let i=n.index(r),l=n.node(r);if(i==e.index(r)&&r<n.depth-t.openStart){let o=zS(n,e,t,r+1);return l.copy(l.content.replaceChild(i,o))}else if(t.content.size)if(!t.openStart&&!t.openEnd&&n.depth==r&&e.depth==r){let o=n.parent,a=o.content;return Zi(o,a.cut(0,n.parentOffset).append(t.content).append(a.cut(e.parentOffset)))}else{let{start:o,end:a}=R9(t,n);return Zi(l,$S(n,o,a,e,r))}else return Zi(l,wc(n,e,r))}function BS(n,e){if(!e.type.compatibleContent(n.type))throw new Dc("Cannot join "+e.type.name+" onto "+n.type.name)}function Qp(n,e,t){let r=n.node(t);return BS(r,e.node(t)),r}function Yi(n,e){let t=e.length-1;t>=0&&n.isText&&n.sameMarkup(e[t])?e[t]=n.withText(e[t].text+n.text):e.push(n)}function Us(n,e,t,r){let i=(e||n).node(t),l=0,o=e?e.index(t):i.childCount;n&&(l=n.index(t),n.depth>t?l++:n.textOffset&&(Yi(n.nodeAfter,r),l++));for(let a=l;a<o;a++)Yi(i.child(a),r);e&&e.depth==t&&e.textOffset&&Yi(e.nodeBefore,r)}function Zi(n,e){return n.type.checkContent(e),n.copy(e)}function $S(n,e,t,r,i){let l=n.depth>i&&Qp(n,e,i+1),o=r.depth>i&&Qp(t,r,i+1),a=[];return Us(null,n,i,a),l&&o&&e.index(i)==t.index(i)?(BS(l,o),Yi(Zi(l,$S(n,e,t,r,i+1)),a)):(l&&Yi(Zi(l,wc(n,e,i+1)),a),Us(e,t,i,a),o&&Yi(Zi(o,wc(t,r,i+1)),a)),Us(r,null,i,a),new P(a)}function wc(n,e,t){let r=[];if(Us(null,n,t,r),n.depth>t){let i=Qp(n,e,t+1);Yi(Zi(i,wc(n,e,t+1)),r)}return Us(e,null,t,r),new P(r)}function R9(n,e){let t=e.depth-n.openStart,i=e.node(t).copy(n.content);for(let l=t-1;l>=0;l--)i=e.node(l).copy(P.from(i));return{start:i.resolveNoCache(n.openStart+t),end:i.resolveNoCache(i.content.size-n.openEnd-t)}}class io{constructor(e,t,r){this.pos=e,this.path=t,this.parentOffset=r,this.depth=t.length/3-1}resolveDepth(e){return e==null?this.depth:e<0?this.depth+e:e}get parent(){return this.node(this.depth)}get doc(){return this.node(0)}node(e){return this.path[this.resolveDepth(e)*3]}index(e){return this.path[this.resolveDepth(e)*3+1]}indexAfter(e){return e=this.resolveDepth(e),this.index(e)+(e==this.depth&&!this.textOffset?0:1)}start(e){return e=this.resolveDepth(e),e==0?0:this.path[e*3-1]+1}end(e){return e=this.resolveDepth(e),this.start(e)+this.node(e).content.size}before(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position before the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]}after(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position after the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]+this.path[e*3].nodeSize}get textOffset(){return this.pos-this.path[this.path.length-1]}get nodeAfter(){let e=this.parent,t=this.index(this.depth);if(t==e.childCount)return null;let r=this.pos-this.path[this.path.length-1],i=e.child(t);return r?e.child(t).cut(r):i}get nodeBefore(){let e=this.index(this.depth),t=this.pos-this.path[this.path.length-1];return t?this.parent.child(e).cut(0,t):e==0?null:this.parent.child(e-1)}posAtIndex(e,t){t=this.resolveDepth(t);let r=this.path[t*3],i=t==0?0:this.path[t*3-1]+1;for(let l=0;l<e;l++)i+=r.child(l).nodeSize;return i}marks(){let e=this.parent,t=this.index();if(e.content.size==0)return ze.none;if(this.textOffset)return e.child(t).marks;let r=e.maybeChild(t-1),i=e.maybeChild(t);if(!r){let a=r;r=i,i=a}let l=r.marks;for(var o=0;o<l.length;o++)l[o].type.spec.inclusive===!1&&(!i||!l[o].isInSet(i.marks))&&(l=l[o--].removeFromSet(l));return l}marksAcross(e){let t=this.parent.maybeChild(this.index());if(!t||!t.isInline)return null;let r=t.marks,i=e.parent.maybeChild(e.index());for(var l=0;l<r.length;l++)r[l].type.spec.inclusive===!1&&(!i||!r[l].isInSet(i.marks))&&(r=r[l--].removeFromSet(r));return r}sharedDepth(e){for(let t=this.depth;t>0;t--)if(this.start(t)<=e&&this.end(t)>=e)return t;return 0}blockRange(e=this,t){if(e.pos<this.pos)return e.blockRange(this);for(let r=this.depth-(this.parent.inlineContent||this.pos==e.pos?1:0);r>=0;r--)if(e.pos<=this.end(r)&&(!t||t(this.node(r))))return new Oc(this,e,r);return null}sameParent(e){return this.pos-this.parentOffset==e.pos-e.parentOffset}max(e){return e.pos>this.pos?e:this}min(e){return e.pos<this.pos?e:this}toString(){let e="";for(let t=1;t<=this.depth;t++)e+=(e?"/":"")+this.node(t).type.name+"_"+this.index(t-1);return e+":"+this.parentOffset}static resolve(e,t){if(!(t>=0&&t<=e.content.size))throw new RangeError("Position "+t+" out of range");let r=[],i=0,l=t;for(let o=e;;){let{index:a,offset:f}=o.content.findIndex(l),h=l-f;if(r.push(o,a,i+f),!h||(o=o.child(a),o.isText))break;l=h-1,i+=f+1}return new io(t,r,l)}static resolveCached(e,t){let r=sx.get(e);if(r)for(let l=0;l<r.elts.length;l++){let o=r.elts[l];if(o.pos==t)return o}else sx.set(e,r=new z9);let i=r.elts[r.i]=io.resolve(e,t);return r.i=(r.i+1)%B9,i}}class z9{constructor(){this.elts=[],this.i=0}}const B9=12,sx=new WeakMap;class Oc{constructor(e,t,r){this.$from=e,this.$to=t,this.depth=r}get start(){return this.$from.before(this.depth+1)}get end(){return this.$to.after(this.depth+1)}get parent(){return this.$from.node(this.depth)}get startIndex(){return this.$from.index(this.depth)}get endIndex(){return this.$to.indexAfter(this.depth)}}const $9=Object.create(null);let Xi=class Wp{constructor(e,t,r,i=ze.none){this.type=e,this.attrs=t,this.marks=i,this.content=r||P.empty}get children(){return this.content.content}get nodeSize(){return this.isLeaf?1:2+this.content.size}get childCount(){return this.content.childCount}child(e){return this.content.child(e)}maybeChild(e){return this.content.maybeChild(e)}forEach(e){this.content.forEach(e)}nodesBetween(e,t,r,i=0){this.content.nodesBetween(e,t,r,i,this)}descendants(e){this.nodesBetween(0,this.content.size,e)}get textContent(){return this.isLeaf&&this.type.spec.leafText?this.type.spec.leafText(this):this.textBetween(0,this.content.size,"")}textBetween(e,t,r,i){return this.content.textBetween(e,t,r,i)}get firstChild(){return this.content.firstChild}get lastChild(){return this.content.lastChild}eq(e){return this==e||this.sameMarkup(e)&&this.content.eq(e.content)}sameMarkup(e){return this.hasMarkup(e.type,e.attrs,e.marks)}hasMarkup(e,t,r){return this.type==e&&Tc(this.attrs,t||e.defaultAttrs||$9)&&ze.sameSet(this.marks,r||ze.none)}copy(e=null){return e==this.content?this:new Wp(this.type,this.attrs,e,this.marks)}mark(e){return e==this.marks?this:new Wp(this.type,this.attrs,this.content,e)}cut(e,t=this.content.size){return e==0&&t==this.content.size?this:this.copy(this.content.cut(e,t))}slice(e,t=this.content.size,r=!1){if(e==t)return te.empty;let i=this.resolve(e),l=this.resolve(t),o=r?0:i.sharedDepth(t),a=i.start(o),h=i.node(o).content.cut(i.pos-a,l.pos-a);return new te(h,i.depth-o,l.depth-o)}replace(e,t,r){return N9(this.resolve(e),this.resolve(t),r)}nodeAt(e){for(let t=this;;){let{index:r,offset:i}=t.content.findIndex(e);if(t=t.maybeChild(r),!t)return null;if(i==e||t.isText)return t;e-=i+1}}childAfter(e){let{index:t,offset:r}=this.content.findIndex(e);return{node:this.content.maybeChild(t),index:t,offset:r}}childBefore(e){if(e==0)return{node:null,index:0,offset:0};let{index:t,offset:r}=this.content.findIndex(e);if(r<e)return{node:this.content.child(t),index:t,offset:r};let i=this.content.child(t-1);return{node:i,index:t-1,offset:r-i.nodeSize}}resolve(e){return io.resolveCached(this,e)}resolveNoCache(e){return io.resolve(this,e)}rangeHasMark(e,t,r){let i=!1;return t>e&&this.nodesBetween(e,t,l=>(r.isInSet(l.marks)&&(i=!0),!i)),i}get isBlock(){return this.type.isBlock}get isTextblock(){return this.type.isTextblock}get inlineContent(){return this.type.inlineContent}get isInline(){return this.type.isInline}get isText(){return this.type.isText}get isLeaf(){return this.type.isLeaf}get isAtom(){return this.type.isAtom}toString(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);let e=this.type.name;return this.content.size&&(e+="("+this.content.toStringInner()+")"),FS(this.marks,e)}contentMatchAt(e){let t=this.type.contentMatch.matchFragment(this.content,0,e);if(!t)throw new Error("Called contentMatchAt on a node with invalid content");return t}canReplace(e,t,r=P.empty,i=0,l=r.childCount){let o=this.contentMatchAt(e).matchFragment(r,i,l),a=o&&o.matchFragment(this.content,t);if(!a||!a.validEnd)return!1;for(let f=i;f<l;f++)if(!this.type.allowsMarks(r.child(f).marks))return!1;return!0}canReplaceWith(e,t,r,i){if(i&&!this.type.allowsMarks(i))return!1;let l=this.contentMatchAt(e).matchType(r),o=l&&l.matchFragment(this.content,t);return o?o.validEnd:!1}canAppend(e){return e.content.size?this.canReplace(this.childCount,this.childCount,e.content):this.type.compatibleContent(e.type)}check(){this.type.checkContent(this.content),this.type.checkAttrs(this.attrs);let e=ze.none;for(let t=0;t<this.marks.length;t++){let r=this.marks[t];r.type.checkAttrs(r.attrs),e=r.addToSet(e)}if(!ze.sameSet(e,this.marks))throw new RangeError(`Invalid collection of marks for node ${this.type.name}: ${this.marks.map(t=>t.type.name)}`);this.content.forEach(t=>t.check())}toJSON(){let e={type:this.type.name};for(let t in this.attrs){e.attrs=this.attrs;break}return this.content.size&&(e.content=this.content.toJSON()),this.marks.length&&(e.marks=this.marks.map(t=>t.toJSON())),e}static fromJSON(e,t){if(!t)throw new RangeError("Invalid input for Node.fromJSON");let r;if(t.marks){if(!Array.isArray(t.marks))throw new RangeError("Invalid mark data for Node.fromJSON");r=t.marks.map(e.markFromJSON)}if(t.type=="text"){if(typeof t.text!="string")throw new RangeError("Invalid text node in JSON");return e.text(t.text,r)}let i=P.fromJSON(e,t.content),l=e.nodeType(t.type).create(t.attrs,i,r);return l.type.checkAttrs(l.attrs),l}};Xi.prototype.text=void 0;class _c extends Xi{constructor(e,t,r,i){if(super(e,t,null,i),!r)throw new RangeError("Empty text nodes are not allowed");this.text=r}toString(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):FS(this.marks,JSON.stringify(this.text))}get textContent(){return this.text}textBetween(e,t){return this.text.slice(e,t)}get nodeSize(){return this.text.length}mark(e){return e==this.marks?this:new _c(this.type,this.attrs,this.text,e)}withText(e){return e==this.text?this:new _c(this.type,this.attrs,e,this.marks)}cut(e=0,t=this.text.length){return e==0&&t==this.text.length?this:this.withText(this.text.slice(e,t))}eq(e){return this.sameMarkup(e)&&this.text==e.text}toJSON(){let e=super.toJSON();return e.text=this.text,e}}function FS(n,e){for(let t=n.length-1;t>=0;t--)e=n[t].type.name+"("+e+")";return e}class il{constructor(e){this.validEnd=e,this.next=[],this.wrapCache=[]}static parse(e,t){let r=new F9(e,t);if(r.next==null)return il.empty;let i=LS(r);r.next&&r.err("Unexpected trailing text");let l=j9(U9(i));return P9(l,r),l}matchType(e){for(let t=0;t<this.next.length;t++)if(this.next[t].type==e)return this.next[t].next;return null}matchFragment(e,t=0,r=e.childCount){let i=this;for(let l=t;i&&l<r;l++)i=i.matchType(e.child(l).type);return i}get inlineContent(){return this.next.length!=0&&this.next[0].type.isInline}get defaultType(){for(let e=0;e<this.next.length;e++){let{type:t}=this.next[e];if(!(t.isText||t.hasRequiredAttrs()))return t}return null}compatible(e){for(let t=0;t<this.next.length;t++)for(let r=0;r<e.next.length;r++)if(this.next[t].type==e.next[r].type)return!0;return!1}fillBefore(e,t=!1,r=0){let i=[this];function l(o,a){let f=o.matchFragment(e,r);if(f&&(!t||f.validEnd))return P.from(a.map(h=>h.createAndFill()));for(let h=0;h<o.next.length;h++){let{type:p,next:g}=o.next[h];if(!(p.isText||p.hasRequiredAttrs())&&i.indexOf(g)==-1){i.push(g);let y=l(g,a.concat(p));if(y)return y}}return null}return l(this,[])}findWrapping(e){for(let r=0;r<this.wrapCache.length;r+=2)if(this.wrapCache[r]==e)return this.wrapCache[r+1];let t=this.computeWrapping(e);return this.wrapCache.push(e,t),t}computeWrapping(e){let t=Object.create(null),r=[{match:this,type:null,via:null}];for(;r.length;){let i=r.shift(),l=i.match;if(l.matchType(e)){let o=[];for(let a=i;a.type;a=a.via)o.push(a.type);return o.reverse()}for(let o=0;o<l.next.length;o++){let{type:a,next:f}=l.next[o];!a.isLeaf&&!a.hasRequiredAttrs()&&!(a.name in t)&&(!i.type||f.validEnd)&&(r.push({match:a.contentMatch,type:a,via:i}),t[a.name]=!0)}}return null}get edgeCount(){return this.next.length}edge(e){if(e>=this.next.length)throw new RangeError(`There's no ${e}th edge in this content match`);return this.next[e]}toString(){let e=[];function t(r){e.push(r);for(let i=0;i<r.next.length;i++)e.indexOf(r.next[i].next)==-1&&t(r.next[i].next)}return t(this),e.map((r,i)=>{let l=i+(r.validEnd?"*":" ")+" ";for(let o=0;o<r.next.length;o++)l+=(o?", ":"")+r.next[o].type.name+"->"+e.indexOf(r.next[o].next);return l}).join(`
`)}}il.empty=new il(!0);class F9{constructor(e,t){this.string=e,this.nodeTypes=t,this.inline=null,this.pos=0,this.tokens=e.split(/\s*(?=\b|\W|$)/),this.tokens[this.tokens.length-1]==""&&this.tokens.pop(),this.tokens[0]==""&&this.tokens.shift()}get next(){return this.tokens[this.pos]}eat(e){return this.next==e&&(this.pos++||!0)}err(e){throw new SyntaxError(e+" (in content expression '"+this.string+"')")}}function LS(n){let e=[];do e.push(L9(n));while(n.eat("|"));return e.length==1?e[0]:{type:"choice",exprs:e}}function L9(n){let e=[];do e.push(I9(n));while(n.next&&n.next!=")"&&n.next!="|");return e.length==1?e[0]:{type:"seq",exprs:e}}function I9(n){let e=V9(n);for(;;)if(n.eat("+"))e={type:"plus",expr:e};else if(n.eat("*"))e={type:"star",expr:e};else if(n.eat("?"))e={type:"opt",expr:e};else if(n.eat("{"))e=q9(n,e);else break;return e}function ox(n){/\D/.test(n.next)&&n.err("Expected number, got '"+n.next+"'");let e=Number(n.next);return n.pos++,e}function q9(n,e){let t=ox(n),r=t;return n.eat(",")&&(n.next!="}"?r=ox(n):r=-1),n.eat("}")||n.err("Unclosed braced range"),{type:"range",min:t,max:r,expr:e}}function H9(n,e){let t=n.nodeTypes,r=t[e];if(r)return[r];let i=[];for(let l in t){let o=t[l];o.isInGroup(e)&&i.push(o)}return i.length==0&&n.err("No node type or group '"+e+"' found"),i}function V9(n){if(n.eat("(")){let e=LS(n);return n.eat(")")||n.err("Missing closing paren"),e}else if(/\W/.test(n.next))n.err("Unexpected token '"+n.next+"'");else{let e=H9(n,n.next).map(t=>(n.inline==null?n.inline=t.isInline:n.inline!=t.isInline&&n.err("Mixing inline and block content"),{type:"name",value:t}));return n.pos++,e.length==1?e[0]:{type:"choice",exprs:e}}}function U9(n){let e=[[]];return i(l(n,0),t()),e;function t(){return e.push([])-1}function r(o,a,f){let h={term:f,to:a};return e[o].push(h),h}function i(o,a){o.forEach(f=>f.to=a)}function l(o,a){if(o.type=="choice")return o.exprs.reduce((f,h)=>f.concat(l(h,a)),[]);if(o.type=="seq")for(let f=0;;f++){let h=l(o.exprs[f],a);if(f==o.exprs.length-1)return h;i(h,a=t())}else if(o.type=="star"){let f=t();return r(a,f),i(l(o.expr,f),f),[r(f)]}else if(o.type=="plus"){let f=t();return i(l(o.expr,a),f),i(l(o.expr,f),f),[r(f)]}else{if(o.type=="opt")return[r(a)].concat(l(o.expr,a));if(o.type=="range"){let f=a;for(let h=0;h<o.min;h++){let p=t();i(l(o.expr,f),p),f=p}if(o.max==-1)i(l(o.expr,f),f);else for(let h=o.min;h<o.max;h++){let p=t();r(f,p),i(l(o.expr,f),p),f=p}return[r(f)]}else{if(o.type=="name")return[r(a,void 0,o.value)];throw new Error("Unknown expr type")}}}}function IS(n,e){return e-n}function ax(n,e){let t=[];return r(e),t.sort(IS);function r(i){let l=n[i];if(l.length==1&&!l[0].term)return r(l[0].to);t.push(i);for(let o=0;o<l.length;o++){let{term:a,to:f}=l[o];!a&&t.indexOf(f)==-1&&r(f)}}}function j9(n){let e=Object.create(null);return t(ax(n,0));function t(r){let i=[];r.forEach(o=>{n[o].forEach(({term:a,to:f})=>{if(!a)return;let h;for(let p=0;p<i.length;p++)i[p][0]==a&&(h=i[p][1]);ax(n,f).forEach(p=>{h||i.push([a,h=[]]),h.indexOf(p)==-1&&h.push(p)})})});let l=e[r.join(",")]=new il(r.indexOf(n.length-1)>-1);for(let o=0;o<i.length;o++){let a=i[o][1].sort(IS);l.next.push({type:i[o][0],next:e[a.join(",")]||t(a)})}return l}}function P9(n,e){for(let t=0,r=[n];t<r.length;t++){let i=r[t],l=!i.validEnd,o=[];for(let a=0;a<i.next.length;a++){let{type:f,next:h}=i.next[a];o.push(f.name),l&&!(f.isText||f.hasRequiredAttrs())&&(l=!1),r.indexOf(h)==-1&&r.push(h)}l&&e.err("Only non-generatable nodes ("+o.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}function qS(n){let e=Object.create(null);for(let t in n){let r=n[t];if(!r.hasDefault)return null;e[t]=r.default}return e}function HS(n,e){let t=Object.create(null);for(let r in n){let i=e&&e[r];if(i===void 0){let l=n[r];if(l.hasDefault)i=l.default;else throw new RangeError("No value supplied for attribute "+r)}t[r]=i}return t}function VS(n,e,t,r){for(let i in e)if(!(i in n))throw new RangeError(`Unsupported attribute ${i} for ${t} of type ${i}`);for(let i in n){let l=n[i];l.validate&&l.validate(e[i])}}function US(n,e){let t=Object.create(null);if(e)for(let r in e)t[r]=new G9(n,r,e[r]);return t}let cx=class jS{constructor(e,t,r){this.name=e,this.schema=t,this.spec=r,this.markSet=null,this.groups=r.group?r.group.split(" "):[],this.attrs=US(e,r.attrs),this.defaultAttrs=qS(this.attrs),this.contentMatch=null,this.inlineContent=null,this.isBlock=!(r.inline||e=="text"),this.isText=e=="text"}get isInline(){return!this.isBlock}get isTextblock(){return this.isBlock&&this.inlineContent}get isLeaf(){return this.contentMatch==il.empty}get isAtom(){return this.isLeaf||!!this.spec.atom}isInGroup(e){return this.groups.indexOf(e)>-1}get whitespace(){return this.spec.whitespace||(this.spec.code?"pre":"normal")}hasRequiredAttrs(){for(let e in this.attrs)if(this.attrs[e].isRequired)return!0;return!1}compatibleContent(e){return this==e||this.contentMatch.compatible(e.contentMatch)}computeAttrs(e){return!e&&this.defaultAttrs?this.defaultAttrs:HS(this.attrs,e)}create(e=null,t,r){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new Xi(this,this.computeAttrs(e),P.from(t),ze.setFrom(r))}createChecked(e=null,t,r){return t=P.from(t),this.checkContent(t),new Xi(this,this.computeAttrs(e),t,ze.setFrom(r))}createAndFill(e=null,t,r){if(e=this.computeAttrs(e),t=P.from(t),t.size){let o=this.contentMatch.fillBefore(t);if(!o)return null;t=o.append(t)}let i=this.contentMatch.matchFragment(t),l=i&&i.fillBefore(P.empty,!0);return l?new Xi(this,e,t.append(l),ze.setFrom(r)):null}validContent(e){let t=this.contentMatch.matchFragment(e);if(!t||!t.validEnd)return!1;for(let r=0;r<e.childCount;r++)if(!this.allowsMarks(e.child(r).marks))return!1;return!0}checkContent(e){if(!this.validContent(e))throw new RangeError(`Invalid content for node ${this.name}: ${e.toString().slice(0,50)}`)}checkAttrs(e){VS(this.attrs,e,"node",this.name)}allowsMarkType(e){return this.markSet==null||this.markSet.indexOf(e)>-1}allowsMarks(e){if(this.markSet==null)return!0;for(let t=0;t<e.length;t++)if(!this.allowsMarkType(e[t].type))return!1;return!0}allowedMarks(e){if(this.markSet==null)return e;let t;for(let r=0;r<e.length;r++)this.allowsMarkType(e[r].type)?t&&t.push(e[r]):t||(t=e.slice(0,r));return t?t.length?t:ze.none:e}static compile(e,t){let r=Object.create(null);e.forEach((l,o)=>r[l]=new jS(l,t,o));let i=t.spec.topNode||"doc";if(!r[i])throw new RangeError("Schema is missing its top node type ('"+i+"')");if(!r.text)throw new RangeError("Every schema needs a 'text' type");for(let l in r.text.attrs)throw new RangeError("The text node type should not have attributes");return r}};function J9(n,e,t){let r=t.split("|");return i=>{let l=i===null?"null":typeof i;if(r.indexOf(l)<0)throw new RangeError(`Expected value of type ${r} for attribute ${e} on type ${n}, got ${l}`)}}class G9{constructor(e,t,r){this.hasDefault=Object.prototype.hasOwnProperty.call(r,"default"),this.default=r.default,this.validate=typeof r.validate=="string"?J9(e,t,r.validate):r.validate}get isRequired(){return!this.hasDefault}}class G0{constructor(e,t,r,i){this.name=e,this.rank=t,this.schema=r,this.spec=i,this.attrs=US(e,i.attrs),this.excluded=null;let l=qS(this.attrs);this.instance=l?new ze(this,l):null}create(e=null){return!e&&this.instance?this.instance:new ze(this,HS(this.attrs,e))}static compile(e,t){let r=Object.create(null),i=0;return e.forEach((l,o)=>r[l]=new G0(l,i++,t,o)),r}removeFromSet(e){for(var t=0;t<e.length;t++)e[t].type==this&&(e=e.slice(0,t).concat(e.slice(t+1)),t--);return e}isInSet(e){for(let t=0;t<e.length;t++)if(e[t].type==this)return e[t]}checkAttrs(e){VS(this.attrs,e,"mark",this.name)}excludes(e){return this.excluded.indexOf(e)>-1}}class K9{constructor(e){this.linebreakReplacement=null,this.cached=Object.create(null);let t=this.spec={};for(let i in e)t[i]=e[i];t.nodes=mt.from(e.nodes),t.marks=mt.from(e.marks||{}),this.nodes=cx.compile(this.spec.nodes,this),this.marks=G0.compile(this.spec.marks,this);let r=Object.create(null);for(let i in this.nodes){if(i in this.marks)throw new RangeError(i+" can not be both a node and a mark");let l=this.nodes[i],o=l.spec.content||"",a=l.spec.marks;if(l.contentMatch=r[o]||(r[o]=il.parse(o,this.nodes)),l.inlineContent=l.contentMatch.inlineContent,l.spec.linebreakReplacement){if(this.linebreakReplacement)throw new RangeError("Multiple linebreak nodes defined");if(!l.isInline||!l.isLeaf)throw new RangeError("Linebreak replacement nodes must be inline leaf nodes");this.linebreakReplacement=l}l.markSet=a=="_"?null:a?fx(this,a.split(" ")):a==""||!l.inlineContent?[]:null}for(let i in this.marks){let l=this.marks[i],o=l.spec.excludes;l.excluded=o==null?[l]:o==""?[]:fx(this,o.split(" "))}this.nodeFromJSON=this.nodeFromJSON.bind(this),this.markFromJSON=this.markFromJSON.bind(this),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached.wrappings=Object.create(null)}node(e,t=null,r,i){if(typeof e=="string")e=this.nodeType(e);else if(e instanceof cx){if(e.schema!=this)throw new RangeError("Node type from different schema used ("+e.name+")")}else throw new RangeError("Invalid node type: "+e);return e.createChecked(t,r,i)}text(e,t){let r=this.nodes.text;return new _c(r,r.defaultAttrs,e,ze.setFrom(t))}mark(e,t){return typeof e=="string"&&(e=this.marks[e]),e.create(t)}nodeFromJSON(e){return Xi.fromJSON(this,e)}markFromJSON(e){return ze.fromJSON(this,e)}nodeType(e){let t=this.nodes[e];if(!t)throw new RangeError("Unknown node type: "+e);return t}}function fx(n,e){let t=[];for(let r=0;r<e.length;r++){let i=e[r],l=n.marks[i],o=l;if(l)t.push(l);else for(let a in n.marks){let f=n.marks[a];(i=="_"||f.spec.group&&f.spec.group.split(" ").indexOf(i)>-1)&&t.push(o=f)}if(!o)throw new SyntaxError("Unknown mark type: '"+e[r]+"'")}return t}function Y9(n){return n.tag!=null}function Z9(n){return n.style!=null}class Qi{constructor(e,t){this.schema=e,this.rules=t,this.tags=[],this.styles=[];let r=this.matchedStyles=[];t.forEach(i=>{if(Y9(i))this.tags.push(i);else if(Z9(i)){let l=/[^=]*/.exec(i.style)[0];r.indexOf(l)<0&&r.push(l),this.styles.push(i)}}),this.normalizeLists=!this.tags.some(i=>{if(!/^(ul|ol)\b/.test(i.tag)||!i.node)return!1;let l=e.nodes[i.node];return l.contentMatch.matchType(l)})}parse(e,t={}){let r=new hx(this,t,!1);return r.addAll(e,ze.none,t.from,t.to),r.finish()}parseSlice(e,t={}){let r=new hx(this,t,!0);return r.addAll(e,ze.none,t.from,t.to),te.maxOpen(r.finish())}matchTag(e,t,r){for(let i=r?this.tags.indexOf(r)+1:0;i<this.tags.length;i++){let l=this.tags[i];if(W9(e,l.tag)&&(l.namespace===void 0||e.namespaceURI==l.namespace)&&(!l.context||t.matchesContext(l.context))){if(l.getAttrs){let o=l.getAttrs(e);if(o===!1)continue;l.attrs=o||void 0}return l}}}matchStyle(e,t,r,i){for(let l=i?this.styles.indexOf(i)+1:0;l<this.styles.length;l++){let o=this.styles[l],a=o.style;if(!(a.indexOf(e)!=0||o.context&&!r.matchesContext(o.context)||a.length>e.length&&(a.charCodeAt(e.length)!=61||a.slice(e.length+1)!=t))){if(o.getAttrs){let f=o.getAttrs(t);if(f===!1)continue;o.attrs=f||void 0}return o}}}static schemaRules(e){let t=[];function r(i){let l=i.priority==null?50:i.priority,o=0;for(;o<t.length;o++){let a=t[o];if((a.priority==null?50:a.priority)<l)break}t.splice(o,0,i)}for(let i in e.marks){let l=e.marks[i].spec.parseDOM;l&&l.forEach(o=>{r(o=px(o)),o.mark||o.ignore||o.clearMark||(o.mark=i)})}for(let i in e.nodes){let l=e.nodes[i].spec.parseDOM;l&&l.forEach(o=>{r(o=px(o)),o.node||o.ignore||o.mark||(o.node=i)})}return t}static fromSchema(e){return e.cached.domParser||(e.cached.domParser=new Qi(e,Qi.schemaRules(e)))}}const PS={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},X9={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},JS={ol:!0,ul:!0},lo=1,e0=2,lc=4;function dx(n,e,t){return e!=null?(e?lo:0)|(e==="full"?e0:0):n&&n.whitespace=="pre"?lo|e0:t&-5}class Ga{constructor(e,t,r,i,l,o){this.type=e,this.attrs=t,this.marks=r,this.solid=i,this.options=o,this.content=[],this.activeMarks=ze.none,this.match=l||(o&lc?null:e.contentMatch)}findWrapping(e){if(!this.match){if(!this.type)return[];let t=this.type.contentMatch.fillBefore(P.from(e));if(t)this.match=this.type.contentMatch.matchFragment(t);else{let r=this.type.contentMatch,i;return(i=r.findWrapping(e.type))?(this.match=r,i):null}}return this.match.findWrapping(e.type)}finish(e){if(!(this.options&lo)){let r=this.content[this.content.length-1],i;if(r&&r.isText&&(i=/[ \t\r\n\u000c]+$/.exec(r.text))){let l=r;r.text.length==i[0].length?this.content.pop():this.content[this.content.length-1]=l.withText(l.text.slice(0,l.text.length-i[0].length))}}let t=P.from(this.content);return!e&&this.match&&(t=t.append(this.match.fillBefore(P.empty,!0))),this.type?this.type.create(this.attrs,t,this.marks):t}inlineContext(e){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:e.parentNode&&!PS.hasOwnProperty(e.parentNode.nodeName.toLowerCase())}}class hx{constructor(e,t,r){this.parser=e,this.options=t,this.isOpen=r,this.open=0,this.localPreserveWS=!1;let i=t.topNode,l,o=dx(null,t.preserveWhitespace,0)|(r?lc:0);i?l=new Ga(i.type,i.attrs,ze.none,!0,t.topMatch||i.type.contentMatch,o):r?l=new Ga(null,null,ze.none,!0,null,o):l=new Ga(e.schema.topNodeType,null,ze.none,!0,null,o),this.nodes=[l],this.find=t.findPositions,this.needsBlock=!1}get top(){return this.nodes[this.open]}addDOM(e,t){e.nodeType==3?this.addTextNode(e,t):e.nodeType==1&&this.addElement(e,t)}addTextNode(e,t){let r=e.nodeValue,i=this.top,l=i.options&e0?"full":this.localPreserveWS||(i.options&lo)>0;if(l==="full"||i.inlineContext(e)||/[^ \t\r\n\u000c]/.test(r)){if(l)l!=="full"?r=r.replace(/\r?\n|\r/g," "):r=r.replace(/\r\n?/g,`
`);else if(r=r.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(r)&&this.open==this.nodes.length-1){let o=i.content[i.content.length-1],a=e.previousSibling;(!o||a&&a.nodeName=="BR"||o.isText&&/[ \t\r\n\u000c]$/.test(o.text))&&(r=r.slice(1))}r&&this.insertNode(this.parser.schema.text(r),t,!/\S/.test(r)),this.findInText(e)}else this.findInside(e)}addElement(e,t,r){let i=this.localPreserveWS,l=this.top;(e.tagName=="PRE"||/pre/.test(e.style&&e.style.whiteSpace))&&(this.localPreserveWS=!0);let o=e.nodeName.toLowerCase(),a;JS.hasOwnProperty(o)&&this.parser.normalizeLists&&Q9(e);let f=this.options.ruleFromNode&&this.options.ruleFromNode(e)||(a=this.parser.matchTag(e,this,r));e:if(f?f.ignore:X9.hasOwnProperty(o))this.findInside(e),this.ignoreFallback(e,t);else if(!f||f.skip||f.closeParent){f&&f.closeParent?this.open=Math.max(0,this.open-1):f&&f.skip.nodeType&&(e=f.skip);let h,p=this.needsBlock;if(PS.hasOwnProperty(o))l.content.length&&l.content[0].isInline&&this.open&&(this.open--,l=this.top),h=!0,l.type||(this.needsBlock=!0);else if(!e.firstChild){this.leafFallback(e,t);break e}let g=f&&f.skip?t:this.readStyles(e,t);g&&this.addAll(e,g),h&&this.sync(l),this.needsBlock=p}else{let h=this.readStyles(e,t);h&&this.addElementByRule(e,f,h,f.consuming===!1?a:void 0)}this.localPreserveWS=i}leafFallback(e,t){e.nodeName=="BR"&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(e.ownerDocument.createTextNode(`
`),t)}ignoreFallback(e,t){e.nodeName=="BR"&&(!this.top.type||!this.top.type.inlineContent)&&this.findPlace(this.parser.schema.text("-"),t,!0)}readStyles(e,t){let r=e.style;if(r&&r.length)for(let i=0;i<this.parser.matchedStyles.length;i++){let l=this.parser.matchedStyles[i],o=r.getPropertyValue(l);if(o)for(let a=void 0;;){let f=this.parser.matchStyle(l,o,this,a);if(!f)break;if(f.ignore)return null;if(f.clearMark?t=t.filter(h=>!f.clearMark(h)):t=t.concat(this.parser.schema.marks[f.mark].create(f.attrs)),f.consuming===!1)a=f;else break}}return t}addElementByRule(e,t,r,i){let l,o;if(t.node)if(o=this.parser.schema.nodes[t.node],o.isLeaf)this.insertNode(o.create(t.attrs),r,e.nodeName=="BR")||this.leafFallback(e,r);else{let f=this.enter(o,t.attrs||null,r,t.preserveWhitespace);f&&(l=!0,r=f)}else{let f=this.parser.schema.marks[t.mark];r=r.concat(f.create(t.attrs))}let a=this.top;if(o&&o.isLeaf)this.findInside(e);else if(i)this.addElement(e,r,i);else if(t.getContent)this.findInside(e),t.getContent(e,this.parser.schema).forEach(f=>this.insertNode(f,r,!1));else{let f=e;typeof t.contentElement=="string"?f=e.querySelector(t.contentElement):typeof t.contentElement=="function"?f=t.contentElement(e):t.contentElement&&(f=t.contentElement),this.findAround(e,f,!0),this.addAll(f,r),this.findAround(e,f,!1)}l&&this.sync(a)&&this.open--}addAll(e,t,r,i){let l=r||0;for(let o=r?e.childNodes[r]:e.firstChild,a=i==null?null:e.childNodes[i];o!=a;o=o.nextSibling,++l)this.findAtPoint(e,l),this.addDOM(o,t);this.findAtPoint(e,l)}findPlace(e,t,r){let i,l;for(let o=this.open,a=0;o>=0;o--){let f=this.nodes[o],h=f.findWrapping(e);if(h&&(!i||i.length>h.length+a)&&(i=h,l=f,!h.length))break;if(f.solid){if(r)break;a+=2}}if(!i)return null;this.sync(l);for(let o=0;o<i.length;o++)t=this.enterInner(i[o],null,t,!1);return t}insertNode(e,t,r){if(e.isInline&&this.needsBlock&&!this.top.type){let l=this.textblockFromContext();l&&(t=this.enterInner(l,null,t))}let i=this.findPlace(e,t,r);if(i){this.closeExtra();let l=this.top;l.match&&(l.match=l.match.matchType(e.type));let o=ze.none;for(let a of i.concat(e.marks))(l.type?l.type.allowsMarkType(a.type):mx(a.type,e.type))&&(o=a.addToSet(o));return l.content.push(e.mark(o)),!0}return!1}enter(e,t,r,i){let l=this.findPlace(e.create(t),r,!1);return l&&(l=this.enterInner(e,t,r,!0,i)),l}enterInner(e,t,r,i=!1,l){this.closeExtra();let o=this.top;o.match=o.match&&o.match.matchType(e);let a=dx(e,l,o.options);o.options&lc&&o.content.length==0&&(a|=lc);let f=ze.none;return r=r.filter(h=>(o.type?o.type.allowsMarkType(h.type):mx(h.type,e))?(f=h.addToSet(f),!1):!0),this.nodes.push(new Ga(e,t,f,i,null,a)),this.open++,r}closeExtra(e=!1){let t=this.nodes.length-1;if(t>this.open){for(;t>this.open;t--)this.nodes[t-1].content.push(this.nodes[t].finish(e));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(!!(this.isOpen||this.options.topOpen))}sync(e){for(let t=this.open;t>=0;t--){if(this.nodes[t]==e)return this.open=t,!0;this.localPreserveWS&&(this.nodes[t].options|=lo)}return!1}get currentPos(){this.closeExtra();let e=0;for(let t=this.open;t>=0;t--){let r=this.nodes[t].content;for(let i=r.length-1;i>=0;i--)e+=r[i].nodeSize;t&&e++}return e}findAtPoint(e,t){if(this.find)for(let r=0;r<this.find.length;r++)this.find[r].node==e&&this.find[r].offset==t&&(this.find[r].pos=this.currentPos)}findInside(e){if(this.find)for(let t=0;t<this.find.length;t++)this.find[t].pos==null&&e.nodeType==1&&e.contains(this.find[t].node)&&(this.find[t].pos=this.currentPos)}findAround(e,t,r){if(e!=t&&this.find)for(let i=0;i<this.find.length;i++)this.find[i].pos==null&&e.nodeType==1&&e.contains(this.find[i].node)&&t.compareDocumentPosition(this.find[i].node)&(r?2:4)&&(this.find[i].pos=this.currentPos)}findInText(e){if(this.find)for(let t=0;t<this.find.length;t++)this.find[t].node==e&&(this.find[t].pos=this.currentPos-(e.nodeValue.length-this.find[t].offset))}matchesContext(e){if(e.indexOf("|")>-1)return e.split(/\s*\|\s*/).some(this.matchesContext,this);let t=e.split("/"),r=this.options.context,i=!this.isOpen&&(!r||r.parent.type==this.nodes[0].type),l=-(r?r.depth+1:0)+(i?0:1),o=(a,f)=>{for(;a>=0;a--){let h=t[a];if(h==""){if(a==t.length-1||a==0)continue;for(;f>=l;f--)if(o(a-1,f))return!0;return!1}else{let p=f>0||f==0&&i?this.nodes[f].type:r&&f>=l?r.node(f-l).type:null;if(!p||p.name!=h&&!p.isInGroup(h))return!1;f--}}return!0};return o(t.length-1,this.open)}textblockFromContext(){let e=this.options.context;if(e)for(let t=e.depth;t>=0;t--){let r=e.node(t).contentMatchAt(e.indexAfter(t)).defaultType;if(r&&r.isTextblock&&r.defaultAttrs)return r}for(let t in this.parser.schema.nodes){let r=this.parser.schema.nodes[t];if(r.isTextblock&&r.defaultAttrs)return r}}}function Q9(n){for(let e=n.firstChild,t=null;e;e=e.nextSibling){let r=e.nodeType==1?e.nodeName.toLowerCase():null;r&&JS.hasOwnProperty(r)&&t?(t.appendChild(e),e=t):r=="li"?t=e:r&&(t=null)}}function W9(n,e){return(n.matches||n.msMatchesSelector||n.webkitMatchesSelector||n.mozMatchesSelector).call(n,e)}function px(n){let e={};for(let t in n)e[t]=n[t];return e}function mx(n,e){let t=e.schema.nodes;for(let r in t){let i=t[r];if(!i.allowsMarkType(n))continue;let l=[],o=a=>{l.push(a);for(let f=0;f<a.edgeCount;f++){let{type:h,next:p}=a.edge(f);if(h==e||l.indexOf(p)<0&&o(p))return!0}};if(o(i.contentMatch))return!0}}class nf{constructor(e,t){this.nodes=e,this.marks=t}serializeFragment(e,t={},r){r||(r=ap(t).createDocumentFragment());let i=r,l=[];return e.forEach(o=>{if(l.length||o.marks.length){let a=0,f=0;for(;a<l.length&&f<o.marks.length;){let h=o.marks[f];if(!this.marks[h.type.name]){f++;continue}if(!h.eq(l[a][0])||h.type.spec.spanning===!1)break;a++,f++}for(;a<l.length;)i=l.pop()[1];for(;f<o.marks.length;){let h=o.marks[f++],p=this.serializeMark(h,o.isInline,t);p&&(l.push([h,i]),i.appendChild(p.dom),i=p.contentDOM||p.dom)}}i.appendChild(this.serializeNodeInner(o,t))}),r}serializeNodeInner(e,t){let{dom:r,contentDOM:i}=uc(ap(t),this.nodes[e.type.name](e),null,e.attrs);if(i){if(e.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");this.serializeFragment(e.content,t,i)}return r}serializeNode(e,t={}){let r=this.serializeNodeInner(e,t);for(let i=e.marks.length-1;i>=0;i--){let l=this.serializeMark(e.marks[i],e.isInline,t);l&&((l.contentDOM||l.dom).appendChild(r),r=l.dom)}return r}serializeMark(e,t,r={}){let i=this.marks[e.type.name];return i&&uc(ap(r),i(e,t),null,e.attrs)}static renderSpec(e,t,r=null,i){return uc(e,t,r,i)}static fromSchema(e){return e.cached.domSerializer||(e.cached.domSerializer=new nf(this.nodesFromSchema(e),this.marksFromSchema(e)))}static nodesFromSchema(e){let t=gx(e.nodes);return t.text||(t.text=r=>r.text),t}static marksFromSchema(e){return gx(e.marks)}}function gx(n){let e={};for(let t in n){let r=n[t].spec.toDOM;r&&(e[t]=r)}return e}function ap(n){return n.document||window.document}const bx=new WeakMap;function e_(n){let e=bx.get(n);return e===void 0&&bx.set(n,e=t_(n)),e}function t_(n){let e=null;function t(r){if(r&&typeof r=="object")if(Array.isArray(r))if(typeof r[0]=="string")e||(e=[]),e.push(r);else for(let i=0;i<r.length;i++)t(r[i]);else for(let i in r)t(r[i])}return t(n),e}function uc(n,e,t,r){if(typeof e=="string")return{dom:n.createTextNode(e)};if(e.nodeType!=null)return{dom:e};if(e.dom&&e.dom.nodeType!=null)return e;let i=e[0],l;if(typeof i!="string")throw new RangeError("Invalid array passed to renderSpec");if(r&&(l=e_(r))&&l.indexOf(e)>-1)throw new RangeError("Using an array from an attribute object as a DOM spec. This may be an attempted cross site scripting attack.");let o=i.indexOf(" ");o>0&&(t=i.slice(0,o),i=i.slice(o+1));let a,f=t?n.createElementNS(t,i):n.createElement(i),h=e[1],p=1;if(h&&typeof h=="object"&&h.nodeType==null&&!Array.isArray(h)){p=2;for(let g in h)if(h[g]!=null){let y=g.indexOf(" ");y>0?f.setAttributeNS(g.slice(0,y),g.slice(y+1),h[g]):f.setAttribute(g,h[g])}}for(let g=p;g<e.length;g++){let y=e[g];if(y===0){if(g<e.length-1||g>p)throw new RangeError("Content hole must be the only child of its parent node");return{dom:f,contentDOM:f}}else{let{dom:x,contentDOM:k}=uc(n,y,t,r);if(f.appendChild(x),k){if(a)throw new RangeError("Multiple content holes");a=k}}}return{dom:f,contentDOM:a}}const GS=65535,KS=Math.pow(2,16);function n_(n,e){return n+e*KS}function yx(n){return n&GS}function r_(n){return(n-(n&GS))/KS}const YS=1,ZS=2,sc=4,XS=8;class xx{constructor(e,t,r){this.pos=e,this.delInfo=t,this.recover=r}get deleted(){return(this.delInfo&XS)>0}get deletedBefore(){return(this.delInfo&(YS|sc))>0}get deletedAfter(){return(this.delInfo&(ZS|sc))>0}get deletedAcross(){return(this.delInfo&sc)>0}}class ln{constructor(e,t=!1){if(this.ranges=e,this.inverted=t,!e.length&&ln.empty)return ln.empty}recover(e){let t=0,r=yx(e);if(!this.inverted)for(let i=0;i<r;i++)t+=this.ranges[i*3+2]-this.ranges[i*3+1];return this.ranges[r*3]+t+r_(e)}mapResult(e,t=1){return this._map(e,t,!1)}map(e,t=1){return this._map(e,t,!0)}_map(e,t,r){let i=0,l=this.inverted?2:1,o=this.inverted?1:2;for(let a=0;a<this.ranges.length;a+=3){let f=this.ranges[a]-(this.inverted?i:0);if(f>e)break;let h=this.ranges[a+l],p=this.ranges[a+o],g=f+h;if(e<=g){let y=h?e==f?-1:e==g?1:t:t,x=f+i+(y<0?0:p);if(r)return x;let k=e==(t<0?f:g)?null:n_(a/3,e-f),C=e==f?ZS:e==g?YS:sc;return(t<0?e!=f:e!=g)&&(C|=XS),new xx(x,C,k)}i+=p-h}return r?e+i:new xx(e+i,0,null)}touches(e,t){let r=0,i=yx(t),l=this.inverted?2:1,o=this.inverted?1:2;for(let a=0;a<this.ranges.length;a+=3){let f=this.ranges[a]-(this.inverted?r:0);if(f>e)break;let h=this.ranges[a+l],p=f+h;if(e<=p&&a==i*3)return!0;r+=this.ranges[a+o]-h}return!1}forEach(e){let t=this.inverted?2:1,r=this.inverted?1:2;for(let i=0,l=0;i<this.ranges.length;i+=3){let o=this.ranges[i],a=o-(this.inverted?l:0),f=o+(this.inverted?0:l),h=this.ranges[i+t],p=this.ranges[i+r];e(a,a+h,f,f+p),l+=p-h}}invert(){return new ln(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(e){return e==0?ln.empty:new ln(e<0?[0,-e,0]:[0,0,e])}}ln.empty=new ln([]);const cp=Object.create(null);class Mt{getMap(){return ln.empty}merge(e){return null}static fromJSON(e,t){if(!t||!t.stepType)throw new RangeError("Invalid input for Step.fromJSON");let r=cp[t.stepType];if(!r)throw new RangeError(`No step type ${t.stepType} defined`);return r.fromJSON(e,t)}static jsonID(e,t){if(e in cp)throw new RangeError("Duplicate use of step JSON ID "+e);return cp[e]=t,t.prototype.jsonID=e,t}}class Ze{constructor(e,t){this.doc=e,this.failed=t}static ok(e){return new Ze(e,null)}static fail(e){return new Ze(null,e)}static fromReplace(e,t,r,i){try{return Ze.ok(e.replace(t,r,i))}catch(l){if(l instanceof Dc)return Ze.fail(l.message);throw l}}}function K0(n,e,t){let r=[];for(let i=0;i<n.childCount;i++){let l=n.child(i);l.content.size&&(l=l.copy(K0(l.content,e,l))),l.isInline&&(l=e(l,t,i)),r.push(l)}return P.fromArray(r)}class Ii extends Mt{constructor(e,t,r){super(),this.from=e,this.to=t,this.mark=r}apply(e){let t=e.slice(this.from,this.to),r=e.resolve(this.from),i=r.node(r.sharedDepth(this.to)),l=new te(K0(t.content,(o,a)=>!o.isAtom||!a.type.allowsMarkType(this.mark.type)?o:o.mark(this.mark.addToSet(o.marks)),i),t.openStart,t.openEnd);return Ze.fromReplace(e,this.from,this.to,l)}invert(){return new qi(this.from,this.to,this.mark)}map(e){let t=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return t.deleted&&r.deleted||t.pos>=r.pos?null:new Ii(t.pos,r.pos,this.mark)}merge(e){return e instanceof Ii&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new Ii(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,t){if(typeof t.from!="number"||typeof t.to!="number")throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new Ii(t.from,t.to,e.markFromJSON(t.mark))}}Mt.jsonID("addMark",Ii);class qi extends Mt{constructor(e,t,r){super(),this.from=e,this.to=t,this.mark=r}apply(e){let t=e.slice(this.from,this.to),r=new te(K0(t.content,i=>i.mark(this.mark.removeFromSet(i.marks)),e),t.openStart,t.openEnd);return Ze.fromReplace(e,this.from,this.to,r)}invert(){return new Ii(this.from,this.to,this.mark)}map(e){let t=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return t.deleted&&r.deleted||t.pos>=r.pos?null:new qi(t.pos,r.pos,this.mark)}merge(e){return e instanceof qi&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new qi(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,t){if(typeof t.from!="number"||typeof t.to!="number")throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new qi(t.from,t.to,e.markFromJSON(t.mark))}}Mt.jsonID("removeMark",qi);class Hi extends Mt{constructor(e,t){super(),this.pos=e,this.mark=t}apply(e){let t=e.nodeAt(this.pos);if(!t)return Ze.fail("No node at mark step's position");let r=t.type.create(t.attrs,null,this.mark.addToSet(t.marks));return Ze.fromReplace(e,this.pos,this.pos+1,new te(P.from(r),0,t.isLeaf?0:1))}invert(e){let t=e.nodeAt(this.pos);if(t){let r=this.mark.addToSet(t.marks);if(r.length==t.marks.length){for(let i=0;i<t.marks.length;i++)if(!t.marks[i].isInSet(r))return new Hi(this.pos,t.marks[i]);return new Hi(this.pos,this.mark)}}return new uo(this.pos,this.mark)}map(e){let t=e.mapResult(this.pos,1);return t.deletedAfter?null:new Hi(t.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,t){if(typeof t.pos!="number")throw new RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new Hi(t.pos,e.markFromJSON(t.mark))}}Mt.jsonID("addNodeMark",Hi);class uo extends Mt{constructor(e,t){super(),this.pos=e,this.mark=t}apply(e){let t=e.nodeAt(this.pos);if(!t)return Ze.fail("No node at mark step's position");let r=t.type.create(t.attrs,null,this.mark.removeFromSet(t.marks));return Ze.fromReplace(e,this.pos,this.pos+1,new te(P.from(r),0,t.isLeaf?0:1))}invert(e){let t=e.nodeAt(this.pos);return!t||!this.mark.isInSet(t.marks)?this:new Hi(this.pos,this.mark)}map(e){let t=e.mapResult(this.pos,1);return t.deletedAfter?null:new uo(t.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,t){if(typeof t.pos!="number")throw new RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new uo(t.pos,e.markFromJSON(t.mark))}}Mt.jsonID("removeNodeMark",uo);class rn extends Mt{constructor(e,t,r,i=!1){super(),this.from=e,this.to=t,this.slice=r,this.structure=i}apply(e){return this.structure&&t0(e,this.from,this.to)?Ze.fail("Structure replace would overwrite content"):Ze.fromReplace(e,this.from,this.to,this.slice)}getMap(){return new ln([this.from,this.to-this.from,this.slice.size])}invert(e){return new rn(this.from,this.from+this.slice.size,e.slice(this.from,this.to))}map(e){let t=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return t.deletedAcross&&r.deletedAcross?null:new rn(t.pos,Math.max(t.pos,r.pos),this.slice,this.structure)}merge(e){if(!(e instanceof rn)||e.structure||this.structure)return null;if(this.from+this.slice.size==e.from&&!this.slice.openEnd&&!e.slice.openStart){let t=this.slice.size+e.slice.size==0?te.empty:new te(this.slice.content.append(e.slice.content),this.slice.openStart,e.slice.openEnd);return new rn(this.from,this.to+(e.to-e.from),t,this.structure)}else if(e.to==this.from&&!this.slice.openStart&&!e.slice.openEnd){let t=this.slice.size+e.slice.size==0?te.empty:new te(e.slice.content.append(this.slice.content),e.slice.openStart,this.slice.openEnd);return new rn(e.from,this.to,t,this.structure)}else return null}toJSON(){let e={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,t){if(typeof t.from!="number"||typeof t.to!="number")throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new rn(t.from,t.to,te.fromJSON(e,t.slice),!!t.structure)}}Mt.jsonID("replace",rn);class Ut extends Mt{constructor(e,t,r,i,l,o,a=!1){super(),this.from=e,this.to=t,this.gapFrom=r,this.gapTo=i,this.slice=l,this.insert=o,this.structure=a}apply(e){if(this.structure&&(t0(e,this.from,this.gapFrom)||t0(e,this.gapTo,this.to)))return Ze.fail("Structure gap-replace would overwrite content");let t=e.slice(this.gapFrom,this.gapTo);if(t.openStart||t.openEnd)return Ze.fail("Gap is not a flat range");let r=this.slice.insertAt(this.insert,t.content);return r?Ze.fromReplace(e,this.from,this.to,r):Ze.fail("Content does not fit in gap")}getMap(){return new ln([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(e){let t=this.gapTo-this.gapFrom;return new Ut(this.from,this.from+this.slice.size+t,this.from+this.insert,this.from+this.insert+t,e.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(e){let t=e.mapResult(this.from,1),r=e.mapResult(this.to,-1),i=this.from==this.gapFrom?t.pos:e.map(this.gapFrom,-1),l=this.to==this.gapTo?r.pos:e.map(this.gapTo,1);return t.deletedAcross&&r.deletedAcross||i<t.pos||l>r.pos?null:new Ut(t.pos,r.pos,i,l,this.slice,this.insert,this.structure)}toJSON(){let e={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,t){if(typeof t.from!="number"||typeof t.to!="number"||typeof t.gapFrom!="number"||typeof t.gapTo!="number"||typeof t.insert!="number")throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new Ut(t.from,t.to,t.gapFrom,t.gapTo,te.fromJSON(e,t.slice),t.insert,!!t.structure)}}Mt.jsonID("replaceAround",Ut);function t0(n,e,t){let r=n.resolve(e),i=t-e,l=r.depth;for(;i>0&&l>0&&r.indexAfter(l)==r.node(l).childCount;)l--,i--;if(i>0){let o=r.node(l).maybeChild(r.indexAfter(l));for(;i>0;){if(!o||o.isLeaf)return!0;o=o.firstChild,i--}}return!1}function i_(n,e,t){return(e==0||n.canReplace(e,n.childCount))&&(t==n.childCount||n.canReplace(0,t))}function vu(n){let t=n.parent.content.cutByIndex(n.startIndex,n.endIndex);for(let r=n.depth;;--r){let i=n.$from.node(r),l=n.$from.index(r),o=n.$to.indexAfter(r);if(r<n.depth&&i.canReplace(l,o,t))return r;if(r==0||i.type.spec.isolating||!i_(i,l,o))break}return null}function QS(n,e,t=null,r=n){let i=l_(n,e),l=i&&u_(r,e);return l?i.map(kx).concat({type:e,attrs:t}).concat(l.map(kx)):null}function kx(n){return{type:n,attrs:null}}function l_(n,e){let{parent:t,startIndex:r,endIndex:i}=n,l=t.contentMatchAt(r).findWrapping(e);if(!l)return null;let o=l.length?l[0]:e;return t.canReplaceWith(r,i,o)?l:null}function u_(n,e){let{parent:t,startIndex:r,endIndex:i}=n,l=t.child(r),o=e.contentMatch.findWrapping(l.type);if(!o)return null;let f=(o.length?o[o.length-1]:e).contentMatch;for(let h=r;f&&h<i;h++)f=f.matchType(t.child(h).type);return!f||!f.validEnd?null:o}function xr(n,e,t=1,r){let i=n.resolve(e),l=i.depth-t,o=r&&r[r.length-1]||i.parent;if(l<0||i.parent.type.spec.isolating||!i.parent.canReplace(i.index(),i.parent.childCount)||!o.type.validContent(i.parent.content.cutByIndex(i.index(),i.parent.childCount)))return!1;for(let h=i.depth-1,p=t-2;h>l;h--,p--){let g=i.node(h),y=i.index(h);if(g.type.spec.isolating)return!1;let x=g.content.cutByIndex(y,g.childCount),k=r&&r[p+1];k&&(x=x.replaceChild(0,k.type.create(k.attrs)));let C=r&&r[p]||g;if(!g.canReplace(y+1,g.childCount)||!C.type.validContent(x))return!1}let a=i.indexAfter(l),f=r&&r[0];return i.node(l).canReplaceWith(a,a,f?f.type:i.node(l+1).type)}function ul(n,e){let t=n.resolve(e),r=t.index();return WS(t.nodeBefore,t.nodeAfter)&&t.parent.canReplace(r,r+1)}function s_(n,e){e.content.size||n.type.compatibleContent(e.type);let t=n.contentMatchAt(n.childCount),{linebreakReplacement:r}=n.type.schema;for(let i=0;i<e.childCount;i++){let l=e.child(i),o=l.type==r?n.type.schema.nodes.text:l.type;if(t=t.matchType(o),!t||!n.type.allowsMarks(l.marks))return!1}return t.validEnd}function WS(n,e){return!!(n&&e&&!n.isLeaf&&s_(n,e))}function rf(n,e,t=-1){let r=n.resolve(e);for(let i=r.depth;;i--){let l,o,a=r.index(i);if(i==r.depth?(l=r.nodeBefore,o=r.nodeAfter):t>0?(l=r.node(i+1),a++,o=r.node(i).maybeChild(a)):(l=r.node(i).maybeChild(a-1),o=r.node(i+1)),l&&!l.isTextblock&&WS(l,o)&&r.node(i).canReplace(a,a+1))return e;if(i==0)break;e=t<0?r.before(i):r.after(i)}}function o_(n,e,t){let r=n.resolve(e);if(!t.content.size)return e;let i=t.content;for(let l=0;l<t.openStart;l++)i=i.firstChild.content;for(let l=1;l<=(t.openStart==0&&t.size?2:1);l++)for(let o=r.depth;o>=0;o--){let a=o==r.depth?0:r.pos<=(r.start(o+1)+r.end(o+1))/2?-1:1,f=r.index(o)+(a>0?1:0),h=r.node(o),p=!1;if(l==1)p=h.canReplace(f,f,i);else{let g=h.contentMatchAt(f).findWrapping(i.firstChild.type);p=g&&h.canReplaceWith(f,f,g[0])}if(p)return a==0?r.pos:a<0?r.before(o+1):r.after(o+1)}return null}function Y0(n,e,t=e,r=te.empty){if(e==t&&!r.size)return null;let i=n.resolve(e),l=n.resolve(t);return a_(i,l,r)?new rn(e,t,r):new c_(i,l,r).fit()}function a_(n,e,t){return!t.openStart&&!t.openEnd&&n.start()==e.start()&&n.parent.canReplace(n.index(),e.index(),t.content)}class c_{constructor(e,t,r){this.$from=e,this.$to=t,this.unplaced=r,this.frontier=[],this.placed=P.empty;for(let i=0;i<=e.depth;i++){let l=e.node(i);this.frontier.push({type:l.type,match:l.contentMatchAt(e.indexAfter(i))})}for(let i=e.depth;i>0;i--)this.placed=P.from(e.node(i).copy(this.placed))}get depth(){return this.frontier.length-1}fit(){for(;this.unplaced.size;){let h=this.findFittable();h?this.placeNodes(h):this.openMore()||this.dropNode()}let e=this.mustMoveInline(),t=this.placed.size-this.depth-this.$from.depth,r=this.$from,i=this.close(e<0?this.$to:r.doc.resolve(e));if(!i)return null;let l=this.placed,o=r.depth,a=i.depth;for(;o&&a&&l.childCount==1;)l=l.firstChild.content,o--,a--;let f=new te(l,o,a);return e>-1?new Ut(r.pos,e,this.$to.pos,this.$to.end(),f,t):f.size||r.pos!=this.$to.pos?new rn(r.pos,i.pos,f):null}findFittable(){let e=this.unplaced.openStart;for(let t=this.unplaced.content,r=0,i=this.unplaced.openEnd;r<e;r++){let l=t.firstChild;if(t.childCount>1&&(i=0),l.type.spec.isolating&&i<=r){e=r;break}t=l.content}for(let t=1;t<=2;t++)for(let r=t==1?e:this.unplaced.openStart;r>=0;r--){let i,l=null;r?(l=fp(this.unplaced.content,r-1).firstChild,i=l.content):i=this.unplaced.content;let o=i.firstChild;for(let a=this.depth;a>=0;a--){let{type:f,match:h}=this.frontier[a],p,g=null;if(t==1&&(o?h.matchType(o.type)||(g=h.fillBefore(P.from(o),!1)):l&&f.compatibleContent(l.type)))return{sliceDepth:r,frontierDepth:a,parent:l,inject:g};if(t==2&&o&&(p=h.findWrapping(o.type)))return{sliceDepth:r,frontierDepth:a,parent:l,wrap:p};if(l&&h.matchType(l.type))break}}}openMore(){let{content:e,openStart:t,openEnd:r}=this.unplaced,i=fp(e,t);return!i.childCount||i.firstChild.isLeaf?!1:(this.unplaced=new te(e,t+1,Math.max(r,i.size+t>=e.size-r?t+1:0)),!0)}dropNode(){let{content:e,openStart:t,openEnd:r}=this.unplaced,i=fp(e,t);if(i.childCount<=1&&t>0){let l=e.size-t<=t+i.size;this.unplaced=new te($s(e,t-1,1),t-1,l?t-1:r)}else this.unplaced=new te($s(e,t,1),t,r)}placeNodes({sliceDepth:e,frontierDepth:t,parent:r,inject:i,wrap:l}){for(;this.depth>t;)this.closeFrontierNode();if(l)for(let C=0;C<l.length;C++)this.openFrontierNode(l[C]);let o=this.unplaced,a=r?r.content:o.content,f=o.openStart-e,h=0,p=[],{match:g,type:y}=this.frontier[t];if(i){for(let C=0;C<i.childCount;C++)p.push(i.child(C));g=g.matchFragment(i)}let x=a.size+e-(o.content.size-o.openEnd);for(;h<a.childCount;){let C=a.child(h),E=g.matchType(C.type);if(!E)break;h++,(h>1||f==0||C.content.size)&&(g=E,p.push(e6(C.mark(y.allowedMarks(C.marks)),h==1?f:0,h==a.childCount?x:-1)))}let k=h==a.childCount;k||(x=-1),this.placed=Fs(this.placed,t,P.from(p)),this.frontier[t].match=g,k&&x<0&&r&&r.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(let C=0,E=a;C<x;C++){let A=E.lastChild;this.frontier.push({type:A.type,match:A.contentMatchAt(A.childCount)}),E=A.content}this.unplaced=k?e==0?te.empty:new te($s(o.content,e-1,1),e-1,x<0?o.openEnd:e-1):new te($s(o.content,e,h),o.openStart,o.openEnd)}mustMoveInline(){if(!this.$to.parent.isTextblock)return-1;let e=this.frontier[this.depth],t;if(!e.type.isTextblock||!dp(this.$to,this.$to.depth,e.type,e.match,!1)||this.$to.depth==this.depth&&(t=this.findCloseLevel(this.$to))&&t.depth==this.depth)return-1;let{depth:r}=this.$to,i=this.$to.after(r);for(;r>1&&i==this.$to.end(--r);)++i;return i}findCloseLevel(e){e:for(let t=Math.min(this.depth,e.depth);t>=0;t--){let{match:r,type:i}=this.frontier[t],l=t<e.depth&&e.end(t+1)==e.pos+(e.depth-(t+1)),o=dp(e,t,i,r,l);if(o){for(let a=t-1;a>=0;a--){let{match:f,type:h}=this.frontier[a],p=dp(e,a,h,f,!0);if(!p||p.childCount)continue e}return{depth:t,fit:o,move:l?e.doc.resolve(e.after(t+1)):e}}}}close(e){let t=this.findCloseLevel(e);if(!t)return null;for(;this.depth>t.depth;)this.closeFrontierNode();t.fit.childCount&&(this.placed=Fs(this.placed,t.depth,t.fit)),e=t.move;for(let r=t.depth+1;r<=e.depth;r++){let i=e.node(r),l=i.type.contentMatch.fillBefore(i.content,!0,e.index(r));this.openFrontierNode(i.type,i.attrs,l)}return e}openFrontierNode(e,t=null,r){let i=this.frontier[this.depth];i.match=i.match.matchType(e),this.placed=Fs(this.placed,this.depth,P.from(e.create(t,r))),this.frontier.push({type:e,match:e.contentMatch})}closeFrontierNode(){let t=this.frontier.pop().match.fillBefore(P.empty,!0);t.childCount&&(this.placed=Fs(this.placed,this.frontier.length,t))}}function $s(n,e,t){return e==0?n.cutByIndex(t,n.childCount):n.replaceChild(0,n.firstChild.copy($s(n.firstChild.content,e-1,t)))}function Fs(n,e,t){return e==0?n.append(t):n.replaceChild(n.childCount-1,n.lastChild.copy(Fs(n.lastChild.content,e-1,t)))}function fp(n,e){for(let t=0;t<e;t++)n=n.firstChild.content;return n}function e6(n,e,t){if(e<=0)return n;let r=n.content;return e>1&&(r=r.replaceChild(0,e6(r.firstChild,e-1,r.childCount==1?t-1:0))),e>0&&(r=n.type.contentMatch.fillBefore(r).append(r),t<=0&&(r=r.append(n.type.contentMatch.matchFragment(r).fillBefore(P.empty,!0)))),n.copy(r)}function dp(n,e,t,r,i){let l=n.node(e),o=i?n.indexAfter(e):n.index(e);if(o==l.childCount&&!t.compatibleContent(l.type))return null;let a=r.fillBefore(l.content,!0,o);return a&&!f_(t,l.content,o)?a:null}function f_(n,e,t){for(let r=t;r<e.childCount;r++)if(!n.allowsMarks(e.child(r).marks))return!0;return!1}class js extends Mt{constructor(e,t,r){super(),this.pos=e,this.attr=t,this.value=r}apply(e){let t=e.nodeAt(this.pos);if(!t)return Ze.fail("No node at attribute step's position");let r=Object.create(null);for(let l in t.attrs)r[l]=t.attrs[l];r[this.attr]=this.value;let i=t.type.create(r,null,t.marks);return Ze.fromReplace(e,this.pos,this.pos+1,new te(P.from(i),0,t.isLeaf?0:1))}getMap(){return ln.empty}invert(e){return new js(this.pos,this.attr,e.nodeAt(this.pos).attrs[this.attr])}map(e){let t=e.mapResult(this.pos,1);return t.deletedAfter?null:new js(t.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(e,t){if(typeof t.pos!="number"||typeof t.attr!="string")throw new RangeError("Invalid input for AttrStep.fromJSON");return new js(t.pos,t.attr,t.value)}}Mt.jsonID("attr",js);class Nc extends Mt{constructor(e,t){super(),this.attr=e,this.value=t}apply(e){let t=Object.create(null);for(let i in e.attrs)t[i]=e.attrs[i];t[this.attr]=this.value;let r=e.type.create(t,e.content,e.marks);return Ze.ok(r)}getMap(){return ln.empty}invert(e){return new Nc(this.attr,e.attrs[this.attr])}map(e){return this}toJSON(){return{stepType:"docAttr",attr:this.attr,value:this.value}}static fromJSON(e,t){if(typeof t.attr!="string")throw new RangeError("Invalid input for DocAttrStep.fromJSON");return new Nc(t.attr,t.value)}}Mt.jsonID("docAttr",Nc);let so=class extends Error{};so=function n(e){let t=Error.call(this,e);return t.__proto__=n.prototype,t};so.prototype=Object.create(Error.prototype);so.prototype.constructor=so;so.prototype.name="TransformError";const hp=Object.create(null);class ve{constructor(e,t,r){this.$anchor=e,this.$head=t,this.ranges=r||[new d_(e.min(t),e.max(t))]}get anchor(){return this.$anchor.pos}get head(){return this.$head.pos}get from(){return this.$from.pos}get to(){return this.$to.pos}get $from(){return this.ranges[0].$from}get $to(){return this.ranges[0].$to}get empty(){let e=this.ranges;for(let t=0;t<e.length;t++)if(e[t].$from.pos!=e[t].$to.pos)return!1;return!0}content(){return this.$from.doc.slice(this.from,this.to,!0)}replace(e,t=te.empty){let r=t.content.lastChild,i=null;for(let a=0;a<t.openEnd;a++)i=r,r=r.lastChild;let l=e.steps.length,o=this.ranges;for(let a=0;a<o.length;a++){let{$from:f,$to:h}=o[a],p=e.mapping.slice(l);e.replaceRange(p.map(f.pos),p.map(h.pos),a?te.empty:t),a==0&&vx(e,l,(r?r.isInline:i&&i.isTextblock)?-1:1)}}replaceWith(e,t){let r=e.steps.length,i=this.ranges;for(let l=0;l<i.length;l++){let{$from:o,$to:a}=i[l],f=e.mapping.slice(r),h=f.map(o.pos),p=f.map(a.pos);l?e.deleteRange(h,p):(e.replaceRangeWith(h,p,t),vx(e,r,t.isInline?-1:1))}}static findFrom(e,t,r=!1){let i=e.parent.inlineContent?new xe(e):iu(e.node(0),e.parent,e.pos,e.index(),t,r);if(i)return i;for(let l=e.depth-1;l>=0;l--){let o=t<0?iu(e.node(0),e.node(l),e.before(l+1),e.index(l),t,r):iu(e.node(0),e.node(l),e.after(l+1),e.index(l)+1,t,r);if(o)return o}return null}static near(e,t=1){return this.findFrom(e,t)||this.findFrom(e,-t)||new un(e.node(0))}static atStart(e){return iu(e,e,0,0,1)||new un(e)}static atEnd(e){return iu(e,e,e.content.size,e.childCount,-1)||new un(e)}static fromJSON(e,t){if(!t||!t.type)throw new RangeError("Invalid input for Selection.fromJSON");let r=hp[t.type];if(!r)throw new RangeError(`No selection type ${t.type} defined`);return r.fromJSON(e,t)}static jsonID(e,t){if(e in hp)throw new RangeError("Duplicate use of selection JSON ID "+e);return hp[e]=t,t.prototype.jsonID=e,t}getBookmark(){return xe.between(this.$anchor,this.$head).getBookmark()}}ve.prototype.visible=!0;class d_{constructor(e,t){this.$from=e,this.$to=t}}let Sx=!1;function Cx(n){!Sx&&!n.parent.inlineContent&&(Sx=!0,console.warn("TextSelection endpoint not pointing into a node with inline content ("+n.parent.type.name+")"))}class xe extends ve{constructor(e,t=e){Cx(e),Cx(t),super(e,t)}get $cursor(){return this.$anchor.pos==this.$head.pos?this.$head:null}map(e,t){let r=e.resolve(t.map(this.head));if(!r.parent.inlineContent)return ve.near(r);let i=e.resolve(t.map(this.anchor));return new xe(i.parent.inlineContent?i:r,r)}replace(e,t=te.empty){if(super.replace(e,t),t==te.empty){let r=this.$from.marksAcross(this.$to);r&&e.ensureMarks(r)}}eq(e){return e instanceof xe&&e.anchor==this.anchor&&e.head==this.head}getBookmark(){return new lf(this.anchor,this.head)}toJSON(){return{type:"text",anchor:this.anchor,head:this.head}}static fromJSON(e,t){if(typeof t.anchor!="number"||typeof t.head!="number")throw new RangeError("Invalid input for TextSelection.fromJSON");return new xe(e.resolve(t.anchor),e.resolve(t.head))}static create(e,t,r=t){let i=e.resolve(t);return new this(i,r==t?i:e.resolve(r))}static between(e,t,r){let i=e.pos-t.pos;if((!r||i)&&(r=i>=0?1:-1),!t.parent.inlineContent){let l=ve.findFrom(t,r,!0)||ve.findFrom(t,-r,!0);if(l)t=l.$head;else return ve.near(t,r)}return e.parent.inlineContent||(i==0?e=t:(e=(ve.findFrom(e,-r,!0)||ve.findFrom(e,r,!0)).$anchor,e.pos<t.pos!=i<0&&(e=t))),new xe(e,t)}}ve.jsonID("text",xe);class lf{constructor(e,t){this.anchor=e,this.head=t}map(e){return new lf(e.map(this.anchor),e.map(this.head))}resolve(e){return xe.between(e.resolve(this.anchor),e.resolve(this.head))}}class ae extends ve{constructor(e){let t=e.nodeAfter,r=e.node(0).resolve(e.pos+t.nodeSize);super(e,r),this.node=t}map(e,t){let{deleted:r,pos:i}=t.mapResult(this.anchor),l=e.resolve(i);return r?ve.near(l):new ae(l)}content(){return new te(P.from(this.node),0,0)}eq(e){return e instanceof ae&&e.anchor==this.anchor}toJSON(){return{type:"node",anchor:this.anchor}}getBookmark(){return new Z0(this.anchor)}static fromJSON(e,t){if(typeof t.anchor!="number")throw new RangeError("Invalid input for NodeSelection.fromJSON");return new ae(e.resolve(t.anchor))}static create(e,t){return new ae(e.resolve(t))}static isSelectable(e){return!e.isText&&e.type.spec.selectable!==!1}}ae.prototype.visible=!1;ve.jsonID("node",ae);class Z0{constructor(e){this.anchor=e}map(e){let{deleted:t,pos:r}=e.mapResult(this.anchor);return t?new lf(r,r):new Z0(r)}resolve(e){let t=e.resolve(this.anchor),r=t.nodeAfter;return r&&ae.isSelectable(r)?new ae(t):ve.near(t)}}class un extends ve{constructor(e){super(e.resolve(0),e.resolve(e.content.size))}replace(e,t=te.empty){if(t==te.empty){e.delete(0,e.doc.content.size);let r=ve.atStart(e.doc);r.eq(e.selection)||e.setSelection(r)}else super.replace(e,t)}toJSON(){return{type:"all"}}static fromJSON(e){return new un(e)}map(e){return new un(e)}eq(e){return e instanceof un}getBookmark(){return h_}}ve.jsonID("all",un);const h_={map(){return this},resolve(n){return new un(n)}};function iu(n,e,t,r,i,l=!1){if(e.inlineContent)return xe.create(n,t);for(let o=r-(i>0?0:1);i>0?o<e.childCount:o>=0;o+=i){let a=e.child(o);if(a.isAtom){if(!l&&ae.isSelectable(a))return ae.create(n,t-(i<0?a.nodeSize:0))}else{let f=iu(n,a,t+i,i<0?a.childCount:0,i,l);if(f)return f}t+=a.nodeSize*i}return null}function vx(n,e,t){let r=n.steps.length-1;if(r<e)return;let i=n.steps[r];if(!(i instanceof rn||i instanceof Ut))return;let l=n.mapping.maps[r],o;l.forEach((a,f,h,p)=>{o==null&&(o=p)}),n.setSelection(ve.near(n.doc.resolve(o),t))}function Ex(n,e){return!e||!n?n:n.bind(e)}class Ka{constructor(e,t,r){this.name=e,this.init=Ex(t.init,r),this.apply=Ex(t.apply,r)}}new Ka("doc",{init(n){return n.doc||n.schema.topNodeType.createAndFill()},apply(n){return n.doc}}),new Ka("selection",{init(n,e){return n.selection||ve.atStart(e.doc)},apply(n){return n.selection}}),new Ka("storedMarks",{init(n){return n.storedMarks||null},apply(n,e,t,r){return r.selection.$cursor?n.storedMarks:null}}),new Ka("scrollToSelection",{init(){return 0},apply(n,e){return n.scrolledIntoView?e+1:e}});function t6(n,e,t){for(let r in n){let i=n[r];i instanceof Function?i=i.bind(e):r=="handleDOMEvents"&&(i=t6(i,e,{})),t[r]=i}return t}class ci{constructor(e){this.spec=e,this.props={},e.props&&t6(e.props,this,this.props),this.key=e.key?e.key.key:n6("plugin")}getState(e){return e[this.key]}}const pp=Object.create(null);function n6(n){return n in pp?n+"$"+ ++pp[n]:(pp[n]=0,n+"$")}class sl{constructor(e="key"){this.key=n6(e)}get(e){return e.config.pluginsByKey[this.key]}getState(e){return e[this.key]}}const ol=function(n){for(var e=0;;e++)if(n=n.previousSibling,!n)return e},r6=function(n,e,t,r){return t&&(Mx(n,e,t,r,-1)||Mx(n,e,t,r,1))},p_=/^(img|br|input|textarea|hr)$/i;function Mx(n,e,t,r,i){for(;;){if(n==t&&e==r)return!0;if(e==(i<0?0:Rc(n))){let l=n.parentNode;if(!l||l.nodeType!=1||X0(n)||p_.test(n.nodeName)||n.contentEditable=="false")return!1;e=ol(n)+(i<0?0:1),n=l}else if(n.nodeType==1){if(n=n.childNodes[e+(i<0?-1:0)],n.contentEditable=="false")return!1;e=i<0?Rc(n):0}else return!1}}function Rc(n){return n.nodeType==3?n.nodeValue.length:n.childNodes.length}function m_(n,e,t){for(let r=e==0,i=e==Rc(n);r||i;){if(n==t)return!0;let l=ol(n);if(n=n.parentNode,!n)return!1;r=r&&l==0,i=i&&l==Rc(n)}}function X0(n){let e;for(let t=n;t&&!(e=t.pmViewDesc);t=t.parentNode);return e&&e.node&&e.node.isBlock&&(e.dom==n||e.contentDOM==n)}const i6=function(n){return n.focusNode&&r6(n.focusNode,n.focusOffset,n.anchorNode,n.anchorOffset)};function l6(n,e){let t=document.createEvent("Event");return t.initEvent("keydown",!0,!0),t.keyCode=n,t.key=t.code=e,t}const Gn=typeof navigator<"u"?navigator:null,Ax=typeof document<"u"?document:null,fi=Gn&&Gn.userAgent||"",n0=/Edge\/(\d+)/.exec(fi),u6=/MSIE \d/.exec(fi),r0=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(fi),ko=!!(u6||r0||n0),s6=u6?document.documentMode:r0?+r0[1]:n0?+n0[1]:0,uf=!ko&&/gecko\/(\d+)/i.test(fi);uf&&+(/Firefox\/(\d+)/.exec(fi)||[0,0])[1];const i0=!ko&&/Chrome\/(\d+)/.exec(fi),di=!!i0,o6=i0?+i0[1]:0,al=!ko&&!!Gn&&/Apple Computer/.test(Gn.vendor),Q0=al&&(/Mobile\/\w+/.test(fi)||!!Gn&&Gn.maxTouchPoints>2),xn=Q0||(Gn?/Mac/.test(Gn.platform):!1),g_=Gn?/Win/.test(Gn.platform):!1,So=/Android \d/.test(fi),W0=!!Ax&&"webkitFontSmoothing"in Ax.documentElement.style,b_=W0?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0;function y_(n,e=null){let t=n.domSelectionRange(),r=n.state.doc;if(!t.focusNode)return null;let i=n.docView.nearestDesc(t.focusNode),l=i&&i.size==0,o=n.docView.posFromDOM(t.focusNode,t.focusOffset,1);if(o<0)return null;let a=r.resolve(o),f,h;if(i6(t)){for(f=o;i&&!i.node;)i=i.parent;let g=i.node;if(i&&g.isAtom&&ae.isSelectable(g)&&i.parent&&!(g.isInline&&m_(t.focusNode,t.focusOffset,i.dom))){let y=i.posBefore;h=new ae(o==y?a:r.resolve(y))}}else{if(t instanceof n.dom.ownerDocument.defaultView.Selection&&t.rangeCount>1){let g=o,y=o;for(let x=0;x<t.rangeCount;x++){let k=t.getRangeAt(x);g=Math.min(g,n.docView.posFromDOM(k.startContainer,k.startOffset,1)),y=Math.max(y,n.docView.posFromDOM(k.endContainer,k.endOffset,-1))}if(g<0)return null;[f,o]=y==n.state.selection.anchor?[y,g]:[g,y],a=r.resolve(o)}else f=n.docView.posFromDOM(t.anchorNode,t.anchorOffset,1);if(f<0)return null}let p=r.resolve(f);if(!h){let g=e=="pointer"||n.state.selection.head<a.pos&&!l?1:-1;h=c6(n,p,a,g)}return h}function a6(n){return n.editable?n.hasFocus():C_(n)&&document.activeElement&&document.activeElement.contains(n.dom)}function em(n,e=!1){let t=n.state.selection;if(S_(n,t),!!a6(n)){if(!e&&n.input.mouseDown&&n.input.mouseDown.allowDefault&&di){let r=n.domSelectionRange(),i=n.domObserver.currentSelection;if(r.anchorNode&&i.anchorNode&&r6(r.anchorNode,r.anchorOffset,i.anchorNode,i.anchorOffset)){n.input.mouseDown.delayedSelectionSync=!0,n.domObserver.setCurSelection();return}}if(n.domObserver.disconnectSelection(),n.cursorWrapper)k_(n);else{let{anchor:r,head:i}=t,l,o;Tx&&!(t instanceof xe)&&(t.$from.parent.inlineContent||(l=Dx(n,t.from)),!t.empty&&!t.$from.parent.inlineContent&&(o=Dx(n,t.to))),n.docView.setSelection(r,i,n,e),Tx&&(l&&wx(l),o&&wx(o)),t.visible?n.dom.classList.remove("ProseMirror-hideselection"):(n.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&x_(n))}n.domObserver.setCurSelection(),n.domObserver.connectSelection()}}const Tx=al||di&&o6<63;function Dx(n,e){let{node:t,offset:r}=n.docView.domFromPos(e,0),i=r<t.childNodes.length?t.childNodes[r]:null,l=r?t.childNodes[r-1]:null;if(al&&i&&i.contentEditable=="false")return mp(i);if((!i||i.contentEditable=="false")&&(!l||l.contentEditable=="false")){if(i)return mp(i);if(l)return mp(l)}}function mp(n){return n.contentEditable="true",al&&n.draggable&&(n.draggable=!1,n.wasDraggable=!0),n}function wx(n){n.contentEditable="false",n.wasDraggable&&(n.draggable=!0,n.wasDraggable=null)}function x_(n){let e=n.dom.ownerDocument;e.removeEventListener("selectionchange",n.input.hideSelectionGuard);let t=n.domSelectionRange(),r=t.anchorNode,i=t.anchorOffset;e.addEventListener("selectionchange",n.input.hideSelectionGuard=()=>{(t.anchorNode!=r||t.anchorOffset!=i)&&(e.removeEventListener("selectionchange",n.input.hideSelectionGuard),setTimeout(()=>{(!a6(n)||n.state.selection.visible)&&n.dom.classList.remove("ProseMirror-hideselection")},20))})}function k_(n){let e=n.domSelection(),t=document.createRange();if(!e)return;let r=n.cursorWrapper.dom,i=r.nodeName=="IMG";i?t.setStart(r.parentNode,ol(r)+1):t.setStart(r,0),t.collapse(!0),e.removeAllRanges(),e.addRange(t),!i&&!n.state.selection.visible&&ko&&s6<=11&&(r.disabled=!0,r.disabled=!1)}function S_(n,e){if(e instanceof ae){let t=n.docView.descAt(e.from);t!=n.lastSelectedViewDesc&&(Ox(n),t&&t.selectNode(),n.lastSelectedViewDesc=t)}else Ox(n)}function Ox(n){n.lastSelectedViewDesc&&(n.lastSelectedViewDesc.parent&&n.lastSelectedViewDesc.deselectNode(),n.lastSelectedViewDesc=void 0)}function c6(n,e,t,r){return n.someProp("createSelectionBetween",i=>i(n,e,t))||xe.between(e,t,r)}function C_(n){let e=n.domSelectionRange();if(!e.anchorNode)return!1;try{return n.dom.contains(e.anchorNode.nodeType==3?e.anchorNode.parentNode:e.anchorNode)&&(n.editable||n.dom.contains(e.focusNode.nodeType==3?e.focusNode.parentNode:e.focusNode))}catch{return!1}}function l0(n,e){let{$anchor:t,$head:r}=n.selection,i=e>0?t.max(r):t.min(r),l=i.parent.inlineContent?i.depth?n.doc.resolve(e>0?i.after():i.before()):null:i;return l&&ve.findFrom(l,e)}function Zr(n,e){return n.dispatch(n.state.tr.setSelection(e).scrollIntoView()),!0}function _x(n,e,t){let r=n.state.selection;if(r instanceof xe)if(t.indexOf("s")>-1){let{$head:i}=r,l=i.textOffset?null:e<0?i.nodeBefore:i.nodeAfter;if(!l||l.isText||!l.isLeaf)return!1;let o=n.state.doc.resolve(i.pos+l.nodeSize*(e<0?-1:1));return Zr(n,new xe(r.$anchor,o))}else if(r.empty){if(n.endOfTextblock(e>0?"forward":"backward")){let i=l0(n.state,e);return i&&i instanceof ae?Zr(n,i):!1}else if(!(xn&&t.indexOf("m")>-1)){let i=r.$head,l=i.textOffset?null:e<0?i.nodeBefore:i.nodeAfter,o;if(!l||l.isText)return!1;let a=e<0?i.pos-l.nodeSize:i.pos;return l.isAtom||(o=n.docView.descAt(a))&&!o.contentDOM?ae.isSelectable(l)?Zr(n,new ae(e<0?n.state.doc.resolve(i.pos-l.nodeSize):i)):W0?Zr(n,new xe(n.state.doc.resolve(e<0?a:a+l.nodeSize))):!1:!1}}else return!1;else{if(r instanceof ae&&r.node.isInline)return Zr(n,new xe(e>0?r.$to:r.$from));{let i=l0(n.state,e);return i?Zr(n,i):!1}}}function zc(n){return n.nodeType==3?n.nodeValue.length:n.childNodes.length}function Ps(n,e){let t=n.pmViewDesc;return t&&t.size==0&&(e<0||n.nextSibling||n.nodeName!="BR")}function Ql(n,e){return e<0?v_(n):E_(n)}function v_(n){let e=n.domSelectionRange(),t=e.focusNode,r=e.focusOffset;if(!t)return;let i,l,o=!1;for(uf&&t.nodeType==1&&r<zc(t)&&Ps(t.childNodes[r],-1)&&(o=!0);;)if(r>0){if(t.nodeType!=1)break;{let a=t.childNodes[r-1];if(Ps(a,-1))i=t,l=--r;else if(a.nodeType==3)t=a,r=t.nodeValue.length;else break}}else{if(f6(t))break;{let a=t.previousSibling;for(;a&&Ps(a,-1);)i=t.parentNode,l=ol(a),a=a.previousSibling;if(a)t=a,r=zc(t);else{if(t=t.parentNode,t==n.dom)break;r=0}}}o?u0(n,t,r):i&&u0(n,i,l)}function E_(n){let e=n.domSelectionRange(),t=e.focusNode,r=e.focusOffset;if(!t)return;let i=zc(t),l,o;for(;;)if(r<i){if(t.nodeType!=1)break;let a=t.childNodes[r];if(Ps(a,1))l=t,o=++r;else break}else{if(f6(t))break;{let a=t.nextSibling;for(;a&&Ps(a,1);)l=a.parentNode,o=ol(a)+1,a=a.nextSibling;if(a)t=a,r=0,i=zc(t);else{if(t=t.parentNode,t==n.dom)break;r=i=0}}}l&&u0(n,l,o)}function f6(n){let e=n.pmViewDesc;return e&&e.node&&e.node.isBlock}function M_(n,e){for(;n&&e==n.childNodes.length&&!X0(n);)e=ol(n)+1,n=n.parentNode;for(;n&&e<n.childNodes.length;){let t=n.childNodes[e];if(t.nodeType==3)return t;if(t.nodeType==1&&t.contentEditable=="false")break;n=t,e=0}}function A_(n,e){for(;n&&!e&&!X0(n);)e=ol(n),n=n.parentNode;for(;n&&e;){let t=n.childNodes[e-1];if(t.nodeType==3)return t;if(t.nodeType==1&&t.contentEditable=="false")break;n=t,e=n.childNodes.length}}function u0(n,e,t){if(e.nodeType!=3){let l,o;(o=M_(e,t))?(e=o,t=0):(l=A_(e,t))&&(e=l,t=l.nodeValue.length)}let r=n.domSelection();if(!r)return;if(i6(r)){let l=document.createRange();l.setEnd(e,t),l.setStart(e,t),r.removeAllRanges(),r.addRange(l)}else r.extend&&r.extend(e,t);n.domObserver.setCurSelection();let{state:i}=n;setTimeout(()=>{n.state==i&&em(n)},50)}function Nx(n,e){let t=n.state.doc.resolve(e);if(!(di||g_)&&t.parent.inlineContent){let i=n.coordsAtPos(e);if(e>t.start()){let l=n.coordsAtPos(e-1),o=(l.top+l.bottom)/2;if(o>i.top&&o<i.bottom&&Math.abs(l.left-i.left)>1)return l.left<i.left?"ltr":"rtl"}if(e<t.end()){let l=n.coordsAtPos(e+1),o=(l.top+l.bottom)/2;if(o>i.top&&o<i.bottom&&Math.abs(l.left-i.left)>1)return l.left>i.left?"ltr":"rtl"}}return getComputedStyle(n.dom).direction=="rtl"?"rtl":"ltr"}function Rx(n,e,t){let r=n.state.selection;if(r instanceof xe&&!r.empty||t.indexOf("s")>-1||xn&&t.indexOf("m")>-1)return!1;let{$from:i,$to:l}=r;if(!i.parent.inlineContent||n.endOfTextblock(e<0?"up":"down")){let o=l0(n.state,e);if(o&&o instanceof ae)return Zr(n,o)}if(!i.parent.inlineContent){let o=e<0?i:l,a=r instanceof un?ve.near(o,e):ve.findFrom(o,e);return a?Zr(n,a):!1}return!1}function zx(n,e){if(!(n.state.selection instanceof xe))return!0;let{$head:t,$anchor:r,empty:i}=n.state.selection;if(!t.sameParent(r))return!0;if(!i)return!1;if(n.endOfTextblock(e>0?"forward":"backward"))return!0;let l=!t.textOffset&&(e<0?t.nodeBefore:t.nodeAfter);if(l&&!l.isText){let o=n.state.tr;return e<0?o.delete(t.pos-l.nodeSize,t.pos):o.delete(t.pos,t.pos+l.nodeSize),n.dispatch(o),!0}return!1}function Bx(n,e,t){n.domObserver.stop(),e.contentEditable=t,n.domObserver.start()}function T_(n){if(!al||n.state.selection.$head.parentOffset>0)return!1;let{focusNode:e,focusOffset:t}=n.domSelectionRange();if(e&&e.nodeType==1&&t==0&&e.firstChild&&e.firstChild.contentEditable=="false"){let r=e.firstChild;Bx(n,r,"true"),setTimeout(()=>Bx(n,r,"false"),20)}return!1}function D_(n){let e="";return n.ctrlKey&&(e+="c"),n.metaKey&&(e+="m"),n.altKey&&(e+="a"),n.shiftKey&&(e+="s"),e}function w_(n,e){let t=e.keyCode,r=D_(e);if(t==8||xn&&t==72&&r=="c")return zx(n,-1)||Ql(n,-1);if(t==46&&!e.shiftKey||xn&&t==68&&r=="c")return zx(n,1)||Ql(n,1);if(t==13||t==27)return!0;if(t==37||xn&&t==66&&r=="c"){let i=t==37?Nx(n,n.state.selection.from)=="ltr"?-1:1:-1;return _x(n,i,r)||Ql(n,i)}else if(t==39||xn&&t==70&&r=="c"){let i=t==39?Nx(n,n.state.selection.from)=="ltr"?1:-1:1;return _x(n,i,r)||Ql(n,i)}else{if(t==38||xn&&t==80&&r=="c")return Rx(n,-1,r)||Ql(n,-1);if(t==40||xn&&t==78&&r=="c")return T_(n)||Rx(n,1,r)||Ql(n,1);if(r==(xn?"m":"c")&&(t==66||t==73||t==89||t==90))return!0}return!1}function d6(n,e){n.someProp("transformCopied",x=>{e=x(e,n)});let t=[],{content:r,openStart:i,openEnd:l}=e;for(;i>1&&l>1&&r.childCount==1&&r.firstChild.childCount==1;){i--,l--;let x=r.firstChild;t.push(x.type.name,x.attrs!=x.type.defaultAttrs?x.attrs:null),r=x.content}let o=n.someProp("clipboardSerializer")||nf.fromSchema(n.state.schema),a=y6(),f=a.createElement("div");f.appendChild(o.serializeFragment(r,{document:a}));let h=f.firstChild,p,g=0;for(;h&&h.nodeType==1&&(p=b6[h.nodeName.toLowerCase()]);){for(let x=p.length-1;x>=0;x--){let k=a.createElement(p[x]);for(;f.firstChild;)k.appendChild(f.firstChild);f.appendChild(k),g++}h=f.firstChild}h&&h.nodeType==1&&h.setAttribute("data-pm-slice",`${i} ${l}${g?` -${g}`:""} ${JSON.stringify(t)}`);let y=n.someProp("clipboardTextSerializer",x=>x(e,n))||e.content.textBetween(0,e.content.size,`

`);return{dom:f,text:y,slice:e}}function h6(n,e,t,r,i){let l=i.parent.type.spec.code,o,a;if(!t&&!e)return null;let f=e&&(r||l||!t);if(f){if(n.someProp("transformPastedText",y=>{e=y(e,l||r,n)}),l)return e?new te(P.from(n.state.schema.text(e.replace(/\r\n?/g,`
`))),0,0):te.empty;let g=n.someProp("clipboardTextParser",y=>y(e,i,r,n));if(g)a=g;else{let y=i.marks(),{schema:x}=n.state,k=nf.fromSchema(x);o=document.createElement("div"),e.split(/(?:\r\n?|\n)+/).forEach(C=>{let E=o.appendChild(document.createElement("p"));C&&E.appendChild(k.serializeNode(x.text(C,y)))})}}else n.someProp("transformPastedHTML",g=>{t=g(t,n)}),o=R_(t),W0&&z_(o);let h=o&&o.querySelector("[data-pm-slice]"),p=h&&/^(\d+) (\d+)(?: -(\d+))? (.*)/.exec(h.getAttribute("data-pm-slice")||"");if(p&&p[3])for(let g=+p[3];g>0;g--){let y=o.firstChild;for(;y&&y.nodeType!=1;)y=y.nextSibling;if(!y)break;o=y}if(a||(a=(n.someProp("clipboardParser")||n.someProp("domParser")||Qi.fromSchema(n.state.schema)).parseSlice(o,{preserveWhitespace:!!(f||p),context:i,ruleFromNode(y){return y.nodeName=="BR"&&!y.nextSibling&&y.parentNode&&!O_.test(y.parentNode.nodeName)?{ignore:!0}:null}})),p)a=B_($x(a,+p[1],+p[2]),p[4]);else if(a=te.maxOpen(__(a.content,i),!0),a.openStart||a.openEnd){let g=0,y=0;for(let x=a.content.firstChild;g<a.openStart&&!x.type.spec.isolating;g++,x=x.firstChild);for(let x=a.content.lastChild;y<a.openEnd&&!x.type.spec.isolating;y++,x=x.lastChild);a=$x(a,g,y)}return n.someProp("transformPasted",g=>{a=g(a,n)}),a}const O_=/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/i;function __(n,e){if(n.childCount<2)return n;for(let t=e.depth;t>=0;t--){let i=e.node(t).contentMatchAt(e.index(t)),l,o=[];if(n.forEach(a=>{if(!o)return;let f=i.findWrapping(a.type),h;if(!f)return o=null;if(h=o.length&&l.length&&m6(f,l,a,o[o.length-1],0))o[o.length-1]=h;else{o.length&&(o[o.length-1]=g6(o[o.length-1],l.length));let p=p6(a,f);o.push(p),i=i.matchType(p.type),l=f}}),o)return P.from(o)}return n}function p6(n,e,t=0){for(let r=e.length-1;r>=t;r--)n=e[r].create(null,P.from(n));return n}function m6(n,e,t,r,i){if(i<n.length&&i<e.length&&n[i]==e[i]){let l=m6(n,e,t,r.lastChild,i+1);if(l)return r.copy(r.content.replaceChild(r.childCount-1,l));if(r.contentMatchAt(r.childCount).matchType(i==n.length-1?t.type:n[i+1]))return r.copy(r.content.append(P.from(p6(t,n,i+1))))}}function g6(n,e){if(e==0)return n;let t=n.content.replaceChild(n.childCount-1,g6(n.lastChild,e-1)),r=n.contentMatchAt(n.childCount).fillBefore(P.empty,!0);return n.copy(t.append(r))}function s0(n,e,t,r,i,l){let o=e<0?n.firstChild:n.lastChild,a=o.content;return n.childCount>1&&(l=0),i<r-1&&(a=s0(a,e,t,r,i+1,l)),i>=t&&(a=e<0?o.contentMatchAt(0).fillBefore(a,l<=i).append(a):a.append(o.contentMatchAt(o.childCount).fillBefore(P.empty,!0))),n.replaceChild(e<0?0:n.childCount-1,o.copy(a))}function $x(n,e,t){return e<n.openStart&&(n=new te(s0(n.content,-1,e,n.openStart,0,n.openEnd),e,n.openEnd)),t<n.openEnd&&(n=new te(s0(n.content,1,t,n.openEnd,0,0),n.openStart,t)),n}const b6={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]};let Fx=null;function y6(){return Fx||(Fx=document.implementation.createHTMLDocument("title"))}let gp=null;function N_(n){let e=window.trustedTypes;return e?(gp||(gp=e.defaultPolicy||e.createPolicy("ProseMirrorClipboard",{createHTML:t=>t})),gp.createHTML(n)):n}function R_(n){let e=/^(\s*<meta [^>]*>)*/.exec(n);e&&(n=n.slice(e[0].length));let t=y6().createElement("div"),r=/<([a-z][^>\s]+)/i.exec(n),i;if((i=r&&b6[r[1].toLowerCase()])&&(n=i.map(l=>"<"+l+">").join("")+n+i.map(l=>"</"+l+">").reverse().join("")),t.innerHTML=N_(n),i)for(let l=0;l<i.length;l++)t=t.querySelector(i[l])||t;return t}function z_(n){let e=n.querySelectorAll(di?"span:not([class]):not([style])":"span.Apple-converted-space");for(let t=0;t<e.length;t++){let r=e[t];r.childNodes.length==1&&r.textContent==""&&r.parentNode&&r.parentNode.replaceChild(n.ownerDocument.createTextNode(" "),r)}}function B_(n,e){if(!n.size)return n;let t=n.content.firstChild.type.schema,r;try{r=JSON.parse(e)}catch{return n}let{content:i,openStart:l,openEnd:o}=n;for(let a=r.length-2;a>=0;a-=2){let f=t.nodes[r[a]];if(!f||f.hasRequiredAttrs())break;i=P.from(f.create(r[a+1],i)),l++,o++}return new te(i,l,o)}const zn={},on={};function ei(n,e){n.input.lastSelectionOrigin=e,n.input.lastSelectionTime=Date.now()}on.keydown=(n,e)=>{let t=e;if(n.input.shiftKey=t.keyCode==16||t.shiftKey,!k6(n,t)&&(n.input.lastKeyCode=t.keyCode,n.input.lastKeyCodeTime=Date.now(),!(So&&di&&t.keyCode==13)))if(t.keyCode!=229&&n.domObserver.forceFlush(),Q0&&t.keyCode==13&&!t.ctrlKey&&!t.altKey&&!t.metaKey){let r=Date.now();n.input.lastIOSEnter=r,n.input.lastIOSEnterFallbackTimeout=setTimeout(()=>{n.input.lastIOSEnter==r&&(n.someProp("handleKeyDown",i=>i(n,l6(13,"Enter"))),n.input.lastIOSEnter=0)},200)}else n.someProp("handleKeyDown",r=>r(n,t))||w_(n,t)?t.preventDefault():ei(n,"key")};on.keyup=(n,e)=>{e.keyCode==16&&(n.input.shiftKey=!1)};on.keypress=(n,e)=>{let t=e;if(k6(n,t)||!t.charCode||t.ctrlKey&&!t.altKey||xn&&t.metaKey)return;if(n.someProp("handleKeyPress",i=>i(n,t))){t.preventDefault();return}let r=n.state.selection;if(!(r instanceof xe)||!r.$from.sameParent(r.$to)){let i=String.fromCharCode(t.charCode);!/[\r\n]/.test(i)&&!n.someProp("handleTextInput",l=>l(n,r.$from.pos,r.$to.pos,i))&&n.dispatch(n.state.tr.insertText(i).scrollIntoView()),t.preventDefault()}};function sf(n){return{left:n.clientX,top:n.clientY}}function $_(n,e){let t=e.x-n.clientX,r=e.y-n.clientY;return t*t+r*r<100}function tm(n,e,t,r,i){if(r==-1)return!1;let l=n.state.doc.resolve(r);for(let o=l.depth+1;o>0;o--)if(n.someProp(e,a=>o>l.depth?a(n,t,l.nodeAfter,l.before(o),i,!0):a(n,t,l.node(o),l.before(o),i,!1)))return!0;return!1}function fu(n,e,t){if(n.focused||n.focus(),n.state.selection.eq(e))return;let r=n.state.tr.setSelection(e);r.setMeta("pointer",!0),n.dispatch(r)}function F_(n,e){if(e==-1)return!1;let t=n.state.doc.resolve(e),r=t.nodeAfter;return r&&r.isAtom&&ae.isSelectable(r)?(fu(n,new ae(t)),!0):!1}function L_(n,e){if(e==-1)return!1;let t=n.state.selection,r,i;t instanceof ae&&(r=t.node);let l=n.state.doc.resolve(e);for(let o=l.depth+1;o>0;o--){let a=o>l.depth?l.nodeAfter:l.node(o);if(ae.isSelectable(a)){r&&t.$from.depth>0&&o>=t.$from.depth&&l.before(t.$from.depth+1)==t.$from.pos?i=l.before(t.$from.depth):i=l.before(o);break}}return i!=null?(fu(n,ae.create(n.state.doc,i)),!0):!1}function I_(n,e,t,r,i){return tm(n,"handleClickOn",e,t,r)||n.someProp("handleClick",l=>l(n,e,r))||(i?L_(n,t):F_(n,t))}function q_(n,e,t,r){return tm(n,"handleDoubleClickOn",e,t,r)||n.someProp("handleDoubleClick",i=>i(n,e,r))}function H_(n,e,t,r){return tm(n,"handleTripleClickOn",e,t,r)||n.someProp("handleTripleClick",i=>i(n,e,r))||V_(n,t,r)}function V_(n,e,t){if(t.button!=0)return!1;let r=n.state.doc;if(e==-1)return r.inlineContent?(fu(n,xe.create(r,0,r.content.size)),!0):!1;let i=r.resolve(e);for(let l=i.depth+1;l>0;l--){let o=l>i.depth?i.nodeAfter:i.node(l),a=i.before(l);if(o.inlineContent)fu(n,xe.create(r,a+1,a+1+o.content.size));else if(ae.isSelectable(o))fu(n,ae.create(r,a));else continue;return!0}}function nm(n){return Bc(n)}const x6=xn?"metaKey":"ctrlKey";zn.mousedown=(n,e)=>{let t=e;n.input.shiftKey=t.shiftKey;let r=nm(n),i=Date.now(),l="singleClick";i-n.input.lastClick.time<500&&$_(t,n.input.lastClick)&&!t[x6]&&n.input.lastClick.button==t.button&&(n.input.lastClick.type=="singleClick"?l="doubleClick":n.input.lastClick.type=="doubleClick"&&(l="tripleClick")),n.input.lastClick={time:i,x:t.clientX,y:t.clientY,type:l,button:t.button};let o=n.posAtCoords(sf(t));o&&(l=="singleClick"?(n.input.mouseDown&&n.input.mouseDown.done(),n.input.mouseDown=new U_(n,o,t,!!r)):(l=="doubleClick"?q_:H_)(n,o.pos,o.inside,t)?t.preventDefault():ei(n,"pointer"))};class U_{constructor(e,t,r,i){this.view=e,this.pos=t,this.event=r,this.flushed=i,this.delayedSelectionSync=!1,this.mightDrag=null,this.startDoc=e.state.doc,this.selectNode=!!r[x6],this.allowDefault=r.shiftKey;let l,o;if(t.inside>-1)l=e.state.doc.nodeAt(t.inside),o=t.inside;else{let p=e.state.doc.resolve(t.pos);l=p.parent,o=p.depth?p.before():0}const a=i?null:r.target,f=a?e.docView.nearestDesc(a,!0):null;this.target=f&&f.dom.nodeType==1?f.dom:null;let{selection:h}=e.state;(r.button==0&&l.type.spec.draggable&&l.type.spec.selectable!==!1||h instanceof ae&&h.from<=o&&h.to>o)&&(this.mightDrag={node:l,pos:o,addAttr:!!(this.target&&!this.target.draggable),setUneditable:!!(this.target&&uf&&!this.target.hasAttribute("contentEditable"))}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout(()=>{this.view.input.mouseDown==this&&this.target.setAttribute("contentEditable","false")},20),this.view.domObserver.start()),e.root.addEventListener("mouseup",this.up=this.up.bind(this)),e.root.addEventListener("mousemove",this.move=this.move.bind(this)),ei(e,"pointer")}done(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.delayedSelectionSync&&setTimeout(()=>em(this.view)),this.view.input.mouseDown=null}up(e){if(this.done(),!this.view.dom.contains(e.target))return;let t=this.pos;this.view.state.doc!=this.startDoc&&(t=this.view.posAtCoords(sf(e))),this.updateAllowDefault(e),this.allowDefault||!t?ei(this.view,"pointer"):I_(this.view,t.pos,t.inside,e,this.selectNode)?e.preventDefault():e.button==0&&(this.flushed||al&&this.mightDrag&&!this.mightDrag.node.isAtom||di&&!this.view.state.selection.visible&&Math.min(Math.abs(t.pos-this.view.state.selection.from),Math.abs(t.pos-this.view.state.selection.to))<=2)?(fu(this.view,ve.near(this.view.state.doc.resolve(t.pos))),e.preventDefault()):ei(this.view,"pointer")}move(e){this.updateAllowDefault(e),ei(this.view,"pointer"),e.buttons==0&&this.done()}updateAllowDefault(e){!this.allowDefault&&(Math.abs(this.event.x-e.clientX)>4||Math.abs(this.event.y-e.clientY)>4)&&(this.allowDefault=!0)}}zn.touchstart=n=>{n.input.lastTouch=Date.now(),nm(n),ei(n,"pointer")};zn.touchmove=n=>{n.input.lastTouch=Date.now(),ei(n,"pointer")};zn.contextmenu=n=>nm(n);function k6(n,e){return n.composing?!0:al&&Math.abs(e.timeStamp-n.input.compositionEndedAt)<500?(n.input.compositionEndedAt=-2e8,!0):!1}const j_=So?5e3:-1;on.compositionstart=on.compositionupdate=n=>{if(!n.composing){n.domObserver.flush();let{state:e}=n,t=e.selection.$to;if(e.selection instanceof xe&&(e.storedMarks||!t.textOffset&&t.parentOffset&&t.nodeBefore.marks.some(r=>r.type.spec.inclusive===!1)))n.markCursor=n.state.storedMarks||t.marks(),Bc(n,!0),n.markCursor=null;else if(Bc(n,!e.selection.empty),uf&&e.selection.empty&&t.parentOffset&&!t.textOffset&&t.nodeBefore.marks.length){let r=n.domSelectionRange();for(let i=r.focusNode,l=r.focusOffset;i&&i.nodeType==1&&l!=0;){let o=l<0?i.lastChild:i.childNodes[l-1];if(!o)break;if(o.nodeType==3){let a=n.domSelection();a&&a.collapse(o,o.nodeValue.length);break}else i=o,l=-1}}n.input.composing=!0}S6(n,j_)};on.compositionend=(n,e)=>{n.composing&&(n.input.composing=!1,n.input.compositionEndedAt=e.timeStamp,n.input.compositionPendingChanges=n.domObserver.pendingRecords().length?n.input.compositionID:0,n.input.compositionNode=null,n.input.compositionPendingChanges&&Promise.resolve().then(()=>n.domObserver.flush()),n.input.compositionID++,S6(n,20))};function S6(n,e){clearTimeout(n.input.composingTimeout),e>-1&&(n.input.composingTimeout=setTimeout(()=>Bc(n),e))}function P_(n){for(n.composing&&(n.input.composing=!1,n.input.compositionEndedAt=J_());n.input.compositionNodes.length>0;)n.input.compositionNodes.pop().markParentsDirty()}function J_(){let n=document.createEvent("Event");return n.initEvent("event",!0,!0),n.timeStamp}function Bc(n,e=!1){if(!(So&&n.domObserver.flushingSoon>=0)){if(n.domObserver.forceFlush(),P_(n),e||n.docView&&n.docView.dirty){let t=y_(n),r=n.state.selection;return t&&!t.eq(r)?n.dispatch(n.state.tr.setSelection(t)):(n.markCursor||e)&&!r.$from.node(r.$from.sharedDepth(r.to)).inlineContent?n.dispatch(n.state.tr.deleteSelection()):n.updateState(n.state),!0}return!1}}function G_(n,e){if(!n.dom.parentNode)return;let t=n.dom.parentNode.appendChild(document.createElement("div"));t.appendChild(e),t.style.cssText="position: fixed; left: -10000px; top: 10px";let r=getSelection(),i=document.createRange();i.selectNodeContents(e),n.dom.blur(),r.removeAllRanges(),r.addRange(i),setTimeout(()=>{t.parentNode&&t.parentNode.removeChild(t),n.focus()},50)}const oo=ko&&s6<15||Q0&&b_<604;zn.copy=on.cut=(n,e)=>{let t=e,r=n.state.selection,i=t.type=="cut";if(r.empty)return;let l=oo?null:t.clipboardData,o=r.content(),{dom:a,text:f}=d6(n,o);l?(t.preventDefault(),l.clearData(),l.setData("text/html",a.innerHTML),l.setData("text/plain",f)):G_(n,a),i&&n.dispatch(n.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))};function K_(n){return n.openStart==0&&n.openEnd==0&&n.content.childCount==1?n.content.firstChild:null}function Y_(n,e){if(!n.dom.parentNode)return;let t=n.input.shiftKey||n.state.selection.$from.parent.type.spec.code,r=n.dom.parentNode.appendChild(document.createElement(t?"textarea":"div"));t||(r.contentEditable="true"),r.style.cssText="position: fixed; left: -10000px; top: 10px",r.focus();let i=n.input.shiftKey&&n.input.lastKeyCode!=45;setTimeout(()=>{n.focus(),r.parentNode&&r.parentNode.removeChild(r),t?o0(n,r.value,null,i,e):o0(n,r.textContent,r.innerHTML,i,e)},50)}function o0(n,e,t,r,i){let l=h6(n,e,t,r,n.state.selection.$from);if(n.someProp("handlePaste",f=>f(n,i,l||te.empty)))return!0;if(!l)return!1;let o=K_(l),a=o?n.state.tr.replaceSelectionWith(o,r):n.state.tr.replaceSelection(l);return n.dispatch(a.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}function C6(n){let e=n.getData("text/plain")||n.getData("Text");if(e)return e;let t=n.getData("text/uri-list");return t?t.replace(/\r?\n/g," "):""}on.paste=(n,e)=>{let t=e;if(n.composing&&!So)return;let r=oo?null:t.clipboardData,i=n.input.shiftKey&&n.input.lastKeyCode!=45;r&&o0(n,C6(r),r.getData("text/html"),i,t)?t.preventDefault():Y_(n,t)};class Z_{constructor(e,t,r){this.slice=e,this.move=t,this.node=r}}const X_=xn?"altKey":"ctrlKey";function v6(n,e){let t=n.someProp("dragCopies",r=>!r(e));return t??!e[X_]}zn.dragstart=(n,e)=>{let t=e,r=n.input.mouseDown;if(r&&r.done(),!t.dataTransfer)return;let i=n.state.selection,l=i.empty?null:n.posAtCoords(sf(t)),o;if(!(l&&l.pos>=i.from&&l.pos<=(i instanceof ae?i.to-1:i.to))){if(r&&r.mightDrag)o=ae.create(n.state.doc,r.mightDrag.pos);else if(t.target&&t.target.nodeType==1){let g=n.docView.nearestDesc(t.target,!0);g&&g.node.type.spec.draggable&&g!=n.docView&&(o=ae.create(n.state.doc,g.posBefore))}}let a=(o||n.state.selection).content(),{dom:f,text:h,slice:p}=d6(n,a);(!t.dataTransfer.files.length||!di||o6>120)&&t.dataTransfer.clearData(),t.dataTransfer.setData(oo?"Text":"text/html",f.innerHTML),t.dataTransfer.effectAllowed="copyMove",oo||t.dataTransfer.setData("text/plain",h),n.dragging=new Z_(p,v6(n,t),o)};zn.dragend=n=>{let e=n.dragging;window.setTimeout(()=>{n.dragging==e&&(n.dragging=null)},50)};on.dragover=on.dragenter=(n,e)=>e.preventDefault();on.drop=(n,e)=>{let t=e,r=n.dragging;if(n.dragging=null,!t.dataTransfer)return;let i=n.posAtCoords(sf(t));if(!i)return;let l=n.state.doc.resolve(i.pos),o=r&&r.slice;o?n.someProp("transformPasted",k=>{o=k(o,n)}):o=h6(n,C6(t.dataTransfer),oo?null:t.dataTransfer.getData("text/html"),!1,l);let a=!!(r&&v6(n,t));if(n.someProp("handleDrop",k=>k(n,t,o||te.empty,a))){t.preventDefault();return}if(!o)return;t.preventDefault();let f=o?o_(n.state.doc,l.pos,o):l.pos;f==null&&(f=l.pos);let h=n.state.tr;if(a){let{node:k}=r;k?k.replace(h):h.deleteSelection()}let p=h.mapping.map(f),g=o.openStart==0&&o.openEnd==0&&o.content.childCount==1,y=h.doc;if(g?h.replaceRangeWith(p,p,o.content.firstChild):h.replaceRange(p,p,o),h.doc.eq(y))return;let x=h.doc.resolve(p);if(g&&ae.isSelectable(o.content.firstChild)&&x.nodeAfter&&x.nodeAfter.sameMarkup(o.content.firstChild))h.setSelection(new ae(x));else{let k=h.mapping.map(f);h.mapping.maps[h.mapping.maps.length-1].forEach((C,E,A,N)=>k=N),h.setSelection(c6(n,x,h.doc.resolve(k)))}n.focus(),n.dispatch(h.setMeta("uiEvent","drop"))};zn.focus=n=>{n.input.lastFocus=Date.now(),n.focused||(n.domObserver.stop(),n.dom.classList.add("ProseMirror-focused"),n.domObserver.start(),n.focused=!0,setTimeout(()=>{n.docView&&n.hasFocus()&&!n.domObserver.currentSelection.eq(n.domSelectionRange())&&em(n)},20))};zn.blur=(n,e)=>{let t=e;n.focused&&(n.domObserver.stop(),n.dom.classList.remove("ProseMirror-focused"),n.domObserver.start(),t.relatedTarget&&n.dom.contains(t.relatedTarget)&&n.domObserver.currentSelection.clear(),n.focused=!1)};zn.beforeinput=(n,e)=>{if(di&&So&&e.inputType=="deleteContentBackward"){n.domObserver.flushSoon();let{domChangeCount:r}=n.input;setTimeout(()=>{if(n.input.domChangeCount!=r||(n.dom.blur(),n.focus(),n.someProp("handleKeyDown",l=>l(n,l6(8,"Backspace")))))return;let{$cursor:i}=n.state.selection;i&&i.pos>0&&n.dispatch(n.state.tr.delete(i.pos-1,i.pos).scrollIntoView())},50)}};for(let n in on)zn[n]=on[n];function ao(n,e){if(n==e)return!0;for(let t in n)if(n[t]!==e[t])return!1;for(let t in e)if(!(t in n))return!1;return!0}class $c{constructor(e,t){this.toDOM=e,this.spec=t||Wi,this.side=this.spec.side||0}map(e,t,r,i){let{pos:l,deleted:o}=e.mapResult(t.from+i,this.side<0?-1:1);return o?null:new Tn(l-r,l-r,this)}valid(){return!0}eq(e){return this==e||e instanceof $c&&(this.spec.key&&this.spec.key==e.spec.key||this.toDOM==e.toDOM&&ao(this.spec,e.spec))}destroy(e){this.spec.destroy&&this.spec.destroy(e)}}class ii{constructor(e,t){this.attrs=e,this.spec=t||Wi}map(e,t,r,i){let l=e.map(t.from+i,this.spec.inclusiveStart?-1:1)-r,o=e.map(t.to+i,this.spec.inclusiveEnd?1:-1)-r;return l>=o?null:new Tn(l,o,this)}valid(e,t){return t.from<t.to}eq(e){return this==e||e instanceof ii&&ao(this.attrs,e.attrs)&&ao(this.spec,e.spec)}static is(e){return e.type instanceof ii}destroy(){}}class rm{constructor(e,t){this.attrs=e,this.spec=t||Wi}map(e,t,r,i){let l=e.mapResult(t.from+i,1);if(l.deleted)return null;let o=e.mapResult(t.to+i,-1);return o.deleted||o.pos<=l.pos?null:new Tn(l.pos-r,o.pos-r,this)}valid(e,t){let{index:r,offset:i}=e.content.findIndex(t.from),l;return i==t.from&&!(l=e.child(r)).isText&&i+l.nodeSize==t.to}eq(e){return this==e||e instanceof rm&&ao(this.attrs,e.attrs)&&ao(this.spec,e.spec)}destroy(){}}class Tn{constructor(e,t,r){this.from=e,this.to=t,this.type=r}copy(e,t){return new Tn(e,t,this.type)}eq(e,t=0){return this.type.eq(e.type)&&this.from+t==e.from&&this.to+t==e.to}map(e,t,r){return this.type.map(e,this,t,r)}static widget(e,t,r){return new Tn(e,e,new $c(t,r))}static inline(e,t,r,i){return new Tn(e,t,new ii(r,i))}static node(e,t,r,i){return new Tn(e,t,new rm(r,i))}get spec(){return this.type.spec}get inline(){return this.type instanceof ii}get widget(){return this.type instanceof $c}}const lu=[],Wi={};class st{constructor(e,t){this.local=e.length?e:lu,this.children=t.length?t:lu}static create(e,t){return t.length?Fc(t,e,0,Wi):Dt}find(e,t,r){let i=[];return this.findInner(e??0,t??1e9,i,0,r),i}findInner(e,t,r,i,l){for(let o=0;o<this.local.length;o++){let a=this.local[o];a.from<=t&&a.to>=e&&(!l||l(a.spec))&&r.push(a.copy(a.from+i,a.to+i))}for(let o=0;o<this.children.length;o+=3)if(this.children[o]<t&&this.children[o+1]>e){let a=this.children[o]+1;this.children[o+2].findInner(e-a,t-a,r,i+a,l)}}map(e,t,r){return this==Dt||e.maps.length==0?this:this.mapInner(e,t,0,0,r||Wi)}mapInner(e,t,r,i,l){let o;for(let a=0;a<this.local.length;a++){let f=this.local[a].map(e,r,i);f&&f.type.valid(t,f)?(o||(o=[])).push(f):l.onRemove&&l.onRemove(this.local[a].spec)}return this.children.length?Q_(this.children,o||[],e,t,r,i,l):o?new st(o.sort(el),lu):Dt}add(e,t){return t.length?this==Dt?st.create(e,t):this.addInner(e,t,0):this}addInner(e,t,r){let i,l=0;e.forEach((a,f)=>{let h=f+r,p;if(p=M6(t,a,h)){for(i||(i=this.children.slice());l<i.length&&i[l]<f;)l+=3;i[l]==f?i[l+2]=i[l+2].addInner(a,p,h+1):i.splice(l,0,f,f+a.nodeSize,Fc(p,a,h+1,Wi)),l+=3}});let o=E6(l?A6(t):t,-r);for(let a=0;a<o.length;a++)o[a].type.valid(e,o[a])||o.splice(a--,1);return new st(o.length?this.local.concat(o).sort(el):this.local,i||this.children)}remove(e){return e.length==0||this==Dt?this:this.removeInner(e,0)}removeInner(e,t){let r=this.children,i=this.local;for(let l=0;l<r.length;l+=3){let o,a=r[l]+t,f=r[l+1]+t;for(let p=0,g;p<e.length;p++)(g=e[p])&&g.from>a&&g.to<f&&(e[p]=null,(o||(o=[])).push(g));if(!o)continue;r==this.children&&(r=this.children.slice());let h=r[l+2].removeInner(o,a+1);h!=Dt?r[l+2]=h:(r.splice(l,3),l-=3)}if(i.length){for(let l=0,o;l<e.length;l++)if(o=e[l])for(let a=0;a<i.length;a++)i[a].eq(o,t)&&(i==this.local&&(i=this.local.slice()),i.splice(a--,1))}return r==this.children&&i==this.local?this:i.length||r.length?new st(i,r):Dt}forChild(e,t){if(this==Dt)return this;if(t.isLeaf)return st.empty;let r,i;for(let a=0;a<this.children.length;a+=3)if(this.children[a]>=e){this.children[a]==e&&(r=this.children[a+2]);break}let l=e+1,o=l+t.content.size;for(let a=0;a<this.local.length;a++){let f=this.local[a];if(f.from<o&&f.to>l&&f.type instanceof ii){let h=Math.max(l,f.from)-l,p=Math.min(o,f.to)-l;h<p&&(i||(i=[])).push(f.copy(h,p))}}if(i){let a=new st(i.sort(el),lu);return r?new Bi([a,r]):a}return r||Dt}eq(e){if(this==e)return!0;if(!(e instanceof st)||this.local.length!=e.local.length||this.children.length!=e.children.length)return!1;for(let t=0;t<this.local.length;t++)if(!this.local[t].eq(e.local[t]))return!1;for(let t=0;t<this.children.length;t+=3)if(this.children[t]!=e.children[t]||this.children[t+1]!=e.children[t+1]||!this.children[t+2].eq(e.children[t+2]))return!1;return!0}locals(e){return im(this.localsInner(e))}localsInner(e){if(this==Dt)return lu;if(e.inlineContent||!this.local.some(ii.is))return this.local;let t=[];for(let r=0;r<this.local.length;r++)this.local[r].type instanceof ii||t.push(this.local[r]);return t}forEachSet(e){e(this)}}st.empty=new st([],[]);st.removeOverlap=im;const Dt=st.empty;class Bi{constructor(e){this.members=e}map(e,t){const r=this.members.map(i=>i.map(e,t,Wi));return Bi.from(r)}forChild(e,t){if(t.isLeaf)return st.empty;let r=[];for(let i=0;i<this.members.length;i++){let l=this.members[i].forChild(e,t);l!=Dt&&(l instanceof Bi?r=r.concat(l.members):r.push(l))}return Bi.from(r)}eq(e){if(!(e instanceof Bi)||e.members.length!=this.members.length)return!1;for(let t=0;t<this.members.length;t++)if(!this.members[t].eq(e.members[t]))return!1;return!0}locals(e){let t,r=!0;for(let i=0;i<this.members.length;i++){let l=this.members[i].localsInner(e);if(l.length)if(!t)t=l;else{r&&(t=t.slice(),r=!1);for(let o=0;o<l.length;o++)t.push(l[o])}}return t?im(r?t:t.sort(el)):lu}static from(e){switch(e.length){case 0:return Dt;case 1:return e[0];default:return new Bi(e.every(t=>t instanceof st)?e:e.reduce((t,r)=>t.concat(r instanceof st?r:r.members),[]))}}forEachSet(e){for(let t=0;t<this.members.length;t++)this.members[t].forEachSet(e)}}function Q_(n,e,t,r,i,l,o){let a=n.slice();for(let h=0,p=l;h<t.maps.length;h++){let g=0;t.maps[h].forEach((y,x,k,C)=>{let E=C-k-(x-y);for(let A=0;A<a.length;A+=3){let N=a[A+1];if(N<0||y>N+p-g)continue;let B=a[A]+p-g;x>=B?a[A+1]=y<=B?-2:-1:y>=p&&E&&(a[A]+=E,a[A+1]+=E)}g+=E}),p=t.maps[h].map(p,-1)}let f=!1;for(let h=0;h<a.length;h+=3)if(a[h+1]<0){if(a[h+1]==-2){f=!0,a[h+1]=-1;continue}let p=t.map(n[h]+l),g=p-i;if(g<0||g>=r.content.size){f=!0;continue}let y=t.map(n[h+1]+l,-1),x=y-i,{index:k,offset:C}=r.content.findIndex(g),E=r.maybeChild(k);if(E&&C==g&&C+E.nodeSize==x){let A=a[h+2].mapInner(t,E,p+1,n[h]+l+1,o);A!=Dt?(a[h]=g,a[h+1]=x,a[h+2]=A):(a[h+1]=-2,f=!0)}else f=!0}if(f){let h=W_(a,n,e,t,i,l,o),p=Fc(h,r,0,o);e=p.local;for(let g=0;g<a.length;g+=3)a[g+1]<0&&(a.splice(g,3),g-=3);for(let g=0,y=0;g<p.children.length;g+=3){let x=p.children[g];for(;y<a.length&&a[y]<x;)y+=3;a.splice(y,0,p.children[g],p.children[g+1],p.children[g+2])}}return new st(e.sort(el),a)}function E6(n,e){if(!e||!n.length)return n;let t=[];for(let r=0;r<n.length;r++){let i=n[r];t.push(new Tn(i.from+e,i.to+e,i.type))}return t}function W_(n,e,t,r,i,l,o){function a(f,h){for(let p=0;p<f.local.length;p++){let g=f.local[p].map(r,i,h);g?t.push(g):o.onRemove&&o.onRemove(f.local[p].spec)}for(let p=0;p<f.children.length;p+=3)a(f.children[p+2],f.children[p]+h+1)}for(let f=0;f<n.length;f+=3)n[f+1]==-1&&a(n[f+2],e[f]+l+1);return t}function M6(n,e,t){if(e.isLeaf)return null;let r=t+e.nodeSize,i=null;for(let l=0,o;l<n.length;l++)(o=n[l])&&o.from>t&&o.to<r&&((i||(i=[])).push(o),n[l]=null);return i}function A6(n){let e=[];for(let t=0;t<n.length;t++)n[t]!=null&&e.push(n[t]);return e}function Fc(n,e,t,r){let i=[],l=!1;e.forEach((a,f)=>{let h=M6(n,a,f+t);if(h){l=!0;let p=Fc(h,a,t+f+1,r);p!=Dt&&i.push(f,f+a.nodeSize,p)}});let o=E6(l?A6(n):n,-t).sort(el);for(let a=0;a<o.length;a++)o[a].type.valid(e,o[a])||(r.onRemove&&r.onRemove(o[a].spec),o.splice(a--,1));return o.length||i.length?new st(o,i):Dt}function el(n,e){return n.from-e.from||n.to-e.to}function im(n){let e=n;for(let t=0;t<e.length-1;t++){let r=e[t];if(r.from!=r.to)for(let i=t+1;i<e.length;i++){let l=e[i];if(l.from==r.from){l.to!=r.to&&(e==n&&(e=n.slice()),e[i]=l.copy(l.from,r.to),Lx(e,i+1,l.copy(r.to,l.to)));continue}else{l.from<r.to&&(e==n&&(e=n.slice()),e[t]=r.copy(r.from,l.from),Lx(e,i,r.copy(l.from,r.to)));break}}}return e}function Lx(n,e,t){for(;e<n.length&&el(t,n[e])>0;)e++;n.splice(e,0,t)}const lm=(n,e)=>n.selection.empty?!1:(e&&e(n.tr.deleteSelection().scrollIntoView()),!0);function T6(n,e){let{$cursor:t}=n.selection;return!t||(e?!e.endOfTextblock("backward",n):t.parentOffset>0)?null:t}const D6=(n,e,t)=>{let r=T6(n,t);if(!r)return!1;let i=um(r);if(!i){let o=r.blockRange(),a=o&&vu(o);return a==null?!1:(e&&e(n.tr.lift(o,a).scrollIntoView()),!0)}let l=i.nodeBefore;if(F6(n,i,e,-1))return!0;if(r.parent.content.size==0&&(ku(l,"end")||ae.isSelectable(l)))for(let o=r.depth;;o--){let a=Y0(n.doc,r.before(o),r.after(o),te.empty);if(a&&a.slice.size<a.to-a.from){if(e){let f=n.tr.step(a);f.setSelection(ku(l,"end")?ve.findFrom(f.doc.resolve(f.mapping.map(i.pos,-1)),-1):ae.create(f.doc,i.pos-l.nodeSize)),e(f.scrollIntoView())}return!0}if(o==1||r.node(o-1).childCount>1)break}return l.isAtom&&i.depth==r.depth-1?(e&&e(n.tr.delete(i.pos-l.nodeSize,i.pos).scrollIntoView()),!0):!1},eN=(n,e,t)=>{let r=T6(n,t);if(!r)return!1;let i=um(r);return i?w6(n,i,e):!1},tN=(n,e,t)=>{let r=_6(n,t);if(!r)return!1;let i=sm(r);return i?w6(n,i,e):!1};function w6(n,e,t){let r=e.nodeBefore,i=r,l=e.pos-1;for(;!i.isTextblock;l--){if(i.type.spec.isolating)return!1;let p=i.lastChild;if(!p)return!1;i=p}let o=e.nodeAfter,a=o,f=e.pos+1;for(;!a.isTextblock;f++){if(a.type.spec.isolating)return!1;let p=a.firstChild;if(!p)return!1;a=p}let h=Y0(n.doc,l,f,te.empty);if(!h||h.from!=l||h instanceof rn&&h.slice.size>=f-l)return!1;if(t){let p=n.tr.step(h);p.setSelection(xe.create(p.doc,l)),t(p.scrollIntoView())}return!0}function ku(n,e,t=!1){for(let r=n;r;r=e=="start"?r.firstChild:r.lastChild){if(r.isTextblock)return!0;if(t&&r.childCount!=1)return!1}return!1}const O6=(n,e,t)=>{let{$head:r,empty:i}=n.selection,l=r;if(!i)return!1;if(r.parent.isTextblock){if(t?!t.endOfTextblock("backward",n):r.parentOffset>0)return!1;l=um(r)}let o=l&&l.nodeBefore;return!o||!ae.isSelectable(o)?!1:(e&&e(n.tr.setSelection(ae.create(n.doc,l.pos-o.nodeSize)).scrollIntoView()),!0)};function um(n){if(!n.parent.type.spec.isolating)for(let e=n.depth-1;e>=0;e--){if(n.index(e)>0)return n.doc.resolve(n.before(e+1));if(n.node(e).type.spec.isolating)break}return null}function _6(n,e){let{$cursor:t}=n.selection;return!t||(e?!e.endOfTextblock("forward",n):t.parentOffset<t.parent.content.size)?null:t}const N6=(n,e,t)=>{let r=_6(n,t);if(!r)return!1;let i=sm(r);if(!i)return!1;let l=i.nodeAfter;if(F6(n,i,e,1))return!0;if(r.parent.content.size==0&&(ku(l,"start")||ae.isSelectable(l))){let o=Y0(n.doc,r.before(),r.after(),te.empty);if(o&&o.slice.size<o.to-o.from){if(e){let a=n.tr.step(o);a.setSelection(ku(l,"start")?ve.findFrom(a.doc.resolve(a.mapping.map(i.pos)),1):ae.create(a.doc,a.mapping.map(i.pos))),e(a.scrollIntoView())}return!0}}return l.isAtom&&i.depth==r.depth-1?(e&&e(n.tr.delete(i.pos,i.pos+l.nodeSize).scrollIntoView()),!0):!1},R6=(n,e,t)=>{let{$head:r,empty:i}=n.selection,l=r;if(!i)return!1;if(r.parent.isTextblock){if(t?!t.endOfTextblock("forward",n):r.parentOffset<r.parent.content.size)return!1;l=sm(r)}let o=l&&l.nodeAfter;return!o||!ae.isSelectable(o)?!1:(e&&e(n.tr.setSelection(ae.create(n.doc,l.pos)).scrollIntoView()),!0)};function sm(n){if(!n.parent.type.spec.isolating)for(let e=n.depth-1;e>=0;e--){let t=n.node(e);if(n.index(e)+1<t.childCount)return n.doc.resolve(n.after(e+1));if(t.type.spec.isolating)break}return null}const nN=(n,e)=>{let t=n.selection,r=t instanceof ae,i;if(r){if(t.node.isTextblock||!ul(n.doc,t.from))return!1;i=t.from}else if(i=rf(n.doc,t.from,-1),i==null)return!1;if(e){let l=n.tr.join(i);r&&l.setSelection(ae.create(l.doc,i-n.doc.resolve(i).nodeBefore.nodeSize)),e(l.scrollIntoView())}return!0},rN=(n,e)=>{let t=n.selection,r;if(t instanceof ae){if(t.node.isTextblock||!ul(n.doc,t.to))return!1;r=t.to}else if(r=rf(n.doc,t.to,1),r==null)return!1;return e&&e(n.tr.join(r).scrollIntoView()),!0},iN=(n,e)=>{let{$from:t,$to:r}=n.selection,i=t.blockRange(r),l=i&&vu(i);return l==null?!1:(e&&e(n.tr.lift(i,l).scrollIntoView()),!0)},z6=(n,e)=>{let{$head:t,$anchor:r}=n.selection;return!t.parent.type.spec.code||!t.sameParent(r)?!1:(e&&e(n.tr.insertText(`
`).scrollIntoView()),!0)};function om(n){for(let e=0;e<n.edgeCount;e++){let{type:t}=n.edge(e);if(t.isTextblock&&!t.hasRequiredAttrs())return t}return null}const lN=(n,e)=>{let{$head:t,$anchor:r}=n.selection;if(!t.parent.type.spec.code||!t.sameParent(r))return!1;let i=t.node(-1),l=t.indexAfter(-1),o=om(i.contentMatchAt(l));if(!o||!i.canReplaceWith(l,l,o))return!1;if(e){let a=t.after(),f=n.tr.replaceWith(a,a,o.createAndFill());f.setSelection(ve.near(f.doc.resolve(a),1)),e(f.scrollIntoView())}return!0},B6=(n,e)=>{let t=n.selection,{$from:r,$to:i}=t;if(t instanceof un||r.parent.inlineContent||i.parent.inlineContent)return!1;let l=om(i.parent.contentMatchAt(i.indexAfter()));if(!l||!l.isTextblock)return!1;if(e){let o=(!r.parentOffset&&i.index()<i.parent.childCount?r:i).pos,a=n.tr.insert(o,l.createAndFill());a.setSelection(xe.create(a.doc,o+1)),e(a.scrollIntoView())}return!0},$6=(n,e)=>{let{$cursor:t}=n.selection;if(!t||t.parent.content.size)return!1;if(t.depth>1&&t.after()!=t.end(-1)){let l=t.before();if(xr(n.doc,l))return e&&e(n.tr.split(l).scrollIntoView()),!0}let r=t.blockRange(),i=r&&vu(r);return i==null?!1:(e&&e(n.tr.lift(r,i).scrollIntoView()),!0)};function uN(n){return(e,t)=>{let{$from:r,$to:i}=e.selection;if(e.selection instanceof ae&&e.selection.node.isBlock)return!r.parentOffset||!xr(e.doc,r.pos)?!1:(t&&t(e.tr.split(r.pos).scrollIntoView()),!0);if(!r.depth)return!1;let l=[],o,a,f=!1,h=!1;for(let x=r.depth;;x--)if(r.node(x).isBlock){f=r.end(x)==r.pos+(r.depth-x),h=r.start(x)==r.pos-(r.depth-x),a=om(r.node(x-1).contentMatchAt(r.indexAfter(x-1))),l.unshift(f&&a?{type:a}:null),o=x;break}else{if(x==1)return!1;l.unshift(null)}let p=e.tr;(e.selection instanceof xe||e.selection instanceof un)&&p.deleteSelection();let g=p.mapping.map(r.pos),y=xr(p.doc,g,l.length,l);if(y||(l[0]=a?{type:a}:null,y=xr(p.doc,g,l.length,l)),!y)return!1;if(p.split(g,l.length,l),!f&&h&&r.node(o).type!=a){let x=p.mapping.map(r.before(o)),k=p.doc.resolve(x);a&&r.node(o-1).canReplaceWith(k.index(),k.index()+1,a)&&p.setNodeMarkup(p.mapping.map(r.before(o)),a)}return t&&t(p.scrollIntoView()),!0}}const sN=uN(),oN=(n,e)=>{let{$from:t,to:r}=n.selection,i,l=t.sharedDepth(r);return l==0?!1:(i=t.before(l),e&&e(n.tr.setSelection(ae.create(n.doc,i))),!0)};function aN(n,e,t){let r=e.nodeBefore,i=e.nodeAfter,l=e.index();return!r||!i||!r.type.compatibleContent(i.type)?!1:!r.content.size&&e.parent.canReplace(l-1,l)?(t&&t(n.tr.delete(e.pos-r.nodeSize,e.pos).scrollIntoView()),!0):!e.parent.canReplace(l,l+1)||!(i.isTextblock||ul(n.doc,e.pos))?!1:(t&&t(n.tr.join(e.pos).scrollIntoView()),!0)}function F6(n,e,t,r){let i=e.nodeBefore,l=e.nodeAfter,o,a,f=i.type.spec.isolating||l.type.spec.isolating;if(!f&&aN(n,e,t))return!0;let h=!f&&e.parent.canReplace(e.index(),e.index()+1);if(h&&(o=(a=i.contentMatchAt(i.childCount)).findWrapping(l.type))&&a.matchType(o[0]||l.type).validEnd){if(t){let x=e.pos+l.nodeSize,k=P.empty;for(let A=o.length-1;A>=0;A--)k=P.from(o[A].create(null,k));k=P.from(i.copy(k));let C=n.tr.step(new Ut(e.pos-1,x,e.pos,x,new te(k,1,0),o.length,!0)),E=C.doc.resolve(x+2*o.length);E.nodeAfter&&E.nodeAfter.type==i.type&&ul(C.doc,E.pos)&&C.join(E.pos),t(C.scrollIntoView())}return!0}let p=l.type.spec.isolating||r>0&&f?null:ve.findFrom(e,1),g=p&&p.$from.blockRange(p.$to),y=g&&vu(g);if(y!=null&&y>=e.depth)return t&&t(n.tr.lift(g,y).scrollIntoView()),!0;if(h&&ku(l,"start",!0)&&ku(i,"end")){let x=i,k=[];for(;k.push(x),!x.isTextblock;)x=x.lastChild;let C=l,E=1;for(;!C.isTextblock;C=C.firstChild)E++;if(x.canReplace(x.childCount,x.childCount,C.content)){if(t){let A=P.empty;for(let B=k.length-1;B>=0;B--)A=P.from(k[B].copy(A));let N=n.tr.step(new Ut(e.pos-k.length,e.pos+l.nodeSize,e.pos+E,e.pos+l.nodeSize-E,new te(A,k.length,0),0,!0));t(N.scrollIntoView())}return!0}}return!1}function L6(n){return function(e,t){let r=e.selection,i=n<0?r.$from:r.$to,l=i.depth;for(;i.node(l).isInline;){if(!l)return!1;l--}return i.node(l).isTextblock?(t&&t(e.tr.setSelection(xe.create(e.doc,n<0?i.start(l):i.end(l)))),!0):!1}}const cN=L6(-1),fN=L6(1);function dN(n,e=null){return function(t,r){let{$from:i,$to:l}=t.selection,o=i.blockRange(l),a=o&&QS(o,n,e);return a?(r&&r(t.tr.wrap(o,a).scrollIntoView()),!0):!1}}function Ix(n,e=null){return function(t,r){let i=!1;for(let l=0;l<t.selection.ranges.length&&!i;l++){let{$from:{pos:o},$to:{pos:a}}=t.selection.ranges[l];t.doc.nodesBetween(o,a,(f,h)=>{if(i)return!1;if(!(!f.isTextblock||f.hasMarkup(n,e)))if(f.type==n)i=!0;else{let p=t.doc.resolve(h),g=p.index();i=p.parent.canReplaceWith(g,g+1,n)}})}if(!i)return!1;if(r){let l=t.tr;for(let o=0;o<t.selection.ranges.length;o++){let{$from:{pos:a},$to:{pos:f}}=t.selection.ranges[o];l.setBlockType(a,f,n,e)}r(l.scrollIntoView())}return!0}}function am(...n){return function(e,t,r){for(let i=0;i<n.length;i++)if(n[i](e,t,r))return!0;return!1}}am(lm,D6,O6);am(lm,N6,R6);am(z6,B6,$6,sN);typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):typeof os<"u"&&os.platform&&os.platform()=="darwin";function hN(n,e=null){return function(t,r){let{$from:i,$to:l}=t.selection,o=i.blockRange(l);if(!o)return!1;let a=r?t.tr:null;return pN(a,o,n,e)?(r&&r(a.scrollIntoView()),!0):!1}}function pN(n,e,t,r=null){let i=!1,l=e,o=e.$from.doc;if(e.depth>=2&&e.$from.node(e.depth-1).type.compatibleContent(t)&&e.startIndex==0){if(e.$from.index(e.depth-1)==0)return!1;let f=o.resolve(e.start-2);l=new Oc(f,f,e.depth),e.endIndex<e.parent.childCount&&(e=new Oc(e.$from,o.resolve(e.$to.end(e.depth)),e.depth)),i=!0}let a=QS(l,t,r,e);return a?(n&&mN(n,e,a,i,t),!0):!1}function mN(n,e,t,r,i){let l=P.empty;for(let p=t.length-1;p>=0;p--)l=P.from(t[p].type.create(t[p].attrs,l));n.step(new Ut(e.start-(r?2:0),e.end,e.start,e.end,new te(l,0,0),t.length,!0));let o=0;for(let p=0;p<t.length;p++)t[p].type==i&&(o=p+1);let a=t.length-o,f=e.start+t.length-(r?2:0),h=e.parent;for(let p=e.startIndex,g=e.endIndex,y=!0;p<g;p++,y=!1)!y&&xr(n.doc,f,a)&&(n.split(f,a),f+=2*a),f+=h.child(p).nodeSize;return n}function gN(n){return function(e,t){let{$from:r,$to:i}=e.selection,l=r.blockRange(i,o=>o.childCount>0&&o.firstChild.type==n);return l?t?r.node(l.depth-1).type==n?bN(e,t,n,l):yN(e,t,l):!0:!1}}function bN(n,e,t,r){let i=n.tr,l=r.end,o=r.$to.end(r.depth);l<o&&(i.step(new Ut(l-1,o,l,o,new te(P.from(t.create(null,r.parent.copy())),1,0),1,!0)),r=new Oc(i.doc.resolve(r.$from.pos),i.doc.resolve(o),r.depth));const a=vu(r);if(a==null)return!1;i.lift(r,a);let f=i.doc.resolve(i.mapping.map(l,-1)-1);return ul(i.doc,f.pos)&&f.nodeBefore.type==f.nodeAfter.type&&i.join(f.pos),e(i.scrollIntoView()),!0}function yN(n,e,t){let r=n.tr,i=t.parent;for(let x=t.end,k=t.endIndex-1,C=t.startIndex;k>C;k--)x-=i.child(k).nodeSize,r.delete(x-1,x+1);let l=r.doc.resolve(t.start),o=l.nodeAfter;if(r.mapping.map(t.end)!=t.start+l.nodeAfter.nodeSize)return!1;let a=t.startIndex==0,f=t.endIndex==i.childCount,h=l.node(-1),p=l.index(-1);if(!h.canReplace(p+(a?0:1),p+1,o.content.append(f?P.empty:P.from(i))))return!1;let g=l.pos,y=g+o.nodeSize;return r.step(new Ut(g-(a?1:0),y+(f?1:0),g+1,y-1,new te((a?P.empty:P.from(i.copy(P.empty))).append(f?P.empty:P.from(i.copy(P.empty))),a?0:1,f?0:1),a?0:1)),e(r.scrollIntoView()),!0}function xN(n){return function(e,t){let{$from:r,$to:i}=e.selection,l=r.blockRange(i,h=>h.childCount>0&&h.firstChild.type==n);if(!l)return!1;let o=l.startIndex;if(o==0)return!1;let a=l.parent,f=a.child(o-1);if(f.type!=n)return!1;if(t){let h=f.lastChild&&f.lastChild.type==a.type,p=P.from(h?n.create():null),g=new te(P.from(n.create(null,P.from(a.type.create(null,p)))),h?3:1,0),y=l.start,x=l.end;t(e.tr.step(new Ut(y-(h?3:1),x,y,x,g,1,!0)).scrollIntoView())}return!0}}function I6(n){const{state:e,transaction:t}=n;let{selection:r}=t,{doc:i}=t,{storedMarks:l}=t;return{...e,apply:e.apply.bind(e),applyTransaction:e.applyTransaction.bind(e),plugins:e.plugins,schema:e.schema,reconfigure:e.reconfigure.bind(e),toJSON:e.toJSON.bind(e),get storedMarks(){return l},get selection(){return r},get doc(){return i},get tr(){return r=t.selection,i=t.doc,l=t.storedMarks,t}}}class kN{constructor(e){this.editor=e.editor,this.rawCommands=this.editor.extensionManager.commands,this.customState=e.state}get hasCustomState(){return!!this.customState}get state(){return this.customState||this.editor.state}get commands(){const{rawCommands:e,editor:t,state:r}=this,{view:i}=t,{tr:l}=r,o=this.buildProps(l);return Object.fromEntries(Object.entries(e).map(([a,f])=>[a,(...p)=>{const g=f(...p)(o);return!l.getMeta("preventDispatch")&&!this.hasCustomState&&i.dispatch(l),g}]))}get chain(){return()=>this.createChain()}get can(){return()=>this.createCan()}createChain(e,t=!0){const{rawCommands:r,editor:i,state:l}=this,{view:o}=i,a=[],f=!!e,h=e||l.tr,p=()=>(!f&&t&&!h.getMeta("preventDispatch")&&!this.hasCustomState&&o.dispatch(h),a.every(y=>y===!0)),g={...Object.fromEntries(Object.entries(r).map(([y,x])=>[y,(...C)=>{const E=this.buildProps(h,t),A=x(...C)(E);return a.push(A),g}])),run:p};return g}createCan(e){const{rawCommands:t,state:r}=this,i=!1,l=e||r.tr,o=this.buildProps(l,i);return{...Object.fromEntries(Object.entries(t).map(([f,h])=>[f,(...p)=>h(...p)({...o,dispatch:void 0})])),chain:()=>this.createChain(l,i)}}buildProps(e,t=!0){const{rawCommands:r,editor:i,state:l}=this,{view:o}=i,a={tr:e,editor:i,view:o,state:I6({state:l,transaction:e}),dispatch:t?()=>{}:void 0,chain:()=>this.createChain(e,t),can:()=>this.createCan(e),get commands(){return Object.fromEntries(Object.entries(r).map(([f,h])=>[f,(...p)=>h(...p)(a)]))}};return a}}function Vi(n,e,t){return n.config[e]===void 0&&n.parent?Vi(n.parent,e,t):typeof n.config[e]=="function"?n.config[e].bind({...t,parent:n.parent?Vi(n.parent,e,t):null}):n.config[e]}function SN(n){const e=n.filter(i=>i.type==="extension"),t=n.filter(i=>i.type==="node"),r=n.filter(i=>i.type==="mark");return{baseExtensions:e,nodeExtensions:t,markExtensions:r}}function vt(n,e){if(typeof n=="string"){if(!e.nodes[n])throw Error(`There is no node type named '${n}'. Maybe you forgot to add the extension?`);return e.nodes[n]}return n}function CN(n){return typeof n=="function"}function Ls(n,e=void 0,...t){return CN(n)?e?n.bind(e)(...t):n(...t):n}function vN(n){return Object.prototype.toString.call(n)==="[object RegExp]"}function EN(n){return Object.prototype.toString.call(n).slice(8,-1)}function Ya(n){return EN(n)!=="Object"?!1:n.constructor===Object&&Object.getPrototypeOf(n)===Object.prototype}function q6(n,e){const t={...n};return Ya(n)&&Ya(e)&&Object.keys(e).forEach(r=>{Ya(e[r])&&Ya(n[r])?t[r]=q6(n[r],e[r]):t[r]=e[r]}),t}class Cn{constructor(e={}){this.type="extension",this.name="extension",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=Ls(Vi(this,"addOptions",{name:this.name}))),this.storage=Ls(Vi(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new Cn(e)}configure(e={}){const t=this.extend({...this.config,addOptions:()=>q6(this.options,e)});return t.name=this.name,t.parent=this.parent,t}extend(e={}){const t=new Cn({...this.config,...e});return t.parent=this,this.child=t,t.name=e.name?e.name:t.parent.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${t.name}".`),t.options=Ls(Vi(t,"addOptions",{name:t.name})),t.storage=Ls(Vi(t,"addStorage",{name:t.name,options:t.options})),t}}function MN(n,e,t){const{from:r,to:i}=e,{blockSeparator:l=`

`,textSerializers:o={}}=t||{};let a="";return n.nodesBetween(r,i,(f,h,p,g)=>{var y;f.isBlock&&h>r&&(a+=l);const x=o==null?void 0:o[f.type.name];if(x)return p&&(a+=x({node:f,pos:h,parent:p,index:g,range:e})),!1;f.isText&&(a+=(y=f==null?void 0:f.text)===null||y===void 0?void 0:y.slice(Math.max(r,h)-h,i-h))}),a}function AN(n){return Object.fromEntries(Object.entries(n.nodes).filter(([,e])=>e.spec.toText).map(([e,t])=>[e,t.spec.toText]))}Cn.create({name:"clipboardTextSerializer",addOptions(){return{blockSeparator:void 0}},addProseMirrorPlugins(){return[new ci({key:new sl("clipboardTextSerializer"),props:{clipboardTextSerializer:()=>{const{editor:n}=this,{state:e,schema:t}=n,{doc:r,selection:i}=e,{ranges:l}=i,o=Math.min(...l.map(p=>p.$from.pos)),a=Math.max(...l.map(p=>p.$to.pos)),f=AN(t);return MN(r,{from:o,to:a},{...this.options.blockSeparator!==void 0?{blockSeparator:this.options.blockSeparator}:{},textSerializers:f})}}})]}});const TN=()=>({editor:n,view:e})=>(requestAnimationFrame(()=>{var t;n.isDestroyed||(e.dom.blur(),(t=window==null?void 0:window.getSelection())===null||t===void 0||t.removeAllRanges())}),!0),DN=(n=!1)=>({commands:e})=>e.setContent("",n),wN=()=>({state:n,tr:e,dispatch:t})=>{const{selection:r}=e,{ranges:i}=r;return t&&i.forEach(({$from:l,$to:o})=>{n.doc.nodesBetween(l.pos,o.pos,(a,f)=>{if(a.type.isText)return;const{doc:h,mapping:p}=e,g=h.resolve(p.map(f)),y=h.resolve(p.map(f+a.nodeSize)),x=g.blockRange(y);if(!x)return;const k=vu(x);if(a.type.isTextblock){const{defaultType:C}=g.parent.contentMatchAt(g.index());e.setNodeMarkup(x.start,C)}(k||k===0)&&e.lift(x,k)})}),!0},ON=n=>e=>n(e),_N=()=>({state:n,dispatch:e})=>B6(n,e),NN=(n,e)=>({editor:t,tr:r})=>{const{state:i}=t,l=i.doc.slice(n.from,n.to);r.deleteRange(n.from,n.to);const o=r.mapping.map(e);return r.insert(o,l.content),r.setSelection(new xe(r.doc.resolve(o-1))),!0},RN=()=>({tr:n,dispatch:e})=>{const{selection:t}=n,r=t.$anchor.node();if(r.content.size>0)return!1;const i=n.selection.$anchor;for(let l=i.depth;l>0;l-=1)if(i.node(l).type===r.type){if(e){const a=i.before(l),f=i.after(l);n.delete(a,f).scrollIntoView()}return!0}return!1},zN=n=>({tr:e,state:t,dispatch:r})=>{const i=vt(n,t.schema),l=e.selection.$anchor;for(let o=l.depth;o>0;o-=1)if(l.node(o).type===i){if(r){const f=l.before(o),h=l.after(o);e.delete(f,h).scrollIntoView()}return!0}return!1},BN=n=>({tr:e,dispatch:t})=>{const{from:r,to:i}=n;return t&&e.delete(r,i),!0},$N=()=>({state:n,dispatch:e})=>lm(n,e),FN=()=>({commands:n})=>n.keyboardShortcut("Enter"),LN=()=>({state:n,dispatch:e})=>lN(n,e);function Lc(n,e,t={strict:!0}){const r=Object.keys(e);return r.length?r.every(i=>t.strict?e[i]===n[i]:vN(e[i])?e[i].test(n[i]):e[i]===n[i]):!0}function H6(n,e,t={}){return n.find(r=>r.type===e&&Lc(Object.fromEntries(Object.keys(t).map(i=>[i,r.attrs[i]])),t))}function qx(n,e,t={}){return!!H6(n,e,t)}function V6(n,e,t){var r;if(!n||!e)return;let i=n.parent.childAfter(n.parentOffset);if((!i.node||!i.node.marks.some(p=>p.type===e))&&(i=n.parent.childBefore(n.parentOffset)),!i.node||!i.node.marks.some(p=>p.type===e)||(t=t||((r=i.node.marks[0])===null||r===void 0?void 0:r.attrs),!H6([...i.node.marks],e,t)))return;let o=i.index,a=n.start()+i.offset,f=o+1,h=a+i.node.nodeSize;for(;o>0&&qx([...n.parent.child(o-1).marks],e,t);)o-=1,a-=n.parent.child(o).nodeSize;for(;f<n.parent.childCount&&qx([...n.parent.child(f).marks],e,t);)h+=n.parent.child(f).nodeSize,f+=1;return{from:a,to:h}}function hi(n,e){if(typeof n=="string"){if(!e.marks[n])throw Error(`There is no mark type named '${n}'. Maybe you forgot to add the extension?`);return e.marks[n]}return n}const IN=(n,e={})=>({tr:t,state:r,dispatch:i})=>{const l=hi(n,r.schema),{doc:o,selection:a}=t,{$from:f,from:h,to:p}=a;if(i){const g=V6(f,l,e);if(g&&g.from<=h&&g.to>=p){const y=xe.create(o,g.from,g.to);t.setSelection(y)}}return!0},qN=n=>e=>{const t=typeof n=="function"?n(e):n;for(let r=0;r<t.length;r+=1)if(t[r](e))return!0;return!1};function U6(n){return n instanceof xe}function Ui(n=0,e=0,t=0){return Math.min(Math.max(n,e),t)}function HN(n,e=null){if(!e)return null;const t=ve.atStart(n),r=ve.atEnd(n);if(e==="start"||e===!0)return t;if(e==="end")return r;const i=t.from,l=r.to;return e==="all"?xe.create(n,Ui(0,i,l),Ui(n.content.size,i,l)):xe.create(n,Ui(e,i,l),Ui(e,i,l))}function VN(){return navigator.platform==="Android"||/android/i.test(navigator.userAgent)}function cm(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}const UN=(n=null,e={})=>({editor:t,view:r,tr:i,dispatch:l})=>{e={scrollIntoView:!0,...e};const o=()=>{(cm()||VN())&&r.dom.focus(),requestAnimationFrame(()=>{t.isDestroyed||(r.focus(),e!=null&&e.scrollIntoView&&t.commands.scrollIntoView())})};if(r.hasFocus()&&n===null||n===!1)return!0;if(l&&n===null&&!U6(t.state.selection))return o(),!0;const a=HN(i.doc,n)||t.state.selection,f=t.state.selection.eq(a);return l&&(f||i.setSelection(a),f&&i.storedMarks&&i.setStoredMarks(i.storedMarks),o()),!0},jN=(n,e)=>t=>n.every((r,i)=>e(r,{...t,index:i})),PN=(n,e)=>({tr:t,commands:r})=>r.insertContentAt({from:t.selection.from,to:t.selection.to},n,e),j6=n=>{const e=n.childNodes;for(let t=e.length-1;t>=0;t-=1){const r=e[t];r.nodeType===3&&r.nodeValue&&/^(\n\s\s|\n)$/.test(r.nodeValue)?n.removeChild(r):r.nodeType===1&&j6(r)}return n};function Za(n){const e=`<body>${n}</body>`,t=new window.DOMParser().parseFromString(e,"text/html").body;return j6(t)}function Ic(n,e,t){if(n instanceof Xi||n instanceof P)return n;t={slice:!0,parseOptions:{},...t};const r=typeof n=="object"&&n!==null,i=typeof n=="string";if(r)try{if(Array.isArray(n)&&n.length>0)return P.fromArray(n.map(a=>e.nodeFromJSON(a)));const o=e.nodeFromJSON(n);return t.errorOnInvalidContent&&o.check(),o}catch(l){if(t.errorOnInvalidContent)throw new Error("[tiptap error]: Invalid JSON content",{cause:l});return console.warn("[tiptap warn]: Invalid content.","Passed value:",n,"Error:",l),Ic("",e,t)}if(i){if(t.errorOnInvalidContent){let o=!1,a="";const f=new K9({topNode:e.spec.topNode,marks:e.spec.marks,nodes:e.spec.nodes.append({__tiptap__private__unknown__catch__all__node:{content:"inline*",group:"block",parseDOM:[{tag:"*",getAttrs:h=>(o=!0,a=typeof h=="string"?h:h.outerHTML,null)}]}})});if(t.slice?Qi.fromSchema(f).parseSlice(Za(n),t.parseOptions):Qi.fromSchema(f).parse(Za(n),t.parseOptions),t.errorOnInvalidContent&&o)throw new Error("[tiptap error]: Invalid HTML content",{cause:new Error(`Invalid element found: ${a}`)})}const l=Qi.fromSchema(e);return t.slice?l.parseSlice(Za(n),t.parseOptions).content:l.parse(Za(n),t.parseOptions)}return Ic("",e,t)}function JN(n,e,t){const r=n.steps.length-1;if(r<e)return;const i=n.steps[r];if(!(i instanceof rn||i instanceof Ut))return;const l=n.mapping.maps[r];let o=0;l.forEach((a,f,h,p)=>{o===0&&(o=p)}),n.setSelection(ve.near(n.doc.resolve(o),t))}const GN=n=>!("type"in n),KN=(n,e,t)=>({tr:r,dispatch:i,editor:l})=>{var o;if(i){t={parseOptions:l.options.parseOptions,updateSelection:!0,applyInputRules:!1,applyPasteRules:!1,...t};let a;try{a=Ic(e,l.schema,{parseOptions:{preserveWhitespace:"full",...t.parseOptions},errorOnInvalidContent:(o=t.errorOnInvalidContent)!==null&&o!==void 0?o:l.options.enableContentCheck})}catch(k){return l.emit("contentError",{editor:l,error:k,disableCollaboration:()=>{l.storage.collaboration&&(l.storage.collaboration.isDisabled=!0)}}),!1}let{from:f,to:h}=typeof n=="number"?{from:n,to:n}:{from:n.from,to:n.to},p=!0,g=!0;if((GN(a)?a:[a]).forEach(k=>{k.check(),p=p?k.isText&&k.marks.length===0:!1,g=g?k.isBlock:!1}),f===h&&g){const{parent:k}=r.doc.resolve(f);k.isTextblock&&!k.type.spec.code&&!k.childCount&&(f-=1,h+=1)}let x;if(p){if(Array.isArray(e))x=e.map(k=>k.text||"").join("");else if(e instanceof P){let k="";e.forEach(C=>{C.text&&(k+=C.text)}),x=k}else typeof e=="object"&&e&&e.text?x=e.text:x=e;r.insertText(x,f,h)}else x=a,r.replaceWith(f,h,x);t.updateSelection&&JN(r,r.steps.length-1,-1),t.applyInputRules&&r.setMeta("applyInputRules",{from:f,text:x}),t.applyPasteRules&&r.setMeta("applyPasteRules",{from:f,text:x})}return!0},YN=()=>({state:n,dispatch:e})=>nN(n,e),ZN=()=>({state:n,dispatch:e})=>rN(n,e),XN=()=>({state:n,dispatch:e})=>D6(n,e),QN=()=>({state:n,dispatch:e})=>N6(n,e),WN=()=>({state:n,dispatch:e,tr:t})=>{try{const r=rf(n.doc,n.selection.$from.pos,-1);return r==null?!1:(t.join(r,2),e&&e(t),!0)}catch{return!1}},e7=()=>({state:n,dispatch:e,tr:t})=>{try{const r=rf(n.doc,n.selection.$from.pos,1);return r==null?!1:(t.join(r,2),e&&e(t),!0)}catch{return!1}},t7=()=>({state:n,dispatch:e})=>eN(n,e),n7=()=>({state:n,dispatch:e})=>tN(n,e);function P6(){return typeof navigator<"u"?/Mac/.test(navigator.platform):!1}function r7(n){const e=n.split(/-(?!$)/);let t=e[e.length-1];t==="Space"&&(t=" ");let r,i,l,o;for(let a=0;a<e.length-1;a+=1){const f=e[a];if(/^(cmd|meta|m)$/i.test(f))o=!0;else if(/^a(lt)?$/i.test(f))r=!0;else if(/^(c|ctrl|control)$/i.test(f))i=!0;else if(/^s(hift)?$/i.test(f))l=!0;else if(/^mod$/i.test(f))cm()||P6()?o=!0:i=!0;else throw new Error(`Unrecognized modifier name: ${f}`)}return r&&(t=`Alt-${t}`),i&&(t=`Ctrl-${t}`),o&&(t=`Meta-${t}`),l&&(t=`Shift-${t}`),t}const i7=n=>({editor:e,view:t,tr:r,dispatch:i})=>{const l=r7(n).split(/-(?!$)/),o=l.find(h=>!["Alt","Ctrl","Meta","Shift"].includes(h)),a=new KeyboardEvent("keydown",{key:o==="Space"?" ":o,altKey:l.includes("Alt"),ctrlKey:l.includes("Ctrl"),metaKey:l.includes("Meta"),shiftKey:l.includes("Shift"),bubbles:!0,cancelable:!0}),f=e.captureTransaction(()=>{t.someProp("handleKeyDown",h=>h(t,a))});return f==null||f.steps.forEach(h=>{const p=h.map(r.mapping);p&&i&&r.maybeStep(p)}),!0};function fm(n,e,t={}){const{from:r,to:i,empty:l}=n.selection,o=e?vt(e,n.schema):null,a=[];n.doc.nodesBetween(r,i,(g,y)=>{if(g.isText)return;const x=Math.max(r,y),k=Math.min(i,y+g.nodeSize);a.push({node:g,from:x,to:k})});const f=i-r,h=a.filter(g=>o?o.name===g.node.type.name:!0).filter(g=>Lc(g.node.attrs,t,{strict:!1}));return l?!!h.length:h.reduce((g,y)=>g+y.to-y.from,0)>=f}const l7=(n,e={})=>({state:t,dispatch:r})=>{const i=vt(n,t.schema);return fm(t,i,e)?iN(t,r):!1},u7=()=>({state:n,dispatch:e})=>$6(n,e),s7=n=>({state:e,dispatch:t})=>{const r=vt(n,e.schema);return gN(r)(e,t)},o7=()=>({state:n,dispatch:e})=>z6(n,e);function J6(n,e){return e.nodes[n]?"node":e.marks[n]?"mark":null}function Hx(n,e){const t=typeof e=="string"?[e]:e;return Object.keys(n).reduce((r,i)=>(t.includes(i)||(r[i]=n[i]),r),{})}const a7=(n,e)=>({tr:t,state:r,dispatch:i})=>{let l=null,o=null;const a=J6(typeof n=="string"?n:n.name,r.schema);return a?(a==="node"&&(l=vt(n,r.schema)),a==="mark"&&(o=hi(n,r.schema)),i&&t.selection.ranges.forEach(f=>{r.doc.nodesBetween(f.$from.pos,f.$to.pos,(h,p)=>{l&&l===h.type&&t.setNodeMarkup(p,void 0,Hx(h.attrs,e)),o&&h.marks.length&&h.marks.forEach(g=>{o===g.type&&t.addMark(p,p+h.nodeSize,o.create(Hx(g.attrs,e)))})})}),!0):!1},c7=()=>({tr:n,dispatch:e})=>(e&&n.scrollIntoView(),!0),f7=()=>({tr:n,dispatch:e})=>{if(e){const t=new un(n.doc);n.setSelection(t)}return!0},d7=()=>({state:n,dispatch:e})=>O6(n,e),h7=()=>({state:n,dispatch:e})=>R6(n,e),p7=()=>({state:n,dispatch:e})=>oN(n,e),m7=()=>({state:n,dispatch:e})=>fN(n,e),g7=()=>({state:n,dispatch:e})=>cN(n,e);function b7(n,e,t={},r={}){return Ic(n,e,{slice:!1,parseOptions:t,errorOnInvalidContent:r.errorOnInvalidContent})}const y7=(n,e=!1,t={},r={})=>({editor:i,tr:l,dispatch:o,commands:a})=>{var f,h;const{doc:p}=l;if(t.preserveWhitespace!=="full"){const g=b7(n,i.schema,t,{errorOnInvalidContent:(f=r.errorOnInvalidContent)!==null&&f!==void 0?f:i.options.enableContentCheck});return o&&l.replaceWith(0,p.content.size,g).setMeta("preventUpdate",!e),!0}return o&&l.setMeta("preventUpdate",!e),a.insertContentAt({from:0,to:p.content.size},n,{parseOptions:t,errorOnInvalidContent:(h=r.errorOnInvalidContent)!==null&&h!==void 0?h:i.options.enableContentCheck})};function x7(n,e){const t=hi(e,n.schema),{from:r,to:i,empty:l}=n.selection,o=[];l?(n.storedMarks&&o.push(...n.storedMarks),o.push(...n.selection.$head.marks())):n.doc.nodesBetween(r,i,f=>{o.push(...f.marks)});const a=o.find(f=>f.type.name===t.name);return a?{...a.attrs}:{}}function k7(n){for(let e=0;e<n.edgeCount;e+=1){const{type:t}=n.edge(e);if(t.isTextblock&&!t.hasRequiredAttrs())return t}return null}function S7(n,e){for(let t=n.depth;t>0;t-=1){const r=n.node(t);if(e(r))return{pos:t>0?n.before(t):0,start:n.start(t),depth:t,node:r}}}function dm(n){return e=>S7(e.$from,n)}function oc(n,e,t){return Object.fromEntries(Object.entries(t).filter(([r])=>{const i=n.find(l=>l.type===e&&l.name===r);return i?i.attribute.keepOnSplit:!1}))}function C7(n,e,t={}){const{empty:r,ranges:i}=n.selection,l=e?hi(e,n.schema):null;if(r)return!!(n.storedMarks||n.selection.$from.marks()).filter(g=>l?l.name===g.type.name:!0).find(g=>Lc(g.attrs,t,{strict:!1}));let o=0;const a=[];if(i.forEach(({$from:g,$to:y})=>{const x=g.pos,k=y.pos;n.doc.nodesBetween(x,k,(C,E)=>{if(!C.isText&&!C.marks.length)return;const A=Math.max(x,E),N=Math.min(k,E+C.nodeSize),B=N-A;o+=B,a.push(...C.marks.map(H=>({mark:H,from:A,to:N})))})}),o===0)return!1;const f=a.filter(g=>l?l.name===g.mark.type.name:!0).filter(g=>Lc(g.mark.attrs,t,{strict:!1})).reduce((g,y)=>g+y.to-y.from,0),h=a.filter(g=>l?g.mark.type!==l&&g.mark.type.excludes(l):!0).reduce((g,y)=>g+y.to-y.from,0);return(f>0?f+h:f)>=o}function Vx(n,e){const{nodeExtensions:t}=SN(e),r=t.find(o=>o.name===n);if(!r)return!1;const i={name:r.name,options:r.options,storage:r.storage},l=Ls(Vi(r,"group",i));return typeof l!="string"?!1:l.split(" ").includes("list")}function G6(n,{checkChildren:e=!0,ignoreWhitespace:t=!1}={}){var r;if(t){if(n.type.name==="hardBreak")return!0;if(n.isText)return/^\s*$/m.test((r=n.text)!==null&&r!==void 0?r:"")}if(n.isText)return!n.text;if(n.isAtom||n.isLeaf)return!1;if(n.content.childCount===0)return!0;if(e){let i=!0;return n.content.forEach(l=>{i!==!1&&(G6(l,{ignoreWhitespace:t,checkChildren:e})||(i=!1))}),i}return!1}function v7(n,e,t){var r;const{selection:i}=e;let l=null;if(U6(i)&&(l=i.$cursor),l){const a=(r=n.storedMarks)!==null&&r!==void 0?r:l.marks();return!!t.isInSet(a)||!a.some(f=>f.type.excludes(t))}const{ranges:o}=i;return o.some(({$from:a,$to:f})=>{let h=a.depth===0?n.doc.inlineContent&&n.doc.type.allowsMarkType(t):!1;return n.doc.nodesBetween(a.pos,f.pos,(p,g,y)=>{if(h)return!1;if(p.isInline){const x=!y||y.type.allowsMarkType(t),k=!!t.isInSet(p.marks)||!p.marks.some(C=>C.type.excludes(t));h=x&&k}return!h}),h})}const E7=(n,e={})=>({tr:t,state:r,dispatch:i})=>{const{selection:l}=t,{empty:o,ranges:a}=l,f=hi(n,r.schema);if(i)if(o){const h=x7(r,f);t.addStoredMark(f.create({...h,...e}))}else a.forEach(h=>{const p=h.$from.pos,g=h.$to.pos;r.doc.nodesBetween(p,g,(y,x)=>{const k=Math.max(x,p),C=Math.min(x+y.nodeSize,g);y.marks.find(A=>A.type===f)?y.marks.forEach(A=>{f===A.type&&t.addMark(k,C,f.create({...A.attrs,...e}))}):t.addMark(k,C,f.create(e))})});return v7(r,t,f)},M7=(n,e)=>({tr:t})=>(t.setMeta(n,e),!0),A7=(n,e={})=>({state:t,dispatch:r,chain:i})=>{const l=vt(n,t.schema);let o;return t.selection.$anchor.sameParent(t.selection.$head)&&(o=t.selection.$anchor.parent.attrs),l.isTextblock?i().command(({commands:a})=>Ix(l,{...o,...e})(t)?!0:a.clearNodes()).command(({state:a})=>Ix(l,{...o,...e})(a,r)).run():(console.warn('[tiptap warn]: Currently "setNode()" only supports text block nodes.'),!1)},T7=n=>({tr:e,dispatch:t})=>{if(t){const{doc:r}=e,i=Ui(n,0,r.content.size),l=ae.create(r,i);e.setSelection(l)}return!0},D7=n=>({tr:e,dispatch:t})=>{if(t){const{doc:r}=e,{from:i,to:l}=typeof n=="number"?{from:n,to:n}:n,o=xe.atStart(r).from,a=xe.atEnd(r).to,f=Ui(i,o,a),h=Ui(l,o,a),p=xe.create(r,f,h);e.setSelection(p)}return!0},w7=n=>({state:e,dispatch:t})=>{const r=vt(n,e.schema);return xN(r)(e,t)};function Ux(n,e){const t=n.storedMarks||n.selection.$to.parentOffset&&n.selection.$from.marks();if(t){const r=t.filter(i=>e==null?void 0:e.includes(i.type.name));n.tr.ensureMarks(r)}}const O7=({keepMarks:n=!0}={})=>({tr:e,state:t,dispatch:r,editor:i})=>{const{selection:l,doc:o}=e,{$from:a,$to:f}=l,h=i.extensionManager.attributes,p=oc(h,a.node().type.name,a.node().attrs);if(l instanceof ae&&l.node.isBlock)return!a.parentOffset||!xr(o,a.pos)?!1:(r&&(n&&Ux(t,i.extensionManager.splittableMarks),e.split(a.pos).scrollIntoView()),!0);if(!a.parent.isBlock)return!1;const g=f.parentOffset===f.parent.content.size,y=a.depth===0?void 0:k7(a.node(-1).contentMatchAt(a.indexAfter(-1)));let x=g&&y?[{type:y,attrs:p}]:void 0,k=xr(e.doc,e.mapping.map(a.pos),1,x);if(!x&&!k&&xr(e.doc,e.mapping.map(a.pos),1,y?[{type:y}]:void 0)&&(k=!0,x=y?[{type:y,attrs:p}]:void 0),r){if(k&&(l instanceof xe&&e.deleteSelection(),e.split(e.mapping.map(a.pos),1,x),y&&!g&&!a.parentOffset&&a.parent.type!==y)){const C=e.mapping.map(a.before()),E=e.doc.resolve(C);a.node(-1).canReplaceWith(E.index(),E.index()+1,y)&&e.setNodeMarkup(e.mapping.map(a.before()),y)}n&&Ux(t,i.extensionManager.splittableMarks),e.scrollIntoView()}return k},_7=(n,e={})=>({tr:t,state:r,dispatch:i,editor:l})=>{var o;const a=vt(n,r.schema),{$from:f,$to:h}=r.selection,p=r.selection.node;if(p&&p.isBlock||f.depth<2||!f.sameParent(h))return!1;const g=f.node(-1);if(g.type!==a)return!1;const y=l.extensionManager.attributes;if(f.parent.content.size===0&&f.node(-1).childCount===f.indexAfter(-1)){if(f.depth===2||f.node(-3).type!==a||f.index(-2)!==f.node(-2).childCount-1)return!1;if(i){let A=P.empty;const N=f.index(-1)?1:f.index(-2)?2:3;for(let ne=f.depth-N;ne>=f.depth-3;ne-=1)A=P.from(f.node(ne).copy(A));const B=f.indexAfter(-1)<f.node(-2).childCount?1:f.indexAfter(-2)<f.node(-3).childCount?2:3,H={...oc(y,f.node().type.name,f.node().attrs),...e},L=((o=a.contentMatch.defaultType)===null||o===void 0?void 0:o.createAndFill(H))||void 0;A=A.append(P.from(a.createAndFill(null,L)||void 0));const U=f.before(f.depth-(N-1));t.replace(U,f.after(-B),new te(A,4-N,0));let Q=-1;t.doc.nodesBetween(U,t.doc.content.size,(ne,ee)=>{if(Q>-1)return!1;ne.isTextblock&&ne.content.size===0&&(Q=ee+1)}),Q>-1&&t.setSelection(xe.near(t.doc.resolve(Q))),t.scrollIntoView()}return!0}const x=h.pos===f.end()?g.contentMatchAt(0).defaultType:null,k={...oc(y,g.type.name,g.attrs),...e},C={...oc(y,f.node().type.name,f.node().attrs),...e};t.delete(f.pos,h.pos);const E=x?[{type:a,attrs:k},{type:x,attrs:C}]:[{type:a,attrs:k}];if(!xr(t.doc,f.pos,2))return!1;if(i){const{selection:A,storedMarks:N}=r,{splittableMarks:B}=l.extensionManager,H=N||A.$to.parentOffset&&A.$from.marks();if(t.split(f.pos,2,E).scrollIntoView(),!H||!i)return!0;const L=H.filter(U=>B.includes(U.type.name));t.ensureMarks(L)}return!0},bp=(n,e)=>{const t=dm(o=>o.type===e)(n.selection);if(!t)return!0;const r=n.doc.resolve(Math.max(0,t.pos-1)).before(t.depth);if(r===void 0)return!0;const i=n.doc.nodeAt(r);return t.node.type===(i==null?void 0:i.type)&&ul(n.doc,t.pos)&&n.join(t.pos),!0},yp=(n,e)=>{const t=dm(o=>o.type===e)(n.selection);if(!t)return!0;const r=n.doc.resolve(t.start).after(t.depth);if(r===void 0)return!0;const i=n.doc.nodeAt(r);return t.node.type===(i==null?void 0:i.type)&&ul(n.doc,r)&&n.join(r),!0},N7=(n,e,t,r={})=>({editor:i,tr:l,state:o,dispatch:a,chain:f,commands:h,can:p})=>{const{extensions:g,splittableMarks:y}=i.extensionManager,x=vt(n,o.schema),k=vt(e,o.schema),{selection:C,storedMarks:E}=o,{$from:A,$to:N}=C,B=A.blockRange(N),H=E||C.$to.parentOffset&&C.$from.marks();if(!B)return!1;const L=dm(U=>Vx(U.type.name,g))(C);if(B.depth>=1&&L&&B.depth-L.depth<=1){if(L.node.type===x)return h.liftListItem(k);if(Vx(L.node.type.name,g)&&x.validContent(L.node.content)&&a)return f().command(()=>(l.setNodeMarkup(L.pos,x),!0)).command(()=>bp(l,x)).command(()=>yp(l,x)).run()}return!t||!H||!a?f().command(()=>p().wrapInList(x,r)?!0:h.clearNodes()).wrapInList(x,r).command(()=>bp(l,x)).command(()=>yp(l,x)).run():f().command(()=>{const U=p().wrapInList(x,r),Q=H.filter(ne=>y.includes(ne.type.name));return l.ensureMarks(Q),U?!0:h.clearNodes()}).wrapInList(x,r).command(()=>bp(l,x)).command(()=>yp(l,x)).run()},R7=(n,e={},t={})=>({state:r,commands:i})=>{const{extendEmptyMarkRange:l=!1}=t,o=hi(n,r.schema);return C7(r,o,e)?i.unsetMark(o,{extendEmptyMarkRange:l}):i.setMark(o,e)},z7=(n,e,t={})=>({state:r,commands:i})=>{const l=vt(n,r.schema),o=vt(e,r.schema),a=fm(r,l,t);let f;return r.selection.$anchor.sameParent(r.selection.$head)&&(f=r.selection.$anchor.parent.attrs),a?i.setNode(o,f):i.setNode(l,{...f,...t})},B7=(n,e={})=>({state:t,commands:r})=>{const i=vt(n,t.schema);return fm(t,i,e)?r.lift(i):r.wrapIn(i,e)},$7=()=>({state:n,dispatch:e})=>{const t=n.plugins;for(let r=0;r<t.length;r+=1){const i=t[r];let l;if(i.spec.isInputRules&&(l=i.getState(n))){if(e){const o=n.tr,a=l.transform;for(let f=a.steps.length-1;f>=0;f-=1)o.step(a.steps[f].invert(a.docs[f]));if(l.text){const f=o.doc.resolve(l.from).marks();o.replaceWith(l.from,l.to,n.schema.text(l.text,f))}else o.delete(l.from,l.to)}return!0}}return!1},F7=()=>({tr:n,dispatch:e})=>{const{selection:t}=n,{empty:r,ranges:i}=t;return r||e&&i.forEach(l=>{n.removeMark(l.$from.pos,l.$to.pos)}),!0},L7=(n,e={})=>({tr:t,state:r,dispatch:i})=>{var l;const{extendEmptyMarkRange:o=!1}=e,{selection:a}=t,f=hi(n,r.schema),{$from:h,empty:p,ranges:g}=a;if(!i)return!0;if(p&&o){let{from:y,to:x}=a;const k=(l=h.marks().find(E=>E.type===f))===null||l===void 0?void 0:l.attrs,C=V6(h,f,k);C&&(y=C.from,x=C.to),t.removeMark(y,x,f)}else g.forEach(y=>{t.removeMark(y.$from.pos,y.$to.pos,f)});return t.removeStoredMark(f),!0},I7=(n,e={})=>({tr:t,state:r,dispatch:i})=>{let l=null,o=null;const a=J6(typeof n=="string"?n:n.name,r.schema);return a?(a==="node"&&(l=vt(n,r.schema)),a==="mark"&&(o=hi(n,r.schema)),i&&t.selection.ranges.forEach(f=>{const h=f.$from.pos,p=f.$to.pos;let g,y,x,k;t.selection.empty?r.doc.nodesBetween(h,p,(C,E)=>{l&&l===C.type&&(x=Math.max(E,h),k=Math.min(E+C.nodeSize,p),g=E,y=C)}):r.doc.nodesBetween(h,p,(C,E)=>{E<h&&l&&l===C.type&&(x=Math.max(E,h),k=Math.min(E+C.nodeSize,p),g=E,y=C),E>=h&&E<=p&&(l&&l===C.type&&t.setNodeMarkup(E,void 0,{...C.attrs,...e}),o&&C.marks.length&&C.marks.forEach(A=>{if(o===A.type){const N=Math.max(E,h),B=Math.min(E+C.nodeSize,p);t.addMark(N,B,o.create({...A.attrs,...e}))}}))}),y&&(g!==void 0&&t.setNodeMarkup(g,void 0,{...y.attrs,...e}),o&&y.marks.length&&y.marks.forEach(C=>{o===C.type&&t.addMark(x,k,o.create({...C.attrs,...e}))}))}),!0):!1},q7=(n,e={})=>({state:t,dispatch:r})=>{const i=vt(n,t.schema);return dN(i,e)(t,r)},H7=(n,e={})=>({state:t,dispatch:r})=>{const i=vt(n,t.schema);return hN(i,e)(t,r)};var V7=Object.freeze({__proto__:null,blur:TN,clearContent:DN,clearNodes:wN,command:ON,createParagraphNear:_N,cut:NN,deleteCurrentNode:RN,deleteNode:zN,deleteRange:BN,deleteSelection:$N,enter:FN,exitCode:LN,extendMarkRange:IN,first:qN,focus:UN,forEach:jN,insertContent:PN,insertContentAt:KN,joinBackward:XN,joinDown:ZN,joinForward:QN,joinItemBackward:WN,joinItemForward:e7,joinTextblockBackward:t7,joinTextblockForward:n7,joinUp:YN,keyboardShortcut:i7,lift:l7,liftEmptyBlock:u7,liftListItem:s7,newlineInCode:o7,resetAttributes:a7,scrollIntoView:c7,selectAll:f7,selectNodeBackward:d7,selectNodeForward:h7,selectParentNode:p7,selectTextblockEnd:m7,selectTextblockStart:g7,setContent:y7,setMark:E7,setMeta:M7,setNode:A7,setNodeSelection:T7,setTextSelection:D7,sinkListItem:w7,splitBlock:O7,splitListItem:_7,toggleList:N7,toggleMark:R7,toggleNode:z7,toggleWrap:B7,undoInputRule:$7,unsetAllMarks:F7,unsetMark:L7,updateAttributes:I7,wrapIn:q7,wrapInList:H7});Cn.create({name:"commands",addCommands(){return{...V7}}});Cn.create({name:"drop",addProseMirrorPlugins(){return[new ci({key:new sl("tiptapDrop"),props:{handleDrop:(n,e,t,r)=>{this.editor.emit("drop",{editor:this.editor,event:e,slice:t,moved:r})}}})]}});Cn.create({name:"editable",addProseMirrorPlugins(){return[new ci({key:new sl("editable"),props:{editable:()=>this.editor.options.editable}})]}});const U7=new sl("focusEvents");Cn.create({name:"focusEvents",addProseMirrorPlugins(){const{editor:n}=this;return[new ci({key:U7,props:{handleDOMEvents:{focus:(e,t)=>{n.isFocused=!0;const r=n.state.tr.setMeta("focus",{event:t}).setMeta("addToHistory",!1);return e.dispatch(r),!1},blur:(e,t)=>{n.isFocused=!1;const r=n.state.tr.setMeta("blur",{event:t}).setMeta("addToHistory",!1);return e.dispatch(r),!1}}}})]}});Cn.create({name:"keymap",addKeyboardShortcuts(){const n=()=>this.editor.commands.first(({commands:o})=>[()=>o.undoInputRule(),()=>o.command(({tr:a})=>{const{selection:f,doc:h}=a,{empty:p,$anchor:g}=f,{pos:y,parent:x}=g,k=g.parent.isTextblock&&y>0?a.doc.resolve(y-1):g,C=k.parent.type.spec.isolating,E=g.pos-g.parentOffset,A=C&&k.parent.childCount===1?E===g.pos:ve.atStart(h).from===y;return!p||!x.type.isTextblock||x.textContent.length||!A||A&&g.parent.type.name==="paragraph"?!1:o.clearNodes()}),()=>o.deleteSelection(),()=>o.joinBackward(),()=>o.selectNodeBackward()]),e=()=>this.editor.commands.first(({commands:o})=>[()=>o.deleteSelection(),()=>o.deleteCurrentNode(),()=>o.joinForward(),()=>o.selectNodeForward()]),r={Enter:()=>this.editor.commands.first(({commands:o})=>[()=>o.newlineInCode(),()=>o.createParagraphNear(),()=>o.liftEmptyBlock(),()=>o.splitBlock()]),"Mod-Enter":()=>this.editor.commands.exitCode(),Backspace:n,"Mod-Backspace":n,"Shift-Backspace":n,Delete:e,"Mod-Delete":e,"Mod-a":()=>this.editor.commands.selectAll()},i={...r},l={...r,"Ctrl-h":n,"Alt-Backspace":n,"Ctrl-d":e,"Ctrl-Alt-Backspace":e,"Alt-Delete":e,"Alt-d":e,"Ctrl-a":()=>this.editor.commands.selectTextblockStart(),"Ctrl-e":()=>this.editor.commands.selectTextblockEnd()};return cm()||P6()?l:i},addProseMirrorPlugins(){return[new ci({key:new sl("clearDocument"),appendTransaction:(n,e,t)=>{if(n.some(C=>C.getMeta("composition")))return;const r=n.some(C=>C.docChanged)&&!e.doc.eq(t.doc),i=n.some(C=>C.getMeta("preventClearDocument"));if(!r||i)return;const{empty:l,from:o,to:a}=e.selection,f=ve.atStart(e.doc).from,h=ve.atEnd(e.doc).to;if(l||!(o===f&&a===h)||!G6(t.doc))return;const y=t.tr,x=I6({state:t,transaction:y}),{commands:k}=new kN({editor:this.editor,state:x});if(k.clearNodes(),!!y.steps.length)return y}})]}});Cn.create({name:"paste",addProseMirrorPlugins(){return[new ci({key:new sl("tiptapPaste"),props:{handlePaste:(n,e,t)=>{this.editor.emit("paste",{editor:this.editor,event:e,slice:t})}}})]}});Cn.create({name:"tabindex",addProseMirrorPlugins(){return[new ci({key:new sl("tabindex"),props:{attributes:()=>this.editor.isEditable?{tabindex:"0"}:{}}})]}});const j7=Cn.create({name:"StaggerText",addOptions(){return{enabled:!0,animation:"default"}},addCommands(){return{setStaggerEnabled:n=>()=>(this.options.enabled=n,!0)}},addProseMirrorPlugins(){return[new ci({props:{decorations:n=>{if(!this.options.enabled)return null;const{doc:e}=n,t=[];let r=0;return e.descendants((i,l)=>{if(i.isText){const o=i.text??"";let a=0;for(const f of o.split(/(\s+)/)){const h=f.length;t.push(Tn.inline(l+a,l+a+h,{class:"stagger-text",style:`--delay: ${Math.min(r*.05,200)}ms`})),r++,a+=h}}else t.push(Tn.node(l,l+i.nodeSize,{class:"stagger-node",style:`--delay: ${Math.min(r*.05,200)}ms`})),r++}),st.create(e,t)}}})]}}),P7=`
<h1>Welcome to the Tiptap Editor</h1>
<p>This is a rich text editor that supports <strong>bold</strong>, <em>italic</em>, and many other formatting options.</p>

<h2>Features</h2>
<ul>
  <li>Text formatting with <strong>bold</strong> and <em>italic</em></li>
  <li>Different heading levels</li>
  <li>Bullet lists like this one</li>
  <li>Ordered lists</li>
  <li>Code blocks</li>
</ul>

<h2>Code Example</h2>
<pre><code>function helloWorld() {
  console.log("Hello, world!");
}
</code></pre>

<h3>Ordered List Example</h3>
<ol>
  <li>First item</li>
  <li>Second item</li>
  <li>Third item</li>
</ol>

<p>Try editing this content and watch it stream to the right editor when you click the "Stream Content" button!</p>
`;function J7(){const[n,e]=et.useState(P7),[t,r]=et.useState(""),[i,l]=et.useState(!1),o=et.useRef(null),a=T2({extensions:[z2,ux],content:n,onUpdate:({editor:y})=>{e(y.getHTML())}}),f=T2({extensions:[z2,ux,j7],content:t,editable:!1});et.useEffect(()=>{if(f&&t&&(f.commands.setContent(t),o.current)){const y=o.current;y.scrollTop=y.scrollHeight}},[t,f]);const h=async()=>{if(!a)return;l(!0),r("");const x=a.storage.markdown.getMarkdown().split(" ");let k="";for(let C=0;C<x.length;C++)k+=x[C]+" ",r(k),await new Promise(E=>setTimeout(E,50));l(!1)},p={width:"95%",maxWidth:"1600px",margin:"0 auto",padding:"20px"},g={height:"500px",width:"100%",minWidth:"500px",overflow:"auto",border:"1px solid #ccc",borderRadius:"4px",padding:"10px",backgroundColor:"#fff"};return We.jsxs("div",{className:"editor-container",style:p,children:[We.jsx("h1",{className:"editor-title",children:"Tiptap Stagger"}),We.jsxs("div",{style:{display:"flex",gap:"40px",width:"100%"},children:[We.jsxs("div",{className:"editor-wrapper",style:{flex:1,minWidth:"500px"},children:[We.jsxs("div",{className:"menu-bar",children:[We.jsx("button",{onClick:()=>a==null?void 0:a.chain().focus().toggleBold().run(),className:`menu-button ${a!=null&&a.isActive("bold")?"is-active":""}`,children:"B"}),We.jsx("button",{onClick:()=>a==null?void 0:a.chain().focus().toggleItalic().run(),className:`menu-button ${a!=null&&a.isActive("italic")?"is-active":""}`,children:"I"}),We.jsx("button",{onClick:()=>a==null?void 0:a.chain().focus().toggleHeading({level:1}).run(),className:`menu-button ${a!=null&&a.isActive("heading",{level:1})?"is-active":""}`,children:"H1"}),We.jsx("button",{onClick:()=>a==null?void 0:a.chain().focus().toggleHeading({level:2}).run(),className:`menu-button ${a!=null&&a.isActive("heading",{level:2})?"is-active":""}`,children:"H2"}),We.jsx("button",{onClick:()=>a==null?void 0:a.chain().focus().toggleBulletList().run(),className:`menu-button ${a!=null&&a.isActive("bulletList")?"is-active":""}`,children:" List"}),We.jsx("button",{onClick:()=>a==null?void 0:a.chain().focus().toggleOrderedList().run(),className:`menu-button ${a!=null&&a.isActive("orderedList")?"is-active":""}`,children:"1. List"}),We.jsx("button",{onClick:()=>a==null?void 0:a.chain().focus().toggleCodeBlock().run(),className:`menu-button ${a!=null&&a.isActive("codeBlock")?"is-active":""}`,children:"Code"})]}),We.jsx(M2,{editor:a,className:"editor-content",style:g})]}),We.jsxs("div",{className:"editor-wrapper",style:{flex:1,minWidth:"500px"},children:[We.jsx("div",{className:"menu-bar",children:We.jsx("button",{onClick:h,className:"menu-button",disabled:i,children:i?"Streaming...":"Stream Content"})}),We.jsx(M2,{editor:f,className:"editor-content",style:g,ref:o})]})]})]})}E4.createRoot(document.getElementById("root")).render(We.jsx(et.StrictMode,{children:We.jsx(J7,{})}));
